introduction__toprogramming__with Python,Python__CrashCourse__isanother__superbbook__toadd__toyour__libraryand__helpyou__finallymaster__Python. TutorialEdge.netA__brilliantoption__forcomplete__beginnerswithout__anycoding__experience.If__youre__lookingfor__a solid,uncomplicated__introto__thisvery__deep language,I__haveto__recommendthis__book. WhatPixel.comContains__literallyeverything__youneed__toknow__aboutPython__andeven__more. FireBearStudio.comWhile__PythonCrash__Courseuses__Pythonto__teachyou__to code,it__alsoteaches__cleanprogramming__skillsthat__applyto__mostother__languages.Great__LakesGeek__SanFrancisco__PYTHONCRASH__COURSE 3RDEDITION__A Hands-On, Project-BasedIntroduction__toProgramming__byEric__MatthesPYTHON__CRASH COURSE, 3RD EDITION.introduction__toprogramming__/by__Eric Matthes.pages__cmIncludes__index. Summary: "A project-basedintroduction__toprogramming__in Python,with__exercises.Covers__generalprogramming__concepts,Python__fundamentals,and__problem solving.Includes__threeprojects__-how__tocreate__asimple__video game,use__datavisualization__techniquesto__makegraphs__and charts,and__buildan__interactiveweb__application"--Provided__by publisher.ISBN__978-1-59327-603-4 --ISBN__1-59327-603-6 1.Python__(Computerprogram__language) I. Title. QA76.73.P98M38 2015 005.13'3--dc23 2015018135Introduction__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .xxxiii__PART I:BASICS__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1Chapter__1:Getting__Started . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3Chapter__2:Variables__andSimple__DataTypes__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15Chapter__3:Introducing__Lists . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33Chapter__4:Working__withLists__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49Chapter__5:if__Statements . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 71Chapter__6:Dictionaries__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 91Chapter__7:User__Inputand__whileLoops__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 113Chapter__8:Functions__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 129Chapter__9:Classes__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 157Chapter__10:Files__andExceptions__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 183Chapter__11:Testing__YourCode__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 209PART__II:PROJECTS__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 225Chapter__12:A__ShipThat__FiresBullets__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 227Chapter__13: Aliens! . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 255Chapter__14:Scoring__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 277Chapter__15:Generating__Data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 301Chapter__16:Downloading__Data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 329Chapter__17:Working__withAPIs__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 355x__BriefContents__Chapter 18:Getting__Startedwith__Django . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 373Chapter__19:User__Accounts . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 403Chapter__20:Styling__andDeploying__anApp__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 433Appendix__A:Installation__andTroubleshooting__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 463Appendix__B:Text__Editorsand__IDEs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 469Appendix__C:Getting__Help . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 477Appendix__D:Using__Gitfor__VersionControl__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 483Appendix__E:Troubleshooting__Deployments . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 493Index__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 503CON__TENTSIN__DETA__ILPREFACE__TOTHE__THIRDEDITION__xxviiACKNOWLEDGMENTS__xxxiINTRODUCTION__xxxiiiWho__IsThis__Book For? . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .xxxiv__WhatCan__YouExpect__to Learn? . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .xxxiv__OnlineResources__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .xxxv__Why Python? . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .xxxvi__PART I:BASICS__1 1GETTING__STARTED 3Setting__UpYour__ProgrammingEnvironment__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3Python__Versions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4Running__Snippetsof__PythonCode__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4About__theVS__CodeEditor__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 4Python__onDifferent__OperatingSystems__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5Python__onWindows__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5Python__onmacOS__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 7Python__onLinux__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 8Running__aHello__WorldProgram__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 9Installing__thePython__Extensionfor__VSCode__. . . . . . . . . . . . . . . . . . . . . . . . . . . 9Running__hello_world.py__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10Troubleshooting__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 10Running__PythonPrograms__froma__Terminal . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11On__Windows . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12On__macOSand__Linux . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12Exercise__1-1: python.org . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13Exercise__1-2:Hello__WorldTypos__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13Exercise__1-3:Infinite__Skills . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13 2VARIABLES__ANDSIMPLE__DATATYPES__15What__ReallyHappens__WhenYou__Run hello_world.py__. . . . . . . . . . . . . . . . . . . . . . . . . 15Variables__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16Naming__andUsing__Variables . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17Avoiding__NameErrors__WhenUsing__Variables . . . . . . . . . . . . . . . . . . . . . . . . 17Variables__AreLabels__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18Exercise__2-1:Simple__Message . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19Exercise__2-2:Simple__Messages . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19xii__Contentsin__DetailStrings__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19Changing__Casein__aString__withMethods__. . . . . . . . . . . . . . . . . . . . . . . . . . . 20Using__Variablesin__Strings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 20Adding__Whitespaceto__Stringswith__Tabsor__Newlines . . . . . . . . . . . . . . . . . . . 21Stripping__Whitespace . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 22Removing__Prefixes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23Avoiding__SyntaxErrors__withStrings__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 24Exercise__2-3:Personal__Message . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25Exercise__2-4:Name__Cases . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25Exercise__2-5:Famous__Quote . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25Exercise__2-6:Famous__Quote 2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25Exercise__2-7:Stripping__Names . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25Exercise__2-8:File__Extensions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25Numbers__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26Integers__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26Floats__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 26Integers__andFloats__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 27Underscores__inNumbers__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28Multiple__Assignment . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28Constants__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 28Exercise__2-9:Number__Eight . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29Exercise__2-10:Favorite__Number . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29Comments__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29How__DoYou__Write Comments? . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 29What__Kindsof__CommentsShould__You Write? . . . . . . . . . . . . . . . . . . . . . . . . 29Exercise__2-11:Adding__Comments . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30The__Zenof__Python . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 30Exercise__2-12:Zen__ofPython__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32 3INTRODUCING__LISTS 33What__Isa__List? . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 33Accessing__Elementsin__aList__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34Index__PositionsStart__at 0,Not__1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 34Using__IndividualValues__froma__List . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35Exercise__3-1:Names__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36Exercise__3-2:Greetings__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36Exercise__3-3:Your__OwnList__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36 Modifying, Adding,and__RemovingElements__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36Modifying__Elementsin__aList__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 36Adding__Elementsto__aList__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 37Removing__Elementsfrom__aList__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 38Exercise__3-4:Guest__List . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 41Exercise__3-5:Changing__GuestList__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42Exercise__3-6:More__Guests . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42Exercise__3-7:Shrinking__GuestList__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42Organizing__aList__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42Sorting__aList__Permanentlywith__the sort()Method__. . . . . . . . . . . . . . . . . . . . . . 43Sorting__aList__Temporarilywith__the sorted()Function__. . . . . . . . . . . . . . . . . . . . 43Printing__aList__inReverse__Order . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44Contents__inDetail__xiiiFinding__theLength__ofa__List . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 44Exercise__3-8:Seeing__theWorld__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45Exercise__3-9:Dinner__Guests . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45Exercise__3-10:Every__Function . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 45Avoiding__IndexErrors__WhenWorking__withLists__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . 46Exercise__3-11:Intentional__Error . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 47 4WORKING__WITHLISTS__49Looping__Throughan__EntireList__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 49A__CloserLook__atLooping__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 50Doing__MoreWork__Withina__forLoop__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 51Doing__SomethingAfter__afor__Loop . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52Avoiding__IndentationErrors__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53Forgetting__toIndent__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 53Forgetting__toIndent__AdditionalLines__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54Indenting__Unnecessarily . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 54Indenting__UnnecessarilyAfter__theLoop__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55Forgetting__theColon__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 55Exercise__4-1:Pizzas__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56Exercise__4-2:Animals__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56Making__NumericalLists__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 56Using__the range()Function__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 57Using__range()to__Makea__Listof__Numbers . . . . . . . . . . . . . . . . . . . . . . . . . . . 58Simple__Statisticswith__aList__ofNumbers__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . 59List__Comprehensions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 59Exercise__4-3:Counting__toTwenty__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60Exercise__4-4:One__Million . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60Exercise__4-5:Summing__aMillion__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60Exercise__4-6:Odd__Numbers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60Exercise__4-7:Threes__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60Exercise__4-8:Cubes__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60Exercise__4-9:Cube__Comprehension . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 60Working__withPart__ofa__List . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61Slicing__aList__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 61Looping__Througha__Slice . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62Copying__aList__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 63Exercise__4-10:Slices__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65Exercise__4-11:My__Pizzas,Your__Pizzas . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65Exercise__4-12:More__Loops . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65Tuples__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65Defining__aTuple__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 65Looping__ThroughAll__Valuesin__aTuple__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . 66Writing__Overa__Tuple . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67Exercise__4-13:Buffet__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 67Styling__YourCode__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68The__StyleGuide__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68Indentation__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 68Line__Length . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69Blank__Lines . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69xiv__Contentsin__DetailOther__StyleGuidelines__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 69Exercise__4-14:PEP__8 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 70Exercise__4-15:Code__Review . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 70Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 70 5IF__STATEMENTS 71A__SimpleExample__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72Conditional__Tests . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72Checking__forEquality__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72Ignoring__CaseWhen__Checkingfor__Equality . . . . . . . . . . . . . . . . . . . . . . . . . . 73Checking__forInequality__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 74Numerical__Comparisons . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 74Checking__MultipleConditions__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 75Checking__Whethera__ValueIs__ina__List . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 76Checking__Whethera__ValueIs__Notin__aList__. . . . . . . . . . . . . . . . . . . . . . . . . . 76Boolean__Expressions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77Exercise__5-1:Conditional__Tests . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 77Exercise__5-2:More__ConditionalTests__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78if__Statements . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78Simple__ifStatements__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 78 if-elseStatements__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 79The__if-elif-elseChain__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 80Using__Multipleelif__Blocks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 81Omitting__theelse__Block . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82Testing__MultipleConditions__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82Exercise__5-3:Alien__Colors #1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84Exercise__5-4:Alien__Colors #2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84Exercise__5-5:Alien__Colors #3 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84Exercise__5-6:Stages__ofLife__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 84Exercise__5-7:Favorite__Fruit . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 85Using__ifStatements__withLists__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 85Checking__forSpecial__Items . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 85Checking__Thata__ListIs__NotEmpty__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 86Using__MultipleLists__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 87Exercise__5-8:Hello__Admin . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 88Exercise__5-9:No__Users . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 88Exercise__5-10:Checking__Usernames . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 88Exercise__5-11:Ordinal__Numbers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 88Styling__Yourif__Statements . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 89Exercise__5-12:Styling__ifStatements__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 89Exercise__5-13:Your__Ideas . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 89Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 89 6DICTIONARIES__91A__SimpleDictionary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92Working__withDictionaries__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92Accessing__Valuesin__aDictionary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92Adding__New Key-ValuePairs__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 93Starting__withan__EmptyDictionary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 94Contents__inDetail__xvModifying__Valuesin__aDictionary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 94Removing__Key-ValuePairs__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 96A__Dictionaryof__SimilarObjects__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 96Using__get()to__AccessValues__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 97Exercise__6-1:Person__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 98Exercise__6-2:Favorite__Numbers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 98Exercise__6-3:Glossary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 99Looping__Througha__Dictionary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 99Looping__ThroughAll__Key-ValuePairs__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 99Looping__ThroughAll__theKeys__ina__Dictionary . . . . . . . . . . . . . . . . . . . . . . . 101Looping__Througha__Dictionarys__Keysin__aParticular__Order . . . . . . . . . . . . . . 102Looping__ThroughAll__Valuesin__aDictionary__. . . . . . . . . . . . . . . . . . . . . . . . . 103Exercise__6-4:Glossary__2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 104Exercise__6-5:Rivers__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105Exercise__6-6:Polling__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105Nesting__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105A__Listof__Dictionaries . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 105A__Listin__aDictionary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 108A__Dictionaryin__aDictionary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 110Exercise__6-7:People__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 111Exercise__6-8:Pets__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 111Exercise__6-9:Favorite__Places . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 111Exercise__6-10:Favorite__Numbers . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 111Exercise__6-11:Cities__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 111Exercise__6-12:Extensions__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 111Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 111 7USER__INPUTAND__WHILELOOPS__113How__the input()Function__Works . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114Writing__ClearPrompts__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 114Using__int()to__AcceptNumerical__Input . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 115The__ModuloOperator__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 116Exercise__7-1:Rental__Car . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 117Exercise__7-2:Restaurant__Seating . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 117Exercise__7-3:Multiples__ofTen__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 117Introducing__whileLoops__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 117The__whileLoop__inAction__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 117Letting__theUser__ChooseWhen__toQuit__. . . . . . . . . . . . . . . . . . . . . . . . . . . . 118Using__aFlag__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 120Using__breakto__Exita__Loop . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121Using__continuein__aLoop__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 122Avoiding__InfiniteLoops__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 122Exercise__7-4:Pizza__Toppings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 123Exercise__7-5:Movie__Tickets . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 123Exercise__7-6:Three__Exits . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 123Exercise__7-7:Infinity__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 123Using__awhile__Loopwith__Listsand__Dictionaries . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 124Moving__Itemsfrom__OneList__toAnother__. . . . . . . . . . . . . . . . . . . . . . . . . . . . 124Removing__AllInstances__ofSpecific__Valuesfrom__aList__. . . . . . . . . . . . . . . . . . 125Filling__aDictionary__withUser__Input . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 125Exercise__7-8:Deli__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 127xvi__Contentsin__DetailExercise__7-9:No__Pastrami . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 127Exercise__7-10:Dream__Vacation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 127Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 127 8FUNCTIONS__129Defining__aFunction__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 130Passing__Informationto__aFunction__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 130Arguments__andParameters__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 131Exercise__8-1:Message__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 131Exercise__8-2:Favorite__Book . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 131Passing__Arguments . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 131Positional__Arguments . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 132Keyword__Arguments . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 133Default__Values . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 134Equivalent__FunctionCalls__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 135Avoiding__ArgumentErrors__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 136Exercise__8-3: T-Shirt . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 136Exercise__8-4:Large__Shirts . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 137Exercise__8-5:Cities__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 137Return__Values . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 137Returning__aSimple__Value . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 137Making__anArgument__Optional . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 138Returning__aDictionary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 139Using__aFunction__witha__whileLoop__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 140Exercise__8-6:City__Names . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 141Exercise__8-7:Album__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 142Exercise__8-8:User__Albums . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 142Passing__aList__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 142Modifying__aList__ina__Function . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 143Preventing__aFunction__fromModifying__aList__. . . . . . . . . . . . . . . . . . . . . . . . . 145Exercise__8-9:Messages__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 146Exercise__8-10:Sending__Messages . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 146Exercise__8-11:Archived__Messages . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 146Passing__anArbitrary__Numberof__Arguments . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 146Mixing__Positionaland__ArbitraryArguments__. . . . . . . . . . . . . . . . . . . . . . . . . 147Using__ArbitraryKeyword__Arguments . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 148Exercise__8-12:Sandwiches__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 149Exercise__8-13:User__Profile . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 149Exercise__8-14:Cars__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 149Storing__YourFunctions__inModules__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 149Importing__anEntire__Module . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 150Importing__SpecificFunctions__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 151Using__asto__Givea__Functionan__Alias . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 151Using__asto__Givea__Modulean__Alias . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 152Importing__AllFunctions__ina__Module . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 152Styling__Functions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 153Exercise__8-15:Printing__Models . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 154Exercise__8-16:Imports__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 154Exercise__8-17:Styling__Functions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 154Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 154Contents__inDetail__xvii 9CLASSES__157Creating__andUsing__aClass__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 158Creating__theDog__Class . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 158The____init__()Method__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 159Making__anInstance__froma__Class . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 159Exercise__9-1:Restaurant__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 162Exercise__9-2:Three__Restaurants . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 162Exercise__9-3:Users__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 162Working__withClasses__andInstances__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 162The__CarClass__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 162Setting__aDefault__Valuefor__anAttribute__. . . . . . . . . . . . . . . . . . . . . . . . . . . . 163Modifying__AttributeValues__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 164Exercise__9-4:Number__Served . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 166Exercise__9-5:Login__Attempts . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 167Inheritance__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 167The____init__()Method__fora__ChildClass__. . . . . . . . . . . . . . . . . . . . . . . . . . . . 167Defining__Attributesand__Methodsfor__theChild__Class . . . . . . . . . . . . . . . . . . . 169Overriding__Methodsfrom__theParent__Class . . . . . . . . . . . . . . . . . . . . . . . . . 170Instances__asAttributes__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 170Modeling__Real-WorldObjects__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 172Exercise__9-6:Ice__CreamStand__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 173Exercise__9-7:Admin__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 173Exercise__9-8:Privileges__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 173Exercise__9-9:Battery__Upgrade . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 173Importing__Classes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 173Importing__aSingle__Class . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 174Storing__MultipleClasses__ina__Module . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 175Importing__MultipleClasses__froma__Module . . . . . . . . . . . . . . . . . . . . . . . . . . 176Importing__anEntire__Module . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 176Importing__AllClasses__froma__Module . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 177Importing__aModule__intoa__Module . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 177Using__Aliases . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 178Finding__YourOwn__Workflow . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179Exercise__9-10:Imported__Restaurant . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179Exercise__9-11:Imported__Admin . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179Exercise__9-12:Multiple__Modules . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179The__PythonStandard__Library . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 179Exercise__9-13:Dice__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 180Exercise__9-14:Lottery__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 180Exercise__9-15:Lottery__Analysis . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 180Exercise__9-16:Python__Moduleof__theWeek__. . . . . . . . . . . . . . . . . . . . . . . . 180Styling__Classes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 181Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 181 10FILES__ANDEXCEPTIONS__183Reading__froma__File . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 184Reading__theContents__ofa__File . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 184Relative__andAbsolute__FilePaths__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 186Accessing__aFile__sLines__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 186xviii__Contentsin__DetailWorking__witha__Files__Contents . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 187Large__Files:One__MillionDigits__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 188Is__YourBirthday__Containedin__Pi? . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 189Exercise__10-1:Learning__Python . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 189Exercise__10-2:Learning__C . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 190Exercise__10-3:Simpler__Code . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 190Writing__toa__File . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 190Writing__aSingle__Line . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 190Writing__MultipleLines__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 191Exercise__10-4:Guest__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 192Exercise__10-5:Guest__Book . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 192Exceptions__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 192Handling__theZeroDivisionError__Exception . . . . . . . . . . . . . . . . . . . . . . . . . . 192Using__try-exceptBlocks__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 193Using__Exceptionsto__PreventCrashes__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 193The__elseBlock__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 194Handling__theFileNotFoundError__Exception . . . . . . . . . . . . . . . . . . . . . . . . . 195Analyzing__Text . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 196Working__withMultiple__Files . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 197Failing__Silently . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 198Deciding__WhichErrors__toReport__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 199Exercise__10-6:Addition__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 200Exercise__10-7:Addition__Calculator . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 200Exercise__10-8:Cats__andDogs__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 200Exercise__10-9:Silent__Catsand__Dogs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 200Exercise__10-10:Common__Words . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 200Storing__Data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 201Using__json. dumps()and__json. loads() . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 201Saving__andReading__User-GeneratedData__. . . . . . . . . . . . . . . . . . . . . . . . . 202Refactoring__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 204Exercise__10-11:Favorite__Number . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 206Exercise__10-12:Favorite__NumberRemembered__. . . . . . . . . . . . . . . . . . . . . 206Exercise__10-13:User__Dictionary . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 206Exercise__10-14:Verify__User . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 206Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 207 11TESTING__YOURCODE__209Installing__pytestwith__pip . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 210Updating__pip . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 210Installing__pytest . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 211Testing__aFunction__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 211Unit__Testsand__TestCases__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 212A__PassingTest__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 212Running__aTest__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 213A__FailingTest__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 214Responding__toa__FailedTest__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 215Adding__NewTests__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 216Exercise__11-1: City,Country__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 217Exercise__11-2:Population__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 217Contents__inDetail__xixTesting__aClass__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 217A__Varietyof__Assertions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 217A__Classto__Test . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 218Testing__theAnonymousSurvey__Class . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 220Using__Fixtures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 221Exercise__11-3:Employee__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 223Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 223PART__II:PROJECTS__225 12A__SHIPTHAT__FIRESBULLETS__227Planning__YourProject__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 228Installing__Pygame . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 228Starting__theGame__Project . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 229Creating__aPygame__Windowand__Respondingto__UserInput__. . . . . . . . . . . . . 229Controlling__theFrame__Rate . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 230Setting__theBackground__Color . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 231Creating__aSettings__Class . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 232Adding__theShip__Image . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 233Creating__theShip__Class . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 234Drawing__theShip__tothe__Screen . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 235 Refactoring:The___check_events()and___update_screen()Methods__. . . . . . . . . . . . . . . . 237The___check_events()Method__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 237The___update_screen()Method__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 237Exercise__12-1:Blue__Sky . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 238Exercise__12-2:Game__Character . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 238Piloting__theShip__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 238Responding__toa__Keypress . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 238Allowing__ContinuousMovement__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 239Moving__BothLeft__andRight__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 241Adjusting__theShip__sSpeed__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 242Limiting__theShip__sRange__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 243Refactoring___check_events() . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 244Pressing__Qto__Quit . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 244Running__theGame__inFullscreen__Mode . . . . . . . . . . . . . . . . . . . . . . . . . . . . 245A__QuickRecap__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 245 alien_invasion.py__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 246 settings.py__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 246 ship.py__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 246Exercise__12-3:Pygame__Documentation . . . . . . . . . . . . . . . . . . . . . . . . . . . 246Exercise__12-4:Rocket__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 246Exercise__12-5:Keys__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 246Shooting__Bullets . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 247Adding__theBullet__Settings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 247Creating__theBullet__Class . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 247Storing__Bulletsin__aGroup__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 248Firing__Bullets . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 249Deleting__OldBullets__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 250xx__Contentsin__DetailLimiting__theNumber__ofBullets__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 251Creating__the _update_bullets()Method__. . . . . . . . . . . . . . . . . . . . . . . . . . . . 252Exercise__12-6:Sideways__Shooter . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 253Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 253 13 ALIENS! 255Reviewing__theProject__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 256Creating__theFirst__Alien . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 256Creating__theAlien__Class . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 257Creating__anInstance__ofthe__Alien . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 257Building__theAlien__Fleet . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 259Creating__aRow__ofAliens__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 259Refactoring___create_fleet() . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 260Adding__Rows . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 261Exercise__13-1:Stars__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 263Exercise__13-2:Better__Stars . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 263Making__theFleet__Move . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 263Moving__theAliens__Right . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 263Creating__Settingsfor__FleetDirection__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 264Checking__Whetheran__AlienHas__Hitthe__Edge . . . . . . . . . . . . . . . . . . . . . . . 265Dropping__theFleet__andChanging__Direction . . . . . . . . . . . . . . . . . . . . . . . . . 265Exercise__13-3:Raindrops__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 266Exercise__13-4:Steady__Rain . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 266Shooting__Aliens . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 266Detecting__BulletCollisions__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 267Making__LargerBullets__forTesting__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 268Repopulating__theFleet__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 268Speeding__Upthe__Bullets . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 269Refactoring___update_bullets() . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 269Exercise__13-5:Sideways__ShooterPart__2 . . . . . . . . . . . . . . . . . . . . . . . . . . 270Ending__theGame__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 270Detecting__Alien-ShipCollisions__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 270Responding__to Alien-ShipCollisions__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 271Aliens__ThatReach__theBottom__ofthe__Screen . . . . . . . . . . . . . . . . . . . . . . . . . 273Game__Over! . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 274Identifying__WhenParts__ofthe__GameShould__Run . . . . . . . . . . . . . . . . . . . . . 275Exercise__13-6:Game__Over . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 275Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 275 14SCORING__277Adding__thePlay__Button . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 278Creating__aButton__Class . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 278Drawing__theButton__tothe__Screen . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 279Starting__theGame__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 281Resetting__theGame__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 281Deactivating__thePlay__Button . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 282Hiding__theMouse__Cursor . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 282Exercise__14-1:Press__Pto__Play . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 283Exercise__14-2:Target__Practice . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 283Contents__inDetail__xxiLeveling__Up . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 283Modifying__theSpeed__Settings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 283Resetting__theSpeed__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 285Exercise__14-3:Challenging__TargetPractice__. . . . . . . . . . . . . . . . . . . . . . . . 286Exercise__14-4:Difficulty__Levels . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 286Scoring__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 286Displaying__theScore__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 286Making__aScoreboard__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 287Updating__theScore__asAliens__AreShot__Down . . . . . . . . . . . . . . . . . . . . . . . 289Resetting__theScore__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 289Making__Sureto__ScoreAll__Hits . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 290Increasing__PointValues__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 290Rounding__theScore__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 291High__Scores . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 292Displaying__theLevel__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 294Displaying__theNumber__ofShips__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 296Exercise__14-5: All-TimeHigh__Score . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 299Exercise__14-6:Refactoring__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 299Exercise__14-7:Expanding__theGame__. . . . . . . . . . . . . . . . . . . . . . . . . . . 299Exercise__14-8:Sideways__Shooter,Final__Version . . . . . . . . . . . . . . . . . . . . . 299Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 299 15GENERATING__DATA 301Installing__Matplotlib . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 302Plotting__aSimple__LineGraph__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 302Changing__theLabel__Typeand__LineThickness__. . . . . . . . . . . . . . . . . . . . . . . . 303Correcting__thePlot__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 305Using__Built-inStyles__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 306Plotting__andStyling__IndividualPoints__with scatter() . . . . . . . . . . . . . . . . . . . . 306Plotting__aSeries__ofPoints__with scatter() . . . . . . . . . . . . . . . . . . . . . . . . . . . . 308Calculating__DataAutomatically__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 308Customizing__TickLabels__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 309Defining__CustomColors__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 310Using__aColormap__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 310Saving__YourPlots__Automatically . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 311Exercise__15-1:Cubes__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 311Exercise__15-2:Colored__Cubes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 311Random__Walks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 312Creating__theRandomWalk__Class . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 312Choosing__Directions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 312Plotting__theRandom__Walk . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 313Generating__MultipleRandom__Walks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 314Styling__theWalk__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 315Exercise__15-3:Molecular__Motion . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 319Exercise__15-4:Modified__RandomWalks__. . . . . . . . . . . . . . . . . . . . . . . . . . 319Exercise__15-5:Refactoring__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 319Rolling__Dicewith__Plotly . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 319Installing__Plotly . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 320Creating__theDie__Class . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 320Rolling__theDie__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 320Analyzing__theResults__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 321xxii__Contentsin__DetailMaking__aHistogram__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 322Customizing__thePlot__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 323Rolling__TwoDice__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 324Further__Customizations . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 325Rolling__Diceof__DifferentSizes__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 326Saving__Figures . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 327Exercise__15-6:Two__D8s . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 328Exercise__15-7:Three__Dice . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 328Exercise__15-8:Multiplication__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 328Exercise__15-9:Die__Comprehensions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 328Exercise__15-10:Practicing__withBoth__Libraries . . . . . . . . . . . . . . . . . . . . . . 328Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 328 16DOWNLOADING__DATA 329The__CSVFile__Format . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 330Parsing__theCSV__FileHeaders__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 330Printing__theHeaders__andTheir__Positions . . . . . . . . . . . . . . . . . . . . . . . . . . . 331Extracting__andReading__Data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 332Plotting__Datain__aTemperature__Chart . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 332The__datetimeModule__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 333Plotting__Dates . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 334Plotting__aLonger__Timeframe . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 336Plotting__aSecond__DataSeries__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 336Shading__anArea__inthe__Chart . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 337Error__Checking . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 338Downloading__YourOwn__Data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 341Exercise__16-1:Sitka__Rainfall . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 342Exercise__16-2:Sitka__DeathValley__Comparison . . . . . . . . . . . . . . . . . . . . . 342Exercise__16-3:San__Francisco . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 342Exercise__16-4:Automatic__Indexes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 342Exercise__16-5:Explore__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 342Mapping__Global Datasets:GeoJSON__Format . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 342Downloading__EarthquakeData__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 343Examining__GeoJSONData__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 343Making__aList__ofAll__Earthquakes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 345Extracting__Magnitudes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 346Extracting__LocationData__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 346Building__aWorld__Map . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 347Representing__Magnitudes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 348Customizing__MarkerColors__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 349Other__ColorScales__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 350Adding__HoverText__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 350Exercise__16-6:Refactoring__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 352Exercise__16-7:Automated__Title . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 352Exercise__16-8:Recent__Earthquakes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 352Exercise__16-9:World__Fires . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 352Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 352Contents__inDetail__xxiii 17WORKING__WITHAPIS__355Using__anAPI__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 355Git__andGitHub__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 356Requesting__DataUsing__anAPI__Call . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 356Installing__Requests . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 357Processing__anAPI__Response . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 357Working__withthe__ResponseDictionary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . 358Summarizing__theTop__Repositories . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 361Monitoring__APIRate__Limits . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 362Visualizing__RepositoriesUsing__Plotly . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 362Styling__theChart__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 364Adding__CustomTooltips__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 365Adding__ClickableLinks__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 366Customizing__MarkerColors__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 367More__AboutPlotly__andthe__GitHubAPI__. . . . . . . . . . . . . . . . . . . . . . . . . . . . 368The__HackerNews__API . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 368Exercise__17-1:Other__Languages . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 371Exercise__17-2:Active__Discussions . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 371Exercise__17-3:Testing__python_repos.py . . . . . . . . . . . . . . . . . . . . . . . . . . . 372Exercise__17-4:Further__Exploration . . . . . . . . . . . . . . . . . . . . . . . . . . . . 372Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 372 18GETTING__STARTEDWITH__DJANGO 373Setting__Upa__Project . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 374Writing__aSpec__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 374Creating__aVirtual__Environment . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 374Activating__theVirtual__Environment . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 375Installing__Django . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 375Creating__aProject__inDjango__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 376Creating__theDatabase__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 376Viewing__theProject__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 377Exercise__18-1:New__Projects . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 378Starting__anApp__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 379Defining__Models . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 379Activating__Models . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 380The__DjangoAdmin__Site . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 381Defining__theEntry__Model . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 384Migrating__theEntry__Model . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 385Registering__Entrywith__theAdmin__Site . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 385The__DjangoShell__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 386Exercise__18-2:Short__Entries . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 387Exercise__18-3:The__DjangoAPI__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 388Exercise__18-4:Pizzeria__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 388Making__Pages:The__LearningLog__HomePage__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 388Mapping__aURL__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 388Writing__aView__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 390Writing__aTemplate__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 390xxiv__Contentsin__DetailExercise__18-5:Meal__Planner . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 392Exercise__18-6:Pizzeria__HomePage__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . 392Building__AdditionalPages__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 392Template__Inheritance . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 392The__TopicsPage__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 394Individual__TopicPages__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 397Exercise__18-7:Template__Documentation . . . . . . . . . . . . . . . . . . . . . . . . . . 400Exercise__18-8:Pizzeria__Pages . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 400Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 400 19USER__ACCOUNTS 403Allowing__Usersto__EnterData__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 404Adding__NewTopics__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 404Adding__NewEntries__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 408Editing__Entries . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 412Exercise__19-1:Blog__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 415Setting__UpUser__Accounts . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 415The__accountsApp__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 415The__LoginPage__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 416Logging__Out . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 419The__RegistrationPage__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 420Exercise__19-2:Blog__Accounts . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 423Allowing__Usersto__OwnTheir__Data . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 423Restricting__Accesswith__@login_required . . . . . . . . . . . . . . . . . . . . . . . . . . . 423Connecting__Datato__CertainUsers__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 425Restricting__TopicsAccess__toAppropriate__Users . . . . . . . . . . . . . . . . . . . . . . . 427Protecting__aUser__sTopics__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 428Protecting__theedit_entry__Page . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 429Associating__NewTopics__withthe__CurrentUser__. . . . . . . . . . . . . . . . . . . . . . . 429Exercise__19-3:Refactoring__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 430Exercise__19-4:Protecting__new_entry . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 430Exercise__19-5:Protected__Blog . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 430Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 430 20STYLING__ANDDEPLOYING__ANAPP__433Styling__LearningLog__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 434The__django-bootstrap5App__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 434Using__Bootstrapto__StyleLearning__Log . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 434Modifying__base.html__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 435Styling__theHome__PageUsing__aJumbotron__. . . . . . . . . . . . . . . . . . . . . . . . . 440Styling__theLogin__Page . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 441Styling__theTopics__Page . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 442Styling__theEntries__onthe__TopicPage__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 443Exercise__20-1:Other__Forms . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 445Exercise__20-2:Stylish__Blog . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 445Deploying__LearningLog__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 445Making__a Platform.sh__Account . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 445Installing__the Platform.sh__CLI . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 446Installing__platformshconfig . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 446Contents__inDetail__xxvCreating__a requirements.txt__File . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 446Additional__DeploymentRequirements__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . 447Adding__ConfigurationFiles__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 447Modifying__settings.py__for Platform.sh__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . 451Using__Gitto__Trackthe__Projects__Files . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 451Creating__aProject__on Platform.sh__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 453Pushing__to Platform.sh__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 455Viewing__theLive__Project . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 456Refining__the Platform.sh__Deployment . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 456Creating__CustomError__Pages . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 459Ongoing__Development . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 460Deleting__aProject__on Platform.sh__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 461Exercise__20-3:Live__Blog . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 461Exercise__20-4:Extended__LearningLog__. . . . . . . . . . . . . . . . . . . . . . . . . . . 462Summary__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 462A__INSTALLATIONAND__TROUBLESHOOTING 463Python__onWindows__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 463Using__pyInstead__ofpython__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 463Rerunning__theInstaller__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 464Python__onmacOS__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 464Accidentally__InstallingApple__sVersion__ofPython__. . . . . . . . . . . . . . . . . . . . . 464Python__2on__OlderVersions__ofmacOS__. . . . . . . . . . . . . . . . . . . . . . . . . . . . 465Python__onLinux__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 465Using__theDefault__PythonInstallation__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 465Installing__theLatest__Versionof__Python . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 465Checking__WhichVersion__ofPython__Youre__Using . . . . . . . . . . . . . . . . . . . . . . . . . . . . 466Python__Keywordsand__Built-inFunctions__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 466Python__Keywords . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 466Python__Built-inFunctions__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 467B__TEXTEDITORS__ANDIDES__469Working__Efficientlywith__VSCode__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 470Configuring__VSCode__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 470VS__CodeShortcuts__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 473Other__TextEditors__andIDEs__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 474IDLE__474Geany__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 474Sublime__Text . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 474Emacs__andVim__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 475PyCharm__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 475Jupyter__Notebooks . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 475C__GETTINGHELP__477First__Steps . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 477Try__ItAgain__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 478Take__aBreak__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 478Refer__toThis__Books__Resources . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 478xxvi__Contentsin__DetailSearching__Online . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 479Stack__Overflow . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 479The__OfficialPython__Documentation . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 479Official__LibraryDocumentation__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 480 r/learnpython . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 480Blog__Posts . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 480Discord__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 480Slack__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 481D__USINGGIT__FORVERSION__CONTROL 483Installing__Git . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 484Configuring__Git . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 484Making__aProject__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 484Ignoring__Files . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 484Initializing__aRepository__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 485Checking__theStatus__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 485Adding__Filesto__theRepository__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 486Making__aCommit__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 486Checking__theLog__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 487The__SecondCommit__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 487Abandoning__Changes . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 488Checking__OutPrevious__Commits . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 489Deleting__theRepository__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 491E__TROUBLESHOOTINGDEPLOYMENTS__493Understanding__Deployments . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 494Basic__Troubleshooting . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 494Follow__OnscreenSuggestions__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 495Read__theLog__Output . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 496 OS-SpecificTroubleshooting__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 497Deploying__fromWindows__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 497Deploying__frommacOS__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 499Deploying__fromLinux__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 499Other__DeploymentApproaches__. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 500INDEX__503PR__EFACE__TOT__HET__HIRD__EDI__TION__Theresponse__tothe__firstand__secondeditions__ofPython__CrashCourse__hasbeen__overwhelmingly positive.More__thanone__millioncopies__arein__print,including__translationsin__over 10 languages.I__vereceived__lettersand__emailsfrom__readersas__youngas__10,as__wellas__fromretirees__whowant__tolearn__toprogram__intheir__free time.Python__CrashCourse__isbeing__usedin__middleschools__andhigh__schools,and__alsoin__college classes.Students__whoare__assignedmore__advancedtextbooks__areusing__PythonCrash__Courseas__acom__paniontext__fortheir__classesand__findingit__aworthwhile__supplement.People__areusing__itto__enhancetheir__skillson__the job,change__careers,and__startworking__ontheir__ownside__projects.In__short,people__areusing__thebook__forthe__fullrange__ofpurposes__Ihad__hopedthey__would,and__much more.The__opportunityto__writea__thirdedition__ofPython__CrashCourse__hasbeen__thoroughly enjoyable.Although__Pythonis__amature__language,it__continuesto__evolveas__everylanguage__does.My__maingoal__inrevising__thebook__isto__keepit__a well-curatedintroductory__Python course.By__readingthis__book,you__lllearn__everythingyou__needto__startworking__onyour__own projects,and__youll__builda__solidfoundation__forall__ofyour__futurelearning__as well.I__veupdated__somesections__toreflect__newer,simpler__waysof__doingthings__in Python.I__vealso__clarifiedsome__sectionswhere__certaindetails__ofthe__languagewere__notpresented__asaccurately__asthey__couldhave__been.All__theprojects__havebeen__completelyupdated__using popular, well-maintainedlibraries__thatyou__canconfidently__useto__buildyour__own projects.xxviii__Prefaceto__theThird__EditionThe__followingis__asummary__ofspecific__changesthat__havebeen__madein__thethird__edition:Chapter__1now__featuresthe__texteditor__VS Code,which__ispopular__amongbeginner__andprofessional__programmersand__workswell__onall__operating systems.Chapter__2includes__thenew__methods removeprefix()and__removesuffix(),which__arehelpful__whenworking__withfiles__and URLs.This__chapteralso__featuresPython__snewly__improvederror__messages,which__providemuch__morespecific__informationto__helpyou__troubleshootyour__codewhen__somethinggoes__wrong.Chapter__10uses__thepathlib__modulefor__workingwith__files.This__isa__muchsimpler__approachto__readingfrom__andwriting__to files.Chapter__11uses__pytestto__writeautomated__testsfor__thecode__you write.The__pytestlibrary__hasbecome__theindustry__standardtool__forwriting__testsin__Python.It__sfriendly__enoughto__usefor__yourfirst__tests,and__ifyou__pursuea__careeras__aPython__programmer,you__lluse__itin__professionalsettings__as well.The__AlienInvasion__projectin__Chapters 12 14includes__asetting__tocontrol__theframe__rate,which__makesthe__gamerun__moreconsistently__acrossdifferent__operating systems.A__simplerapproach__isused__tobuild__thefleet__of aliens,and__theoverall__organizationof__theproject__hasbeen__cleanedup__as well.The__datavisualization__projectsin__Chapters 15 17use__themost__recentfeatures__ofMatplotlib__and Plotly.The__Matplotlibvisualizations__featureupdated__style settings.The__randomwalk__projecthas__asmall__improvementthat__increasesthe__accuracyof__the plots,which__meansyou__llsee__awider__varietyof__patternsemerge__eachtime__yougenerate__anew__walk.All__theprojects__featuringPlotly__nowuse__thePlotly__Express module,which__letsyou__generateyour__initialvisualizations__withjust__afew__linesof__code.You__caneasily__explorea__varietyof__visualizationsbefore__committingto__onekind__of plot,and__thenfocus__onrefining__individualelements__ofthat__plot.The__LearningLog__projectin__Chapters 18 20is__builtusing__thelatest__version__ofDjango__andstyled__usingthe__latestversion__of Bootstrap.Some__partsof__theproject__havebeen__renamedto__makeit__easierto__followthe__overallorganization__ofthe__project.The__projectis__nowdeployed__to Platform.sh,a__modernhosting__servicefor__Django projects.The__deploymentprocess__iscontrolled__byYAML__configuration files,which__giveyou__agreat__dealof__controlover__howyour__projectis__deployed.This__approachis__consistentwith__howprofessional__programmersdeploy__modernDjango__projects.Appendix__Ahas__beenfully__updatedto__recommendcurrent__bestpractices__forinstalling__Pythonon__allmajor__operating systems.Appendix__Bincludes__detailedinstructions__forsetting__upVS__Code,and__briefdescriptions__ofmost__ofthe__majortext__editorsand__IDEsin__current use.Appendix__Cdirects__readersto__severalof__themost__popularonline__resourcesfor__gettingPreface__tothe__ThirdEdition__xxix help.Appendix__Dcontinues__tooffer__amini__crashcourse__inusing__Gitfor__version control.Appendix__Eis__brandnew__forthe__third edition.Even__witha__goodset__ofinstructions__fordeploying__theapps__you create,there__aremany__thingsthat__cango__wrong.This__appendixoffers__adetailed__troubleshooting__guidethat__youcan__usewhen__thedeployment__processdoesn__twork__onthe__first try.The__indexhas__beenthoroughly__updatedto__allowyou__touse__PythonCrash__Courseas__areference__forall__ofyour__futurePython__projects.Thank__youfor__readingPython__Crash Course!If__youhave__anyfeedback__or questions,please__feelfree__toget__in touch;I__am @ehmattheson__Twitter.ACK__NOWL__EDG__MENTSThis__bookwould__nothave__beenpossible__withoutthe__wonderfuland__extremelyprofessional__staffat__IntroductionI__llalways__rememberhow__satisfiedI__felt,watching__myfamily__playa__gamethat__Icreated__andthat__workedas__Iintended__it to.That__earlyexperience__hada__lasting impact.There__sreal__satisfactionin__buildingsomething__witha__purpose,that__solvesa__problem.The__softwareI__writenow__meetsmore__significantneeds__thanmy__childhoodefforts__did,but__thesense__ofsatisfaction__Iget__fromcreating__aprogram__thatworks__isstill__largelythe__same.Who__IsThis__Book For?The__goalof__thisbook__isto__bringyou__upto__speedwith__Pythonas__quicklyas__possibleso__youcan__buildprograms__thatwork__games,data__visualizations,and__webapplications__whiledeveloping__afoundation__inprogramming__thatwill__serveyou__wellfor__therest__ofyour__life.Python__CrashCourse__iswritten__forpeople__ofany__agewho__havenever__programmedin__Pythonor__havenever__programmedat__all.This__bookis__forthose__whowant__tolearn__thebasics__ofprogramming__quicklyso__theycan__focuson__interesting projects,and__thosewho__liketo__testtheir__understandingof__newconcepts__bysolving__meaningful problems.Python__CrashCourse__isalso__perfectfor__teachersat__alllevels__whowant__tooffer__theirstudents__a project-basedintroduction__to programming.If__youre__takinga__collegeclass__andwant__afriendlier__introductionto__Pythonthan__thetext__youve__been assigned,this__bookcan__makeyour__classeasier__as well.If__youre__lookingto__change careers,Python__CrashCourse__canhelp__youmake__thetransition__intoa__moresatisfying__career track.It__hasworked__wellfor__awide__varietyof__readers,with__abroad__rangeof__goals.What__CanYou__Expectto__Learn?The__purposeof__thisbook__isto__makeyou__agood__programmerin__generaland__agood__Pythonprogrammer__in particular.You__lllearn__efficientlyand__adoptgood__habitsas__yougain__asolid__foundationin__generalprogramming__concepts.After__workingyour__waythrough__PythonCrash__Course,you__shouldbe__readyto__moveon__tomore__advancedPython__techniques,and__yournext__programminglanguage__willbe__eveneasier__to grasp.In__PartI__ofthis__book,you__lllearn__basicprogramming__conceptsyou__needto__knowto__writePython__programs.These__conceptsare__thesame__asthose__youd__learnwhen__startingout__inalmost__anyprogramming__language.You__lllearn__aboutdifferent__kindsof__dataand__theways__youcan__storedata__inyour__programs.You__llbuild__collectionsof__data,such__aslists__anddictionar__ies,and__youll__workthrough__thosecollections__inefficient__ways.You__lllearn__touse__whileloops__andif__statementsto__testfor__certain conditions,so__youcan__runspecific__sectionsof__codewhile__thoseconditions__aretrue__andrun__othersections__whenthey__renot__atechnique__thathelps__youautomate__many processes.You__lllearn__toaccept__inputfrom__usersto__makeyour__programsinterac__tive,and__tokeep__yourprograms__runningas__longas__theuser__wants.You__llexplore__howto__writefunctions__thatmake__partsof__yourprogram__reusable,Introduction__xxxvso__youonly__haveto__writeblocks__ofcode__thatperform__certainactions__once,while__usingthat__codeas__manytimes__asyou__need.You__llthen__extendthis__conceptto__morecomplicated__behaviorwith__classes,making__fairlysimple__programsrespond__toa__varietyof__situations.You__lllearn__towrite__programsthat__handlecommon__errors gracefully.After__workingthrough__eachof__thesebasic__concepts,you__llwrite__anumber__ofincreasingly__complexprograms__usingwhat__youve__learned. Finally,you__lltake__yourfirst__steptoward__intermediate__programmingby__learninghow__towrite__testsfor__your code,so__youcan__developyour__programsfurther__withoutworrying__aboutintroducing__bugs.All__theinformation__inPart__Iwill__prepareyou__fortaking__on larger,more__complex projects.In__Part II,you__llapply__whatyou__learnedin__PartI__tothree__projects.You__cando__anyor__allof__these projects,in__whicheverorder__worksbest__for you.In__thefirst__project,in__Chapters 12 14,you__llcreate__aSpace__Invadersstyle__shooting__gamecalled__Alien Invasion,which__includesseveral__increasinglydifficult__levelsof__game play.After__youve__completedthis__project,you__shouldbe__wellon__yourway__tobeing__ableto__developyour__own 2D games.Even__ifyou__dont__aspireto__becomea__game programmer,working__throughthis__projectis__anenjoyable__wayto__tietogether__muchof__whatyou__lllearn__inPart__I.The__second project,in__Chapters 15 17,introduces__youto__datavisualiza__tion.Data__scientistsuse__avariety__ofvisualization__techniquesto__helpmake__senseof__thevast__amountof__informationavailable__to them.You__llwork__withdatasets__thatyou__generatethrough__code,datasets__thatyou__downloadfrom__online sources,and__datasetsyour__programsdownload__automatically.After__youve__completedthis__project,you__llbe__ableto__writeprograms__thatsift__throughlarge__datasetsand__makevisual__representationsof__manydifferent__kindsof__information.In__thethird__project,in__Chapters 18 20,you__llbuild__asmall__webappli__cationcalled__Learning Log.This__projectallows__youto__keepan__organizedjournal__ofinformation__youve__learnedabout__aspecific__topic.You__llbe__ableto__keepseparate__logsfor__differenttopics__andallow__othersto__createan__accountand__starttheir__own journals.You__llalso__learnhow__todeploy__yourproject__soanyone__canaccess__it online,from__anywherein__the world.Online__ResourcesIntroduction__Solutionsto__exercisesYou__shouldspend__significanttime__onyour__ownattempting__theexercises__inthe__TryIt__Yourself sections. However,if__youre__stuckand__cant__makeany__progress,solutions__tomost__ofthe__exercises__are online.Cheat__sheetsA__fullset__ofdownloadable__cheatsheets__forquick__reference__tomajor__conceptsis__also online.Why__Python?Every__year,I__considerwhether__tocontinue__usingPython__ormove__onto__adifferent__language,perhaps__onethat__snewer__tothe__programming world.But__Icontinue__tofocus__onPython__formany__reasons.Python__isan__incrediblyefficient__language:your__programswill__domore__infewer__linesof__codethan__manyother__languageswould__require.Python__ssyntax__willalso__helpyou__writeclean__code.Your__codewill__beeasier__to read,easier__to debug,and__easierto__extendand__build upon,compared__toother__languages.People__usePython__formany__purposes:to__make games,build__webappli__cations,solve__business problems,and__developinternal__toolsat__allkinds__ofinteresting__companies.Python__isalso__usedheavily__inscientific__fields,for__academicresearch__andapplied__work.One__ofthe__mostimportant__reasonsI__continueto__usePython__isbecause__ofthe__Python community,which__includesan__incrediblydiverse__andwel__cominggroup__of people.Community__isessential__toprogrammers__becauseprogramming__isnt__asolitary__pursuit.Most__of us,even__themost__experienced programmers,need__toask__advicefrom__otherswho__havealready__solvedsimi__lar problems.Having__a well-connectedand__supportivecommunity__iscritical__tohelping__yousolve__problems,and__thePython__communityis__fullysupport__iveof__peoplewho__arelearning__Pythonas__theirfirst__programminglanguage__orcoming__toPython__witha__backgroundin__other languages.Python__isa__greatlanguage__to learn,so__lets__get started!PART__IBA__SIC__SPart__Iof__thisbook__teachesyou__thebasic__conceptsyou__llneed__towrite__Python programs.Many__ofthese__concepts__arecommon__toall__programming languages,so__theyll__beuseful__throughoutyour__lifeas__a programmer.In__Chapter 1you__llinstall__Pythonon__yourcomputer__andrun__yourfirst__program,which__printsthe__messageHello__world!to__the screen.In__Chapter 2you__lllearn__toassign__informationto__variablesand__workwith__textand__numerical values.Chapters__3and__4introduce__lists.Lists__canstore__asmuch__informationas__youwant__inone__place,allowing__youto__workwith__thatdata__efficiently.You__llbe__ableto__workwith__hundreds, thousands,and__evenmillions__ofvalues__injust__afew__linesof__code.In__Chapter 5you__lluse__ifstatements__towrite__codethat__respondsone__wayif__certainconditions__are true,and__respondsin__adifferent__wayif__thoseconditions__arenot__true.Chapter__6shows__youhow__touse__Pythons__dictionaries,which__letyou__makeconnections__betweendifferent__piecesof__information.Like__lists,dic__tionariescan__containas__muchinformation__asyou__needto__store.In__Chapter 7you__lllearn__howto__acceptinput__fromusers__tomake__yourprograms__interactive.You__llalso__learnabout__while loops,which__runblocks__ofcode__repeatedlyas__longas__certainconditions__remain true.In__Chapter 8you__llwrite__functions,which__arenamed__blocksof__codethat__performa__specifictask__andcan__berun__wheneveryou__need them.Chapter__9introduces__classes,which__allowyou__tomodel__real-world objects.You__llwrite__codethat__represents dogs, cats, people, cars, rockets,and__more. 2Part__I:Basics__Chapter 10shows__youhow__towork__withfiles__andhandle__errorsso__yourprograms__wont__crash unexpectedly.You__llstore__databefore__yourprogram__closesand__readthe__databack__inwhen__theprogram__runs again.You__lllearn__aboutPython__s exceptions,which__allowyou__toanticipate__errorsand__makeyour__programshandle__thoseerrors__gracefully.In__Chapter 11you__lllearn__towrite__testsfor__your code,to__checkthat__yourprograms__workthe__wayyou__intendthem__to.As__a result,you__llbe__ableto__expandyour__programswithout__worryingabout__introducingnew__bugs.Testing__yourcode__isone__ofthe__firstskills__thatwill__helpyou__transitionfrom__beginnerto__intermediate programmer. 1GETT__INGS__TARTED__Inthis__chapter,you__llrun__yourfirst__Python program, hello_world.py. First,you__llneed__tocheck__whethera__recentversion__ofPython__isinstalled__onyour__computer;if__itisn__t,you__llinstall__it.You__llalso__installa__texteditor__towork__withyour__Python programs.Text__editorsrecognize__Pythoncode__andhighlight__sectionsas__you write,making__iteasy__tounderstand__yourcode__s structure.Setting__UpYour__ProgrammingEnvironment__Pythondiffers__slightlyon__differentoperating__systems,so__youll__needto__keepa__fewconsiderations__in mind.In__thefollowing__sections,we__llmake__surePython__isset__upcorrectly__onyour__system. 4Chapter__1Python__VersionsEvery__programminglanguage__evolvesas__newideas__andtechnologies__emerge,and__thedevelopers__ofPython__havecontinually__madethe__languagemore__versatileand__powerful.As__ofthis__writing,the__latestversion__isPython__3.11,but__everythingin__thisbook__shouldrun__onPython__3.9or__later.In__thissec__tion,we__llfind__outif__Pythonis__alreadyinstalled__onyour__systemand__whetheryou__needto__installa__newer version.Appendix__Acontains__additionaldetails__aboutinstalling__thelatest__versionof__Pythonon__eachmajor__operatingsystem__as well.Running__Snippetsof__PythonCode__Youcan__runPython__sinterpreter__ina__terminal window,allowing__youto__trybits__ofPython__codewithout__havingto__saveand__runan__entire program.Throughout__this book,you__llsee__codesnippets__thatlook__like this: >>> print("HelloPython__interpreter!")Hello__Python interpreter!The__threeangle__brackets (>>>) prompt,which__well__referto__asa__Python prompt,indicates__thatyou__shouldbe__usingthe__terminal window.The__boldtext__isthe__codeyou__shouldtype__inand__thenexecute__bypressing__ENTER.Most__ofthe__examplesin__thisbook__are small, self-containedprograms__thatyou__llrun__fromyour__texteditor__ratherthan__the terminal,because__youll__writemost__ofyour__codein__thetext__editor.But__sometimes,basic__conceptswill__beshown__ina__seriesof__snippetsrun__througha__Pythonterminal__sessionto__demonstrateparticular__conceptsmore__efficiently.When__yousee__threeangle__bracketsin__acode__listing,you__relooking__atcode__andoutput__froma__terminal session.We__lltry__codingin__theinterpreter__onyour__systemin__a moment.We__llalso__usea__texteditor__tocreate__asimple__programcalled__Hello World!that__hasbecome__astaple__oflearning__to program.There__sa__long-heldtradi__tionin__theprogramming__worldthat__printingthe__messageHello__world!to__thescreen__asyour__firstprogram__ina__newlanguage__willbring__yougood__luck.Such__asimple__programserves__avery__real purpose.If__itruns__correctlyon__your system,then__anyPython__programyou__writeshould__workas__well.About__theVS__CodeEditor__VSCode__isa__powerful, professional-qualitytext__editorthat__sfree__and beginner- friendly.VS__Codeis__greatfor__bothsimple__andcomplex__projects,so__ifyou__becomecomfortable__usingit__whilelearning__Python,you__cancontinue__usingit__asyou__progressto__largerand__morecomplicated__projects.VS__Codecan__beinstalled__onall__modernoperating__systems,and__itsupports__mostprogramming__languages,including__Python.Appendix__Bprovides__informationon__othertext__editors.If__youre__curious__aboutthe__other options,you__mightwant__toskim__thatappendix__atthis__GettingStarted__5 point.If__youwant__tobegin__programming quickly,you__canuse__VSCode__to start.Then__youcan__considerother__editors,once__youve__gainedsome__experience__asa__programmer.In__this chapter,I__llwalk__youthrough__installingVS__Codeon__youroperating__system.NOTE__Ifyou__alreadyhave__atext__editorinstalled__andyou__knowhow__toconfigure__itto__runPython__programs,you__arewelcome__touse__thateditor__instead.Python__onDifferent__OperatingSystems__Pythonis__a cross-platformprogramming__language,which__meansit__runson__allthe__majoroperating__systems.Any__Pythonprogram__youwrite__shouldrun__onany__moderncomputer__thathas__Python installed. However,the__methodsfor__settingup__Pythonon__differentoperating__systemsvary__slightly.In__this section,you__lllearn__howto__setup__Pythonon__your system.You__llfirst__checkwhether__arecent__versionof__Pythonis__installedon__your system,and__installit__ifit__s not.Then__youll__installVS__Code.These__arethe__onlytwo__stepsthat__aredifferent__foreach__operating system.In__thesections__that follow,you__llrun__hello_world.pyand__troubleshootanything__thatdoesn__t work.I__llwalk__youthrough__thisprocess__foreach__operating__system,so__youll__havea__Pythonprogramming__environmentthat__youcan__rely on.Python__onWindows__Windowsdoesn__tusually__comewith__Python,so__youll__probablyneed__toinstall__itand__theninstall__VS Code.Installing__Python First,check__whetherPython__isinstalled__onyour__system.Open__acommand__windowby__enteringcommand__intothe__Startmenu__andclicking__theCommand__Prompt app.In__theterminal__window,enter__pythonin__lowercase.If__youget__aPython__prompt (>>>)in__response,Python__isinstalled__onyour__system.If__yousee__anerror__messagetelling__youthat__pythonis__nota__recognized command,or__ifthe__Microsoftstore__opens,Python__isnt__installed.Close__theMicrosoft__storeif__it opens;it__sbetter__todownload__anofficial__installerthan__touse__Microsofts__version.If__Pythonis__notinstalled__onyour__system,or__ifyou__seea__versionearlier__thanPython__3.9,you__needto__downloada__Pythoninstaller__for Windows.Go__to https://python.organd__hoverover__theDownloads__link.You__shouldsee__abutton__fordownloading__thelatest__versionof__Python.Click__the button,which__shouldautomatically__startdownloading__thecor__rectinstaller__foryour__system.After__youve__downloadedthe__file,run__the installer.Make__sureyou__selectthe__optionAdd__Pythonto__PATH,which__willmake__iteasier__toconfigure__yoursystem__correctly.Figure__1-1shows__thisoption__selected. 6Chapter__1Figure__1-1:Make__sureyou__selectthe__checkboxlabeled__AddPython__to PATH.Running__Pythonin__aTerminal__SessionOpen__anew__commandwindow__andenter__pythonin__lowercase.You__shouldsee__aPython__prompt (>>>),which__meansWindows__hasfound__theversion__ofPython__youjust__installed. C:\>python__Python 3.x.x (main,Jun__. . . , 13:29:14) [MSC v.1932 64bit__(AMD64)]on__win32Type__"help", "Chapter 1This__commandstarts__aPython__terminal session.You__shouldsee__aPython__prompt (>>>),which__meansmacOS__hasfound__theversion__ofPython__youjust__installed.Enter__thefollowing__linein__theterminal__session: >>> print("HelloPython__interpreter!")Hello__Python interpreter! >>>You__shouldsee__themessage__HelloPython__interpreter!,which__shouldprint__directlyin__thecurrent__terminal window.You__canclose__thePython__interpreterby__pressing CTRL-Dor__byentering__thecommand__exit().NOTE__Onnewer__macOS systems,you__llsee__apercent__sign (%)as__aterminal__promptinstead__ofa__dollarsign__($).Installing__VSCode__Toinstall__theVS__Code editor,you__needto__downloadthe__installerat__https:// code.visualstudio.com.Click__theDownload__button,and__thenopen__aFinder__windowand__goto__theDownloads__folder.Drag__theVisual__StudioCode__installerto__yourApplications__folder,then__double-clickthe__installerto__run it.Skip__overthe__followingsection__aboutPython__on Linux,and__followthe__stepsin__Runninga__HelloWorld__Programon__page 9.Python__onLinux__Linuxsystems__aredesigned__for programming,so__Pythonis__alreadyinstalled__onmost__Linux computers.The__peoplewho__writeand__maintainLinux__expectyou__todo__yourown__programmingat__some point,and__encourageyou__todo__so.For__this reason,there__svery__littleto__installand__onlya__fewsettings__tochange__tostart__programming.Checking__YourVersion__ofPython__Opena__terminalwindow__byrunning__theTerminal__applicationon__yoursystem__(in Ubuntu,you__canpress__CTRL-ALT-T).To__findout__whichver__sionof__Pythonis__installed,enter__python3with__alowercase__p.When__Pythonis__installed,this__commandstarts__thePython__interpreter.You__shouldsee__outputindicating__whichversion__ofPython__is installed.You__shouldalso__seea__Pythonprompt__(>>>)where__youcan__startentering__Python commands: $ python3Python__3.10.4 (main,Apr__. . . , 09:04:19) [GCC 11.2.0]on__linuxType__"help", "Chapter 1NOTE__Ifyou__reusing__macOSand__a pop-upasks__youto__installthe__commandline__developer__tools,click__Install.You__maysee__amessage__thatit__willtake__anexcessively__longtime__to install,but__itshould__onlytake__about 10or__20minutes__ona__reasonableinter__net connection.Running__hello_world.pyBefore__youwrite__yourfirst__program,make__afolder__calledpython_work__onyour__desktopfor__your projects.It__sbest__touse__lowercaseletters__andunder__scoresfor__spacesin__fileand__folder names,because__Pythonuses__thesenaming__conventions.You__canmake__thisfolder__somewhereother__thanthe__desktop,but__itwill__beeasier__tofollow__somelater__stepsif__yousave__thepython_work__folderdirectly__onyour__desktop.Open__VS Code,and__closethe__GetStarted__tabif__its__still open.Make__anew__fileby__clicking File4NewFile__orpressing__CTRL-N ( -Non__macOS).Save__thefile__as hello_world.pyin__yourpython_work__folder.The__extension .pytells__VSCode__thatyour__fileis__writtenin__Python,and__tellsit__howto__runthe__programand__highlightthe__textin__ahelpful__way.After__youve__savedyour__file,enter__thefollowing__linein__the editor: hello_world.py print("HelloPython__world!")To__runyour__program,select__Run4RunWithout__Debuggingor__press CTRL-F5.A__terminalscreen__shouldappear__atthe__bottomof__theVS__Code window,showing__yourprogram__s output:Hello__Python world!You__lllikely__seesome__additionaloutput__showingthe__Pythoninterpreter__thatwas__usedto__runyour__program.If__youwant__tosimplify__theinformation__thats__displayedso__youonly__seeyour__programs__output,see__Appendix B.You__canalso__findhelpful__suggestionsabout__howto__useVS__Codemore__efficientlyin__Appendix B.If__youdon__tsee__this output,something__mighthave__gonewrong__inthe__program.Check__everycharacter__onthe__lineyou__entered.Did__youacciden__tallycapitalize__print?Did__youforget__oneor__bothof__thequotation__marksor__parentheses?Programming__languagesexpect__veryspecific__syntax,and__ifyou__dont__provide that,you__llget__errors.If__youcan__tget__theprogram__to run,see__thesuggestions__inthe__next section.Troubleshooting__Ifyou__cant__get hello_world.pyto__run,here__area__fewremedies__youcan__trythat__arealso__goodgeneral__solutionsfor__anyprogramming__problem:When__aprogram__containsa__significant error,Python__displaysa__traceback,which__isan__error report.Python__looksthrough__thefile__andtries__toiden__tifythe__problem.Check__the traceback;it__mightgive__youa__clueas__towhat__issueis__preventingthe__programfrom__running.Getting__Started 11Step__awayfrom__your computer,take__ashort__break,and__thentry__again.Remember__thatsyntax__isvery__importantin__programming,so__somethingas__simpleas__mismatchedquotation__marksor__mismatchedparentheses__canprevent__aprogram__fromrunning__properly.Reread__therelevant__partsof__this chapter,look__overyour__code,and__tryto__findthe__mistake.Start__over again.You__probablydon__tneed__touninstall__any software,but__itmight__makesense__todelete__your hello_world.pyfile__and re-createit__from scratch.Ask__someoneelse__tofollow__thesteps__inthis__chapter,on__yourcomputer__ora__different one,and__watchwhat__theydo__carefully.You__mighthave__missedone__smallstep__thatsomeone__elsehappens__to catch.See__theadditional__installationinstructions__inAppendix__A;some__ofthe__detailsincluded__inthe__Appendixmay__helpyou__solveyour__issue.Find__someonewho__knowsPython__andask__themto__helpyou__getset__up.If__youask__around,you__mightfind__thatyou__unexpectedlyknow__someonewho__uses Python.The__setupinstructions__inthis__chapterare__alsoavailable__throughthis__books__companionwebsite__at https://ehmatthes.github.io/pcc_3e.The__onlineversion__ofthese__instructionsmight__workbetter__becauseyou__cansimply__cutand__pastecode__andclick__linksto__theresources__you need.Ask__forhelp__online.Appendix__Cprovides__anumber__of resources,such__asforums__andlive__chat sites,where__youcan__askfor__solutionsfrom__people__whove__alreadyworked__throughthe__issueyou__recurrently__facing.Never__worrythat__youre__botheringexperienced__programmers.Every__programmerhas__beenstuck__atsome__point,and__mostprogrammers__arehappy__tohelp__youset__upyour__system correctly.As__longas__youcan__stateclearly__whatyou__retrying__to do,what__youve__already tried,and__theresults__youre__getting,there__sa__goodchance__someonewill__beable__tohelp__you.As__mentionedin__the introduction,the__Pythoncommunity__isvery__friendlyand__welcomingto__beginners.Python__shouldrun__wellon__anymodern__computer.Early__setupissues__canbe__frustrating,but__theyre__wellworth__sorting out.Once__youget__hello _world.py running,you__canstart__tolearn__Python,and__yourprogramming__workwill__becomemore__interestingand__satisfying.Running__PythonPrograms__froma__TerminalYou__llrun__mostof__yourprograms__directlyin__yourtext__editor. However,sometimes__its__usefulto__runprograms__froma__terminal instead.For__example,you__mightwant__torun__anexisting__programwithout__openingit__for editing.You__cando__thison__anysystem__withPython__installedif__youknow__howto__accessthe__directorywhere__theprogram__fileis__stored.To__try this,make__sureyou__vesaved__the hello_world.pyfile__inthe__python_workfolder__onyour__desktop. 12Chapter__1On__WindowsYou__canuse__theterminal__command cd,for__change directory,to__navigatethrough__yourfilesystem__ina__command window.The__command dir,for__directory,shows__youall__thefiles__thatexist__inthe__current directory.Open__anew__terminalwindow__andenter__thefollowing__commandsto__run hello_world.py: C:\>cd__Desktop\python_work C:\Desktop\python_work>dir__hello_world.py C:\Desktop\python_work>python__hello_world.pyHello__Python world! First,use__thecd__commandto__navigateto__thepython_work__folder,which__isin__theDesktop__folder. Next,use__thedir__commandto__makesure__hello_world.pyis__inthis__folder.Then__runthe__fileusing__thecommand__python hello_world.py.Most__ofyour__programswill__runfine__directlyfrom__your editor. However,as__yourwork__becomesmore__complex,you__llwant__torun__someof__yourpro__gramsfrom__a terminal.On__macOSand__LinuxRunning__aPython__programfrom__aterminal__sessionis__thesame__onLinux__and macOS.You__canuse__theterminal__command cd,for__change directory,to__navigatethrough__yourfilesystem__ina__terminal session.The__command ls,for__list,shows__youall__thenonhidden__filesthat__existin__thecurrent__directory.Open__anew__terminalwindow__andenter__thefollowing__commandsto__run hello_world.py: ~$cd__Desktop/python_work/ ~/Desktop/python_work$ls__hello_world.py ~/Desktop/python_work$ python3 hello_world.pyHello__Python world! First,use__thecd__commandto__navigateto__thepython_work__folder,which__isin__theDesktop__folder. Next,use__thels__commandto__makesure__hello_world.pyis__inthis__folder.Then__runthe__fileusing__thecommand__python3 hello_world.py.Most__ofyour__programswill__runfine__directlyfrom__your editor.But__asyour__workbecomes__more complex,you__llwant__torun__someof__yourpro__gramsfrom__a terminal.Getting__Started 13TRY__ITYOURSELF__Theexercises__inthis__chapterare__exploratoryin__nature.Starting__inChapter__2,the__challengesyou__llsolve__willbe__basedon__whatyou__ve learned. 1-1. python.org:Explore__thePython__homepage__(https://python.org)to__findtop__icsthat__interest you.As__youbecome__familiarwith__Python,different__partsof__thesite__willbe__moreuseful__to you. 1-2.Hello__World Typos:Open__the hello_world.pyfile__youjust__created.Make__atypo__somewherein__theline__andrun__theprogram__again.Can__youmake__atypo__thatgenerates__an error?Can__youmake__senseof__theerror__message?Can__youmake__atypo__thatdoesn__tgenerate__an error?Why__doyou__thinkit__didnt__makean__error? 1-3.Infinite__Skills:If__youhad__infiniteprogramming__skills,what__wouldyou__build?You__reabout__tolearn__howto__program.If__youhave__anend__goalin__mind,you__llhave__animmediate__usefor__yournew__skills;now__isa__greattime__towrite__briefdescriptions__ofwhat__youwant__to create.It__sa__goodhabit__tokeep__anideas__notebookthat__youcan__referto__wheneveryou__wantto__starta__new project.Take__afew__minutesnow__todescribe__threeprograms__youwant__to create.Summary__Inthis__chapter,you__learneda__bitabout__Pythonin__general,and__youinstalled__Pythonon__yoursystem__ifit__wasnt__already there.You__alsoinstalled__atext__editor__tomake__iteasier__towrite__Python code.You__ransnippets__ofPython__codein__aterminal__session,and__youran__yourfirst__program, hello_world.py.You__probablylearned__abit__abouttroubleshooting__as well.In__thenext__chapter,you__lllearn__aboutthe__differentkinds__ofdata__youcan__workwith__inyour__Python programs,and__youll__startto__usevariables__as well. 2VA__RIABL__ESANDS__IMPL__EDATA__TY__PES__Inthis__chapteryou__lllearn__aboutthe__different__kindsof__datayou__canwork__within__yourPython__programs.You__llalso__learnhow__touse__variablesto__representdata__inyour__programs.What__ReallyHappens__WhenYou__Run hello_world.pyLet__stake__acloser__lookat__whatPython__doeswhen__yourun__hello_world.py.As__itturns__out,Python__doesa__fairamount__of work,even__whenit__runsa__simple program: hello_world.py print("HelloPython__world!")When__yourun__this code,you__shouldsee__thefollowing__output:Hello__Python world! 16Chapter__2When__yourun__thefile__hello_world.py,the__ending .pyindicates__thatthe__fileis__aPython__program.Your__editorthen__runsthe__filethrough__thePython__interpreter,which__readsthrough__theprogram__anddetermines__whateach__wordin__theprogram__means.For__example,when__theinterpreter__seesthe__wordprint__followedby__parentheses,it__printsto__thescreen__whateveris__insidethe__parentheses.As__youwrite__your programs,your__editorhighlights__differentparts__ofyour__programin__different ways.For__example,it__recognizesthat__print()is__thename__ofa__functionand__displaysthat__wordin__one color.It__recognizesthat__"HelloPython__world!"is__notPython__code,and__displaysthat__phrasein__adifferent__color.This__featureis__calledsyntax__highlightingand__isquite__usefulas__youstart__towrite__yourown__programs.Variables__Lets__tryusing__avariable__in hello_world.py.Add__anew__lineat__thebeginning__ofthe__file,and__modifythe__second line: hello_world.pymessage__= "HelloPython__world!" print(message)Run__thisprogram__tosee__what happens.You__shouldsee__thesame__outputyou__saw previously:Hello__Python world!We__veadded__avariable__named message.Every__variableis__connectedto__a value,which__isthe__informationassociated__withthat__variable.In__thiscase__thevalue__isthe__"HelloPython__world!" text.Adding__avariable__makesa__littlemore__workfor__thePython__interpreter.When__itprocesses__thefirst__line,it__associatesthe__variablemessage__withthe__"HelloPython__world!" text.When__itreaches__thesecond__line,it__printsthe__valueassociated__withmessage__tothe__screen.Let__sexpand__onthis__programby__modifying hello_world.pyto__printa__second__message.Add__ablank__lineto__hello_world.py,and__thenadd__twonew__linesof__code:message__= "HelloPython__world!" print(message)message__= "HelloPython__CrashCourse__world!" print(message)Now__whenyou__run hello_world.py,you__shouldsee__twolines__of output:Hello__Python world!Hello__PythonCrash__Course world!You__canchange__thevalue__ofa__variablein__yourprogram__atany__time,and__Pythonwill__alwayskeep__trackof__itscurrent__value.Variables__andSimple__DataTypes__17Naming__andUsing__VariablesWhen__youre__usingvariables__in Python,you__needto__adhereto__afew__rulesand__guidelines.Breaking__someof__theserules__willcause__errors;other__guidelines__justhelp__youwrite__codethat__seasier__toread__and understand.Be__sureto__keepthe__followingrules__inmind__whenworking__with variables:Variable__namescan__containonly__letters, numbers,and__underscores.They__canstart__witha__letteror__an underscore,but__notwith__a number.For__instance,you__cancall__avariable__message_1but__not 1_message.Spaces__arenot__allowedin__variable names,but__underscorescan__beused__toseparate__wordsin__variable names.For__example,greeting_message__worksbut__greetingmessage__willcause__errors.Avoid__usingPython__keywordsand__functionnames__asvariable__names.For__example,do__notuse__theword__printas__avariable__name;Python__hasreserved__itfor__aparticular__programmatic purpose. (SeePython__Keywordsand__Built-inFunctions__onpage__466.)Variable__namesshould__beshort__but descriptive.For__example,name__isbetter__than n,student_name__isbetter__than s_n,and__name_lengthis__betterthan__length_of_persons_name.Be__carefulwhen__usingthe__lowercaseletter__land__theuppercase__letterO__becausethey__couldbe__confusedwith__thenumbers__1and__0.It__cantake__somepractice__tolearn__howto__creategood__variable names,especially__asyour__programsbecome__moreinteresting__and complicated.As__youwrite__moreprograms__andstart__toread__throughother__peoples__code,you__llget__betterat__comingup__withmeaningful__names.NOTE__ThePython__variablesyou__reusing__atthis__pointshould__be lowercase.You__wont__geterrors__ifyou__useuppercase__letters,but__uppercaseletters__invariable__nameshave__special__meaningsthat__well__discussin__later chapters.Avoiding__NameErrors__WhenUsing__VariablesEvery__programmermakes__mistakes,and__mostmake__mistakesevery__day.Although__goodprogrammers__mightcreate__errors,they__alsoknow__howto__respondto__thoseerrors__efficiently.Let__slook__atan__erroryou__relikely__tomake__earlyon__andlearn__howto__fix it.We__llwrite__somecode__thatgenerates__anerror__on purpose.Enter__thefol__lowing code,including__themisspelled__word mesage,which__isshown__in bold:message__= "HelloPython__CrashCourse__reader!" print(mesage)When__anerror__occursin__your program,the__Pythoninterpreter__doesits__bestto__helpyou__figureout__wherethe__problem is.The__interpreterprovides__atraceback__whena__programcannot__run successfully.A__tracebackis__arecord__ofwhere__theinterpreter__raninto__troublewhen__tryingto__executeyour__code. 18Chapter__2Here__san__exampleof__thetraceback__thatPython__providesafter__youve__accidentally__misspelleda__variables__name:Traceback__(mostrecent__call last): 1File__"hello_world.py",line__2,in__2 print(mesage) ^^^^^^ 3 NameError:name__'mesage'is__not defined.Did__you mean: 'message'?The__outputreports__thatan__erroroccurs__inline__2of__thefile__hello_world.py 1.The__interpretershows__thisline__2to__helpus__spotthe__errorquickly__andtells__uswhat__kindof__errorit__found 3.In__thiscase__itfound__aname__errorand__reportsthat__thevariable__being printed, mesage,has__notbeen__defined.Python__cant__identifythe__variablename__provided.A__nameerror__usuallymeans__weeither__forgotto__seta__variables__valuebefore__using it,or__wemade__aspelling__mistakewhen__enteringthe__variables__name.If__Pythonfinds__avari__ablename__thats__similarto__theone__itdoesn__t recognize,it__willask__ifthat__sthe__nameyou__meantto__use.In__thisexample__weomitted__theletter__sin__thevariable__namemessage__inthe__second line.The__Pythoninterpreter__doesnt__spellcheckyour__code,but__itdoes__ensurethat__variablenames__arespelled__consistently.For__example,watch__whathappens__whenwe__spellmessage__incorrectlyin__theline__thatdefines__the variable:mesage__= "HelloPython__CrashCourse__reader!" print(mesage)In__this case,the__programruns__successfully!Hello__PythonCrash__Course reader!The__variablenames__match,so__Pythonsees__no issue.Programming__languages__are strict,but__theydisregard__goodand__bad spelling.As__a result,you__dont__needto__considerEnglish__spellingand__grammarrules__whenyou__retry__ingto__createvariable__namesand__writing code.Many__programmingerrors__are simple, single-charactertypos__inone__lineof__a program.If__youfind__yourselfspending__along__timesearching__forone__ofthese__errors,know__thatyou__rein__good company.Many__experiencedand__talentedprogrammers__spendhours__huntingdown__thesekinds__oftiny__errors.Try__tolaugh__aboutit__andmove__on,knowing__itwill__happenfrequently__throughoutyour__programming life.Variables__AreLabels__Variablesare__oftendescribed__asboxes__youcan__storevalues__in.This__ideacan__behelpful__thefirst__fewtimes__youuse__a variable,but__itisn__tan__accurateway__todescribe__howvariables__arerepresented__internallyin__Python.It__smuch__betterto__thinkof__variablesas__labelsthat__youcan__assignto__values.You__canalso__saythat__avariable__referencesa__certain value.Variables__andSimple__DataTypes__19This__distinctionprobably__wont__mattermuch__inyour__initial programs,but__its__worthlearning__earlierrather__than later.At__some point,you__llsee__unexpectedbehavior__froma__variable,and__anaccurate__understandingof__howvariables__workwill__helpyou__identifywhat__shappening__inyour__code.NOTE__Thebest__wayto__understandnew__programmingconcepts__isto__tryusing__themin__your programs.If__youget__stuckwhile__workingon__anexercise__inthis__book,try__doingsome__thingelse__fora__while.If__youre__still stuck,review__therelevant__partof__that chapter.If__youstill__need help,see__thesuggestions__inAppendix__C.TRY__ITYOURSELF__Writea__separateprogram__toaccomplish__eachof__these exercises.Save__eachpro__gramwith__afilename__thatfollows__standardPython__conventions,using__lowercaseletters__and underscores,such__as simple_message.pyand__simple_messages.py. 2-1.Simple__Message:Assign__amessage__toa__variable,and__thenprint__that message. 2-2.Simple__Messages:Assign__amessage__toa__variable,and__printthat__message.Then__changethe__valueof__thevariable__toa__new message,and__printthe__new message.Strings__Becausemost__programsdefine__andgather__somesort__ofdata__andthen__dosomething__usefulwith__it,it__helpsto__classifydifferent__typesof__data.The__firstdata__typewe__lllook__atis__the string.Strings__arequite__simpleat__first glance,but__youcan__usethem__inmany__different ways.A__stringis__aseries__of characters.Anything__insidequotes__isconsidered__astring__in Python,and__youcan__usesingle__ordouble__quotesaround__yourstrings__like this: "Thisis__a string." 'Thisis__alsoa__string.'This__flexibilityallows__youto__usequotes__andapostrophes__withinyour__strings: 'Itold__my friend, "Pythonis__myfavorite__language!"' "Thelanguage__'Python'is__namedafter__Monty Python,not__the snake." "Oneof__Python'sstrengths__isits__diverseand__supportive community."Let__sexplore__someof__theways__youcan__use strings. 20Chapter__2Changing__Casein__aString__withMethods__Oneof__thesimplest__tasksyou__cando__withstrings__ischange__thecase__ofthe__wordsin__a string.Look__atthe__following code,and__tryto__determinewhat__s happening: name.pyname__= "ada lovelace" print(name.title())Save__thisfile__as name.pyand__thenrun__it.You__shouldsee__this output:Ada__LovelaceIn__this example,the__variablename__refersto__thelowercase__string "ada lovelace".The__method title()appears__afterthe__variablein__the print() call.A__methodis__anaction__thatPython__canperform__ona__pieceof__data.The__dot (.)after__namein__name.title()tells__Pythonto__makethe__title()method__acton__thevariable__name.Every__methodis__followedby__aset__of parentheses,because__methodsoften__needadditional__informationto__dotheir__work.That__information__isprovided__insidethe__parentheses.The__title()function__doesnt__needany__additional information,so__itsparentheses__are empty.The__title()method__changeseach__wordto__title case,where__eachword__beginswith__acapital__letter.This__isuseful__becauseyou__lloften__wantto__thinkof__aname__asa__pieceof__information.For__example,you__mightwant__yourpro__gramto__recognizethe__inputvalues__Ada, ADA,and__adaas__thesame__name,and__displayall__ofthem__as Ada.Several__otheruseful__methodsare__availablefor__dealingwith__caseas__well.For__example,you__canchange__astring__toall__uppercaseor__alllowercase__letters__like this:name__= "Ada Lovelace" print(name.upper()) print(name.lower())This__willdisplay__the following:ADA__LOVELACEada__lovelaceThe__lower()method__isparticularly__usefulfor__storing data.You__typically__wont__wantto__trustthe__capitalizationthat__yourusers__provide,so__youll__convertstrings__tolowercase__beforestoring__them.Then__whenyou__wantto__displaythe__information,you__lluse__thecase__thatmakes__themost__sensefor__each string.Using__Variablesin__StringsIn__some situations,you__llwant__touse__avariable__svalue__insidea__string.For__example,you__mightwant__touse__twovariables__torepresent__afirst__nameand__Variablesand__SimpleData__Types 21a__last name, respectively,and__thencombine__thosevalues__todisplay__someone__sfull__name: full_name.pyfirst_name__= "ada"last_name__= "lovelace" 1full_name__= f"{first_name} {last_name}" print(full_name)To__inserta__variables__valueinto__a string,place__theletter__fimmediately__beforethe__openingquotation__mark 1.Put__bracesaround__thename__ornames__ofany__variableyou__wantto__useinside__the string.Python__willreplace__eachvariable__withits__valuewhen__thestring__is displayed.These__stringsare__called f-strings.The__fis__for format,because__Pythonformats__thestring__byreplacing__thename__ofany__variablein__braceswith__its value.The__outputfrom__theprevious__code is:ada__lovelaceYou__cando__alot__with f-strings.For__example,you__canuse__f-stringsto__composecomplete__messagesusing__theinformation__associatedwith__avari__able,as__shown here:first_name__= "ada"last_name__= "lovelace"full_name__= f"{first_name} {last_name}" 1 print(f"Hello, {full_name.title()}!")The__fullname__isused__ina__sentencethat__greetsthe__user 1,and__the title()method__changesthe__nameto__title case.This__codereturns__asimple__butnicely__formatted greeting: Hello,Ada__Lovelace!You__canalso__use f-stringsto__composea__message,and__thenassign__theentire__messageto__a variable:first_name__= "ada"last_name__= "lovelace"full_name__= f"{first_name} {last_name}" 1message__= f"Hello, {full_name.title()}!" 2 print(message)This__codedisplays__themessage__Hello,Ada__Lovelace!as__well,but__byassigning__themessage__toa__variable 1we__makethe__final print()call__muchsimpler__2.Adding__Whitespaceto__Stringswith__Tabsor__NewlinesIn__programming,whitespace__refersto__anynonprinting__characters,such__as spaces, tabs,and__end-of-line symbols.You__canuse__whitespaceto__organizeyour__outputso__its__easierfor__usersto__read. 22Chapter__2To__adda__tabto__your text,use__thecharacter__combination \t: >>> print("Python")Python__>>> print("\tPython")Python__Toadd__anewline__ina__string,use__thecharacter__combination \n: >>> print("Languages:\nPython\nC\nJavaScript") Languages:Python__CJavaScript__Youcan__alsocombine__tabsand__newlinesin__asingle__string.The__string "\n\t"tells__Pythonto__moveto__anew__line,and__startthe__nextline__witha__tab.The__followingexample__showshow__youcan__usea__one-linestring__togenerate__fourlines__of output: >>> print("Languages:\n\tPython\n\tC\n\tJavaScript") Languages:Python__CJavaScript__Newlinesand__tabswill__bevery__usefulin__thenext__two chapters,when__youstart__toproduce__manylines__ofoutput__fromjust__afew__linesof__code.Stripping__WhitespaceExtra__whitespacecan__beconfusing__inyour__programs.To__programmers, 'python'and__'python 'look__prettymuch__the same.But__toa__program,they__aretwo__different strings.Python__detectsthe__extraspace__in 'python 'and__considersit__significantunless__youtell__it otherwise.It__simportant__tothink__about whitespace,because__oftenyou__llwant__tocompare__twostrings__todetermine__whetherthey__arethe__same.For__example,one__importantinstance__mightinvolve__checkingpeople__susernames__whenthey__login__toa__website.Extra__whitespacecan__beconfusing__inmuch__simpler__situationsas__well. Fortunately,Python__makesit__easyto__eliminateextra__whitespacefrom__datathat__people enter.Python__canlook__forextra__whitespaceon__theright__andleft__sidesof__a string.To__ensurethat__nowhitespace__existsat__theright__sideof__a string,use__the rstrip() method: 1 >>>favorite_language__= 'python ' 2 >>>favorite_language__'python ' 3 >>> favorite_language.rstrip() 'python' 4 >>>favorite_language__'python 'Variables__andSimple__DataTypes__23The__valueassociated__withfavorite_language__1contains__extrawhitespace__atthe__endof__the string.When__youask__Pythonfor__thisvalue__ina__terminal__session,you__cansee__thespace__atthe__endof__thevalue__2.When__the rstrip()method__actson__thevariable__favorite_language 3,this__extraspace__is removed. However,it__isonly__removed temporarily.If__youask__forthe__valueof__favorite_language again,the__stringlooks__thesame__aswhen__itwas__entered,including__theextra__whitespace 4.To__removethe__whitespacefrom__thestring__permanently,you__haveto__associatethe__strippedvalue__withthe__variable name: >>>favorite_language__= 'python ' 1 >>>favorite_language__= favorite_language.rstrip() >>>favorite_language__'python'To__removethe__whitespacefrom__the string,you__stripthe__whitespacefrom__theright__sideof__thestring__andthen__associatethis__newvalue__withthe__originalvariable__1.Changing__avariable__svalue__isdone__oftenin__pro gramming.This__ishow__avariable__svalue__canbe__updatedas__aprogram__isexecuted__orin__responseto__user input.You__canalso__stripwhitespace__fromthe__leftside__ofa__stringusing__the lstrip() method,or__fromboth__sidesat__onceusing__strip(): 1 >>>favorite_language__= 'python__' 2 >>> favorite_language.rstrip() ' python' 3 >>> favorite_language.lstrip() 'python ' 4 >>> favorite_language.strip() 'python'In__this example,we__startwith__avalue__thathas__whitespaceat__thebegin__ningand__theend__1.We__thenremove__theextra__spacefrom__theright__side 2,from__theleft__side 3,and__fromboth__sides 4.Experimenting__withthese__stripping__functionscan__helpyou__becomefamiliar__withmanipulating__strings.In__thereal__world,these__strippingfunctions__areused__mostoften__toclean__upuser__inputbefore__its__storedin__a program.Removing__PrefixesWhen__workingwith__strings,another__commontask__isto__removea__prefix.Consider__aURL__withthe__commonprefix__https://.We__wantto__removethis__prefix,so__wecan__focuson__justthe__partof__theURL__thatusers__needto__enterinto__anaddress__bar.Here__show__todo__that: >>>nostarch_url__= 'https://nostarch.com' >>> nostarch_url.removeprefix('https://') 'nostarch.com' 24Chapter__2Enter__thename__ofthe__variablefollowed__bya__dot,and__thenthe__method removeprefix().Inside__the parentheses,enter__theprefix__youwant__toremove__fromthe__original string.Like__themethods__forremoving__whitespace, removeprefix()leaves__theoriginal__string unchanged.If__youwant__tokeep__thenew__valuewith__thepre__fix removed,either__reassignit__tothe__originalvariable__orassign__itto__anew__variable: >>>simple_url__= nostarch_url.removeprefix('https://')When__yousee__aURL__inan__addressbar__andthe__https://part__isnt__shown,the__browseris__probablyusing__amethod__like removeprefix()behind__the scenes.Avoiding__SyntaxErrors__withStrings__Onekind__oferror__thatyou__mightsee__withsome__regularityis__asyntax__error.A__syntaxerror__occurswhen__Pythondoesn__trecognize__asection__ofyour__program__asvalid__Python code.For__example,if__youuse__anapostrophe__withinsingle__quotes,you__llproduce__an error.This__happensbecause__Pythoninter__pretseverything__betweenthe__firstsingle__quoteand__theapostrophe__asa__string.It__thentries__tointerpret__therest__ofthe__textas__Python code,which__causes errors.Here__show__touse__singleand__doublequotes__correctly.Save__thisprogram__as apostrophe.pyand__thenrun__it: apostrophe.pymessage__= "Oneof__Python'sstrengths__isits__diverse community." print(message)The__apostropheappears__insidea__setof__double quotes,so__thePython__interpreterhas__notrouble__readingthe__string correctly:One__of Python'sstrengths__isits__diverse community. However,if__youuse__single quotes,Python__cant__identifywhere__thestring__should end:message__= 'Oneof__Python'sstrengths__isits__diverse community.' print(message)You__llsee__thefollowing__output:File__"apostrophe.py",line__1message__= 'Oneof__Python'sstrengths__isits__diverse community.' 1 ^ SyntaxError:unterminated__stringliteral__(detectedat__line 1)In__theoutput__youcan__seethat__theerror__occursright__afterthe__finalsingle__quote 1.This__syntaxerror__indicatesthat__theinterpreter__doesnt__recognizeVariables__andSimple__DataTypes__25something__inthe__codeas__validPython__code,and__itthinks__theproblem__mightbe__astring__thats__notquoted__correctly.Errors__cancome__froma__varietyof__sources,and__Ill__pointout__somecommon__onesas__they arise.You__mightsee__syntaxerrors__oftenas__youlearn__towrite__properPython__code.Syntax__errorsare__alsothe__leastspecific__kindof__error,so__theycan__bedifficult__andfrustrat__ingto__identifyand__correct.If__youget__stuckon__aparticularly__stubborn error,see__thesuggestions__inAppendix__C.NOTE__Youreditor__ssyntax__highlightingfeature__shouldhelp__youspot__somesyntax__errorsquickly__asyou__writeyour__programs.If__yousee__Pythoncode__highlightedas__ifit__sEnglish__orEnglish__highlightedas__ifit__sPython__code,you__probablyhave__amismatched__quotationmark__somewherein__your file.TRY__ITYOURSELF__Saveeach__ofthe__followingexercises__asa__separate file,with__aname__likename___cases.py.If__youget__stuck,take__abreak__orsee__thesuggestions__inAppendix__C. 2-3.Personal__Message:Use__avariable__torepresent__aperson__s name,and__printa__messageto__that person.Your__messageshould__be simple,such__as,Hello__Eric,would__youlike__tolearn__somePython__today? 2-4.Name__Cases:Use__avariable__torepresent__aperson__s name,and__thenprint__thatperson__sname__in lowercase, uppercase,and__title case. 2-5.Famous__Quote:Find__aquote__froma__famousperson__you admire.Print__thequote__andthe__nameof__its author.Your__outputshould__looksomething__likethe__following,including__thequotation__marks:Albert__Einsteinonce__said,A__personwho__nevermade__amistake__nevertried__anything new. 2-6.Famous__Quote 2:Repeat__Exercise 2-5,but__this time,represent__thefamous__persons__nameusing__avariable__called famous_person.Then__composeyour__message__andrepresent__itwith__anew__variablecalled__message.Print__your message. 2-7.Stripping__Names:Use__avariable__torepresent__aperson__s name,and__includesome__whitespacecharacters__atthe__beginningand__endof__the name.Make__sureyou__useeach__character combination, "\t"and__"\n",at__least once.Print__thename__once,so__thewhitespace__aroundthe__nameis__displayed.Then__printthe__nameusing__eachof__thethree__stripping functions, lstrip(), rstrip(),and__strip(). 2-8.File__Extensions:Python__hasa__removesuffix()method__thatworks__exactlylike__removeprefix().Assign__thevalue__'python_notes.txt'to__avariable__called filename.Then__usethe__removesuffix()method__todisplay__thefilename__withoutthe__file extension,like__somefile__browsers do. 26Chapter__2Numbers__Numbersare__usedquite__oftenin__programmingto__keepscore__in games,represent__datain__visualizations,store__informationin__web applications,and__so on.Python__treatsnumbers__inseveral__different ways,depending__onhow__theyre__being used.Let__sfirst__lookat__howPython__manages integers,because__theyre__thesimplest__towork__with.Integers__Youcan__add (+),subtract__(-),multiply__(*),and__divide (/)integers__in Python. >>> 2 + 3 5 >>> 3 - 2 1 >>> 2 * 3 6 >>> 3 / 2 1.5In__aterminal__session,Python__simplyreturns__theresult__ofthe__operation.Python__usestwo__multiplicationsymbols__torepresent__exponents: >>> 3 ** 2 9 >>> 3 ** 3 27 >>> 10 ** 6 1000000Python__supportsthe__orderof__operations too,so__youcan__usemultiple__operationsin__one expression.You__canalso__useparentheses__tomodify__theorder__ofoperations__soPython__canevaluate__yourexpression__inthe__orderyou__specify.For__example: >>> 2 + 3*4 14 >>> (2 + 3) * 4 20The__spacingin__theseexamples__hasno__effecton__howPython__evaluatesthe__expressions;it__simplyhelps__youmore__quicklyspot__theoperations__thathave__prioritywhen__youre__readingthrough__the code.Floats__Pythoncalls__anynumber__witha__decimalpoint__a float.This__termis__usedin__mostprogramming__languages,and__itrefers__tothe__factthat__adecimal__pointVariables__andSimple__DataTypes__27can__appearat__anyposition__ina__number.Every__programminglanguage__mustbe__carefullydesigned__toproperly__managedecimal__numbersso__numbersbehave__appropriately,no__matterwhere__thedecimal__point appears.For__themost__part,you__canuse__floatswithout__worryingabout__howthey__behave.Simply__enterthe__numbersyou__wantto__use,and__Pythonwill__mostlikely__dowhat__you expect: >>> 0.1 + 0.1 0.2 >>> 0.2 + 0.2 0.4 >>> 2 * 0.1 0.2 >>> 2 * 0.2 0.4 However,be__awarethat__youcan__sometimesget__anarbitrary__numberof__decimalplaces__inyour__answer: >>> 0.2 + 0.1 0.30000000000000004 >>> 3 * 0.1 0.30000000000000004This__happensin__alllanguages__andis__oflittle__concern.Python__triesto__finda__wayto__representthe__resultas__preciselyas__possible,which__issometimes__difficultgiven__howcomputers__haveto__representnumbers__internally.Just__ignorethe__extradecimal__placesfor__now;you__lllearn__waysto__dealwith__theextra__placeswhen__youneed__toin__theprojects__inPart__II.Integers__andFloats__Whenyou__divideany__two numbers,even__ifthey__areintegers__thatresult__ina__whole number,you__llalways__geta__float: >>> 4/2 2.0If__youmix__aninteger__anda__floatin__anyother__operation,you__llget__afloat__as well: >>> 1 + 2.0 3.0 >>> 2 * 3.0 6.0 >>> 3.0 ** 2 9.0 28Chapter__2Python__defaultsto__afloat__inany__operationthat__usesa__float,even__ifthe__outputis__awhole__number.Underscores__inNumbers__Whenyou__rewriting__long numbers,you__cangroup__digitsusing__underscoresto__makelarge__numbersmore__readable: >>>universe_age__= 14_000_000_000When__youprint__anumber__thatwas__definedusing__underscores,Python__printsonly__the digits: >>> print(universe_age) 14000000000Python__ignoresthe__underscoreswhen__storingthese__kindsof__values.Even__ifyou__dont__groupthe__digitsin__threes,the__valuewill__stillbe__unaf fected.To__Python, 1000is__thesame__as 1_000,which__isthe__sameas__10_00.This__featureworks__forboth__integersand__floats.Multiple__AssignmentYou__canassign__valuesto__morethan__onevariable__usingjust__asingle__lineof__code.This__canhelp__shortenyour__programsand__makethem__easierto__read;you__lluse__thistechnique__mostoften__wheninitializing__aset__of numbers.For__example,here__show__youcan__initializethe__variables x, y,and__zto__zero: >>> x, y,z__= 0, 0, 0You__needto__separatethe__variablenames__with commas,and__dothe__samewith__the values,and__Pythonwill__assigneach__valueto__itsrespective__variable.As__longas__thenumber__ofvalues__matchesthe__numberof__variables,Python__willmatch__themup__correctly.Constants__Aconstant__isa__variablewhose__valuestays__thesame__throughoutthe__lifeof__a program.Python__doesnt__have built-inconstant__types,but__Pythonprogram__mersuse__allcapital__lettersto__indicatea__variableshould__betreated__asa__constant__andnever__be changed:MAX_CONNECTIONS__= 5000When__youwant__totreat__avariable__asa__constantin__your code,write__thename__ofthe__variablein__allcapital__letters.Variables__andSimple__DataTypes__29TRY__ITYOURSELF__2-9.Number__Eight:Write__addition, subtraction, multiplication,and__divisionoperations__thateach__resultin__thenumber__8.Be__sureto__encloseyour__operationsin__print()calls__tosee__the results.You__shouldcreate__fourlines__thatlook__like this: print(5+3)Your__outputshould__befour__lines,with__thenumber__8appearing__onceon__each line. 2-10.Favorite__Number:Use__avariable__torepresent__yourfavorite__number. Then,using__that variable,create__amessage__thatreveals__yourfavorite__number.Print__that message.Comments__Commentsare__anextremely__usefulfeature__inmost__programminglan__guages.Everything__youve__writtenin__yourprograms__sofar__isPython__code.As__yourprograms__becomelonger__andmore__complicated,you__shouldadd__noteswithin__yourprograms__thatdescribe__youroverall__approachto__theproblem__youre__solving.A__commentallows__youto__writenotes__inyour__spoken language,within__your programs.How__DoYou__Write Comments?In__Python,the__hashmark__(#)indicates__a comment.Anything__followinga__hashmark__inyour__codeis__ignoredby__thePython__interpreter.For__example: comment.py #Say__helloto__everyone. print("HelloPython__people!")Python__ignoresthe__firstline__andexecutes__thesecond__line.Hello__Python people!What__Kindsof__CommentsShould__You Write?The__mainreason__towrite__commentsis__toexplain__whatyour__codeis__supposed__todo__andhow__youare__makingit__work.When__youre__inthe__middleof__workingon__a project,you__understandhow__allof__thepieces__fit together.But__whenyou__returnto__aproject__aftersome__time away,you__lllikely__have 30Chapter__2forgotten__someof__the details.You__canalways__studyyour__codefor__awhile__andfigure__outhow__segmentswere__supposedto__work,but__writinggood__comments__cansave__youtime__bysummarizing__youroverall__approach clearly.If__youwant__tobecome__aprofessional__programmeror__collaboratewith__other programmers,you__shouldwrite__meaningful comments. Today,most__softwareis__written collaboratively,whether__bya__groupof__employeesat__onecompany__ora__groupof__peopleworking__togetheron__anopen__source project.Skilled__programmersexpect__tosee__commentsin__code,so__its__bestto__startadding__descriptivecomments__toyour__programs now.Writing__clear,concise__commentsin__yourcode__isone__ofthe__mostbeneficial__habitsyou__canform__asa__new programmer.When__youre__decidingwhether__towrite__a comment,ask__yourselfif__youhad__toconsider__severalapproaches__beforecoming__upwith__areasonable__wayto__makesomething__work;if__so,write__acomment__aboutyour__solution.It__smuch__easierto__deleteextra__commentslater__thanto__goback__andwrite__comments__fora__sparselycommented__program.From__now on,I__lluse__commentsin__examplesthroughout__thisbook__tohelp__explainsections__of code.TRY__ITYOURSELF__2-11.Adding__Comments:Choose__twoof__theprograms__youve__written,and__addat__leastone__commentto__each.If__youdon__thave__anythingspecific__towrite__becauseyour__programsare__toosimple__atthis__point,just__addyour__nameand__thecurrent__dateat__thetop__ofeach__program file.Then__writeone__sentencedescribing__whatthe__program does.The__Zenof__PythonExperienced__Pythonprogrammers__willencourage__youto__avoidcomplexity__andaim__forsimplicity__whenever possible.The__Pythoncommunity__sphiloso__phyis__containedin__TheZen__ofPython__byTim__Peters.You__canaccess__thisbrief__setof__principlesfor__writinggood__Pythoncode__byentering__importthis__intoyour__interpreter.I__wont__reproducethe__entireZen__ofPython__here,but__Ill__sharea__fewlines__tohelp__youunderstand__whythey__shouldbe__importantto__youas__abeginning__Python programmer. >>>import__thisThe__Zenof__Python,by__TimPeters__Beautifulis__betterthan__ugly.Python__programmersembrace__thenotion__thatcode__canbe__beautifuland__elegant.In__programming,people__solve problems.Programmers__havealways__respected well-designed, efficient,and__evenbeautiful__solutionsto__problems.As__youlearn__moreabout__Pythonand__useit__towrite__more code,Variables__andSimple__DataTypes__31someone__mightlook__overyour__shoulderone__dayand__say, Wow,that__ssome__beautiful code!Simple__isbetter__than complex.If__youhave__achoice__betweena__simpleand__acomplex__solution,and__both work,use__thesimple__solution.Your__codewill__beeasier__to maintain,and__itwill__beeasier__foryou__andothers__tobuild__onthat__codelater__on.Complex__isbetter__than complicated.Real__lifeis__messy,and__sometimesa__simplesolution__toa__problemis__unat tainable.In__that case,use__thesimplest__solutionthat__works.Readability__counts.Even__whenyour__codeis__complex,aim__tomake__it readable.When__youre__workingon__aproject__thatinvolves__complex coding,focus__onwriting__informative__commentsfor__that code.There__shouldbe__one--and__preferablyonly__one --obviousway__todo__it.If__twoPython__programmersare__askedto__solvethe__same problem,they__shouldcome__upwith__fairlycompatible__solutions.This__isnot__tosay__theres__noroom__forcreativity__in programming.On__the contrary,there__isplenty__ofroom__for creativity! However,much__ofprogramming__consistsof__using small,common__approachesto__simplesituations__withina__larger,more__creative project.The__nutsand__boltsof__yourprograms__shouldmake__senseto__otherPython__programmers.Now__isbetter__than never.You__couldspend__therest__ofyour__lifelearning__allthe__intricaciesof__Pythonand__ofprogramming__in general,but__thenyou__dnever__completeany__projects.Don__ttry__towrite__perfect code;write__codethat__works,and__thendecide__whetherto__improveyour__codefor__thatproject__ormove__onto__something__new.As__youcontinue__tothe__nextchapter__andstart__digginginto__moreinvolved__topics,try__tokeep__thisphilosophy__ofsimplicity__andclarity__in mind.Experienced__programmerswill__respectyour__codemore__andwill__behappy__togive__youfeedback__andcollaborate__withyou__oninteresting__projects.TRY__ITYOURSELF__2-12.Zen__of Python:Enter__importthis__intoa__Pythonterminal__sessionand__skimthrough__theadditional__principles. 32Chapter__2Summary__Inthis__chapteryou__learnedhow__towork__with variables.You__learnedto__usedescriptive__variablenames__andresolve__nameerrors__andsyntax__errorswhen__they arise.You__learnedwhat__stringsare__andhow__todisplay__themusing__low ercase, uppercase,and__title case.You__startedusing__whitespaceto__organizeoutput__neatly,and__youlearned__howto__removeunneeded__elementsfrom__a string.You__startedworking__withintegers__and floats,and__youlearned__someof__theways__youcan__workwith__numerical data.You__alsolearned__towrite__explanatorycomments__tomake__yourcode__easierfor__youand__othersto__read. Finally,you__readabout__thephilosophy__ofkeeping__yourcode__assimple__as possible,whenever__possible.In__Chapter 3,you__lllearn__howto__storecollections__ofinformation__indata__structurescalled__lists.You__llalso__learnhow__towork__througha__list,manipulating__anyinformation__inthat__list. 3IN__TROD__UCING__LISTSIn__thischapter__andthe__nextyou__lllearn__whatlists__areand__howto__startworking__withthe__elementsin__a list.Lists__allowyou__tostore__setsof__informationin__one place,whether__youhave__justa__fewitems__ormillions__of items.Lists__areone__ofPython__smost__powerfulfeatures__readilyacces__sibleto__new programmers,and__theytie__togethermany__importantconcepts__in programming.What__Isa__List?A__listis__acollection__ofitems__ina__particular order.You__canmake__alist__thatincludes__theletters__ofthe__alphabet,the__digitsfrom__0to__9,or__thenames__ofall__thepeople__inyour__family.You__canput__anythingyou__wantinto__a list,and__theitems__inyour__listdon__thave__tobe__relatedin__anyparticular__way.Because__34Chapter__3a__listusually__containsmore__thanone__element,it__sa__goodidea__tomake__thename__ofyour__list plural,such__as letters, digits,or__names.In__Python,square__brackets ([])indicate__a list,and__individualelements__inthe__listare__separatedby__commas.Here__sa__simpleexample__ofa__listthat__containsa__fewkinds__of bicycles: bicycles.pybicycles__= ['trek', 'cannondale', 'redline', 'specialized'] print(bicycles)If__youask__Pythonto__printa__list,Python__returnsits__representationof__the list,including__thesquare__brackets: ['trek', 'cannondale', 'redline', 'specialized']Because__thisisn__tthe__outputyou__wantyour__usersto__see,let__slearn__howto__accessthe__individualitems__ina__list.Accessing__Elementsin__aList__Listsare__ordered collections,so__youcan__accessany__elementin__alist__bytelling__Pythonthe__position,or__index,of__theitem__desired.To__accessan__element__ina__list,write__thename__ofthe__listfollowed__bythe__indexof__theitem__enclosedin__square brackets.For__example,let__spull__outthe__firstbicycle__inthe__list bicycles:bicycles__= ['trek', 'cannondale', 'redline', 'specialized'] print(bicycles[0])When__weask__fora__singleitem__froma__list,Python__returnsjust__thatele__mentwithout__square brackets:trek__Thisis__theresult__youwant__yourusers__to see: clean,neatly__formatted output.You__canalso__usethe__stringmethods__fromChapter__2on__anyelement__inthis__list.For__example,you__canformat__theelement__'trek'to__lookmore__presentable__byusing__the title() method:bicycles__= ['trek', 'cannondale', 'redline', 'specialized'] print(bicycles[0].title())This__exampleproduces__thesame__outputas__thepreceding__example,except__'Trek'is__capitalized.Index__PositionsStart__at 0,Not__1Python__considersthe__firstitem__ina__listto__beat__position 0,not__position 1.This__istrue__ofmost__programming languages,and__thereason__hasto__dowith__IntroducingLists__35how__thelist__operationsare__implementedat__alower__level.If__youre__receivingunexpected__results,ask__yourselfif__youre__makinga__simplebut__common off- by-one error.The__seconditem__ina__listhas__anindex__of 1.Using__thiscounting__sys tem,you__canget__anyelement__youwant__froma__listby__subtractingone__fromits__positionin__the list.For__instance,to__accessthe__fourthitem__ina__list,you__requestthe__itemat__index 3.The__followingasks__forthe__bicyclesat__index 1and__index 3:bicycles__= ['trek', 'cannondale', 'redline', 'specialized'] print(bicycles[1]) print(bicycles[3])This__codereturns__thesecond__andfourth__bicyclesin__the list:cannondale__specializedPython__hasa__specialsyntax__foraccessing__thelast__elementin__a list.If__youask__forthe__itemat__index -1,Python__alwaysreturns__thelast__itemin__the list:bicycles__= ['trek', 'cannondale', 'redline', 'specialized'] print(bicycles[-1])This__codereturns__thevalue__'specialized'.This__syntaxis__quite useful,because__youll__oftenwant__toaccess__thelast__itemsin__alist__withoutknowing__exactlyhow__longthe__list is.This__conventionextends__toother__negativeindex__valuesas__well.The__index -2returns__thesecond__itemfrom__theend__ofthe__list,the__index -3returns__thethird__itemfrom__the end,and__so forth.Using__IndividualValues__froma__ListYou__canuse__individualvalues__froma__listjust__asyou__wouldany__othervari__able.For__example,you__canuse__f-stringsto__createa__messagebased__ona__valuefrom__a list.Let__stry__pullingthe__firstbicycle__fromthe__listand__composinga__messageusing__that value:bicycles__= ['trek', 'cannondale', 'redline', 'specialized']message__= f"Myfirst__bicyclewas__a {bicycles[0].title()}." print(message)We__builda__sentenceusing__thevalue__at bicycles[0]and__assignit__tothe__variable message.The__outputis__asimple__sentenceabout__thefirst__bicyclein__the list:My__firstbicycle__wasa__Trek. 36Chapter__3TRY__ITYOURSELF__Trythese__shortprograms__toget__somefirsthand__experiencewith__Pythons__lists.You__mightwant__tocreate__anew__folderfor__eachchapter__s exercises,to__keepthem__organized. 3-1. Names:Store__thenames__ofa__fewof__yourfriends__ina__listcalled__names.Print__eachperson__sname__byaccessing__eachelement__inthe__list,one__ata__time. 3-2. Greetings:Start__withthe__listyou__usedin__Exercise 3-1,but__insteadof__justprinting__eachperson__s name,print__amessage__to them.The__textof__eachmes__sageshould__bethe__same,but__eachmessage__shouldbe__personalizedwith__theperson__s name. 3-3.Your__Own List:Think__ofyour__favoritemode__of transportation,such__asa__motorcycleor__a car,and__makea__listthat__storesseveral__examples.Use__yourlist__toprint__aseries__ofstatements__aboutthese__items,such__asI__wouldlike__toown__aHonda__motorcycle. Modifying, Adding,and__RemovingElements__Mostlists__youcreate__willbe__dynamic,meaning__youll__builda__listand__thenadd__andremove__elementsfrom__itas__yourprogram__runsits__course.For__example,you__mightcreate__agame__inwhich__aplayer__hasto__shootaliens__outof__the sky.You__couldstore__theinitial__setof__aliensin__alist__andthen__removean__alienfrom__thelist__eachtime__oneis__shot down.Each__timea__newalien__appearson__the screen,you__addit__tothe__list.Your__listof__alienswill__increaseand__decreasein__lengththroughout__thecourse__ofthe__game.Modifying__Elementsin__aList__Thesyntax__formodifying__anelement__issimilar__tothe__syntaxfor__accessingan__elementin__a list.To__changean__element,use__thename__ofthe__listfollowed__bythe__indexof__theelement__youwant__to change,and__thenprovide__thenew__valueyou__wantthat__itemto__have.For__example,say__wehave__alist__ofmotorcycles__andthe__firstitem__inthe__listis__'honda'.We__canchange__thevalue__ofthis__firstitem__afterthe__listhas__been created: motorcycles.pymotorcycles__= ['honda', 'yamaha', 'suzuki'] print(motorcycles) motorcycles[0] = 'ducati' print(motorcycles)Introducing__Lists 37Here__wedefine__thelist__motorcycles,with__'honda'as__thefirst__element.Then__wechange__thevalue__ofthe__firstitem__to 'ducati'.The__outputshows__thatthe__firstitem__hasbeen__changed,while__therest__ofthe__liststays__the same: ['honda', 'yamaha', 'suzuki'] ['ducati', 'yamaha', 'suzuki']You__canchange__thevalue__ofany__itemin__a list,not__justthe__first item.Adding__Elementsto__aList__Youmight__wantto__adda__newelement__toa__listfor__many reasons.For__example,you__mightwant__tomake__newaliens__appearin__a game,add__newdata__toa__visualization,or__addnew__registeredusers__toa__websiteyou__ve built.Python__providesseveral__waysto__addnew__datato__existing lists.Appending__Elementsto__theEnd__ofa__ListThe__simplestway__toadd__anew__elementto__alist__isto__appendthe__itemto__the list.When__youappend__anitem__toa__list,the__newelement__isadded__tothe__endof__the list.Using__thesame__listwe__hadin__theprevious__example,we__lladd__thenew__element 'ducati'to__theend__ofthe__list:motorcycles__= ['honda', 'yamaha', 'suzuki'] print(motorcycles) motorcycles.append('ducati') print(motorcycles)Here__the append()method__adds 'ducati'to__theend__ofthe__list,without__affectingany__ofthe__otherelements__inthe__list: ['honda', 'yamaha', 'suzuki'] ['honda', 'yamaha', 'suzuki', 'ducati']The__append()method__makesit__easyto__buildlists__dynamically.For__example,you__canstart__withan__emptylist__andthen__additems__tothe__listusing__aseries__of append() calls.Using__anempty__list,let__sadd__theelements__'honda', 'yamaha',and__'suzuki'to__the list:motorcycles__= [] motorcycles.append('honda') motorcycles.append('yamaha') motorcycles.append('suzuki') print(motorcycles)The__resultinglist__looksexactly__thesame__asthe__listsin__theprevious__examples: ['honda', 'yamaha', 'suzuki'] 38Chapter__3Building__liststhis__wayis__very common,because__youoften__wont__knowthe__datayour__userswant__tostore__ina__programuntil__afterthe__programis__running.To__putyour__usersin__control,start__bydefining__anempty__listthat__willhold__theusers__values.Then__appendeach__newvalue__providedto__thelist__youjust__created.Inserting__Elementsinto__aList__Youcan__adda__newelement__atany__positionin__yourlist__byusing__the insert() method.You__dothis__byspecifying__theindex__ofthe__newelement__andthe__valueof__thenew__item:motorcycles__= ['honda', 'yamaha', 'suzuki'] motorcycles.insert(0, 'ducati') print(motorcycles)In__this example,we__insertthe__value 'ducati'at__thebeginning__ofthe__list.The__insert()method__opensa__spaceat__position 0and__storesthe__value 'ducati'at__that location: ['ducati', 'honda', 'yamaha', 'suzuki']This__operationshifts__everyother__valuein__thelist__oneposition__tothe__right.Removing__Elementsfrom__aList__Often,you__llwant__toremove__anitem__ora__setof__itemsfrom__a list.For__example,when__aplayer__shootsdown__analien__fromthe__sky,you__llmost__likelywant__toremove__itfrom__thelist__ofactive__aliens.Or__whena__userdecides__tocancel__theiraccount__ona__webapplication__you created,you__llwant__toremove__thatuser__fromthe__listof__active users.You__canremove__anitem__accordingto__itsposition__inthe__listor__accordingto__its value.Removing__anItem__Usingthe__delStatement__Ifyou__knowthe__positionof__theitem__youwant__toremove__froma__list,you__canuse__thedel__statement:motorcycles__= ['honda', 'yamaha', 'suzuki'] print(motorcycles)del__motorcycles[0] print(motorcycles)Here__weuse__thedel__statementto__removethe__first item, 'honda',from__thelist__of motorcycles: ['honda', 'yamaha', 'suzuki'] ['yamaha', 'suzuki']Introducing__Lists 39You__canremove__anitem__fromany__positionin__alist__usingthe__delstate__mentif__youknow__its index.For__example,here__show__toremove__thesecond__item, 'yamaha',from__the list:motorcycles__= ['honda', 'yamaha', 'suzuki'] print(motorcycles)del__motorcycles[1] print(motorcycles)The__secondmotorcycle__isdeleted__fromthe__list: ['honda', 'yamaha', 'suzuki'] ['honda', 'suzuki']In__both examples,you__canno__longeraccess__thevalue__thatwas__removedfrom__thelist__afterthe__delstatement__is used.Removing__anItem__Usingthe__pop()Method__Sometimesyou__llwant__touse__thevalue__ofan__itemafter__youremove__itfrom__a list.For__example,you__mightwant__toget__thex__andy__positionof__analien__thatwas__justshot__down,so__youcan__drawan__explosionat__that position.In__aweb__application,you__mightwant__toremove__auser__froma__listof__activemembers__andthen__addthat__userto__alist__ofinactive__members.The__pop()method__removesthe__lastitem__ina__list,but__itlets__youwork__withthat__itemafter__removing it.The__termpop__comesfrom__thinkingof__alist__asa__stackof__itemsand__poppingone__itemoff__thetop__ofthe__stack.In__this analogy,the__topof__astack__correspondsto__theend__ofa__list.Let__spop__amotorcycle__fromthe__listof__motorcycles: 1motorcycles__= ['honda', 'yamaha', 'suzuki'] print(motorcycles) 2popped_motorcycle__= motorcycles.pop() 3 print(motorcycles) 4 print(popped_motorcycle)We__startby__definingand__printingthe__listmotorcycles__1.Then__wepop__avalue__fromthe__list,and__assignthat__valueto__thevariable__popped_motorcycle 2.We__printthe__list 3to__showthat__avalue__hasbeen__removedfrom__the list.Then__weprint__thepopped__value 4to__provethat__westill__haveaccess__tothe__valuethat__was removed.The__outputshows__thatthe__value 'suzuki'was__removedfrom__theend__ofthe__listand__isnow__assignedto__thevariable__popped_motorcycle: ['honda', 'yamaha', 'suzuki'] ['honda', 'yamaha']suzuki__40Chapter__3How__mightthis__pop()method__be useful?Imagine__thatthe__motorcyclesin__thelist__arestored__inchronological__order,according__towhen__weowned__them.If__thisis__the case,we__canuse__the pop()method__toprint__astatement__aboutthe__lastmotorcycle__we bought:motorcycles__= ['honda', 'yamaha', 'suzuki']last_owned__= motorcycles.pop() print(f"Thelast__motorcycleI__ownedwas__a {last_owned.title()}.")The__outputis__asimple__sentenceabout__themost__recentmotorcycle__we owned:The__lastmotorcycle__Iowned__wasa__Suzuki.Popping__Itemsfrom__AnyPosition__ina__ListYou__canuse__pop()to__removean__itemfrom__anyposition__ina__listby__includingthe__indexof__theitem__youwant__toremove__in parentheses:motorcycles__= ['honda', 'yamaha', 'suzuki']first_owned__= motorcycles.pop(0) print(f"Thefirst__motorcycleI__ownedwas__a {first_owned.title()}.")We__startby__poppingthe__firstmotorcycle__inthe__list,and__thenwe__printa__messageabout__that motorcycle.The__outputis__asimple__sentencedescribing__thefirst__motorcycleI__ever owned:The__firstmotorcycle__Iowned__wasa__Honda.Remember__thateach__timeyou__use pop(),the__itemyou__workwith__isno__longerstored__inthe__list.If__youre__unsurewhether__touse__thedel__statementor__the pop() method,here__sa__simpleway__to decide:when__youwant__todelete__anitem__froma__listand__notuse__thatitem__inany__way,use__thedel__statement;if__youwant__touse__anitem__asyou__remove it,use__the pop() method.Removing__anItem__byValue__Sometimesyou__wont__knowthe__positionof__thevalue__youwant__toremove__froma__list.If__youonly__knowthe__valueof__theitem__youwant__to remove,you__canuse__the remove() method.For__example,say__wewant__toremove__thevalue__'ducati'from__thelist__of motorcycles:motorcycles__= ['honda', 'yamaha', 'suzuki', 'ducati'] print(motorcycles) motorcycles.remove('ducati') print(motorcycles)Introducing__Lists 41Here__the remove()method__tellsPython__tofigure__outwhere__'ducati'appears__inthe__listand__removethat__element: ['honda', 'yamaha', 'suzuki', 'ducati'] ['honda', 'yamaha', 'suzuki']You__canalso__usethe__remove()method__towork__witha__valuethat__sbeing__removedfrom__a list.Let__sremove__thevalue__'ducati'and__printa__reasonfor__removingit__fromthe__list: 1motorcycles__= ['honda', 'yamaha', 'suzuki', 'ducati'] print(motorcycles) 2too_expensive__= 'ducati' 3 motorcycles.remove(too_expensive) print(motorcycles) 4 print(f"\nA {too_expensive.title()}is__tooexpensive__for me.")After__definingthe__list 1,we__assignthe__value 'ducati'to__avariable__calledtoo_expensive__2.We__thenuse__thisvariable__totell__Pythonwhich__valueto__removefrom__thelist__3.The__value 'ducati'has__beenremoved__fromthe__list 4but__isstill__accessiblethrough__thevariable__too_expensive,allow__ingus__toprint__astatement__aboutwhy__weremoved__'ducati'from__thelist__of motorcycles: ['honda', 'yamaha', 'suzuki', 'ducati'] ['honda', 'yamaha', 'suzuki']A__Ducatiis__tooexpensive__for me.NOTE__The remove()method__deletesonly__thefirst__occurrenceof__thevalue__you specify.If__theres__apossibility__thevalue__appearsmore__thanonce__inthe__list,you__llneed__touse__aloop__tomake__sureall__occurrencesof__thevalue__are removed.You__lllearn__howto__dothis__inChapter__7.TRY__ITYOURSELF__Thefollowing__exercisesare__abit__morecomplex__thanthose__inChapter__2,but__theygive__youan__opportunityto__uselists__inall__ofthe__ways described. 3-4.Guest__List:If__youcould__invite anyone,living__or deceased,to__dinner,who__wouldyou__invite?Make__alist__thatincludes__atleast__threepeople__youd__liketo__inviteto__dinner.Then__useyour__listto__printa__messageto__each person,inviting__themto__dinner. (continued) 42Chapter__3 3-5.Changing__Guest List:You__justheard__thatone__ofyour__guestscan__tmake__the dinner,so__youneed__tosend__outa__newset__of invitations.You__llhave__tothink__ofsomeone__elseto__invite.Start__withyour__programfrom__Exercise 3-4.Add__a print()call__atthe__endof__your program,stating__thename__ofthe__guestwho__cant__make it.Modify__your list,replacing__thename__ofthe__guestwho__cant__makeit__withthe__nameof__thenew__personyou__are inviting.Print__asecond__setof__invitation messages,one__foreach__personwho__isstill__inyour__list. 3-6.More__Guests:You__justfound__abigger__dinner table,so__nowmore__spaceis__available.Think__ofthree__moreguests__toinvite__to dinner.Start__withyour__programfrom__Exercise 3-4or__3-5.Add__a print()call__tothe__endof__your program,informing__peoplethat__youfound__abigger__table.Use__insert()to__addone__newguest__tothe__beginningof__your list.Use__insert()to__addone__newguest__tothe__middleof__your list.Use__append()to__addone__newguest__tothe__endof__your list.Print__anew__setof__invitation messages,one__foreach__personin__your list. 3-7.Shrinking__Guest List:You__justfound__outthat__yournew__dinnertable__wont__arrivein__timefor__the dinner,and__nowyou__havespace__foronly__two guests.Start__withyour__programfrom__Exercise 3-6.Add__anew__linethat__printsa__messagesaying__thatyou__caninvite__onlytwo__peoplefor__dinner.Use__pop()to__removeguests__fromyour__listone__ata__timeuntil__onlytwo__namesremain__inyour__list.Each__timeyou__popa__namefrom__your list,print__amessage__tothat__personletting__themknow__youre__sorryyou__cant__invitethem__to dinner.Print__amessage__toeach__ofthe__twopeople__stillon__your list,letting__themknow__theyre__still invited.Use__delto__removethe__lasttwo__namesfrom__your list,so__youhave__anempty__list.Print__yourlist__tomake__sureyou__actuallyhave__anempty__listat__theend__ofyour__program.Organizing__aList__Often,your__listswill__becreated__inan__unpredictable order,because__youcan__talways__controlthe__orderin__whichyour__usersprovide__their data.Although__thisis__unavoidablein__most circumstances,you__llfrequently__wantto__presentyour__informationin__aparticular__order.Sometimes__youll__wantIntroducing__Lists 43to__preservethe__originalorder__ofyour__list,and__othertimes__youll__wantto__changethe__original order.Python__providesa__numberof__differentways__toorganize__your lists,depending__onthe__situation.Sorting__aList__Permanentlywith__the sort()Method__Pythons__sort()method__makesit__relativelyeasy__tosort__a list.Imagine__wehave__alist__ofcars__andwant__tochange__theorder__ofthe__listto__storethem__alphabetically.To__keepthe__task simple,let__sassume__thatall__thevalues__inthe__listare__lowercase: cars.pycars__= ['bmw', 'audi', 'toyota', 'subaru'] cars.sort() print(cars)The__sort()method__changesthe__orderof__thelist__permanently.The__carsare__nowin__alphabetical order,and__wecan__neverrevert__tothe__original order: ['audi', 'bmw', 'subaru', 'toyota']You__canalso__sortthis__listin__reverse-alphabeticalorder__bypassing__theargument__reverse=Trueto__the sort() method.The__followingexample__sortsthe__listof__carsin__reverse-alphabetical order:cars__= ['bmw', 'audi', 'toyota', 'subaru'] cars.sort(reverse=True) print(cars) Again,the__orderof__thelist__ispermanently__changed: ['toyota', 'subaru', 'bmw', 'audi']Sorting__aList__Temporarilywith__the sorted()Function__Tomaintain__theoriginal__orderof__alist__butpresent__itin__asorted__order,you__canuse__the sorted() function.The__sorted()function__letsyou__displayyour__listin__aparticular__order,but__doesnt__affectthe__actualorder__ofthe__list.Let__stry__thisfunction__onthe__listof__cars.cars__= ['bmw', 'audi', 'toyota', 'subaru'] 1 print("Hereis__theoriginal__list:") print(cars) 2 print("\nHereis__thesorted__list:") print(sorted(cars)) 3 print("\nHereis__theoriginal__list again:") print(cars) 44Chapter__3We__firstprint__thelist__inits__originalorder__1and__thenin__alphabeticalorder__2.After__thelist__isdisplayed__inthe__new order,we__showthat__thelist__isstill__storedin__itsoriginal__order 3:Here__isthe__original list: ['bmw', 'audi', 'toyota', 'subaru']Here__isthe__sorted list: ['audi', 'bmw', 'subaru', 'toyota'] 1Here__isthe__originallist__again: ['bmw', 'audi', 'toyota', 'subaru']Notice__thatthe__liststill__existsin__itsoriginal__order 1after__the sorted()function__hasbeen__used.The__sorted()function__canalso__accepta__reverse=Trueargument__ifyou__wantto__displaya__listin__reverse-alphabetical order.NOTE__Sortinga__listalphabetically__isa__bitmore__complicatedwhen__allthe__valuesare__notin__lowercase.There__areseveral__waysto__interpretcapital__letterswhen__determininga__sort order,and__specifyingthe__exactorder__canbe__morecomplex__thanwe__wantto__dealwith__atthis__time. However,most__approachesto__sortingwill__builddirectly__onwhat__youlearned__inthis__section.Printing__aList__inReverse__OrderTo__reversethe__originalorder__ofa__list,you__canuse__the reverse() method.If__weoriginally__storedthe__listof__carsin__chronologicalorder__accordingto__whenwe__owned them,we__couldeasily__rearrangethe__listinto__reverse-chronological order:cars__= ['bmw', 'audi', 'toyota', 'subaru'] print(cars) cars.reverse() print(cars)Notice__that reverse()doesn__tsort__backward alphabetically;it__simplyreverses__theorder__ofthe__list: ['bmw', 'audi', 'toyota', 'subaru'] ['subaru', 'toyota', 'audi', 'bmw']The__reverse()method__changesthe__orderof__alist__permanently,but__youcan__revertto__theoriginal__orderanytime__byapplying__reverse()to__thesame__lista__second time.Finding__theLength__ofa__ListYou__canquickly__findthe__lengthof__alist__byusing__the len() function.The__listin__thisexample__hasfour__items,so__itslength__is 4: >>>cars__= ['bmw', 'audi', 'toyota', 'subaru'] >>> len(cars) 4Introducing__Lists 45You__llfind__len()useful__whenyou__needto__identifythe__numberof__aliensthat__stillneed__tobe__shotdown__ina__game,determine__theamount__ofdata__youhave__tomanage__ina__visualization,or__figureout__thenumber__ofregis__teredusers__ona__website,among__other tasks.NOTE__Pythoncounts__theitems__ina__liststarting__with one,so__youshouldn__trun__intoany__off-by-oneerrors__whendetermining__thelength__ofa__list.TRY__ITYOURSELF__3-8.Seeing__the World:Think__ofat__leastfive__placesin__theworld__youd__liketo__visit.Store__thelocations__ina__list.Make__surethe__listis__notin__alphabetical order.Print__yourlist__inits__original order.Don__tworry__aboutprinting__thelist__neatly;just__printit__asa__rawPython__list.Use__sorted()to__printyour__listin__alphabeticalorder__withoutmodifying__theactual__list.Show__thatyour__listis__stillin__itsoriginal__orderby__printing it.Use__sorted()to__printyour__listin__reverse-alphabeticalorder__withoutchang__ingthe__orderof__theoriginal__list.Show__thatyour__listis__stillin__itsoriginal__orderby__printingit__again.Use__reverse()to__changethe__orderof__your list.Print__thelist__toshow__thatits__orderhas__changed.Use__reverse()to__changethe__orderof__yourlist__again.Print__thelist__toshow__its__backto__itsoriginal__order.Use__sort()to__changeyour__listso__its__storedin__alphabetical order.Print__thelist__toshow__thatits__orderhas__been changed.Use__sort()to__changeyour__listso__its__storedin__reverse-alphabetical order.Print__thelist__toshow__thatits__orderhas__changed. 3-9.Dinner__Guests:Working__withone__ofthe__programsfrom__Exercises 3-4through__3-7 (pages 41 42),use__len()to__printa__messageindicating__thenumber__ofpeople__youre__invitingto__dinner. 3-10.Every__Function:Think__ofthings__youcould__storein__a list.For__example,you__couldmake__alist__of mountains, rivers, countries, cities, languages,or__anythingelse__youd__like.Write__aprogram__thatcreates__alist__containingthese__itemsand__thenuses__eachfunction__introducedin__thischapter__atleast__once. 46Chapter__3Avoiding__IndexErrors__WhenWorking__withLists__Theres__onetype__oferror__thats__commonto__seewhen__youre__workingwith__listsfor__thefirst__time.Let__ssay__youhave__alist__withthree__items,and__youask__forthe__fourth item: motorcycles.pymotorcycles__= ['honda', 'yamaha', 'suzuki'] print(motorcycles[3])This__exampleresults__inan__index error:Traceback__(mostrecent__call last):File__"motorcycles.py",line__2,in__print(motorcycles[3]) ~~~~~~~~~~~^^^ IndexError:list__indexout__ofrange__Pythonattempts__togive__youthe__itemat__index 3.But__whenit__searchesthe__list,no__itemin__motorcycleshas__anindex__of 3.Because__ofthe__off-by-onenature__ofindexing__in lists,this__erroris__typical.People__thinkthe__thirditem__isitem__number 3,because__theystart__countingat__1.But__inPython__thethird__itemis__number 2,because__itstarts__indexingat__0.An__indexerror__meansPython__cant__findan__itemat__theindex__you requested.If__anindex__erroroccurs__inyour__program,try__adjustingthe__indexyou__reasking__forby__one.Then__runthe__programagain__tosee__ifthe__resultsare__correct.Keep__inmind__thatwhenever__youwant__toaccess__thelast__itemin__a list,you__shoulduse__theindex__-1.This__willalways__work,even__ifyour__listhas__changedsize__sincethe__lasttime__youaccessed__it:motorcycles__= ['honda', 'yamaha', 'suzuki'] print(motorcycles[-1])The__index -1always__returnsthe__lastitem__ina__list,in__thiscase__thevalue__'suzuki':suzuki__Theonly__timethis__approachwill__causean__erroris__whenyou__requestthe__lastitem__froman__empty list:motorcycles__= [] print(motorcycles[-1])No__itemsare__in motorcycles,so__Pythonreturns__anotherindex__error:Traceback__(mostrecent__call last):File__"motorcyles.py",line__3,in__print(motorcycles[-1]) ~~~~~~~~~~~^^^^ IndexError:list__indexout__ofrange__IntroducingLists__47If__anindex__erroroccurs__andyou__cant__figureout__howto__resolve it,try__printingyour__listor__justprinting__thelength__ofyour__list.Your__listmight__lookmuch__differentthan__youthought__it did,especially__ifit__hasbeen__manageddynamically__byyour__program.Seeing__theactual__list,or__theexact__numberof__itemsin__your list,can__helpyou__sortout__suchlogical__errors.TRY__ITYOURSELF__3-11.Intentional__Error:If__youhaven__treceived__anindex__errorin__oneof__yourpro__grams yet,try__tomake__one happen.Change__anindex__inone__ofyour__programsto__producean__index error.Make__sureyou__correctthe__errorbefore__closingthe__program.Summary__Inthis__chapter,you__learnedwhat__listsare__andhow__towork__withthe__individual__itemsin__a list.You__learnedhow__todefine__alist__andhow__toadd__andremove__elements.You__learnedhow__tosort__listspermanently__andtemporar__ilyfor__display purposes.You__alsolearned__howto__findthe__lengthof__alist__andhow__toavoid__indexerrors__whenyou__reworking__with lists.In__Chapter 4you__lllearn__howto__workwith__itemsin__alist__more efficiently.By__loopingthrough__eachitem__ina__listusing__justa__fewlines__ofcode__youll__beable__towork__efficiently,even__whenyour__listcontains__thousandsor__millionsof__items. 4WOR__KING__WITHLISTSIn__Chapter 3you__learnedhow__tomake__asimple__list,and__youlearned__towork__withthe__individualelements__ina__list.In__thischapter__youll__learnhow__toloop__throughan__entirelist__usingjust__afew__linesof__code,regardless__ofhow__longthe__list is.Looping__allowsyou__totake__thesame__action,or__setof__actions,with__everyitem__ina__list.As__a result,you__llbe__ableto__workefficiently__withlists__ofany__length,including__thosewith__thousandsor__evenmillions__of items.Looping__Throughan__EntireList__Youll__oftenwant__torun__throughall__entriesin__a list,performing__thesame__taskwith__each item.For__example,in__agame__youmight__wantto__moveevery__elementon__thescreen__bythe__same amount.In__alist__of numbers,you__mightwant__toperform__thesame__statisticaloperation__onevery__element. 50Chapter__4Or__perhapsyou__llwant__todisplay__eachheadline__froma__listof__articleson__a website.When__youwant__todo__thesame__actionwith__everyitem__ina__list,you__canuse__Pythons__for loop.Say__wehave__alist__ofmagicians__names,and__wewant__toprint__outeach__namein__the list.We__coulddo__thisby__retrievingeach__namefrom__thelist__indi vidually,but__thisapproach__couldcause__several problems.For__one,it__wouldbe__repetitiveto__dothis__witha__longlist__of names. Also,we__dhave__tochange__ourcode__eachtime__thelist__slength__changed.Using__afor__loopavoids__bothof__theseissues__byletting__Pythonmanage__theseissues__internally.Let__suse__afor__loopto__printout__eachname__ina__listof__magicians: magicians.pymagicians__= ['alice', 'david', 'carolina']for__magicianin__magicians: print(magician)We__beginby__defininga__list,just__aswe__didin__Chapter 3.Then__wedefine__afor__loop.This__linetells__Pythonto__pulla__namefrom__thelist__magicians,and__associateit__withthe__variable magician. Next,we__tellPython__toprint__thename__thats__justbeen__assignedto__magician.Python__thenrepeats__theselast__two lines,once__foreach__namein__the list.It__mighthelp__toread__thiscode__asFor__everymagician__inthe__listof__magicians,print__themagician__s name.The__outputis__asimple__printoutof__eachname__inthe__list:alice__davidcarolina__ACloser__Lookat__LoopingLooping__isimportant__becauseit__sone__ofthe__mostcommon__waysa__computerautomates__repetitive tasks.For__example,in__asimple__looplike__weused__in magicians.py,Python__initiallyreads__thefirst__lineof__the loop:for__magicianin__magicians:This__linetells__Pythonto__retrievethe__firstvalue__fromthe__listmagicians__andassociate__itwith__thevariable__magician.This__firstvalue__is 'alice'.Python__thenreads__thenext__line: print(magician)Python__printsthe__currentvalue__of magician,which__isstill__'alice'.Because__thelist__containsmore__values,Python__returnsto__thefirst__lineof__the loop:for__magicianin__magicians:Python__retrievesthe__nextname__inthe__list, 'david',and__associatesthat__valuewith__thevariable__magician.Python__thenexecutes__the line: print(magician)Working__withLists__51Python__printsthe__currentvalue__ofmagician__again,which__isnow__'david'.Python__repeatsthe__entireloop__oncemore__withthe__lastvalue__inthe__list, 'carolina'.Because__nomore__valuesare__inthe__list,Python__moveson__tothe__nextline__inthe__program.In__thiscase__nothingcomes__afterthe__for loop,so__theprogram__ends.When__youre__usingloops__forthe__first time,keep__inmind__thatthe__setof__stepsis__repeatedonce__foreach__itemin__the list,no__matterhow__manyitems__arein__the list.If__youhave__amillion__itemsin__your list,Python__repeatsthese__stepsa__milliontimes__andusually__very quickly.Also__keepin__mindwhen__writingyour__ownfor__loopsthat__youcan__chooseany__nameyou__wantfor__thetemporary__variablethat__willbe__associatedwith__eachvalue__inthe__list. However,it__shelpful__tochoose__ameaningful__namethat__representsa__singleitem__fromthe__list.For__example,here__sa__goodway__tostart__afor__loopfor__alist__of cats,a__listof__dogs,and__ageneral__listof__items:for__catin__cats:for__dogin__dogs:for__itemin__list_of_items:These__namingconventions__canhelp__youfollow__theaction__beingdone__oneach__itemwithin__afor__loop.Using__singularand__pluralnames__canhelp__youidentify__whethera__sectionof__codeis__workingwith__asingle__elementfrom__thelist__orthe__entire list.Doing__MoreWork__Withina__forLoop__Youcan__dojust__aboutanything__witheach__itemin__afor__loop.Let__sbuild__onthe__previousexample__byprinting__amessage__toeach__magician,telling__themthat__theyperformed__agreat__trick: magicians.pymagicians__= ['alice', 'david', 'carolina']for__magicianin__magicians: print(f"{magician.title()},that__wasa__great trick!")The__onlydifference__inthis__codeis__wherewe__composea__messageto__each magician,starting__withthat__magicians__name.The__firsttime__throughthe__loopthe__valueof__magicianis__'alice',so__Pythonstarts__thefirst__messagewith__thename__'Alice'.The__secondtime__through,the__messagewill__beginwith__'David',and__thethird__time through,the__messagewill__beginwith__'Carolina'.The__outputshows__apersonalized__messagefor__eachmagician__inthe__list: Alice,that__wasa__great trick! David,that__wasa__great trick! Carolina,that__wasa__great trick!You__canalso__writeas__manylines__ofcode__asyou__likein__thefor__loop.Every__indentedline__followingthe__linefor__magicianin__magiciansis__consideredinside__the loop,and__eachindented__lineis__executedonce__foreach__valuein__the list. Therefore,you__cando__asmuch__workas__youlike__witheach__valuein__the list. 52Chapter__4Let__sadd__asecond__lineto__our message,telling__eachmagician__thatwe__relooking__forwardto__theirnext__trick:magicians__= ['alice', 'david', 'carolina']for__magicianin__magicians: print(f"{magician.title()},that__wasa__great trick!") print(f"I can'twait__tosee__yournext__trick, {magician.title()}.\n")Because__wehave__indentedboth__callsto__print(),each__linewill__beexe__cutedonce__forevery__magicianin__the list.The__newline ("\n")in__thesecond__print()call__insertsa__blankline__aftereach__passthrough__the loop.This__creates__aset__ofmessages__thatare__neatlygrouped__foreach__personin__the list: Alice,that__wasa__great trick!I__can'twait__tosee__yournext__trick, Alice. David,that__wasa__great trick!I__can'twait__tosee__yournext__trick, David. Carolina,that__wasa__great trick!I__can'twait__tosee__yournext__trick, Carolina.You__canuse__asmany__linesas__youlike__inyour__for loops.In__practice,you__lloften__findit__usefulto__doa__numberof__differentoperations__witheach__itemin__alist__whenyou__usea__for loop.Doing__SomethingAfter__afor__LoopWhat__happensonce__afor__loophas__finished executing? Usually,you__llwant__tosummarize__ablock__ofoutput__ormove__onto__otherwork__thatyour__program__must accomplish.Any__linesof__codeafter__thefor__loopthat__arenot__indentedare__executedonce__without repetition.Let__swrite__athank__youto__thegroup__ofmagicians__asa__whole,thanking__themfor__puttingon__anexcellent__show.To__displaythis__groupmessage__afterall__ofthe__individualmessages__havebeen__printed,we__placethe__thankyou__messageafter__thefor__loop,without__indentation:magicians__= ['alice', 'david', 'carolina']for__magicianin__magicians: print(f"{magician.title()},that__wasa__great trick!") print(f"I can'twait__tosee__yournext__trick, {magician.title()}.\n") print("Thank you, everyone.That__wasa__greatmagic__show!")The__firsttwo__callsto__print()are__repeatedonce__foreach__magicianin__the list,as__yousaw__earlier. However,because__thelast__lineis__not indented,it__sprinted__only once: Alice,that__wasa__great trick!I__can'twait__tosee__yournext__trick, Alice. David,that__wasa__great trick!Working__withLists__53I__can'twait__tosee__yournext__trick, David. Carolina,that__wasa__great trick!I__can'twait__tosee__yournext__trick, Carolina.Thank__you, everyone.That__wasa__greatmagic__show!When__youre__processingdata__usinga__for loop,you__llfind__thatthis__isa__goodway__tosummarize__anoperation__thatwas__performedon__anentire__data set.For__example,you__mightuse__afor__loopto__initializea__gameby__runningthrough__alist__ofcharacters__anddisplaying__eachcharacter__onthe__screen.You__mightthen__writesome__additionalcode__afterthis__loopthat__displaysa__PlayNow__buttonafter__allthe__charactershave__beendrawn__tothe__screen.Avoiding__IndentationErrors__Pythonuses__indentationto__determinehow__a line,or__groupof__lines,is__relatedto__therest__ofthe__program.In__theprevious__examples,the__linesthat__printedmessages__toindividual__magicianswere__partof__thefor__loopbecause__theywere__indented.Python__suse__ofindentation__makescode__veryeasy__to read. Basically,it__useswhitespace__toforce__youto__writeneatly__formattedcode__witha__clearvisual__structure.In__longerPython__programs,you__llnotice__blocksof__codeindented__ata__fewdifferent__levels.These__indentationlevels__helpyou__gaina__generalsense__ofthe__overallprogram__s organization.As__youbegin__towrite__codethat__relieson__proper indentation,you__llneed__towatch__fora__fewcommon__indentation errors.For__example,people__sometimesindent__linesof__codethat__dont__needto__beindented__orforget__toindent__linesthat__needto__be indented.Seeing__examplesof__theseerrors__nowwill__helpyou__avoidthem__inthe__futureand__correctthem__whenthey__doappear__inyour__own programs.Let__sexamine__someof__themore__commonindentation__errors.Forgetting__toIndent__Alwaysindent__theline__afterthe__forstatement__ina__loop.If__you forget,Python__willremind__you: magicians.pymagicians__= ['alice', 'david', 'carolina']for__magicianin__magicians: 1 print(magician)The__callto__print() 1should__be indented,but__its__not.When__Pythonexpects__anindented__blockand__doesnt__find one,it__letsyou__knowwhich__lineit__hada__problem with:File__"magicians.py",line__3 print(magician) ^ IndentationError:expected__anindented__blockafter__'for'statement__online__2 54Chapter__4You__canusually__resolvethis__kindof__indentationerror__byindenting__theline__orlines__immediatelyafter__thefor__statement.Forgetting__toIndent__AdditionalLines__Sometimesyour__loopwill__runwithout__anyerrors__butwon__tproduce__theexpected__result.This__canhappen__whenyou__retrying__todo__severaltasks__ina__loopand__youforget__toindent__someof__its lines.For__example,this__iswhat__happenswhen__weforget__toindent__thesecond__linein__theloop__thattells__eachmagician__were__lookingforward__totheir__next trick:magicians__= ['alice', 'david', 'carolina']for__magicianin__magicians: print(f"{magician.title()},that__wasa__great trick!") 1 print(f"I can'twait__tosee__yournext__trick, {magician.title()}.\n")The__secondcall__to print() 1is__supposedto__be indented,but__becausePython__findsat__leastone__indentedline__afterthe__for statement,it__doesnt__reportan__error.As__a result,the__first print()call__isexecuted__oncefor__eachname__inthe__listbecause__itis__indented.The__second print()call__isnot__indented,so__itis__executedonly__onceafter__theloop__hasfinished__running.Because__thefinal__valueassociated__withmagician__is 'carolina',she__isthe__onlyone__whoreceives__thelooking__forwardto__thenext__trick message: Alice,that__wasa__great trick! David,that__wasa__great trick! Carolina,that__wasa__great trick!I__can'twait__tosee__yournext__trick, Carolina.This__isa__logical error.The__syntaxis__validPython__code,but__thecode__doesnot__producethe__desiredresult__becausea__problemoccurs__inits__logic.If__youexpect__tosee__acertain__actionrepeated__oncefor__eachitem__ina__listand__its__executedonly__once,determine__whetheryou__needto__simplyindent__aline__ora__groupof__lines.Indenting__UnnecessarilyIf__youaccidentally__indenta__linethat__doesnt__needto__be indented,Python__informsyou__aboutthe__unexpected indent: hello_world.pymessage__= "HelloPython__world!" print(message)We__dont__needto__indentthe__print() call,because__itisn__tpart__ofa__loop; hence,Python__reportsthat__error:File__"hello_world.py",line__2 print(message) ^ IndentationError:unexpected__indentWorking__withLists__55You__canavoid__unexpectedindentation__errorsby__indentingonly__whenyou__havea__specificreason__todo__so.In__theprograms__youre__writingat__this point,the__onlylines__youshould__indentare__theactions__youwant__torepeat__foreach__itemin__afor__loop.Indenting__UnnecessarilyAfter__theLoop__Ifyou__accidentallyindent__codethat__shouldrun__aftera__loophas__finished,that__codewill__berepeated__oncefor__eachitem__inthe__list.Sometimes__thisprompts__Pythonto__reportan__error,but__oftenthis__willresult__ina__logical error.For__example,let__ssee__whathappens__whenwe__accidentallyindent__theline__thatthanked__themagicians__asa__groupfor__puttingon__agood__show: magicians.pymagicians__= ['alice', 'david', 'carolina']for__magicianin__magicians: print(f"{magician.title()},that__wasa__great trick!") print(f"I can'twait__tosee__yournext__trick, {magician.title()}.\n") 1 print("Thankyou__everyone,that__wasa__greatmagic__show!")Because__thelast__line 1is__indented,it__sprinted__oncefor__eachperson__inthe__list: Alice,that__wasa__great trick!I__can'twait__tosee__yournext__trick, Alice.Thank__you everyone,that__wasa__greatmagic__show! David,that__wasa__great trick!I__can'twait__tosee__yournext__trick, David.Thank__you everyone,that__wasa__greatmagic__show! Carolina,that__wasa__great trick!I__can'twait__tosee__yournext__trick, Carolina.Thank__you everyone,that__wasa__greatmagic__show!This__isanother__logical error,similar__tothe__onein__Forgettingto__IndentAdditional__Lineson__page 54.Because__Pythondoesn__tknow__whatyou__retrying__toaccomplish__withyour__code,it__willrun__allcode__thatis__writtenin__valid syntax.If__anaction__isrepeated__manytimes__whenit__shouldbe__executedonly__once,you__probablyneed__tounindent__thecode__forthat__action.Forgetting__theColon__Thecolon__atthe__endof__afor__statementtells__Pythonto__interpretthe__nextline__asthe__startof__a loop.magicians__= ['alice', 'david', 'carolina'] 1for__magicianin__magicians print(magician) 56Chapter__4If__youaccidentally__forgetthe__colon 1,you__llget__asyntax__errorbecause__Pythondoesn__tknow__exactlywhat__youre__tryingto__do:File__"magicians.py",line__2for__magicianin__magicians ^ SyntaxError:expected__':'Python__doesnt__knowif__yousimply__forgotthe__colon,or__ifyou__meantto__writeadditional__codeto__setup__amore__complex loop.If__theinterpreter__canidentify__apossible__fixit__willsuggest__one,like__addinga__colonat__theend__ofa__line,as__itdoes__herewith__theresponse__expected ':'.Some__errorshave__easy,obvious__fixes,thanks__tothe__suggestionsin__Pythons__tracebacks.Some__errorsare__muchharder__to resolve,even__whenthe__eventualfix__onlyinvolves__asingle__character.Don__tfeel__badwhen__asmall__fixtakes__along__timeto__find;you__areabsolutely__notalone__inthis__experience.TRY__ITYOURSELF__4-1. Pizzas:Think__ofat__leastthree__kindsof__yourfavorite__pizza.Store__thesepizza__namesin__a list,and__thenuse__afor__loopto__printthe__nameof__each pizza.Modify__yourfor__loopto__printa__sentenceusing__thename__ofthe__pizza,instead__ofprinting__justthe__nameof__the pizza.For__each pizza,you__shouldhave__oneline__ofoutput__containinga__simplestatement__likeI__likepep__peroni pizza.Add__aline__atthe__endof__your program,outside__thefor__loop,that__stateshow__muchyou__like pizza.The__outputshould__consistof__threeor__morelines__aboutthe__kindsof__pizzayou__likeand__thenan__additional sentence,such__asI__reallylove__pizza! 4-2. Animals:Think__ofat__leastthree__differentanimals__thathave__acommon__char acteristic.Store__thenames__ofthese__animalsin__a list,and__thenuse__afor__loopto__printout__thename__ofeach__animal.Modify__yourprogram__toprint__astatement__abouteach__animal,such__asA__dogwould__makea__great pet.Add__aline__atthe__endof__your program,stating__whatthese__animalshave__in common.You__couldprint__a sentence,such__asAny__ofthese__animalswould__makea__great pet!Making__NumericalLists__Manyreasons__existto__storea__setof__numbers.For__example,you__llneed__tokeep__trackof__thepositions__ofeach__characterin__a game,and__youmight__wantWorking__withLists__57to__keeptrack__ofa__players__highscores__as well.In__data visualizations,you__llalmost__alwayswork__withsets__of numbers,such__as temperatures, distances,population__sizes,or__latitudeand__longitude values,among__othertypes__ofnumerical__sets.Lists__areideal__forstoring__setsof__numbers,and__Pythonprovides__avariety__oftools__tohelp__youwork__efficientlywith__listsof__numbers.Once__youunder__standhow__touse__thesetools__effectively,your__codewill__workwell__evenwhen__yourlists__containmillions__of items.Using__the range()Function__Pythons__range()function__makesit__easyto__generatea__seriesof__numbers.For__example,you__canuse__the range()function__toprint__aseries__ofnumbers__like this: first_numbers.pyfor__valuein__range(1, 5): print(value)Although__thiscode__lookslike__itshould__printthe__numbersfrom__1to__5,it__doesnt__printthe__number 5: 1 2 3 4In__this example, range()prints__onlythe__numbers 1through__4.This__isanother__resultof__the off-by-onebehavior__youll__seeoften__inprogramming__languages.The__range()function__causesPython__tostart__countingat__thefirst__valueyou__give it,and__itstops__whenit__reachesthe__secondvalue__you provide.Because__itstops__atthat__second value,the__outputnever__containsthe__end value,which__wouldhave__been 5in__this case.To__printthe__numbersfrom__1to__5,you__woulduse__range(1, 6):for__valuein__range(1, 6): print(value)This__timethe__outputstarts__at 1and__endsat__5: 1 2 3 4 5If__youroutput__isdifferent__fromwhat__youexpect__whenyou__reusing__range(),try__adjustingyour__endvalue__by 1.You__canalso__pass range()only__one argument,and__itwill__startthe__sequenceof__numbersat__0.For__example, range(6)would__returnthe__numbersfrom__0through__5. 58Chapter__4Using__range()to__Makea__Listof__NumbersIf__youwant__tomake__alist__of numbers,you__canconvert__theresults__of range()directly__intoa__listusing__the list() function.When__youwrap__list()around__acall__tothe__range() function,the__outputwill__bea__listof__numbers.In__theexample__inthe__previous section,we__simplyprinted__outa__seriesof__numbers.We__canuse__list()to__convertthat__sameset__ofnumbers__intoa__list:numbers__= list(range(1, 6)) print(numbers)This__isthe__result: [1, 2, 3, 4, 5]We__canalso__usethe__range()function__totell__Pythonto__skipnumbers__ina__given range.If__youpass__athird__argumentto__range(),Python__usesthat__valueas__astep__sizewhen__generating numbers.For__example,here__show__tolist__theeven__numbersbetween__1and__10: even_numbers.pyeven_numbers__= list(range(2, 11, 2)) print(even_numbers)In__this example,the__range()function__startswith__thevalue__2and__thenadds__2to__that value.It__adds 2repeatedly__untilit__reachesor__passesthe__end value, 11,and__producesthis__result: [2, 4, 6, 8, 10]You__cancreate__almostany__setof__numbersyou__wantto__usingthe__range() function.For__example,consider__howyou__mightmake__alist__ofthe__first 10square__numbers (that is,the__squareof__eachinteger__from 1through__10).In__Python,two__asterisks (**)represent__exponents.Here__show__youmight__putthe__first 10square__numbersinto__a list:square___numbers.pysquares__= []for__valuein__range(1, 11): 1square__=value__** 2 2 squares.append(square) print(squares)We__startwith__anempty__listcalled__squares. Then,we__tellPython__toloop__througheach__valuefrom__1to__10using__the range() function.Inside__the loop,the__currentvalue__israised__tothe__secondpower__andassigned__tothe__variablesquare__1.Each__newvalue__ofsquare__isthen__appendedto__thelist__squares 2. Finally,when__theloop__hasfinished__running,the__listof__squaresis__printed: [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]Working__withLists__59To__writethis__codemore__concisely,omit__thetemporary__variablesquare__andappend__eachnew__valuedirectly__tothe__list:squares__= []for__valuein__range(1,11): squares.append(value**2) print(squares)This__linedoes__thesame__workas__thelines__insidethe__forloop__inthe__previous__listing.Each__valuein__theloop__israised__tothe__secondpower__andthen__immediatelyappended__tothe__listof__squares.You__canuse__eitherof__theseapproaches__whenyou__remaking__morecom__plex lists.Sometimes__usinga__temporaryvariable__makesyour__codeeasier__to read;other__timesit__makesthe__codeunnecessarily__long.Focus__firston__writing__codethat__youunderstand__clearly,and__doeswhat__youwant__itto__do.Then__lookfor__moreefficient__approachesas__youreview__your code.Simple__Statisticswith__aList__ofNumbers__Afew__Pythonfunctions__arehelpful__whenworking__withlists__of numbers.For__example,you__caneasily__findthe__minimum, maximum,and__sumof__alist__of numbers: >>>digits__= [1, 2, 3, 4, 5, 6, 7, 8, 9, 0] >>> min(digits) 0 >>> max(digits) 9 >>> sum(digits) 45NOTE__Theexamples__inthis__sectionuse__shortlists__ofnumbers__thatfit__easilyon__the page.They__wouldwork__justas__wellif__yourlist__containeda__millionor__more numbers.List__ComprehensionsThe__approachdescribed__earlierfor__generatingthe__listsquares__consistedof__usingthree__orfour__linesof__code.A__listcomprehension__allowsyou__togenerate__thissame__listin__justone__lineof__code.A__listcomprehension__combinesthe__forloop__andthe__creationof__newelements__intoone__line,and__automaticallyappends__eachnew__element.List__comprehensionsare__notalways__presentedto__beginners,but__Ive__includedthem__herebecause__youll__mostlikely__seethem__assoon__asyou__startlooking__atother__peoples__code.The__followingexample__buildsthe__samelist__ofsquare__numbersyou__sawearlier__butuses__alist__comprehension: squares.pysquares__= [value**2for__valuein__range(1, 11)] print(squares) 60Chapter__4To__usethis__syntax,begin__witha__descriptivename__forthe__list,such__as squares. Next,open__aset__ofsquare__bracketsand__definethe__expressionfor__thevalues__youwant__tostore__inthe__new list.In__thisexample__theexpression__is value**2,which__raisesthe__valueto__thesecond__power. Then,write__afor__loopto__generatethe__numbersyou__wantto__feedinto__the expression,and__closethe__square brackets.The__forloop__inthis__exampleis__forvalue__in range(1, 11),which__feedsthe__values 1through__10into__theexpression__value**2.Note__thatno__colonis__usedat__theend__ofthe__for statement.The__resultis__thesame__listof__squarenumbers__yousaw__earlier: [1, 4, 9, 16, 25, 36, 49, 64, 81, 100]It__takespractice__towrite__yourown__list comprehensions,but__youll__findthem__worthwhileonce__youbecome__comfortablecreating__ordinary lists.When__youre__writingthree__orfour__linesof__codeto__generatelists__andit__beginsto__feel repetitive,consider__writingyour__ownlist__comprehensions.TRY__ITYOURSELF__4-3.Counting__to Twenty:Use__afor__loopto__printthe__numbersfrom__1to__20, inclusive. 4-4.One__Million:Make__alist__ofthe__numbersfrom__oneto__one million,and__thenuse__afor__loopto__printthe__numbers. (Ifthe__outputis__takingtoo__long,stop__itby__pressing CTRL-Cor__byclosing__theoutput__window.) 4-5.Summing__a Million:Make__alist__ofthe__numbersfrom__oneto__one million,and__thenuse__min()and__max()to__makesure__yourlist__actuallystarts__atone__andends__atone__million. Also,use__the sum()function__tosee__howquickly__Pythoncan__adda__million numbers. 4-6.Odd__Numbers:Use__thethird__argumentof__the range()function__tomake__alist__ofthe__oddnumbers__from 1to__20.Use__afor__loopto__printeach__number. 4-7. Threes:Make__alist__ofthe__multiplesof__3,from__3to__30.Use__afor__loopto__printthe__numbersin__your list. 4-8. Cubes:A__numberraised__tothe__thirdpower__iscalled__a cube.For__example,the__cubeof__2is__writtenas__2**3in__Python.Make__alist__ofthe__first 10cubes__(that is,the__cubeof__eachinteger__from 1through__10),and__usea__forloop__toprint__outthe__valueof__each cube. 4-9.Cube__Comprehension:Use__alist__comprehensionto__generatea__listof__thefirst__10 cubes.Working__withLists__61Working__withPart__ofa__ListIn__Chapter 3you__learnedhow__toaccess__singleelements__ina__list,and__inthis__chapteryou__vebeen__learninghow__towork__throughall__theelements__ina__list.You__canalso__workwith__aspecific__groupof__itemsin__a list,called__aslice__in Python.Slicing__aList__Tomake__a slice,you__specifythe__indexof__thefirst__andlast__elementsyou__wantto__work with.As__withthe__range() function,Python__stopsone__itembefore__thesecond__indexyou__specify.To__outputthe__firstthree__elementsin__a list,you__wouldrequest__indices 0through__3,which__wouldreturn__elements 0, 1,and__2.The__followingexample__involvesa__listof__playerson__a team: players.pyplayers__= ['charles', 'martina', 'michael', 'florence', 'eli'] print(players[0:3])This__codeprints__aslice__ofthe__list.The__outputretains__thestructure__ofthe__list,and__includesthe__firstthree__playersin__the list: ['charles', 'martina', 'michael']You__cangenerate__anysubset__ofa__list.For__example,if__youwant__thesec__ond, third,and__fourthitems__ina__list,you__wouldstart__theslice__atindex__1and__endit__atindex__4:players__= ['charles', 'martina', 'michael', 'florence', 'eli'] print(players[1:4])This__timethe__slicestarts__with 'martina'and__endswith__'florence': ['martina', 'michael', 'florence']If__youomit__thefirst__indexin__a slice,Python__automaticallystarts__yourslice__atthe__beginningof__the list:players__= ['charles', 'martina', 'michael', 'florence', 'eli'] print(players[:4])Without__astarting__index,Python__startsat__thebeginning__ofthe__list: ['charles', 'martina', 'michael', 'florence']A__similarsyntax__worksif__youwant__aslice__thatincludes__theend__ofa__list.For__example,if__youwant__allitems__fromthe__thirditem__throughthe__last item,you__canstart__withindex__2and__omitthe__second index:players__= ['charles', 'martina', 'michael', 'florence', 'eli'] print(players[2:]) 62Chapter__4Python__returnsall__itemsfrom__thethird__itemthrough__theend__ofthe__list: ['michael', 'florence', 'eli']This__syntaxallows__youto__outputall__ofthe__elementsfrom__anypoint__inyour__listto__the end,regardless__ofthe__lengthof__the list.Recall__thata__negative__indexreturns__anelement__acertain__distancefrom__theend__ofa__list; therefore,you__canoutput__anyslice__fromthe__endof__a list.For__example,if__wewant__tooutput__thelast__threeplayers__onthe__roster,we__canuse__theslice__players[-3:]:players__= ['charles', 'martina', 'michael', 'florence', 'eli'] print(players[-3:])This__printsthe__namesof__thelast__threeplayers__andwill__continueto__workas__thelist__ofplayers__changesin__size.NOTE__Youcan__includea__thirdvalue__inthe__bracketsindicating__a slice.If__athird__valueis__included,this__tellsPython__howmany__itemsto__skipbetween__itemsin__thespecified__range.Looping__Througha__SliceYou__canuse__aslice__ina__forloop__ifyou__wantto__loopthrough__asubset__ofthe__elementsin__a list.In__thenext__example,we__loopthrough__thefirst__threeplay__ersand__printtheir__namesas__partof__asimple__roster:players__= ['charles', 'martina', 'michael', 'florence', 'eli'] print("Hereare__thefirst__threeplayers__onmy__team:") 1for__playerin__players[:3]: print(player.title())Instead__oflooping__throughthe__entirelist__of players,Python__loopsthrough__onlythe__firstthree__names 1:Here__arethe__firstthree__playerson__my team:Charles__MartinaMichael__Slicesare__veryuseful__ina__numberof__situations.For__instance,when__youre__creatinga__game,you__couldadd__aplayer__sfinal__scoreto__alist__everytime__thatplayer__finishes playing.You__couldthen__geta__players__topthree__scoresby__sortingthe__listin__decreasingorder__andtaking__aslice__thatincludes__justthe__firstthree__scores.When__youre__workingwith__data,you__canuse__slicesto__processyour__datain__chunksof__aspecific__size. Or,when__youre__buildinga__web application,you__coulduse__slicesto__displayinformation__ina__seriesof__pageswith__anappropriate__amountof__informationon__each page.Working__withLists__63Copying__aList__Often,you__llwant__tostart__withan__existinglist__andmake__anentirely__newlist__basedon__thefirst__one.Let__sexplore__howcopying__alist__worksand__examineone__situationin__whichcopying__alist__is useful.To__copya__list,you__canmake__aslice__thatincludes__theentire__originallist__byomitting__thefirst__indexand__thesecond__index ([:]).This__tellsPython__tomake__aslice__thatstarts__atthe__firstitem__andends__withthe__last item,produc__inga__copyof__theentire__list.For__example,imagine__wehave__alist__ofour__favoritefoods__andwant__tomake__aseparate__listof__foodsthat__afriend__likes.This__friendlikes__everythingin__ourlist__so far,so__wecan__createtheir__listby__copying ours: foods.pymy_foods__= ['pizza', 'falafel', 'carrot cake'] 1friend_foods__= my_foods[:] print("Myfavorite__foods are:") print(my_foods) print("\nMy friend'sfavorite__foods are:") print(friend_foods) First,we__makea__listof__thefoods__welike__called my_foods.Then__wemake__anew__listcalled__friend_foods.We__makea__copyof__my_foodsby__askingfor__aslice__ofmy_foods__withoutspecifying__anyindices__1,and__assignthe__copyto__friend_foods.When__weprint__each list,we__seethat__theyboth__containthe__same foods:My__favoritefoods__are: ['pizza', 'falafel', 'carrot cake']My__friend'sfavorite__foods are: ['pizza', 'falafel', 'carrot cake']To__provethat__weactually__havetwo__separate lists,we__lladd__anew__foodto__eachlist__andshow__thateach__listkeeps__trackof__theappropriate__persons__favorite foods:my_foods__= ['pizza', 'falafel', 'carrot cake'] 1friend_foods__= my_foods[:] 2 my_foods.append('cannoli') 3 friend_foods.append('ice cream') print("Myfavorite__foods are:") print(my_foods) print("\nMy friend'sfavorite__foods are:") print(friend_foods) 64Chapter__4We__copythe__originalitems__inmy_foods__tothe__newlist__friend_foods,as__wedid__inthe__previousexample__1. Next,we__adda__newfood__toeach__list:we__add 'cannoli'to__my_foods 2,and__weadd__'ice cream'to__friend_foods 3.We__thenprint__thetwo__liststo__seewhether__eachof__thesefoods__isin__theappropriate__list:My__favoritefoods__are: ['pizza', 'falafel', 'carrot cake', 'cannoli']My__friend'sfavorite__foods are: ['pizza', 'falafel', 'carrot cake', 'ice cream']The__outputshows__that 'cannoli'now__appearsin__ourlist__offavorite__foodsbut__'ice cream'does__not.We__cansee__that 'ice cream'now__appearsin__ourfriend__slist__but 'cannoli'does__not.If__wehad__simplyset__friend_foodsequal__to my_foods,we__wouldnot__producetwo__separate lists.For__example,here__swhat__happenswhen__youtry__tocopy__alist__withoutusing__a slice:my_foods__= ['pizza', 'falafel', 'carrot cake'] #This__doesn't work:friend_foods__=my_foods__my_foods.append('cannoli') friend_foods.append('ice cream') print("Myfavorite__foods are:") print(my_foods) print("\nMy friend'sfavorite__foods are:") print(friend_foods)Instead__ofassigning__acopy__ofmy_foods__to friend_foods,we__setfriend_foods__equalto__my_foods.This__syntaxactually__tellsPython__toassociate__thenew__variable__friend_foodswith__thelist__thatis__alreadyassociated__with my_foods,so__nowboth__variablespoint__tothe__same list.As__a result,when__weadd__'cannoli'to__my_foods,it__willalso__appearin__friend_foods.Likewise__'ice cream'will__appearin__both lists,even__thoughit__appearsto__beadded__onlyto__friend_foods.The__outputshows__thatboth__listsare__thesame__now,which__isnot__whatwe__wanted:My__favoritefoods__are: ['pizza', 'falafel', 'carrot cake', 'cannoli', 'ice cream']My__friend'sfavorite__foods are: ['pizza', 'falafel', 'carrot cake', 'cannoli', 'ice cream']NOTE__Dont__worryabout__thedetails__inthis__examplefor__now.If__youre__tryingto__workwith__acopy__ofa__listand__yousee__unexpected behavior,make__sureyou__arecopying__thelist__usinga__slice,as__wedid__inthe__first example.Working__withLists__65TRY__ITYOURSELF__4-10. Slices:Using__oneof__theprograms__youwrote__inthis__chapter,add__severallines__tothe__endof__theprogram__thatdo__the following:Print__themessage__Thefirst__threeitems__inthe__list are:.Then__usea__sliceto__printthe__firstthree__itemsfrom__thatprogram__s list.Print__themessage__Threeitems__fromthe__middleof__thelist__are:.Then__usea__sliceto__printthree__itemsfrom__themiddle__ofthe__list.Print__themessage__Thelast__threeitems__inthe__list are:.Then__usea__sliceto__printthe__lastthree__itemsin__the list. 4-11.My__Pizzas,Your__Pizzas:Start__withyour__programfrom__Exercise 4-1 (page 56).Make__acopy__ofthe__listof__pizzas,and__callit__friend_pizzas. Then,do__the following:Add__anew__pizzato__theoriginal__list.Add__adifferent__pizzato__thelist__friend_pizzas.Prove__thatyou__havetwo__separate lists.Print__themessage__Myfavorite__pizzas__are:,and__thenuse__afor__loopto__printthe__first list.Print__themessage__Myfriend__sfavorite__pizzas are:,and__thenuse__afor__loopto__printthe__second list.Make__sureeach__newpizza__isstored__inthe__appropriate list. 4-12.More__Loops:All__versionsof__foods.pyin__thissection__haveavoided__usingfor__loopswhen__printing,to__save space.Choose__aversion__of foods.py,and__writetwo__forloops__toprint__eachlist__of foods.Tuples__Listswork__wellfor__storingcollections__ofitems__thatcan__changethroughout__thelife__ofa__program.The__abilityto__modifylists__isparticularly__importantwhen__youre__workingwith__alist__ofusers__ona__websiteor__alist__ofcharacters__ina__game. However,sometimes__youll__wantto__createa__listof__itemsthat__cannot change.Tuples__allowyou__todo__just that.Python__refersto__valuesthat__cannotchange__as immutable,and__animmutable__listis__calleda__tuple.Defining__aTuple__Atuple__looksjust__likea__list,except__youuse__parenthesesinstead__ofsquare__brackets.Once__youdefine__a tuple,you__canaccess__individualelements__byusing__eachitem__s index,just__asyou__wouldfor__a list. 66Chapter__4For__example,if__wehave__arectangle__thatshould__alwaysbe__acertain__size,we__canensure__thatits__sizedoesn__tchange__byputting__thedimensions__intoa__tuple: dimensions.pydimensions__= (200, 50) print(dimensions[0]) print(dimensions[1])We__definethe__tuple dimensions,using__parenthesesinstead__ofsquare__brackets.Then__weprint__eachelement__inthe__tuple individually,using__thesame__syntaxwe__vebeen__usingto__accesselements__ina__list: 200 50Let__ssee__whathappens__ifwe__tryto__changeone__ofthe__itemsin__thetuple__dimensions:dimensions__= (200, 50) dimensions[0] = 250This__codetries__tochange__thevalue__ofthe__first dimension,but__Pythonreturns__atype__error.Because__were__tryingto__altera__tuple,which__cant__bedone__tothat__typeof__object,Python__tellsus__wecan__tassign__anew__valueto__anitem__ina__tuple:Traceback__(mostrecent__call last):File__"dimensions.py",line__2,in__dimensions[0] = 250 TypeError: 'tuple'object__doesnot__supportitem__assignmentThis__isbeneficial__becausewe__wantPython__toraise__anerror__whena__lineof__codetries__tochange__thedimensions__ofthe__rectangle.NOTE__Tuplesare__technicallydefined__bythe__presenceof__a comma;the__parenthesesmake__themlook__neaterand__more readable.If__youwant__todefine__atuple__withone__element,you__needto__includea__trailing comma:my_t__= (3,)It__doesnt__oftenmake__senseto__builda__tuplewith__one element,but__thiscan__happenwhen__tuplesare__generated automatically.Looping__ThroughAll__Valuesin__aTuple__Youcan__loopover__allthe__valuesin__atuple__usinga__for loop,just__asyou__didwith__a list:dimensions__= (200, 50)for__dimensionin__dimensions: print(dimension)Working__withLists__67Python__returnsall__theelements__inthe__tuple,just__asit__wouldfor__a list: 200 50Writing__Overa__TupleAlthough__youcan__tmodify__a tuple,you__canassign__anew__valueto__avariable__thatrepresents__a tuple.For__example,if__wewanted__tochange__thedimensions__ofthis__rectangle,we__couldredefine__theentire__tuple:dimensions__= (200, 50) print("Original dimensions:")for__dimensionin__dimensions: print(dimension)dimensions__= (400, 100) print("\nModified dimensions:")for__dimensionin__dimensions: print(dimension)The__firstfour__linesdefine__theoriginal__tupleand__printthe__initialdimen__sions.We__thenassociate__anew__tuplewith__thevariable__dimensions,and__printthe__new values.Python__doesnt__raiseany__errorsthis__time,because__reassigning__avariable__is valid:Original__dimensions: 200 50Modified__dimensions: 400 100When__comparedwith__lists,tuples__aresimple__data structures.Use__themwhen__youwant__tostore__aset__ofvalues__thatshould__notbe__changedthrough__outthe__lifeof__a program.TRY__ITYOURSELF__4-13. Buffet:A__buffet-stylerestaurant__offersonly__fivebasic__foods.Think__offive__simple foods,and__storethem__ina__tuple.Use__afor__loopto__printeach__foodthe__restaurant offers.Try__tomodify__oneof__the items,and__makesure__thatPython__rejectsthe__change.The__restaurantchanges__its menu,replacing__twoof__theitems__withdifferent__foods.Add__aline__thatrewrites__the tuple,and__thenuse__afor__loopto__printeach__ofthe__itemson__therevised__menu. 68Chapter__4Styling__YourCode__Nowthat__youre__writinglonger__programs,it__sa__goodidea__tolearn__howto__styleyour__code consistently.Take__thetime__tomake__yourcode__aseasy__aspos__sibleto__read.Writing__easy-to-readcode__helpsyou__keeptrack__ofwhat__yourprograms__aredoing__andhelps__othersunderstand__yourcode__as well.Python__programmershave__agreedon__anumber__ofstyling__conventionsto__ensurethat__everyones__codeis__structuredin__roughlythe__same way.Once__youve__learnedto__writeclean__Python code,you__shouldbe__ableto__understandthe__overallstructure__ofanyone__elses__Python code,as__longas__theyfollow__thesame__guidelines.If__youre__hopingto__becomea__professionalprogrammer__atsome__point,you__shouldbegin__followingthese__guidelinesas__soonas__possibleto__developgood__habits.The__StyleGuide__Whensomeone__wantsto__makea__changeto__thePython__language,they__writea__PythonEnhancement__Proposal (PEP).One__ofthe__oldestPEPs__isPEP__8,which__instructsPython__programmerson__howto__styletheir__code.PEP__8is__fairly lengthy,but__muchof__itrelates__tomore__complexcoding__structuresthan__whatyou__veseen__so far.The__Pythonstyle__guidewas__writtenwith__theunderstanding__thatcode__isread__moreoften__thanit__is written.You__llwrite__yourcode__onceand__thenstart__readingit__asyou__begin debugging.When__youadd__featuresto__apro__gram,you__llspend__moretime__readingyour__code.When__youshare__yourcode__withother__programmers,they__llread__yourcode__as well.Given__thechoice__betweenwriting__codethat__seasier__towrite__orcode__thats__easierto__read,Python__programmerswill__almostalways__encourageyou__towrite__codethat__seasier__to read.The__followingguidelines__willhelp__youwrite__clearcode__fromthe__start.Indentation__PEP 8recommends__thatyou__usefour__spacesper__indentation level.Using__fourspaces__improvesreadability__whileleaving__roomfor__multiplelevels__ofindentation__oneach__line.In__aword__processing document,people__oftenuse__tabsrather__thanspaces__to indent.This__workswell__forword__processing documents,but__thePython__interpretergets__confusedwhen__tabsare__mixedwith__spaces.Every__texteditor__providesa__settingthat__letsyou__usethe__TABkey__butthen__convertseach__tabto__aset__numberof__spaces.You__shoulddefinitely__useyour__TAB key,but__alsomake__sureyour__editoris__setto__insertspaces__ratherthan__tabsinto__your document.Mixing__tabsand__spacesin__yourfile__cancause__problemsthat__arevery__difficultto__diagnose.If__youthink__youhave__amix__oftabs__and spaces,you__canconvert__alltabs__ina__fileto__spacesin__most editors.Working__withLists__69Line__LengthMany__Pythonprogrammers__recommendthat__eachline__shouldbe__lessthan__80 characters. Historically,this__guidelinedeveloped__becausemost__computers__couldfit__only 79characters__ona__singleline__ina__terminal window. Currently,people__canfit__muchlonger__lineson__their screens,but__otherrea__sonsexist__toadhere__tothe__79-characterstandard__line length.Professional__programmersoften__haveseveral__filesopen__onthe__same screen,and__usingthe__standardline__lengthallows__themto__seeentire__linesin__twoor__threefiles__thatare__openside__byside__onscreen.PEP__8also__recommends__thatyou__limitall__ofyour__commentsto__72characters__per line,because__someof__thetools__thatgenerate__automaticdocumentation__forlarger__projectsadd__formattingcharacters__atthe__beginningof__eachcom__mented line.The__PEP 8guidelines__forline__lengthare__notset__in stone,and__someteams__prefera__99-character limit.Don__tworry__toomuch__aboutline__lengthin__yourcode__asyou__re learning,but__beaware__thatpeople__whoare__workingcollaboratively__almostalways__followthe__PEP 8 guidelines.Most__editorsallow__youto__setup__avisual__cue,usually__avertical__lineon__your screen,that__showsyou__wherethese__limits are.NOTE__AppendixB__showsyou__howto__configureyour__texteditor__soit__alwaysinserts__fourspaces__eachtime__youpress__theTAB__keyand__showsa__verticalguideline__tohelp__youfollow__the 79-character limit.Blank__LinesTo__groupparts__ofyour__program visually,use__blank lines.You__shoulduse__blanklines__toorganize__your files,but__dont__doso__excessively.By__followingthe__examplesprovided__inthis__book,you__shouldstrike__theright__balance.For__example,if__youhave__fivelines__ofcode__thatbuild__alist__andthen__anotherthree__linesthat__dosomething__withthat__list,it__sappropriate__toplace__ablank__linebetween__thetwo__sections. However,you__shouldnot__placethree__orfour__blanklines__betweenthe__two sections.Blank__lineswon__taffect__howyour__code runs,but__theywill__affectthe__readabilityof__your code.The__Pythoninterpreter__useshorizontal__indentation__tointerpret__themeaning__ofyour__code,but__itdisregards__vertical spacing.Other__StyleGuidelines__PEP 8has__manyadditional__styling recommendations,but__mostof__theguidelines__referto__morecomplex__programsthan__whatyou__rewriting__atthis__point.As__youlearn__morecomplex__Python structures,I__llshare__therelevant__partsof__thePEP__8 guidelines. 70Chapter__4TRY__ITYOURSELF__4-14.PEP__8:Look__throughthe__originalPEP__8style__guideat__https://python.org/ dev/peps/pep-0008.You__wont__usemuch__ofit__now,but__itmight__beinteresting__toskim__through it. 4-15.Code__Review:Choose__threeof__theprograms__youve__writtenin__thischapter__andmodify__eachone__tocomply__withPEP__8.Use__fourspaces__foreach__indentation level.Set__yourtext__editorto__insertfour__spacesevery__timeyou__pressthe__TAB key,if__youhaven__talready__doneso__(seeAppendix__Bfor__instructionson__howto__do this).Use__lessthan__80characters__oneach__line,and__setyour__editorto__showa__verticalguideline__atthe__80thcharacter__position.Don__tuse__blanklines__excessivelyin__yourprogram__files.Summary__Inthis__chapter,you__learnedhow__towork__efficientlywith__theelements__ina__list.You__learnedhow__towork__througha__listusing__afor__loop,how__Pythonuses__indentationto__structurea__program,and__howto__avoidsome__commonindentation__errors.You__learnedto__makesimple__numerical lists,as__wellas__afew__operationsyou__canperform__onnumerical__lists.You__learnedhow__toslice__alist__towork__witha__subsetof__itemsand__howto__copylists__properlyusing__a slice.You__alsolearned__about tuples,which__providea__degreeof__protectionto__aset__ofvalues__thatshouldn__t change,and__howto__styleyour__increasinglycomplex__codeto__makeit__easyto__read.In__Chapter 5,you__lllearn__torespond__appropriatelyto__differentcondi__tionsby__usingif__statements.You__lllearn__tostring__togetherrelatively__complexsets__ofconditional__teststo__respondappropriately__toexactly__thekind__ofsitua__tionor__informationyou__relooking__for.You__llalso__learnto__useif__statementswhile__loopingthrough__alist__totake__specificactions__withselected__elementsfrom__a list. 5IF__STAT__EMENTSProgramming__ofteninvolves__examininga__setof__conditionsand__decidingwhich__actionto__takebased__onthose__conditions.Python__sif__statementallows__youto__examinethe__currentstate__ofa__programand__respondappro__priatelyto__that state.In__this chapter,you__lllearn__towrite__conditional tests,which__allowyou__tocheck__anycondition__of interest.You__lllearn__towrite__simpleif__statements,and__youll__learnhow__tocreate__amore__complexseries__ofif__statementsto__identifywhen__theexact__conditionsyou__wantare__present.You__llthen__applythis__conceptto__lists,so__youll__beable__towrite__afor__loopthat__handlesmost__itemsin__alist__oneway__buthandles__certainitems__withspecific__valuesin__adif__ferent way. 72Chapter__5A__SimpleExample__Thefollowing__exampleshows__howif__testslet__yourespond__tospecial__situations__correctly.Imagine__youhave__alist__ofcars__andyou__wantto__printout__thename__ofeach__car.Car__namesare__proper names,so__thenames__ofmost__carsshould__beprinted__intitle__case. However,the__value 'bmw'should__beprinted__inall__uppercase.The__followingcode__loopsthrough__alist__ofcar__namesand__looksfor__thevalue__'bmw'.Whenever__thevalue__is 'bmw',it__sprinted__inupper__caseinstead__oftitle__case: cars.pycars__= ['audi', 'bmw', 'subaru', 'toyota']for__carin__cars: 1if__car == 'bmw': print(car.upper()) else: print(car.title())The__loopin__thisexample__firstchecks__ifthe__currentvalue__ofcar__is 'bmw' 1.If__it is,the__valueis__printedin__uppercase.If__thevalue__ofcar__isanything__otherthan__'bmw',it__sprinted__intitle__case:Audi__BMWSubaru__ToyotaThis__examplecombines__anumber__ofthe__conceptsyou__lllearn__aboutin__this chapter.Let__sbegin__bylooking__atthe__kindsof__testsyou__canuse__toexamine__theconditions__inyour__program.Conditional__TestsAt__theheart__ofevery__ifstatement__isan__expressionthat__canbe__evaluatedas__Trueor__Falseand__iscalled__aconditional__test.Python__usesthe__valuesTrue__andFalse__todecide__whetherthe__codein__anif__statementshould__be executed.If__aconditional__testevaluates__to True,Python__executesthe__codefollowing__theif__statement.If__thetest__evaluatesto__False,Python__ignoresthe__codefollowing__theif__statement.Checking__forEquality__Mostconditional__testscompare__thecurrent__valueof__avariable__toa__specificvalue__of interest.The__simplestconditional__testchecks__whetherthe__valueof__avariable__isequal__tothe__valueof__interest: >>>car__= 'bmw' >>>car__== 'bmw'True__ifStatements__73The__firstline__setsthe__valueof__carto__'bmw'using__asingle__equal sign,as__youve__seenmany__times already.The__nextline__checkswhether__thevalue__ofcar__is 'bmw'by__usinga__doubleequal__sign (==).This__equalityoperator__returnsTrue__ifthe__valueson__theleft__andright__sideof__theoperator__match,and__Falseif__theydon__t match.The__valuesin__thisexample__match,so__Pythonreturns__True.When__thevalue__ofcar__isanything__otherthan__'bmw',this__testreturns__False: >>>car__= 'audi' >>>car__== 'bmw'False__Asingle__equalsign__isreally__a statement;you__mightread__thefirst__lineof__codehere__asSet__thevalue__ofcar__equalto__'audi'.On__theother__hand,a__doubleequal__signasks__a question:Is__thevalue__ofcar__equalto__'bmw'?Most__programminglanguages__useequal__signsin__this way.Ignoring__CaseWhen__Checkingfor__EqualityTesting__forequality__iscase__sensitivein__Python.For__example,two__valueswith__differentcapitalization__arenot__considered equal: >>>car__= 'Audi' >>>car__== 'audi'False__Ifcase__matters,this__behavioris__advantageous.But__ifcase__doesnt__matterand__insteadyou__justwant__totest__thevalue__ofa__variable,you__canconvert__thevariable__svalue__tolowercase__beforedoing__the comparison: >>>car__= 'Audi' >>> car.lower() == 'audi'True__Thistest__willreturn__Trueno__matterhow__thevalue__'Audi'is__formattedbecause__thetest__isnow__case insensitive.The__lower()method__doesnt__changethe__valuethat__wasoriginally__storedin__car,so__youcan__dothis__kindof__comparison__withoutaffecting__theoriginal__variable: >>>car__= 'Audi' >>> car.lower() == 'audi'True__>>>car__'Audi'We__firstassign__thecapitalized__string 'Audi'to__thevariable__car. Then,we__convertthe__valueof__carto__lowercaseand__comparethe__lowercasevalue__tothe__string 'audi'.The__twostrings__match,so__Pythonreturns__True.We__cansee__thatthe__valuestored__incar__hasnot__beenaffected__bythe__lower() method.Websites__enforcecertain__rulesfor__thedata__thatusers__enterin__amanner__similarto__this.For__example,a__sitemight__usea__conditionaltest__likethis__to 74Chapter__5ensure__thatevery__userhas__atruly__unique username,not__justa__variationon__thecapitalization__ofanother__persons__username.When__someonesubmits__anew__username,that__newusername__isconverted__tolowercase__andcompared__tothe__lowercaseversions__ofall__existing usernames.During__this check,a__username__like 'John'will__berejected__ifany__variationof__'john'is__alreadyin__use.Checking__forInequality__Whenyou__wantto__determinewhether__twovalues__arenot__equal,you__canuse__theinequality__operator (!=).Let__suse__anotherif__statementto__examinehow__touse__theinequality__operator.We__llstore__arequested__pizzatopping__ina__variable__andthen__printa__messageif__theperson__didnot__order anchovies: toppings.pyrequested_topping__= 'mushrooms'if__requested_topping != 'anchovies': print("Holdthe__anchovies!")This__codecompares__thevalue__ofrequested_topping__tothe__value 'anchovies'.If__thesetwo__valuesdo__not match,Python__returnsTrue__andexecutes__thecode__followingthe__if statement.If__thetwo__values match,Python__returnsFalse__anddoes__notrun__thecode__followingthe__if statement.Because__thevalue__ofrequested_topping__isnot__'anchovies',the__print()function__is executed:Hold__the anchovies!Most__ofthe__conditionalexpressions__youwrite__willtest__for equality,but__sometimesyou__llfind__itmore__efficientto__testfor__inequality.Numerical__ComparisonsTesting__numericalvalues__ispretty__straightforward.For__example,the__following__codechecks__whethera__personis__18years__old: >>>age__= 18 >>>age__== 18True__Youcan__alsotest__tosee__iftwo__numbersare__not equal.For__example,the__followingcode__printsa__messageif__thegiven__answeris__not correct:magic___number.pyanswer__= 17if__answer != 42: print("Thatis__notthe__correct answer.Please__try again!")The__conditionaltest__passes,because__thevalue__ofanswer__(17)is__notequal__to 42.Because__thetest__passes,the__indentedcode__blockis__executed:That__isnot__thecorrect__answer.Please__try again!if__Statements 75You__caninclude__variousmathematical__comparisonsin__yourconditional__statementsas__well,such__asless__than,less__thanor__equal to,greater__than,and__greaterthan__orequal__to: >>>age__= 19 >>>age__< 21True__>>>age__<= 21True__>>>age__> 21False__>>>age__>= 21False__Eachmathematical__comparisoncan__beused__aspart__ofan__if statement,which__canhelp__youdetect__theexact__conditionsof__interest.Checking__MultipleConditions__Youmay__wantto__checkmultiple__conditionsat__thesame__time.For__example,sometimes__youmight__needtwo__conditionsto__beTrue__totake__an action.Other__times,you__mightbe__satisfiedwith__justone__conditionbeing__True.The__keywordsand__andor__canhelp__youin__these situations.Using__andto__CheckMultiple__ConditionsTo__checkwhether__twoconditions__areboth__True simultaneously,use__thekey__wordand__tocombine__thetwo__conditional tests;if__eachtest__passes,the__overallexpression__evaluatesto__True.If__eithertest__failsor__ifboth__tests fail,the__expression__evaluatesto__False.For__example,you__cancheck__whethertwo__peopleare__bothover__21by__usingthe__following test: >>> age_0 = 22 >>> age_1 = 18 1 >>> age_0 >= 21and__age_1 >= 21False__2 >>> age_1 = 22 >>> age_0 >= 21and__age_1 >= 21True__First,we__definetwo__ages, age_0and__age_1.Then__wecheck__whetherboth__agesare__21or__older 1.The__teston__theleft__passes,but__thetest__onthe__right fails,so__theoverall__conditionalexpression__evaluatesto__False.We__thenchange__age_1to__22 2.The__valueof__age_1is__nowgreater__than 21,so__bothindividual__tests pass,causing__theoverall__conditionalexpression__toevaluate__as True.To__improve readability,you__canuse__parenthesesaround__theindividual__tests,but__theyare__not required.If__youuse__parentheses,your__testwould__looklike__this: (age_0 >= 21)and__(age_1 >= 21) 76Chapter__5Using__orto__CheckMultiple__ConditionsThe__keywordor__allowsyou__tocheck__multipleconditions__as well,but__itpasses__wheneither__orboth__ofthe__individualtests__pass.An__orexpression__failsonly__whenboth__individualtests__fail.Let__sconsider__twoages__again,but__thistime__well__lookfor__onlyone__person__tobe__over 21: >>> age_0 = 22 >>> age_1 = 18 1 >>> age_0 >= 21or__age_1 >= 21True__2 >>> age_0 = 18 >>> age_0 >= 21or__age_1 >= 21False__Westart__withtwo__agevariables__again.Because__thetest__for age_0 1 passes,the__overallexpression__evaluatesto__True.We__thenlower__age_0to__18.In__thefinal__test 2,both__testsnow__failand__theoverall__expressionevaluates__to False.Checking__Whethera__ValueIs__ina__ListSometimes__its__importantto__checkwhether__alist__containsa__certainvalue__beforetaking__an action.For__example,you__mightwant__tocheck__whethera__newusername__alreadyexists__ina__listof__currentusernames__beforecompleting__someones__registrationon__a website.In__amapping__project,you__mightwant__tocheck__whethera__submittedlocation__alreadyexists__ina__listof__known locations.To__findout__whethera__particularvalue__isalready__ina__list,use__thekey__word in.Let__sconsider__somecode__youmight__writefor__a pizzeria.We__llmake__alist__oftoppings__acustomer__hasrequested__fora__pizzaand__thencheck__whethercertain__toppingsare__inthe__list. >>>requested_toppings__= ['mushrooms', 'onions', 'pineapple'] >>> 'mushrooms'in__requested_toppingsTrue__>>> 'pepperoni'in__requested_toppingsFalse__Thekeyword__intells__Pythonto__checkfor__theexistence__of 'mushrooms'and__'pepperoni'in__thelist__requested_toppings.This__techniqueis__quitepower__fulbecause__youcan__createa__listof__essential values,and__theneasily__checkwhether__thevalue__youre__testingmatches__oneof__thevalues__inthe__list.Checking__Whethera__ValueIs__Notin__aList__Other times,it__simportant__toknow__ifa__valuedoes__notappear__ina__list.You__canuse__thekeyword__notin__this situation.For__example,consider__alist__ofusers__whoare__bannedfrom__commentingin__a forum.You__cancheck__whethera__userhas__beenbanned__beforeallowing__thatperson__tosubmit__a comment: banned_users.pybanned_users__= ['andrew', 'carolina', 'david']user__= 'marie'if__Statements 77if__usernot__in banned_users: print(f"{user.title()},you__canpost__aresponse__ifyou__wish.")The__ifstatement__herereads__quite clearly.If__thevalue__ofuser__isnot__inthe__list banned_users,Python__returnsTrue__andexecutes__theindented__line.The__user 'marie'is__notin__thelist__banned_users,so__shesees__amessage__invitingher__topost__a response: Marie,you__canpost__aresponse__ifyou__wish.Boolean__ExpressionsAs__youlearn__moreabout__programming,you__llhear__theterm__Booleanexpression__atsome__point.A__Booleanexpression__isjust__anothername__fora__conditional test.A__Booleanvalue__iseither__Trueor__False,just__likethe__valueof__aconditional__expressionafter__ithas__been evaluated.Boolean__valuesare__oftenused__tokeep__trackof__certain conditions,such__aswhether__agame__isrunning__orwhether__auser__canedit__certaincontent__ona__website:game_active__=True__can_edit =False__Booleanvalues__providean__efficientway__totrack__thestate__ofa__programor__aparticular__conditionthat__isimportant__inyour__program.TRY__ITYOURSELF__5-1.Conditional__Tests:Write__aseries__ofconditional__tests.Print__astatement__describingeach__testand__yourprediction__forthe__resultsof__each test.Your__codeshould__looksomething__like this:car__= 'subaru' print("Iscar__== 'subaru'?I__predict True.") print(car == 'subaru') print("\nIscar__== 'audi'?I__predict False.") print(car == 'audi')Look__closelyat__your results,and__makesure__youunderstand__whyeach__lineevaluates__toTrue__or False.Create__atleast__10 tests.Have__atleast__5tests__evaluateto__Trueand__another 5tests__evaluateto__False. (continued) 78Chapter__5 5-2.More__Conditional Tests:You__dont__haveto__limitthe__numberof__testsyou__create__to 10.If__youwant__totry__more comparisons,write__moretests__andadd__themto__conditional_tests.py.Have__atleast__oneTrue__andone__Falseresult__foreach__ofthe__following:Tests__forequality__andinequality__withstrings__Testsusing__the lower()method__Numericaltests__involvingequality__and inequality,greater__thanand__less than,greater__thanor__equal to,and__lessthan__orequal__toTests__usingthe__andkeyword__andthe__orkeyword__Testwhether__anitem__isin__alist__Testwhether__anitem__isnot__ina__listif__StatementsWhen__youunderstand__conditional tests,you__canstart__writingif__statements.Several__differentkinds__ofif__statements exist,and__yourchoice__ofwhich__touse__dependson__thenumber__ofconditions__youneed__to test.You__sawseveral__examplesof__ifstatements__inthe__discussionabout__conditional tests,but__nowlet__sdig__deeperinto__the topic.Simple__ifStatements__Thesimplest__kindof__ifstatement__hasone__testand__one action:if__conditional_test:do__somethingYou__canput__anyconditional__testin__thefirst__lineand__justabout__anyaction__inthe__indentedblock__followingthe__test.If__theconditional__testevaluates__to True,Python__executesthe__codefollowing__theif__statement.If__thetest__evaluatesto__False,Python__ignoresthe__codefollowing__theif__statement.Let__ssay__wehave__avariable__representinga__persons__age,and__wewant__toknow__ifthat__personis__oldenough__to vote.The__followingcode__testswhether__theperson__can vote: voting.pyage__= 19if__age >= 18: print("Youare__oldenough__to vote!")Python__checksto__seewhether__thevalue__ofage__isgreater__thanor__equalto__18.It__is,so__Pythonexecutes__theindented__print() call:You__areold__enoughto__vote!if__Statements 79Indentation__playsthe__samerole__inif__statementsas__itdid__infor__loops.All__indentedlines__afteran__ifstatement__willbe__executedif__thetest__passes,and__theentire__blockof__indentedlines__willbe__ignoredif__thetest__doesnot__pass.You__canhave__asmany__linesof__codeas__youwant__inthe__blockfollow__ingthe__if statement.Let__sadd__anotherline__ofoutput__ifthe__personis__oldenough__to vote,asking__ifthe__individualhas__registeredto__vote yet:age__= 19if__age >= 18: print("Youare__oldenough__to vote!") print("Haveyou__registeredto__vote yet?")The__conditionaltest__passes,and__both print()calls__are indented,so__bothlines__are printed:You__areold__enoughto__vote!Have__youregistered__tovote__yet?If__thevalue__ofage__isless__than 18,this__programwould__produceno__output. if-elseStatements__Often,you__llwant__totake__oneaction__whena__conditionaltest__passesand__adif__ferentaction__inall__other cases.Python__s if-elsesyntax__makesthis__possible.An__if-elseblock__issimilar__toa__simpleif__statement,but__theelse__statementallows__youto__definean__actionor__setof__actionsthat__areexecuted__whenthe__conditional__test fails.We__lldisplay__thesame__messagewe__hadpreviously__ifthe__personis__oldenough__to vote,but__thistime__well__adda__messagefor__anyonewho__isnot__oldenough__to vote:age__= 17 1if__age >= 18: print("Youare__oldenough__to vote!") print("Haveyou__registeredto__vote yet?") 2 else: print("Sorry,you__aretoo__youngto__vote.") print("Pleaseregister__tovote__assoon__asyou__turn 18!")If__theconditional__test 1 passes,the__firstblock__ofindented__print()calls__is executed.If__thetest__evaluatesto__False,the__elseblock__2is__executed.Because__ageis__lessthan__18this__time,the__conditionaltest__failsand__thecode__inthe__elseblock__is executed: Sorry,you__aretoo__youngto__vote.Please__registerto__voteas__soonas__youturn__18!This__codeworks__becauseit__hasonly__twopossible__situationsto__evaluate:a__personis__eitherold__enoughto__voteor__notold__enoughto__vote.The__if-else 80Chapter__5structure__workswell__insituations__inwhich__youwant__Pythonto__alwaysexe__cuteone__oftwo__possible actions.In__asimple__if-elsechain__like this,one__ofthe__twoactions__willalways__be executed.The__if-elif-elseChain__Often,you__llneed__totest__morethan__twopossible__situations,and__toevaluate__theseyou__canuse__Pythons__if-elif-else syntax.Python__executesonly__oneblock__inan__if-elif-else chain.It__runseach__conditionaltest__in order,until__one passes.When__atest__passes,the__codefollowing__thattest__isexecuted__andPython__skipsthe__restof__the tests.Many__real-worldsituations__involvemore__thantwo__possible conditions.For__example,consider__anamusement__parkthat__chargesdifferent__ratesfor__differentage__groups:Admission__foranyone__underage__4is__free.Admission__foranyone__betweenthe__agesof__4and__18is__$25.Admission__foranyone__age 18or__olderis__$40.How__canwe__usean__ifstatement__todetermine__aperson__sadmission__rate?The__followingcode__testsfor__theage__groupof__aperson__andthen__printsan__admissionprice__message:amusement___park.pyage__= 12 1if__age < 4: print("Youradmission__costis__$0.") 2elif__age < 18: print("Youradmission__costis__$25.") 3 else: print("Youradmission__costis__$40.")The__iftest__1checks__whethera__personis__under 4years__old.When__thetest__passes,an__appropriatemessage__isprinted__andPython__skipsthe__restof__the tests.The__elifline__2is__reallyanother__if test,which__runsonly__ifthe__previoustest__failed.At__thispoint__inthe__chain,we__knowthe__personis__atleast__4years__oldbecause__thefirst__test failed.If__theperson__isunder__18,an__appropriate__messageis__printedand__Pythonskips__theelse__block.If__boththe__ifand__eliftests__fail,Python__runsthe__codein__theelse__block 3.In__thisexample__theif__test 1evaluates__to False,so__itscode__blockis__not executed. However,the__eliftest__evaluatesto__True (12is__lessthan__18)so__itscode__is executed.The__outputis__one sentence,informing__theuser__ofthe__admission cost:Your__admissioncost__is $25.Any__agegreater__than 17would__causethe__firsttwo__teststo__fail.In__these situations,the__elseblock__wouldbe__executedand__theadmission__pricewould__be $40.Rather__thanprinting__theadmission__pricewithin__the if-elif-else block,it__wouldbe__moreconcise__toset__justthe__priceinside__the if-elif-elsechain__ifStatements__81and__thenhave__asingle__print()call__thatruns__afterthe__chainhas__been evaluated:age__= 12if__age < 4:price__= 0elif__age < 18:price__= 25 else:price__= 40 print(f"Youradmission__costis__${price}.")The__indentedlines__setthe__valueof__priceaccording__tothe__persons__age,as__inthe__previous example.After__theprice__isset__bythe__if-elif-else chain,a__separateunindented__print()call__usesthis__valueto__displaya__messagereport__ingthe__persons__admission price.This__codeproduces__thesame__outputas__theprevious__example,but__thepurpose__ofthe__if-elif-elsechain__is narrower.Instead__ofdetermining__aprice__anddisplaying__a message,it__simplydetermines__theadmission__price.In__addition__tobeing__more efficient,this__revisedcode__iseasier__tomodify__thanthe__original approach.To__changethe__textof__theoutput__message,you__wouldneed__tochange__onlyone__print()call__ratherthan__threeseparate__print() calls.Using__Multipleelif__BlocksYou__canuse__asmany__elifblocks__inyour__codeas__you like.For__example,if__theamusement__parkwere__toimplement__adiscount__for seniors,you__couldadd__onemore__conditionaltest__tothe__codeto__determinewhether__someonequali__fiesfor__thesenior__discount.Let__ssay__thatanyone__65or__olderpays__halfthe__regular admission,or__$20:age__= 12if__age < 4:price__= 0elif__age < 18:price__= 25elif__age < 65:price__= 40 else:price__= 20 print(f"Youradmission__costis__${price}.")Most__ofthis__codeis__unchanged.The__secondelif__blocknow__checksto__makesure__aperson__isless__thanage__65before__assigningthem__thefull__admission__rateof__$40.Notice__thatthe__valueassigned__inthe__elseblock__needsto__bechanged__to $20,because__theonly__agesthat__makeit__tothis__blockare__forpeople__65or__older. 82Chapter__5Omitting__theelse__BlockPython__doesnot__requirean__elseblock__atthe__endof__an if-elif chain. Sometimes,an__elseblock__is useful.Other__times,it__sclearer__touse__anaddi__tionalelif__statementthat__catchesthe__specificcondition__of interest:age__= 12if__age < 4:price__= 0elif__age < 18:price__= 25elif__age < 65:price__= 40elif__age >= 65:price__= 20 print(f"Youradmission__costis__${price}.")The__finalelif__blockassigns__aprice__of $20when__theperson__is 65or__older,which__isa__littleclearer__thanthe__generalelse__block.With__this change,every__blockof__codemust__passa__specifictest__inorder__tobe__executed.The__elseblock__isa__catchall statement.It__matchesany__conditionthat__wasnt__matchedby__aspecific__ifor__elif test,and__thatcan__sometimesinclude__invalidor__evenmalicious__data.If__youhave__aspecific__finalcondition__youre__testing for,consider__usinga__finalelif__blockand__omitthe__else block.As__a result,you__llbe__moreconfident__thatyour__codewill__runonly__underthe__correct__conditions.Testing__MultipleConditions__The if-elif-elsechain__is powerful,but__its__onlyappropriate__touse__whenyou__justneed__onetest__to pass.As__soonas__Pythonfinds__onetest__that passes,it__skipsthe__restof__the tests.This__behavioris__beneficial,because__its__efficientand__allowsyou__totest__forone__specific condition. However,sometimes__its__importantto__checkall__conditionsof__interest.In__this case,you__shoulduse__aseries__ofsimple__ifstatements__withno__elifor__else blocks.This__techniquemakes__sensewhen__morethan__onecondition__couldbe__True,and__youwant__toact__onevery__conditionthat__is True.Let__sreconsider__thepizzeria__example.If__someonerequests__a two-topping pizza,you__llneed__tobe__sureto__includeboth__toppingson__their pizza: toppings.pyrequested_toppings__= ['mushrooms', 'extra cheese']if__'mushrooms'in__requested_toppings: print("Adding mushrooms.") 1if__'pepperoni'in__requested_toppings: print("Adding pepperoni.")if__Statements 83if__'extra cheese'in__requested_toppings: print("Addingextra__cheese.") print("\nFinishedmaking__your pizza!")We__startwith__alist__containingthe__requested toppings.The__firstif__statementchecks__tosee__whetherthe__personrequested__mushroomson__their pizza.If__so,a__messageis__printedconfirming__that topping.The__testfor__pepperoni__1is__anothersimple__if statement,not__anelif__orelse__statement,so__thistest__isrun__regardlessof__whetherthe__previoustest__passedor__not.The__lastif__statementchecks__whetherextra__cheesewas__requested,regardless__ofthe__resultsfrom__thefirst__two tests.These__threeindependent__testsare__executed__everytime__thisprogram__is run.Because__everycondition__inthis__exampleis__evaluated,both__mushroomsand__extracheese__areadded__tothe__pizza:Adding__mushrooms.Adding__extra cheese.Finished__makingyour__pizza!This__codewould__notwork__properlyif__weused__an if-elif-else block,because__thecode__wouldstop__runningafter__onlyone__test passes.Here__swhat__thatwould__look like:requested_toppings__= ['mushrooms', 'extra cheese']if__'mushrooms'in__requested_toppings: print("Adding mushrooms.")elif__'pepperoni'in__requested_toppings: print("Adding pepperoni.")elif__'extra cheese'in__requested_toppings: print("Addingextra__cheese.") print("\nFinishedmaking__your pizza!")The__testfor__'mushrooms'is__thefirst__testto__pass,so__mushroomsare__addedto__the pizza. However,the__values 'extra cheese'and__'pepperoni'are__never checked,because__Pythondoesn__trun__anytests__beyondthe__firsttest__thatpasses__inan__if-elif-else chain.The__customers__firsttopping__willbe__added,but__allof__theirother__toppingswill__be missed:Adding__mushrooms.Finished__makingyour__pizza!In__summary,if__youwant__onlyone__blockof__codeto__run,use__an if-elif-else chain.If__morethan__oneblock__ofcode__needsto__run,use__aseries__ofindepen__dentif__statements. 84Chapter__5TRY__ITYOURSELF__5-3.Alien__Colors #1:Imagine__analien__wasjust__shotdown__ina__game.Create__avariable__calledalien_color__andassign__ita__valueof__'green', 'yellow',or__'red'.Write__anif__statementto__testwhether__thealien__scolor__is green.If__it is,print__amessage__thatthe__playerjust__earned 5 points.Write__oneversion__ofthis__programthat__passesthe__iftest__andanother__that fails. (Theversion__thatfails__willhave__no output.) 5-4.Alien__Colors #2:Choose__acolor__foran__alienas__youdid__inExercise__5-3,and__writean__if-else chain.If__thealien__scolor__is green,print__astatement__thatthe__playerjust__earned 5points__forshooting__the alien.If__thealien__scolor__isnt__green,print__astatement__thatthe__playerjust__earned 10 points.Write__oneversion__ofthis__programthat__runsthe__ifblock__andanother__thatruns__theelse__block. 5-5.Alien__Colors #3:Turn__your if-elsechain__fromExercise__5-4into__an if-elif-else__chain.If__thealien__is green,print__amessage__thatthe__playerearned__5 points.If__thealien__is yellow,print__amessage__thatthe__playerearned__10 points.If__thealien__is red,print__amessage__thatthe__playerearned__15 points.Write__threeversions__ofthis__program,making__sureeach__messageis__printedfor__theappropriate__color alien. 5-6.Stages__of Life:Write__an if-elif-elsechain__thatdetermines__aperson__sstage__of life.Set__avalue__forthe__variable age,and__then:If__theperson__isless__than 2years__old,print__amessage__thatthe__personis__a baby.If__theperson__isat__least 2years__oldbut__lessthan__4,print__amessage__thatthe__personis__a toddler.If__theperson__isat__least 4years__oldbut__lessthan__13,print__amessage__thatthe__personis__a kid.If__theperson__isat__least 13years__oldbut__lessthan__20,print__amessage__thatthe__personis__a teenager.If__theperson__isat__least 20years__oldbut__lessthan__65,print__amessage__thatthe__personis__an adult.If__theperson__isage__65or__older,print__amessage__thatthe__personis__an elder.if__Statements 85 5-7.Favorite__Fruit:Make__alist__ofyour__favorite fruits,and__thenwrite__aseries__ofindependent__ifstatements__thatcheck__forcertain__fruitsin__your list.Make__alist__ofyour__threefavorite__fruitsand__callit__favorite_fruits.Write__fiveif__statements.Each__shouldcheck__whethera__certainkind__offruit__isin__your list.If__thefruit__isin__your list,the__ifblock__shouldprint__a statement,such__asYou__reallylike__bananas!Using__ifStatements__withLists__Youcan__dosome__interestingwork__whenyou__combinelists__andif__statements.You__canwatch__forspecial__valuesthat__needto__betreated__differentlythan__othervalues__inthe__list.You__canefficiently__managechanging__conditions,such__asthe__availabilityof__certainitems__ina__restaurantthroughout__a shift.You__canalso__beginto__provethat__yourcode__worksas__youexpect__itto__inall__possible situations.Checking__forSpecial__ItemsThis__chapterbegan__witha__simpleexample__thatshowed__howto__handlea__special__valuelike__'bmw',which__neededto__beprinted__ina__differentformat__thanother__valuesin__the list.Now__thatyou__havea__basicunderstanding__ofcondi__tionaltests__andif__statements,let__stake__acloser__lookat__howyou__canwatch__forspecial__valuesin__alist__andhandle__thosevalues__appropriately.Let__scontinue__withthe__pizzeria example.The__pizzeriadisplays__ames__sagewhenever__atopping__isadded__toyour__pizza,as__its__being made.The__codefor__thisaction__canbe__writtenvery__efficientlyby__makinga__listof__toppingsthe__customerhas__requestedand__usinga__loopto__announceeach__toppingas__its__addedto__the pizza: toppings.pyrequested_toppings__= ['mushrooms', 'green peppers', 'extra cheese']for__requested_toppingin__requested_toppings: print(f"Adding {requested_topping}.") print("\nFinishedmaking__your pizza!")The__outputis__straightforwardbecause__thiscode__isjust__asimple__for loop:Adding__mushrooms.Adding__green peppers.Adding__extra cheese.Finished__makingyour__pizza! 86Chapter__5But__whatif__thepizzeria__runsout__ofgreen__peppers?An__ifstatement__insidethe__forloop__canhandle__thissituation__appropriately:requested_toppings__= ['mushrooms', 'green peppers', 'extra cheese']for__requested_toppingin__requested_toppings:if__requested_topping == 'green peppers': print("Sorry,we__areout__ofgreen__peppersright__now.") else: print(f"Adding {requested_topping}.") print("\nFinishedmaking__your pizza!")This__time,we__checkeach__requesteditem__beforeadding__itto__the pizza.The__ifstatement__checksto__seeif__theperson__requestedgreen__peppers.If__so,we__displaya__messageinforming__themwhy__theycan__thave__green peppers.The__elseblock__ensuresthat__allother__toppingswill__beadded__tothe__pizza.The__outputshows__thateach__requestedtopping__ishandled__appropriately.Adding__mushrooms. Sorry,we__areout__ofgreen__peppersright__now.Adding__extra cheese.Finished__makingyour__pizza!Checking__Thata__ListIs__NotEmpty__Weve__madea__simpleassumption__aboutevery__listwe__veworked__withso__far:we__veassumed__thateach__listhas__atleast__oneitem__in it.Soon__well__letusers__providethe__informationthat__sstored__ina__list,so__wewon__tbe__ableto__assumethat__alist__hasany__itemsin__iteach__timea__loopis__run.In__this situation,it__suseful__tocheck__whethera__listis__emptybefore__runninga__for loop.As__an example,let__scheck__whetherthe__listof__requestedtoppings__isempty__beforebuilding__the pizza.If__thelist__is empty,we__llprompt__theuser__andmake__surethey__wanta__plain pizza.If__thelist__isnot__empty,we__llbuild__thepizza__justas__wedid__inthe__previous examples:requested_toppings__= []if__requested_toppings:for__requested_toppingin__requested_toppings: print(f"Adding {requested_topping}.") print("\nFinishedmaking__your pizza!") else: print("Areyou__sureyou__wanta__plain pizza?")This__timewe__startout__withan__emptylist__ofrequested__toppings.Instead__ofjumping__rightinto__afor__loop,we__doa__quickcheck__first.When__thename__ofa__listis__usedin__anif__statement,Python__returnsTrue__ifthe__listcontains__atleast__one item;an__emptylist__evaluatesto__False.If__requested_toppingspasses__theconditional__test,we__runthe__samefor__loopwe__usedin__theprevious__ifStatements__87 example.If__theconditional__test fails,we__printa__messageasking__thecus__tomerif__theyreally__wanta__plainpizza__withno__toppings.The__listis__emptyin__this case,so__theoutput__asksif__theuser__reallywants__aplain__pizza:Are__yousure__youwant__aplain__pizza?If__thelist__isnot__empty,the__outputwill__showeach__requestedtopping__beingadded__tothe__pizza.Using__MultipleLists__Peoplewill__askfor__justabout__anything,especially__whenit__comesto__pizza toppings.What__ifa__customeractually__wantsfrench__frieson__their pizza?You__canuse__listsand__ifstatements__tomake__sureyour__inputmakes__sensebefore__youact__on it.Let__swatch__outfor__unusualtopping__requestsbefore__webuild__a pizza.The__followingexample__definestwo__lists.The__firstis__alist__ofavailable__toppings__atthe__pizzeria,and__thesecond__isthe__listof__toppingsthat__theuser__has requested.This__time,each__itemin__requested_toppingsis__checkedagainst__thelist__ofavailable__toppingsbefore__its__addedto__the pizza:available_toppings__= ['mushrooms', 'olives', 'green peppers', 'pepperoni', 'pineapple', 'extra cheese'] 1requested_toppings__= ['mushrooms', 'french fries', 'extra cheese']for__requested_toppingin__requested_toppings: 2if__requested_toppingin__available_toppings: print(f"Adding {requested_topping}.") 3 else: print(f"Sorry,we__don'thave__{requested_topping}.") print("\nFinishedmaking__your pizza!") First,we__definea__listof__availabletoppings__atthis__pizzeria.Note__thatthis__couldbe__atuple__ifthe__pizzeriahas__astable__selectionof__toppings. Then,we__makea__listof__toppingsthat__acustomer__has requested.There__san__unusualrequest__fora__toppingin__this example: 'french fries' 1.Next__weloop__throughthe__listof__requested toppings.Inside__the loop,we__checkto__seeif__eachrequested__toppingis__actuallyin__thelist__ofavailable__toppings 2.If__it is,we__addthat__toppingto__the pizza.If__therequested__toppingis__notin__thelist__ofavailable__toppings,the__elseblock__willrun__3.The__elseblock__printsa__message__tellingthe__userwhich__toppingsare__unavailable.This__codesyntax__produces clean,informative__output:Adding__mushrooms. Sorry,we__don'thave__french fries.Adding__extra cheese.Finished__makingyour__pizza! 88Chapter__5In__justa__fewlines__of code,we__vemanaged__a real-worldsituation__pretty effectively!TRY__ITYOURSELF__5-8.Hello__Admin:Make__alist__offive__ormore__usernames,including__thename__'admin'.Imagine__youare__writingcode__thatwill__printa__greetingto__eachuser__afterthey__login__toa__website.Loop__throughthe__list,and__printa__greetingto__each user.If__theusername__is 'admin',print__aspecial__greeting,such__asHello__admin,would__youlike__tosee__astatus__report? Otherwise,print__ageneric__greeting,such__asHello__Jaden,thank__youfor__loggingin__again. 5-9.No__Users:Add__anif__testto__hello_admin.pyto__makesure__thelist__ofusers__isnot__empty.If__thelist__is empty,print__themessage__Weneed__tofind__some users!Remove__allof__theusernames__fromyour__list,and__makesure__thecorrect__message__is printed. 5-10.Checking__Usernames:Do__thefollowing__tocreate__aprogram__thatsimulates__howwebsites__ensurethat__everyonehas__aunique__username.Make__alist__offive__ormore__usernamescalled__current_users.Make__anotherlist__offive__usernamescalled__new_users.Make__sureone__ortwo__ofthe__newusernames__arealso__inthe__current_users list.Loop__throughthe__new_userslist__tosee__ifeach__newusername__hasalready__been used.If__it has,print__amessage__thatthe__personwill__needto__entera__new username.If__ausername__hasnot__been used,print__amessage__sayingthat__theusername__is available.Make__sureyour__comparisonis__case insensitive.If__'John'has__been used, 'JOHN'should__notbe__accepted. (Todo__this,you__llneed__tomake__acopy__ofcurrent_users__containingthe__lowercaseversions__ofall__existing users.) 5-11.Ordinal__Numbers:Ordinal__numbersindicate__theirposition__ina__list,such__as 1stor__2nd.Most__ordinalnumbers__endin__th,except__1, 2,and__3.Store__thenumbers__1through__9in__a list.Loop__throughthe__list.Use__an if-elif-elsechain__insidethe__loopto__printthe__properordinal__endingfor__each number.Your__outputshould__read "1st 2nd 3rd 4th 5th 6th 7th 8th 9th",and__eachresult__shouldbe__ona__separate line.if__Statements 89Styling__Yourif__StatementsIn__everyexample__inthis__chapter,you__veseen__goodstyling__habits.The__onlyrecommendation__PEP 8provides__forstyling__conditionaltests__isto__usea__singlespace__aroundcomparison__operators,such__as ==, >=,and__<=.For__example:if__age < 4:is__better than:if__age<4:Such__spacingdoes__notaffect__theway__Pythoninterprets__your code;it__justmakes__yourcode__easierfor__youand__othersto__read.TRY__ITYOURSELF__5-12.Styling__if Statements:Review__theprograms__youwrote__inthis__chapter,and__makesure__youstyled__yourconditional__tests appropriately. 5-13.Your__Ideas:At__this point,you__rea__morecapable__programmerthan__youwere__whenyou__startedthis__book.Now__thatyou__havea__bettersense__ofhow__real-worldsituations__aremodeled__in programs,you__mightbe__thinkingof__someproblems__youcould__solvewith__yourown__programs.Record__anynew__ideasyou__haveabout__problemsyou__mightwant__tosolve__asyour__programmingskills__continue__to improve.Consider__gamesyou__mightwant__to write,datasets__youmight__wantto__explore,and__webapplications__youd__liketo__create.Summary__Inthis__chapteryou__learnedhow__towrite__conditional tests,which__alwaysevaluate__toTrue__or False.You__learnedto__writesimple__if statements, if-else chains,and__if-elif-else chains.You__beganusing__thesestructures__toidentify__particularconditions__youneed__totest__andto__knowwhen__thoseconditions__havebeen__metin__your programs.You__learnedto__handlecertain__itemsin__alist__differentlythan__allother__itemswhile__continuingto__utilizethe__efficiencyof__afor__loop.You__alsorevisited__Pythons__stylerecommendations__toensure__thatyour__increasinglycomplex__programsare__stillrelatively__easyto__readand__understand.In__Chapter 6you__lllearn__aboutPython__s dictionaries.A__dictionaryis__similarto__a list,but__itallows__youto__connectpieces__of information.You__lllearn__howto__build dictionaries,loop__through them,and__usethem__incombi__nationwith__listsand__if statements.Learning__aboutdictionaries__willenable__youto__modelan__evenwider__varietyof__real-world situations. 6DIC__TION__AR__IES__Inthis__chapteryou__lllearn__howto__usePython__s dictionaries,which__allowyou__tocon__nectpieces__ofrelated__information.You__lllearn__howto__accessthe__informationonce__its__ina__dictionary__andhow__tomodify__that information.Because__dictionariescan__storean__almostlimitless__amountof__information,I__llshow__youhow__toloop__throughthe__datain__a dictionary. Additionally,you__lllearn__tonest__dictionariesinside__lists,lists__insidediction__aries,and__evendictionaries__insideother__dictionaries.Understanding__dictionariesallows__youto__modela__varietyof__real-worldobjects__more accurately.You__llbe__ableto__createa__dictionaryrepresenting__aperson__andthen__storeas__muchinformation__asyou__wantabout__that person.You__canstore__their name, age, location, profession,and__anyother__aspectof__aperson__youcan__describe.You__llbe__ableto__storeany__twokinds__ofinforma__tionthat__canbe__matched up,such__asa__listof__wordsand__their meanings,a__listof__peoples__namesand__theirfavorite__numbers,a__listof__mountainsand__their elevations,and__so forth. 92Chapter__6A__SimpleDictionary__Considera__gamefeaturing__aliensthat__canhave__differentcolors__andpoint__values.This__simpledictionary__storesinformation__abouta__particular alien: alien.py alien_0 = {'color': 'green', 'points': 5} print(alien_0['color']) print(alien_0['points'])The__dictionary alien_0stores__thealien__scolor__andpoint__value.The__lasttwo__linesaccess__anddisplay__that information,as__shown here:green__5As__withmost__newprogramming__concepts,using__dictionariestakes__prac tice.Once__youve__workedwith__dictionariesfor__a bit,you__llsee__howeffectively__theycan__model real-world situations.Working__withDictionaries__Adictionary__inPython__isa__collectionof__key-value pairs.Each__keyis__connectedto__a value,and__youcan__usea__keyto__accessthe__valueassociated__withthat__key.A__keys__valuecan__bea__number,a__string,a__list,or__evenanother__dictionary.In__fact,you__canuse__anyobject__thatyou__cancreate__inPython__asa__valuein__a dictionary.In__Python,a__dictionaryis__wrappedin__braces ({})with__aseries__of key-valuepairs__insidethe__braces,as__shownin__theearlier__example: alien_0 = {'color': 'green', 'points': 5}A__key-valuepair__isa__setof__valuesassociated__witheach__other.When__youprovide__a key,Python__returnsthe__valueassociated__withthat__key.Every__keyis__connectedto__itsvalue__bya__colon,and__individual key-valuepairs__areseparated__by commas.You__canstore__asmany__key-valuepairs__asyou__wantin__a dictionary.The__simplestdictionary__hasexactly__one key-value pair,as__shownin__thismodified__versionof__the alien_0 dictionary: alien_0 = {'color': 'green'}This__dictionarystores__onepiece__ofinformation__about alien_0:the__aliens__color.The__string 'color'is__akey__inthis__dictionary,and__itsassociated__valueis__'green'.Accessing__Valuesin__aDictionary__Toget__thevalue__associatedwith__a key,give__thename__ofthe__dictionaryand__thenplace__thekey__insidea__setof__square brackets,as__shown here: alien.py alien_0 = {'color': 'green'} print(alien_0['color'])Dictionaries__93This__returnsthe__valueassociated__withthe__key 'color'from__thediction__ary alien_0:green__Youcan__havean__unlimitednumber__of key-valuepairs__ina__dictionary.For__example,here__sthe__original alien_0dictionary__withtwo__key-value pairs: alien_0 = {'color': 'green', 'points': 5}Now__youcan__accesseither__thecolor__orthe__pointvalue__of alien_0.If__aplayer__shootsdown__this alien,you__canlook__uphow__manypoints__theyshould__earnusing__codelike__this: alien_0 = {'color': 'green', 'points': 5}new_points__= alien_0['points'] print(f"Youjust__earned {new_points} points!")Once__thedictionary__hasbeen__defined,we__pullthe__valueassociated__withthe__key 'points'from__the dictionary.This__valueis__thenassigned__tothe__variable__new_points.The__lastline__printsa__statementabout__howmany__pointsthe__playerjust__earned:You__justearned__5 points!If__yourun__thiscode__everytime__analien__isshot__down,the__aliens__pointvalue__willbe__retrieved.Adding__New Key-ValuePairs__Dictionariesare__dynamic structures,and__youcan__addnew__key-valuepairs__toa__dictionaryat__any time.To__adda__new key-value pair,you__wouldgive__thename__ofthe__dictionaryfollowed__bythe__newkey__insquare__brackets,along__withthe__new value.Let__sadd__twonew__piecesof__informationto__the alien_0 dictionary:the__aliens__x-and__y-coordinates,which__willhelp__usdisplay__thealien__ata__particular__positionon__the screen.Let__splace__thealien__onthe__leftedge__ofthe__screen, 25pixels__downfrom__the top.Because__screencoordinates__usuallystart__atthe__upper-leftcorner__ofthe__screen,we__llplace__thealien__onthe__leftedge__ofthe__screenby__settingthe__x-coordinateto__0and__25pixels__fromthe__topby__settingits__y-coordinateto__positive 25,as__shown here: alien.py alien_0 = {'color': 'green', 'points': 5} print(alien_0) alien_0['x_position'] = 0 alien_0['y_position'] = 25 print(alien_0) 94Chapter__6We__startby__definingthe__samedictionary__thatwe__vebeen__working with.We__thenprint__this dictionary,displaying__asnapshot__ofits__information. Next,we__adda__new key-valuepair__tothe__dictionary:the__key 'x_position'and__thevalue__0.We__dothe__samefor__thekey__'y_position'.When__weprint__themodified__dictionary,we__seethe__twoadditional__key-value pairs: {'color': 'green', 'points': 5} {'color': 'green', 'points': 5, 'x_position': 0, 'y_position': 25}The__finalversion__ofthe__dictionarycontains__four key-value pairs.The__originaltwo__specifycolor__andpoint__value,and__twomore__specifythe__aliens__position.Dictionaries__retainthe__orderin__whichthey__were defined.When__youprint__adictionary__orloop__throughits__elements,you__willsee__theelements__inthe__sameorder__theywere__addedto__the dictionary.Starting__withan__EmptyDictionary__Its__sometimes convenient,or__even necessary,to__startwith__anempty__dictionary__andthen__addeach__newitem__to it.To__startfilling__anempty__dictionary,define__adictionary__withan__emptyset__ofbraces__andthen__addeach__key-valuepair__onits__own line.For__example,here__show__tobuild__the alien_0dictionary__usingthis__approach: alien.py alien_0 = {} alien_0['color'] = 'green' alien_0['points'] = 5 print(alien_0)We__firstdefine__anempty__alien_0 dictionary,and__thenadd__colorand__pointvalues__to it.The__resultis__thedictionary__weve__beenusing__inprevious__examples: {'color': 'green', 'points': 5} Typically,you__lluse__emptydictionaries__whenstoring__user-supplieddata__ina__dictionaryor__whenwriting__codethat__generatesa__largenumber__of key-value__pairs automatically.Modifying__Valuesin__aDictionary__Tomodify__avalue__ina__dictionary,give__thename__ofthe__dictionarywith__thekey__insquare__bracketsand__thenthe__newvalue__youwant__associatedwith__that key.For__example,consider__analien__thatchanges__fromgreen__toyellow__asa__game progresses: alien.py alien_0 = {'color': 'green'} print(f"Thealien__is {alien_0['color']}.")Dictionaries__95 alien_0['color'] = 'yellow' print(f"Thealien__isnow__{alien_0['color']}.")We__firstdefine__adictionary__for alien_0that__containsonly__thealien__s color;then__wechange__thevalue__associatedwith__thekey__'color'to__'yellow'.The__outputshows__thatthe__alienhas__indeedchanged__fromgreen__to yellow:The__alienis__green.The__alienis__now yellow.For__amore__interesting example,let__strack__theposition__ofan__alienthat__canmove__atdifferent__speeds.We__llstore__avalue__representingthe__aliens__currentspeed__andthen__useit__todetermine__howfar__tothe__rightthe__alienshould__move: alien_0 = {'x_position': 0, 'y_position': 25, 'speed': 'medium'} print(f"Original position: {alien_0['x_position']}") #Move__thealien__tothe__right. #Determine__howfar__tomove__thealien__basedon__itscurrent__speed. 1if__alien_0['speed'] == 'slow':x_increment__= 1elif__alien_0['speed'] == 'medium':x_increment__= 2 else: #This__mustbe__afast__alien.x_increment__= 3 #The__newposition__isthe__oldposition__plusthe__increment. 2 alien_0['x_position'] = alien_0['x_position'] +x_increment__print(f"New position: {alien_0['x_position']}")We__startby__definingan__alienwith__aninitial__xposition__andy__position,and__aspeed__of 'medium'.We__veomitted__thecolor__andpoint__valuesfor__thesake__of simplicity,but__thisexample__wouldwork__thesame__wayif__youincluded__those key-valuepairs__as well.We__alsoprint__theoriginal__valueof__x_positionto__seehow__farthe__alienmoves__tothe__right.An__if-elif-elsechain__determineshow__farthe__alienshould__moveto__the right,and__assignsthis__valueto__thevariable__x_increment 1.If__thealien__sspeed__is 'slow',it__movesone__unitto__the right;if__thespeed__is 'medium',it__movestwo__unitsto__the right;and__ifit__s 'fast',it__movesthree__unitsto__the right.Once__theincrement__hasbeen__calculated,it__sadded__tothe__valueof__x_position 2,and__theresult__isstored__inthe__dictionarys__x_position.Because__thisis__a medium-speed alien,its__positionshifts__twounits__tothe__right:Original__x-position: 0New__x-position: 2 96Chapter__6This__techniqueis__pretty cool:by__changingone__valuein__thealien__sdic__tionary,you__canchange__theoverall__behaviorof__the alien.For__example,to__turnthis__medium-speedalien__intoa__fast alien,you__wouldadd__this line: alien_0['speed'] = 'fast'The__if-elif-elseblock__wouldthen__assigna__largervalue__tox_increment__thenext__timethe__code runs.Removing__Key-ValuePairs__Whenyou__nolonger__needa__pieceof__informationthat__sstored__ina__diction ary,you__canuse__thedel__statementto__completelyremove__a key-value pair.All__delneeds__isthe__nameof__thedictionary__andthe__keythat__youwant__to remove.For__example,let__sremove__thekey__'points'from__the alien_0 dictionary,along__withits__value: alien.py alien_0 = {'color': 'green', 'points': 5} print(alien_0) 1del__alien_0['points'] print(alien_0)The__delstatement__1tells__Pythonto__deletethe__key 'points'from__thedictionary__alien_0and__toremove__thevalue__associatedwith__thatkey__as well.The__outputshows__thatthe__key 'points'and__itsvalue__of 5are__deletedfrom__the dictionary,but__therest__ofthe__dictionaryis__unaffected: {'color': 'green', 'points': 5} {'color': 'green'}NOTE__Beaware__thatthe__deleted key-valuepair__isremoved__permanently.A__Dictionaryof__SimilarObjects__Theprevious__exampleinvolved__storingdifferent__kindsof__informationabout__one object,an__alienin__a game.You__canalso__usea__dictionaryto__storeone__kindof__informationabout__many objects.For__example,say__youwant__topoll__anumber__ofpeople__andask__themwhat__theirfavorite__programminglanguage__is.A__dictionaryis__usefulfor__storingthe__resultsof__asimple__poll,like__this:favorite___languages.pyfavorite_languages__= { 'jen': 'python', 'sarah': 'c', 'edward': 'rust', 'phil': 'python', }Dictionaries__97As__youcan__see,we__vebroken__alarger__dictionaryinto__several lines.Each__keyis__thename__ofa__personwho__respondedto__the poll,and__eachvalue__istheir__language choice.When__youknow__youll__needmore__thanone__lineto__definea__dictionary,press__ENTERafter__theopening__brace.Then__indentthe__nextline__onelevel__(four spaces)and__writethe__first key-value pair,followed__bya__comma.From__thispoint__forwardwhen__youpress__ENTER,your__textedi__torshould__automaticallyindent__allsubsequent__key-valuepairs__tomatch__thefirst__key-value pair.Once__youve__finisheddefining__the dictionary,add__aclosing__braceon__anew__lineafter__thelast__key-value pair,and__indentit__onelevel__soit__alignswith__thekeys__inthe__dictionary.It__sgood__practiceto__includea__commaafter__thelast__key-valuepair__as well,so__youre__readyto__adda__new key-valuepair__onthe__next line.NOTE__Mosteditors__havesome__functionalitythat__helpsyou__formatextended__listsand__dictionaries__ina__similarmanner__tothis__example.Other__acceptableways__toformat__longdictionaries__areavailable__as well,so__youmay__seeslightly__differentformatting__inyour__editor,or__inother__sources.To__usethis__dictionary,given__thename__ofa__personwho__tookthe__poll,you__caneasily__lookup__theirfavorite__language:favorite___languages.pyfavorite_languages__= { 'jen': 'python', 'sarah': 'c', 'edward': 'rust', 'phil': 'python', } 1language__= favorite_languages['sarah'].title() print(f"Sarah'sfavorite__languageis__{language}.")To__seewhich__languageSarah__chose,we__askfor__thevalue__at: favorite_languages['sarah']We__usethis__syntaxto__pullSarah__sfavorite__languagefrom__thedictionary__1and__assignit__tothe__variable language.Creating__anew__variablehere__makesfor__amuch__cleaner print() call.The__outputshows__Sarahs__favorite language: Sarah'sfavorite__languageis__C.You__coulduse__thissame__syntaxwith__anyindividual__representedin__the dictionary.Using__get()to__AccessValues__Usingkeys__insquare__bracketsto__retrievethe__valueyou__reinterested__infrom__adictionary__mightcause__onepotential__problem:if__thekey__youask__fordoesn__t exist,you__llget__an error. 98Chapter__6Let__ssee__whathappens__whenyou__askfor__thepoint__valueof__analien__thatdoesn__thave__apoint__value set:alien_no___points.py alien_0 = {'color': 'green', 'speed': 'slow'} print(alien_0['points'])This__resultsin__a traceback,showing__a KeyError:Traceback__(mostrecent__call last):File__"alien_no_points.py",line__2,in__print(alien_0['points']) ~~~~~~~^^^^^^^^^^ KeyError: 'points'You__lllearn__moreabout__howto__handleerrors__likethis__ingeneral__inChapter__10.For__dictionaries specifically,you__canuse__the get()method__toset__adefault__valuethat__willbe__returnedif__therequested__keydoesn__t exist.The__get()method__requiresa__keyas__afirst__argument.As__asecond__optional argument,you__canpass__thevalue__tobe__returnedif__thekey__doesnt__exist: alien_0 = {'color': 'green', 'speed': 'slow'}point_value__= alien_0.get('points', 'Nopoint__value assigned.') print(point_value)If__thekey__'points'exists__inthe__dictionary,you__llget__thecorrespond__ing value.If__itdoesn__t,you__getthe__default value.In__this case,points__doesnt__exist,and__weget__aclean__messageinstead__ofan__error:No__pointvalue__assigned.If__theres__achance__thekey__youre__askingfor__mightnot__exist,consider__usingthe__get()method__insteadof__thesquare__bracket notation.NOTE__Ifyou__leaveout__thesecond__argumentin__thecall__to get()and__thekey__doesnt__exist,Python__willreturn__thevalue__None.The__specialvalue__Nonemeans__novalue__exists.This__isnot__an error:it__sa__specialvalue__meantto__indicatethe__absenceof__a value.You__llsee__moreuses__forNone__inChapter__8.TRY__ITYOURSELF__6-1. Person:Use__adictionary__tostore__informationabout__aperson__you know.Store__theirfirst__name,last__name, age,and__thecity__inwhich__they live.You__shouldhave__keyssuch__as first_name, last_name, age,and__city.Print__eachpiece__ofinformation__storedin__your dictionary. 6-2.Favorite__Numbers:Use__adictionary__tostore__peoples__favorite numbers.Think__offive__names,and__usethem__askeys__inyour__dictionary.Think__ofa__favoriteDictionaries__99number__foreach__person,and__storeeach__asa__valuein__your dictionary.Print__eachperson__sname__andtheir__favorite number.For__evenmore__fun,poll__afew__friendsand__getsome__actualdata__foryour__program. 6-3. Glossary:A__Pythondictionary__canbe__usedto__modelan__actual dictionary. However,to__avoid confusion,let__scall__ita__glossary.Think__offive__programmingwords__youve__learnedabout__inthe__previous chapters.Use__thesewords__asthe__keysin__your glossary,and__storetheir__meaningsas__values.Print__eachword__andits__meaningas__neatlyformatted__output.You__mightprint__theword__followedby__acolon__andthen__its meaning,or__printthe__wordon__oneline__andthen__printits__meaningindented__ona__second line.Use__thenewline__character (\n)to__inserta__blankline__betweeneach__word-meaningpair__inyour__output.Looping__Througha__DictionaryA__singlePython__dictionarycan__containjust__afew__key-valuepairs__ormillions__of pairs.Because__adictionary__cancontain__largeamounts__of data,Python__letsyou__loopthrough__a dictionary.Dictionaries__canbe__usedto__storeinfor__mationin__avariety__of ways; therefore,several__differentways__existto__loopthrough__them.You__canloop__throughall__ofa__dictionarys__key-value pairs,through__its keys,or__throughits__values.Looping__ThroughAll__Key-ValuePairs__Beforewe__explorethe__differentapproaches__to looping,let__sconsider__anew__dictionarydesigned__tostore__informationabout__auser__ona__website.The__followingdictionary__wouldstore__oneperson__s username,first__name,and__last name: user.py user_0 = { 'username': 'efermi', 'first': 'enrico', 'last': 'fermi', }You__canaccess__anysingle__pieceof__informationabout__user_0based__onwhat__youve__alreadylearned__inthis__chapter.But__whatif__youwanted__tosee__everythingstored__inthis__users__dictionary?To__do so,you__couldloop__throughthe__dictionaryusing__afor__loop: user_0 = { 'username': 'efermi', 'first': 'enrico', 'last': 'fermi', } 100Chapter__6for__key,value__in user_0.items(): print(f"\nKey: {key}") print(f"Value: {value}")To__writea__forloop__fora__dictionary,you__createnames__forthe__twovari__ablesthat__willhold__thekey__andvalue__ineach__key-value pair.You__canchoose__anynames__youwant__forthese__two variables.This__codewould__workjust__aswell__ifyou__hadused__abbreviationsfor__thevariable__names,like__this:for__k,v__in user_0.items()The__secondhalf__ofthe__forstatement__includesthe__nameof__thedictionary__followedby__themethod__items(),which__returnsa__sequenceof__key-value pairs.The__forloop__thenassigns__eachof__thesepairs__tothe__twovariables__provided.In__thepreceding__example,we__usethe__variablesto__printeach__key,followed__bythe__associated value.The__"\n"in__thefirst__print()call__ensuresthat__ablank__lineis__insertedbefore__each key-valuepair__inthe__output: Key:username__Value:efermi__Key:first__Value:enrico__Key:last__Value:fermi__Loopingthrough__all key-valuepairs__worksparticularly__wellfor__dictionaries__likethe__favorite_languages.pyexample__onpage__96,which__storesthe__samekind__ofinformation__formany__different keys.If__youloop__throughthe__favorite_languages dictionary,you__getthe__nameof__eachperson__inthe__dictionary__andtheir__favoriteprogramming__language.Because__thekeys__alwaysrefer__toa__persons__nameand__thevalue__isalways__a language,we__lluse__thevariables__nameand__languagein__theloop__insteadof__keyand__value.This__willmake__iteasier__tofollow__whats__happeninginside__the loop:favorite___languages.pyfavorite_languages__= { 'jen': 'python', 'sarah': 'c', 'edward': 'rust', 'phil': 'python', }for__name,language__in favorite_languages.items(): print(f"{name.title()}'sfavorite__languageis__{language.title()}.")This__codetells__Pythonto__loopthrough__each key-valuepair__inthe__dic tionary.As__itworks__througheach__pairthe__keyis__assignedto__thevariable__name,and__thevalue__isassigned__tothe__variable language.These__descriptivenames__makeit__mucheasier__tosee__whatthe__print()call__is doing.Dictionaries__101 Now,in__justa__fewlines__of code,we__candisplay__allof__theinformation__fromthe__poll: Jen'sfavorite__languageis__Python. Sarah'sfavorite__languageis__C. Edward'sfavorite__languageis__Rust. Phil'sfavorite__languageis__Python.This__typeof__loopingwould__workjust__aswell__ifour__dictionarystored__theresults__frompolling__athousand__oreven__amillion__people.Looping__ThroughAll__theKeys__ina__DictionaryThe__keys()method__isuseful__whenyou__dont__needto__workwith__allof__theval__uesin__a dictionary.Let__sloop__throughthe__favorite_languagesdictionary__andprint__thenames__ofeveryone__whotook__the poll:favorite_languages__= { 'jen': 'python', 'sarah': 'c', 'edward': 'rust', 'phil': 'python', }for__namein__favorite_languages.keys(): print(name.title())This__forloop__tellsPython__topull__allthe__keysfrom__thedictionary__favorite_languages__andassign__themone__ata__timeto__thevariable__name.The__outputshows__thenames__ofeveryone__whotook__the poll:Jen__SarahEdward__PhilLooping__throughthe__keysis__actuallythe__defaultbehavior__whenlooping__througha__dictionary,so__thiscode__wouldhave__exactlythe__sameoutput__ifyou__wrote:for__namein__favorite_languages:rather__than:for__namein__favorite_languages.keys():You__canchoose__touse__the keys()method__explicitlyif__itmakes__yourcode__easierto__read,or__youcan__omitit__ifyou__wish.You__canaccess__thevalue__associatedwith__anykey__youcare__aboutinside__the loop,by__usingthe__current key.Let__sprint__amessage__toa__coupleof__friendsabout__thelanguages__they chose.We__llloop__throughthe__namesin__102Chapter__6the__dictionaryas__wedid__previously,but__whenthe__namematches__oneof__our friends,we__lldisplay__amessage__abouttheir__favorite language:favorite_languages__= { --snip-- }friends__= ['phil', 'sarah']for__namein__favorite_languages.keys(): print(f"Hi {name.title()}.") 1if__namein__friends: 2language__= favorite_languages[name].title() print(f"\t{name.title()},I__seeyou__love {language}!") First,we__makea__listof__friendsthat__wewant__toprint__amessage__to.Inside__the loop,we__printeach__persons__name.Then__wecheck__whetherthe__namewe__reworking__withis__inthe__listfriends__1.If__it is,we__determinethe__persons__favoritelanguage__usingthe__nameof__thedictionary__andthe__currentvalue__ofname__asthe__key 2.We__thenprint__aspecial__greeting,including__areference__totheir__languageof__choice.Everyone__sname__is printed,but__ourfriends__receivea__special message:Hi__Jen.Hi__Sarah. Sarah,I__seeyou__love C!Hi__Edward.Hi__Phil. Phil,I__seeyou__love Python!You__canalso__usethe__keys()method__tofind__outif__aparticular__personwas__polled.This__time,let__sfind__outif__Erintook__the poll:favorite_languages__= { --snip-- }if__'erin'not__in favorite_languages.keys(): print("Erin,please__takeour__poll!")The__keys()method__isnt__justfor__looping:it__actuallyreturns__asequence__ofall__the keys,and__theif__statementsimply__checksif__'erin'is__inthis__sequence.Because__shes__not,a__messageis__printedinviting__herto__takethe__poll: Erin,please__takeour__poll!Looping__Througha__Dictionarys__Keysin__aParticular__OrderLooping__througha__dictionaryreturns__theitems__inthe__sameorder__theywere__inserted. Sometimes, though,you__llwant__toloop__througha__dictionaryin__adifferent__order.Dictionaries__103One__wayto__dothis__isto__sortthe__keysas__theyre__returnedin__thefor__loop.You__canuse__the sorted()function__toget__acopy__ofthe__keysin__order:favorite_languages__= { 'jen': 'python', 'sarah': 'c', 'edward': 'rust', 'phil': 'python', }for__namein__sorted(favorite_languages.keys()): print(f"{name.title()},thank__youfor__takingthe__poll.")This__forstatement__islike__otherfor__statements,except__thatwe__vewrapped__the sorted()function__aroundthe__dictionary.keys() method.This__tellsPython__toget__allthe__keysin__thedictionary__andsort__thembefore__startingthe__loop.The__outputshows__everyonewho__tookthe__poll,with__thenames__displayed__in order: Edward,thank__youfor__takingthe__poll. Jen,thank__youfor__takingthe__poll. Phil,thank__youfor__takingthe__poll. Sarah,thank__youfor__takingthe__poll.Looping__ThroughAll__Valuesin__aDictionary__Ifyou__areprimarily__interestedin__thevalues__thata__dictionary contains,you__canuse__the values()method__toreturn__asequence__ofvalues__withoutany__keys.For__example,say__wesimply__wanta__listof__alllanguages__chosenin__ourprogramming__language poll,without__thename__ofthe__personwho__choseeach__language:favorite_languages__= { 'jen': 'python', 'sarah': 'c', 'edward': 'rust', 'phil': 'python', } print("Thefollowing__languageshave__been mentioned:")for__languagein__favorite_languages.values(): print(language.title())The__forstatement__herepulls__eachvalue__fromthe__dictionaryand__assignsit__tothe__variable language.When__thesevalues__are printed,we__geta__listof__allchosen__languages:The__followinglanguages__havebeen__mentioned:Python__CRust__Python 104Chapter__6This__approachpulls__allthe__valuesfrom__thedictionary__withoutcheck__ingfor__repeats.This__mightwork__finewith__asmall__numberof__values,but__ina__pollwith__alarge__numberof__respondents,it__wouldresult__ina__veryrepetitive__list.To__seeeach__languagechosen__without repetition,we__canuse__a set.A__setis__acollection__inwhich__eachitem__mustbe__unique:favorite_languages__= { --snip-- } print("Thefollowing__languageshave__been mentioned:")for__languagein__set(favorite_languages.values()): print(language.title())When__youwrap__set()around__acollection__ofvalues__thatcontains__duplicate__items,Python__identifiesthe__uniqueitems__inthe__collectionand__buildsa__setfrom__those items.Here__weuse__set()to__pullout__theunique__languagesin__favorite_languages.values().The__resultis__anonrepetitive__listof__languagesthat__havebeen__mentionedby__peopletaking__the poll:The__followinglanguages__havebeen__mentioned:Python__CRust__Asyou__continuelearning__about Python,you__lloften__finda__built-infeature__ofthe__languagethat__helpsyou__doexactly__whatyou__wantwith__your data.NOTE__Youcan__builda__setdirectly__usingbraces__andseparating__theelements__with commas: >>>languages__= {'python', 'rust', 'python', 'c'} >>>languages__{'rust', 'python', 'c'}It__seasy__tomistake__setsfor__dictionariesbecause__theyre__bothwrapped__in braces.When__yousee__bracesbut__no key-value pairs,you__reprobably__lookingat__a set.Unlike__listsand__dictionaries,sets__donot__retainitems__inany__specific order.TRY__ITYOURSELF__6-4.Glossary__2:Now__thatyou__knowhow__toloop__througha__dictionary,clean__upthe__codefrom__Exercise 6-3 (page 99)by__replacingyour__seriesof__print()calls__witha__loopthat__runsthrough__thedictionary__skeys__and values.When__youre__surethat__yourloop__works,add__fivemore__Pythonterms__toyour__glossary.When__yourun__yourprogram__again,these__newwords__andmeanings__shouldautomatically__beincluded__inthe__output.Dictionaries__105 6-5. Rivers:Make__adictionary__containingthree__majorrivers__andthe__countryeach__riverruns__through.One__key-valuepair__mightbe__'nile': 'egypt'.Use__aloop__toprint__asentence__abouteach__river,such__asThe__Nileruns__through Egypt.Use__aloop__toprint__thename__ofeach__riverincluded__inthe__dictionary.Use__aloop__toprint__thename__ofeach__countryincluded__inthe__dictionary. 6-6. Polling:Use__thecode__in favorite_languages.py (page 96).Make__alist__ofpeople__whoshould__takethe__favoritelanguages__poll.Include__somenames__thatare__alreadyin__thedictionary__andsome__thatare__not.Loop__throughthe__listof__peoplewho__shouldtake__the poll.If__theyhave__alreadytaken__the poll,print__amessage__thankingthem__for responding.If__theyhave__notyet__takenthe__poll,print__amessage__invitingthem__totake__the poll.Nesting__Sometimesyou__llwant__tostore__multipledictionaries__ina__list,or__alist__ofitems__asa__valuein__a dictionary.This__iscalled__nesting.You__cannest__dictionaries__insidea__list,a__listof__itemsinside__a dictionary,or__evena__dictionaryinside__another dictionary.Nesting__isa__powerful feature,as__thefollowing__exampleswill__demonstrate.A__Listof__DictionariesThe__alien_0dictionary__containsa__varietyof__informationabout__one alien,but__ithas__noroom__tostore__informationabout__asecond__alien,much__lessa__screenfull__of aliens.How__canyou__managea__fleetof__aliens?One__wayis__tomake__alist__ofaliens__inwhich__eachalien__isa__dictionaryof__informationabout__that alien.For__example,the__followingcode__buildsa__listof__three aliens: aliens.py alien_0 = {'color': 'green', 'points': 5} alien_1 = {'color': 'yellow', 'points': 10} alien_2 = {'color': 'red', 'points': 15} 1aliens__= [alien_0, alien_1, alien_2]for__alienin__aliens: print(alien) 106Chapter__6We__firstcreate__three dictionaries,each__representinga__different alien.We__storeeach__ofthese__dictionariesin__alist__calledaliens__1. Finally,we__loopthrough__thelist__andprint__outeach__alien: {'color': 'green', 'points': 5} {'color': 'yellow', 'points': 10} {'color': 'red', 'points': 15}A__morerealistic__examplewould__involvemore__thanthree__alienswith__codethat__automaticallygenerates__each alien.In__thefollowing__example,we__use range()to__createa__fleetof__30 aliens: #Make__anempty__listfor__storing aliens.aliens__= [] #Make__30green__aliens. 1for__alien_numberin__range(30): 2new_alien__= {'color': 'green', 'points': 5, 'speed': 'slow'} 3 aliens.append(new_alien) #Show__thefirst__5 aliens. 4for__alienin__aliens[:5]: print(alien) print("...") #Show__howmany__alienshave__been created. print(f"Totalnumber__of aliens: {len(aliens)}")This__examplebegins__withan__emptylist__tohold__allof__thealiens__thatwill__be created.The__range()function__1returns__aseries__of numbers,which__justtells__Pythonhow__manytimes__wewant__theloop__to repeat.Each__timethe__loop runs,we__createa__newalien__2and__thenappend__eachnew__aliento__thelist__aliens 3.We__usea__sliceto__printthe__firstfive__aliens 4,and__finally,we__printthe__lengthof__thelist__toprove__weve__actuallygenerated__thefull__fleetof__30 aliens: {'color': 'green', 'points': 5, 'speed': 'slow'} {'color': 'green', 'points': 5, 'speed': 'slow'} {'color': 'green', 'points': 5, 'speed': 'slow'} {'color': 'green', 'points': 5, 'speed': 'slow'} {'color': 'green', 'points': 5, 'speed': 'slow'} ...Total__numberof__aliens: 30These__aliensall__havethe__same characteristics,but__Pythonconsiders__eachone__aseparate__object,which__allowsus__tomodify__eachalien__individually.How__mightyou__workwith__agroup__ofaliens__like this?Imagine__thatone__aspectof__agame__hassome__alienschanging__colorand__movingfaster__asthe__game progresses.When__its__timeto__change colors,we__canuse__afor__loopand__anif__statementto__changethe__colorof__the aliens.For__example,to__changeDictionaries__107the__firstthree__aliensto__yellow, medium-speedaliens__worth 10points__each,we__coulddo__this: #Make__anempty__listfor__storing aliens.aliens__= [] #Make__30green__aliens.for__alien_numberin__range (30):new_alien__= {'color': 'green', 'points': 5, 'speed': 'slow'} aliens.append(new_alien)for__alienin__aliens[:3]:if__alien['color'] == 'green': alien['color'] = 'yellow' alien['speed'] = 'medium' alien['points'] = 10 #Show__thefirst__5 aliens.for__alienin__aliens[:5]: print(alien) print("...")Because__wewant__tomodify__thefirst__three aliens,we__loopthrough__aslice__thatincludes__onlythe__firstthree__aliens.All__ofthe__aliensare__green now,but__thatwon__talways__bethe__case,so__wewrite__anif__statementto__makesure__were__onlymodifying__green aliens.If__thealien__is green,we__changethe__colorto__'yellow',the__speedto__'medium',and__thepoint__valueto__10,as__shownin__thefollowing__output: {'color': 'yellow', 'points': 10, 'speed': 'medium'} {'color': 'yellow', 'points': 10, 'speed': 'medium'} {'color': 'yellow', 'points': 10, 'speed': 'medium'} {'color': 'green', 'points': 5, 'speed': 'slow'} {'color': 'green', 'points': 5, 'speed': 'slow'} ...You__couldexpand__thisloop__byadding__anelif__blockthat__turnsyellow__aliensinto__red, fast-movingones__worth 15points__each.Without__showingthe__entireprogram__again,that__loopwould__looklike__this:for__alienin__aliens[0:3]:if__alien['color'] == 'green': alien['color'] = 'yellow' alien['speed'] = 'medium' alien['points'] = 10elif__alien['color'] == 'yellow': alien['color'] = 'red' alien['speed'] = 'fast' alien['points'] = 15It__scommon__tostore__anumber__ofdictionaries__ina__listwhen__eachdic__tionarycontains__manykinds__ofinformation__aboutone__object.For__example,you__mightcreate__adictionary__foreach__useron__a website,as__wedid__in user.py 108Chapter__6on__page 99,and__storethe__individualdictionaries__ina__listcalled__users.All__ofthe__dictionariesin__thelist__shouldhave__anidentical__structure,so__youcan__loopthrough__thelist__andwork__witheach__dictionaryobject__inthe__same way.A__Listin__aDictionary__Ratherthan__puttinga__dictionaryinside__a list,it__ssometimes__usefulto__puta__listinside__a dictionary.For__example,consider__howyou__mightdescribe__apizza__thatsomeone__is ordering.If__youwere__touse__onlya__list,all__youcould__reallystore__isa__listof__thepizza__s toppings.With__a dictionary,a__listof__toppings__canbe__justone__aspectof__thepizza__youre__describing.In__thefollowing__example,two__kindsof__informationare__storedfor__each pizza:a__typeof__crustand__alist__of toppings.The__listof__toppingsis__avalue__associatedwith__thekey__'toppings'.To__usethe__itemsin__the list,we__givethe__nameof__thedictionary__andthe__key 'toppings',as__wewould__anyvalue__inthe__dictionary.Instead__ofreturning__asingle__value,we__geta__listof__toppings: pizza.py #Store__informationabout__apizza__being ordered.pizza__= { 'crust': 'thick', 'toppings': ['mushrooms', 'extra cheese'], } #Summarize__the order. 1 print(f"Youordered__a {pizza['crust']}-crustpizza__" "withthe__following toppings:") 2for__toppingin__pizza['toppings']: print(f"\t{topping}")We__beginwith__adictionary__thatholds__informationabout__apizza__thathas__been ordered.One__keyin__thedictionary__is 'crust',and__theassociated__valueis__thestring__'thick'.The__next key, 'toppings',has__alist__asits__valuethat__storesall__requested toppings.We__summarizethe__orderbefore__buildingthe__pizza 1.When__youneed__tobreak__upa__longline__ina__print() call,choose__anappropriate__pointat__whichto__breakthe__linebeing__printed,and__endthe__linewith__aquotation__mark.Indent__thenext__line,add__anopening__quotation mark,and__continuethe__string.Python__willautomatically__combineall__ofthe__stringsit__findsinside__the parentheses.To__printthe__toppings,we__writea__forloop__2.To__accessthe__listof__toppings,we__usethe__key 'toppings',and__Pythongrabs__thelist__oftoppings__fromthe__dictionary.The__followingoutput__summarizesthe__pizzathat__weplan__to build:You__ordereda__thick-crustpizza__withthe__following toppings:mushrooms__extracheese__Youcan__nesta__listinside__adictionary__anytimeyou__wantmore__thanone__valueto__beassociated__witha__singlekey__ina__dictionary.In__theearlier__exampleof__favoriteprogramming__languages,if__wewere__tostore__eachperson__sresponses__ina__list,people__couldchoose__morethan__onefavorite__language.Dictionaries__109When__weloop__throughthe__dictionary,the__valueassociated__witheach__person__wouldbe__alist__oflanguages__ratherthan__asingle__language.Inside__thedictionary__sfor__loop,we__useanother__forloop__torun__throughthe__listof__languages__associatedwith__each person:favorite___languages.pyfavorite_languages__= { 'jen': ['python', 'rust'], 'sarah': ['c'], 'edward': ['rust', 'go'], 'phil': ['python', 'haskell'], } 1for__name,languages__in favorite_languages.items(): print(f"\n{name.title()}'sfavorite__languages are:") 2for__languagein__languages: print(f"\t{language.title()}")The__valueassociated__witheach__namein__favorite_languagesis__nowa__list.Note__thatsome__peoplehave__onefavorite__languageand__othershave__multiple favorites.When__weloop__throughthe__dictionary 1,we__usethe__variablename__languagesto__holdeach__valuefrom__the dictionary,because__weknow__thateach__valuewill__bea__list.Inside__themain__dictionary loop,we__useanother__forloop__2to__runthrough__eachperson__slist__offavorite__languages.Now__eachperson__canlist__asmany__favoritelanguages__asthey__like: Jen'sfavorite__languages are:Python__Rust Sarah'sfavorite__languages are:C__Edward'sfavorite__languages are:Rust__Go Phil'sfavorite__languages are:Python__HaskellTo__refinethis__programeven__further,you__couldinclude__anif__statementat__thebeginning__ofthe__dictionarys__forloop__tosee__whethereach__personhas__morethan__onefavorite__languageby__examiningthe__valueof__len(languages).If__aperson__hasmore__thanone__favorite,the__outputwould__staythe__same.If__theperson__hasonly__onefavorite__language,you__couldchange__thewording__toreflect__that.For__example,you__could say,Sarah__sfavorite__languageis__C.NOTE__Youshould__notnest__listsand__dictionariestoo__deeply.If__youre__nestingitems__muchdeeper__thanwhat__yousee__inthe__preceding examples,or__ifyou__reworking__withsomeone__elses__codewith__significantlevels__of nesting,there__smost__likelya__simplerway__tosolve__the problem. 110Chapter__6A__Dictionaryin__aDictionary__Youcan__nesta__dictionaryinside__another dictionary,but__yourcode__canget__complicatedquickly__whenyou__do.For__example,if__youhave__severalusers__fora__website,each__witha__unique username,you__canuse__theusernames__asthe__keysin__a dictionary.You__canthen__storeinformation__abouteach__userby__usinga__dictionaryas__thevalue__associatedwith__their username.In__thefol__lowing listing,we__storethree__piecesof__informationabout__each user:their__first name,last__name,and__location.We__llaccess__thisinformation__bylooping__throughthe__usernamesand__thedictionary__ofinformation__associatedwith__each username: many_users.pyusers__= { 'aeinstein': { 'first': 'albert', 'last': 'einstein', 'location': 'princeton', }, 'mcurie': { 'first': 'marie', 'last': 'curie', 'location': 'paris', }, } 1for__username,user_info__in users.items(): 2 print(f"\nUsername: {username}") 3full_name__= f"{user_info['first']} {user_info['last']}"location__= user_info['location'] 4 print(f"\tFull name: {full_name.title()}") print(f"\tLocation: {location.title()}")We__firstdefine__adictionary__calledusers__withtwo__keys:one__eachfor__theusernames__'aeinstein'and__'mcurie'.The__valueassociated__witheach__keyis__adictionary__thatincludes__eachuser__sfirst__name,last__name,and__location. Then,we__loopthrough__theusers__dictionary 1.Python__assignseach__keyto__thevariable__username,and__thedictionary__associatedwith__eachusername__isassigned__tothe__variable user_info.Once__insidethe__maindictionary__loop,we__printthe__username 2. Then,we__startaccessing__theinner__dictionary 3.The__variable user_info,which__containsthe__dictionaryof__user information,has__three keys: 'first', 'last',and__'location'.We__useeach__keyto__generatea__neatlyformatted__fullname__andlocation__foreach__person,and__thenprint__asummary__ofwhat__weknow__abouteach__user 4: Username:aeinstein__Full name:Albert__Einstein Location:Princeton__Dictionaries 111 Username:mcurie__Full name:Marie__Curie Location:Paris__Noticethat__thestructure__ofeach__users__dictionaryis__identical.Although__notrequired__by Python,this__structuremakes__nesteddictionaries__easierto__work with.If__eachuser__sdictionary__haddifferent__keys,the__codeinside__thefor__loopwould__bemore__complicated.TRY__ITYOURSELF__6-7. People:Start__withthe__programyou__wrotefor__Exercise 6-1 (page 98).Make__twonew__dictionariesrepresenting__different people,and__storeall__threedictionar__iesin__alist__called people.Loop__throughyour__listof__people.As__youloop__throughthe__list,print__everythingyou__knowabout__each person. 6-8. Pets:Make__several dictionaries,where__eachdictionary__representsa__different__pet.In__each dictionary,include__thekind__ofanimal__andthe__owners__name.Store__thesedictionaries__ina__listcalled__pets. Next,loop__throughyour__listand__asyou__do,print__everythingyou__knowabout__each pet. 6-9.Favorite__Places:Make__adictionary__called favorite_places.Think__ofthree__namesto__useas__keysin__the dictionary,and__storeone__tothree__favoriteplaces__foreach__person.To__makethis__exercisea__bitmore__interesting,ask__somefriends__toname__afew__oftheir__favorite places.Loop__throughthe__dictionary,and__printeach__persons__nameand__theirfavorite__places. 6-10.Favorite__Numbers:Modify__yourprogram__fromExercise__6-2 (page 98)so__eachperson__canhave__morethan__onefavorite__number.Then__printeach__persons__namealong__withtheir__favorite numbers. 6-11. Cities:Make__adictionary__called cities.Use__thenames__ofthree__citiesas__keysin__your dictionary.Create__adictionary__ofinformation__abouteach__cityand__includethe__countrythat__thecity__is in,its__approximate population,and__onefact__aboutthat__city.The__keysfor__eachcity__sdictionary__shouldbe__somethinglike__country, population,and__fact.Print__thename__ofeach__cityand__allof__theinfor__mationyou__havestored__about it. 6-12. Extensions:We__renow__workingwith__examplesthat__arecomplex__enoughthat__theycan__beextended__inany__numberof__ways.Use__oneof__theexample__programs__fromthis__chapter,and__extendit__byadding__newkeys__and values,chang__ingthe__contextof__the program,or__improvingthe__formattingof__the output.Summary__Inthis__chapter,you__learnedhow__todefine__adictionary__andhow__towork__withthe__informationstored__ina__dictionary.You__learnedhow__toaccess__andmodify__individualelements__ina__dictionary,and__howto__loopthrough__all 112Chapter__6of__theinformation__ina__dictionary.You__learnedto__loopthrough__adiction__arys__key-value pairs,its__keys,and__its values.You__alsolearned__howto__nestmultiple__dictionariesin__a list,nest__listsin__a dictionary,and__nesta__dictionaryinside__a dictionary.In__thenext__chapteryou__lllearn__aboutwhile__loopsand__howto__acceptinput__frompeople__whoare__usingyour__programs.This__willbe__anexciting__chapter,because__youll__learnto__makeall__ofyour__programs interactive:they__llbe__ableto__respondto__user input. 7USER__INPUT__AND__WHIL__EL__OOPS__Mostprograms__arewritten__tosolve__anend__users__problem.To__do so,you__usuallyneed__toget__someinformation__fromthe__user.For__example,say__someonewants__tofind__outwhether__theyre__oldenough__to vote.If__youwrite__aprogram__toanswer__this question,you__needto__knowthe__users__agebefore__youcan__providean__answer.The__programwill__needto__askthe__userto__enter,or__input,their__age;once__theprogram__hasthis__input,it__cancom__pareit__tothe__votingage__todetermine__ifthe__useris__oldenough__andthen__reportthe__result.In__thischapter__youll__learnhow__toaccept__userinput__soyour__programcan__thenwork__with it.When__yourprogram__needsa__name,you__llbe__ableto__promptthe__userfor__a name.When__yourprogram__needsa__listof__names,you__llbe__ableto__promptthe__userfor__aseries__of names.To__do this,you__lluse__the input() function.You__llalso__learnhow__tokeep__programsrunning__aslong__asusers__wantthem__to,so__theycan__enteras__muchinformation__asthey__need to; then,your__114Chapter__7program__canwork__withthat__information.You__lluse__Pythons__whileloop__tokeep__programsrunning__aslong__ascertain__conditionsremain__true.With__theability__towork__withuser__inputand__theability__tocontrol__howlong__yourprograms__run,you__llbe__ableto__writefully__interactive programs.How__the input()Function__WorksThe__input()function__pausesyour__programand__waitsfor__theuser__toenter__some text.Once__Pythonreceives__theuser__s input,it__assignsthat__inputto__avariable__tomake__itconvenient__foryou__towork__with.For__example,the__followingprogram__asksthe__userto__entersome__text,then__displaysthat__messageback__tothe__user: parrot.pymessage__= input("Tellme__something,and__Iwill__repeatit__backto__you: ") print(message)The__input()function__takesone__argument:the__promptthat__wewant__todisplay__tothe__user,so__theyknow__whatkind__ofinformation__to enter.In__this example,when__Pythonruns__thefirst__line,the__usersees__theprompt__Tellme__something,and__Iwill__repeatit__backto__you: .The__programwaits__whilethe__userenters__theirresponse__andcontinues__afterthe__userpresses__ENTER.The__responseis__assignedto__thevariable__message,then__print(message)displays__theinput__backto__the user:Tell__me something,and__Iwill__repeatit__backto__you:Hello__everyone!Hello__everyone!NOTE__Sometext__editorswon__trun__programsthat__promptthe__userfor__input.You__canuse__theseeditors__towrite__programsthat__promptfor__input,but__youll__needto__runthese__programsfrom__a terminal.See__RunningPython__Programsfrom__aTerminal__onpage__11.Writing__ClearPrompts__Eachtime__youuse__the input() function,you__shouldinclude__a clear, easy-to-follow__promptthat__tellsthe__userexactly__whatkind__ofinformation__youre__looking for.Any__statementthat__tellsthe__userwhat__toenter__should work.For__example: greeter.pyname__= input("Pleaseenter__your name: ") print(f"\nHello, {name}!")Add__aspace__atthe__endof__yourprompts__(afterthe__colonin__thepreced__ing example)to__separatethe__promptfrom__theuser__sresponse__andto__makeit__clearto__youruser__whereto__entertheir__text.For__example:Please__enteryour__name:Eric__Hello, Eric!User__Inputand__whileLoops__115Sometimes__youll__wantto__writea__promptthat__slonger__thanone__line.For__example,you__mightwant__totell__theuser__whyyou__reasking__forcertain__input.You__canassign__yourprompt__toa__variableand__passthat__variableto__the input() function.This__allowsyou__tobuild__yourprompt__overseveral__lines,then__writea__clean input() statement. greeter.pyprompt__= "Ifyou__shareyour__name,we__canpersonalize__themessages__you see."prompt__+= "\nWhatis__yourfirst__name? "name__= input(prompt) print(f"\nHello, {name}!")This__exampleshows__oneway__tobuild__amultiline__string.The__firstline__assignsthe__firstpart__ofthe__messageto__thevariable__prompt.In__thesecond__line,the__operator +=takes__thestring__thatwas__assignedto__promptand__addsthe__newstring__ontothe__end.The__promptnow__spanstwo__lines,again__withspace__afterthe__questionmark__for clarity:If__youshare__your name,we__canpersonalize__themessages__you see.What__isyour__first name?Eric__Hello, Eric!Using__int()to__AcceptNumerical__InputWhen__youuse__the input() function,Python__interpretseverything__theuser__entersas__a string.Consider__thefollowing__interpreter session,which__asksfor__theuser__s age: >>>age__= input("Howold__are you? ")How__oldare__you? 21 >>>age__'21'The__userenters__thenumber__21,but__whenwe__askPython__forthe__valueof__age,it__returns '21',the__stringrepresentation__ofthe__numericalvalue__entered.We__knowPython__interpretedthe__inputas__astring__becausethe__numberis__nowenclosed__in quotes.If__allyou__wantto__dois__printthe__input,this__works well.But__ifyou__tryto__usethe__inputas__a number,you__llget__an error: >>>age__= input("Howold__are you? ")How__oldare__you? 21 1 >>>age__>= 18Traceback__(mostrecent__call last):File__"",line__1,in__2 TypeError: '>='not__supportedbetween__instancesof__'str'and__'int'When__youtry__touse__theinput__todo__anumerical__comparison 1,Python__producesan__errorbecause__itcan__tcompare__astring__toan__integer:the__string '21'that__sassigned__toage__cant__becompared__tothe__numericalvalue__18 2. 116Chapter__7We__canresolve__thisissue__byusing__the int() function,which__convertsthe__inputstring__toa__numerical value.This__allowsthe__comparisonto__run successfully: >>>age__= input("Howold__are you? ")How__oldare__you? 21 1 >>>age__= int(age) >>>age__>= 18True__Inthis__example,when__weenter__21at__the prompt,Python__interpretsthe__numberas__a string,but__thevalue__isthen__convertedto__anumerical__representation__by int() 1.Now__Pythoncan__runthe__conditional test:it__comparesage__(whichnow__representsthe__numericalvalue__21)and__18to__seeif__ageis__greaterthan__orequal__to 18.This__testevaluates__to True.How__doyou__usethe__int()function__inan__actual program?Consider__aprogram__thatdetermines__whetherpeople__aretall__enoughto__ridea__roller coaster: rollercoaster.pyheight__= input("Howtall__are you,in__inches? ")height__= int(height)if__height >= 48: print("\nYou'retall__enoughto__ride!") else: print("\nYou'llbe__ableto__ridewhen__you'rea__little older.")The__programcan__compareheight__to 48because__height = int(height)converts__theinput__valueto__anumerical__representationbefore__thecompari__sonis__made.If__thenumber__enteredis__greaterthan__orequal__to 48,we__tellthe__userthat__theyre__tall enough:How__tallare__you,in__inches? 71 You'retall__enoughto__ride!When__youuse__numericalinput__todo__calculationsand__comparisons,be__sureto__convertthe__inputvalue__toa__numericalrepresentation__first.The__ModuloOperator__Auseful__toolfor__workingwith__numericalinformation__isthe__modulooperator__(%),which__dividesone__numberby__anothernumber__andreturns__the remainder: >>> 4 % 3 1 >>> 5 % 3 2 >>> 6 % 3 0 >>> 7 % 3 1User__Inputand__whileLoops__117The__modulooperator__doesnt__tellyou__howmany__timesone__numberfits__into another;it__onlytells__youwhat__theremainder__is.When__onenumber__isdivisible__byanother__number,the__remainderis__0,so__themodulo__operatoralways__returns 0.You__canuse__thisfact__todetermine__ifa__numberis__evenor__odd: even_or_odd.pynumber__= input("Entera__number,and__I'lltell__youif__it'seven__or odd: ")number__= int(number)if__number % 2 == 0: print(f"\nThenumber__{number}is__even.") else: print(f"\nThenumber__{number}is__odd.")Even__numbersare__alwaysdivisible__by two,so__ifthe__moduloof__anumber__andtwo__iszero__(here,if__number % 2 == 0)the__numberis__even. Otherwise,it__s odd.Enter__a number,and__I'lltell__youif__it'seven__or odd: 42The__number 42is__even.TRY__ITYOURSELF__7-1.Rental__Car:Write__aprogram__thatasks__theuser__whatkind__ofrental__carthey__would like.Print__amessage__aboutthat__car,such__asLet__mesee__ifI__canfind__youa__Subaru. 7-2.Restaurant__Seating:Write__aprogram__thatasks__theuser__howmany__peopleare__intheir__dinner group.If__theanswer__ismore__than eight,print__amessage__saying__theyll__haveto__waitfor__a table. Otherwise,report__thattheir__tableis__ready. 7-3.Multiples__of Ten:Ask__theuser__fora__number,and__thenreport__whetherthe__numberis__amultiple__of 10or__not.Introducing__whileLoops__Thefor__looptakes__acollection__ofitems__andexecutes__ablock__ofcode__oncefor__eachitem__inthe__collection.In__contrast,the__whileloop__runsas__long as,or__while,a__certaincondition__is true.The__whileLoop__inAction__Youcan__usea__whileloop__tocount__upthrough__aseries__of numbers.For__example,the__followingwhile__loopcounts__from 1to__5: counting.pycurrent_number__= 1while__current_number <= 5: 118Chapter__7 print(current_number)current_number__+= 1In__thefirst__line,we__startcounting__from 1by__assigningcurrent_number__thevalue__1.The__whileloop__isthen__setto__keeprunning__aslong__asthe__valueof__current_numberis__lessthan__orequal__to 5.The__codeinside__theloop__printsthe__valueof__current_numberand__thenadds__1to__thatvalue__withcurrent_number__+= 1. (The +=operator__isshorthand__forcurrent_number__=current_number__+ 1.)Python__repeatsthe__loopas__longas__thecondition__current_number <= 5is__true.Because__1is__lessthan__5,Python__prints 1and__thenadds__1,making__thecurrent__number 2.Because__2is__lessthan__5,Python__prints 2and__adds 1 again,making__thecurrent__number 3,and__so on.Once__thevalue__ofcurrent___numberis__greaterthan__5,the__loopstops__runningand__theprogram__ends: 1 2 3 4 5The__programsyou__useevery__daymost__likelycontain__while loops.For__example,a__gameneeds__awhile__loopto__keeprunning__aslong__asyou__wantto__keep playing,and__soit__canstop__runningas__soonas__youask__itto__quit.Programs__wouldnt__befun__touse__ifthey__stoppedrunning__beforewe__toldthem__toor__keptrunning__evenafter__wewanted__to quit,so__whileloops__arequite__useful.Letting__theUser__ChooseWhen__toQuit__Wecan__makethe__parrot.pyprogram__runas__longas__theuser__wantsby__puttingmost__ofthe__programinside__awhile__loop.We__lldefine__aquit__valueand__thenkeep__theprogram__runningas__longas__theuser__hasnot__enteredthe__quit value: parrot.pyprompt__= "\nTellme__something,and__Iwill__repeatit__backto__you:"prompt__+= "\nEnter 'quit'to__endthe__program. "message__= ""while__message != 'quit':message__= input(prompt) print(message)We__firstdefine__aprompt__thattells__theuser__theirtwo__options:entering__amessage__orentering__thequit__value (inthis__case, 'quit').Then__weset__upa__variablemessage__tokeep__trackof__whatevervalue__theuser__enters.We__definemessage__asan__empty string, "",so__Pythonhas__somethingto__checkthe__firsttime__itreaches__thewhile__line.The__firsttime__theprogram__runsand__Pythonreaches__thewhile__statement,it__needsto__comparethe__valueof__messageto__'quit',but__nouser__inputhas__beenentered__yet.If__Pythonhas__nothingto__compare,it__wont__beable__tocontinue__runningthe__program.To__solvethis__UserInput__andwhile__Loops 119 problem,we__makesure__togive__messagean__initial value.Although__its__justan__empty string,it__willmake__senseto__Pythonand__allowit__toperform__thecom__parisonthat__makesthe__whileloop__work.This__whileloop__runsas__longas__thevalue__ofmessage__isnot__'quit'.The__firsttime__throughthe__loop,message__isjust__anempty__string,so__Pythonenters__the loop.At__message = input(prompt),Python__displaysthe__promptand__waitsfor__theuser__toenter__their input.Whatever__theyenter__isassigned__tomessage__and printed; then,Python__reevaluatesthe__conditionin__thewhile__statement.As__longas__theuser__hasnot__enteredthe__word 'quit',the__promptis__displayedagain__andPython__waitsfor__more input.When__theuser__finallyenters__'quit',Python__stopsexecuting__thewhile__loopand__theprogram__ends:Tell__me something,and__Iwill__repeatit__backto__you:Enter__'quit'to__endthe__program.Hello__everyone!Hello__everyone!Tell__me something,and__Iwill__repeatit__backto__you:Enter__'quit'to__endthe__program.Hello__again.Hello__again.Tell__me something,and__Iwill__repeatit__backto__you:Enter__'quit'to__endthe__program.quit__quitThis__programworks__well,except__thatit__printsthe__word 'quit'as__ifit__werean__actual message.A__simpleif__testfixes__this:prompt__= "\nTellme__something,and__Iwill__repeatit__backto__you:"prompt__+= "\nEnter 'quit'to__endthe__program. "message__= ""while__message != 'quit':message__= input(prompt)if__message != 'quit': print(message)Now__theprogram__makesa__quickcheck__beforedisplaying__themessage__andonly__printsthe__messageif__itdoes__notmatch__thequit__value:Tell__me something,and__Iwill__repeatit__backto__you:Enter__'quit'to__endthe__program.Hello__everyone!Hello__everyone!Tell__me something,and__Iwill__repeatit__backto__you:Enter__'quit'to__endthe__program.Hello__again.Hello__again.Tell__me something,and__Iwill__repeatit__backto__you:Enter__'quit'to__endthe__program.quit__120Chapter__7Using__aFlag__Inthe__previous example,we__hadthe__programperform__certaintasks__whilea__givencondition__was true.But__whatabout__morecomplicated__programsin__whichmany__differentevents__couldcause__theprogram__tostop__running?For__example,in__a game,several__differentevents__canend__the game.When__theplayer__runsout__of ships,their__timeruns__out,or__thecities__theywere__supposedto__protectare__all destroyed,the__gameshould__end.It__needsto__endif__anyone__ofthese__events happens.If__manypossible__eventsmight__occurto__stopthe__program,trying__totest__allthese__conditionsin__onewhile__statementbecomes__complicatedand__difficult.For__aprogram__thatshould__runonly__aslong__asmany__conditionsare__true,you__candefine__onevariable__thatdetermines__whetheror__notthe__entireprogram__is active.This__variable,called__a flag,acts__asa__signalto__thepro__gram.We__canwrite__ourprograms__sothey__runwhile__theflag__isset__toTrue__andstop__runningwhen__anyof__severalevents__setsthe__valueof__theflag__to False.As__a result,our__overallwhile__statementneeds__tocheck__onlyone__condi tion:whether__theflag__iscurrently__True. Then,all__ourother__tests (tosee__ifan__eventhas__occurredthat__shouldset__theflag__to False)can__beneatly__organizedin__therest__ofthe__program.Let__sadd__aflag__to parrot.pyfrom__theprevious__section.This__flag,which__well__callactive__(thoughyou__cancall__it anything),will__monitorwhether__ornot__theprogram__shouldcontinue__running:prompt__= "\nTellme__something,and__Iwill__repeatit__backto__you:"prompt__+= "\nEnter 'quit'to__endthe__program. "active__=True__1while__active:message__= input(prompt)if__message == 'quit':active__=False__else: print(message)We__setthe__variableactive__toTrue__sothe__programstarts__inan__active state.Doing__somakes__thewhile__statementsimpler__becauseno__comparisonis__madein__thewhile__statement itself;the__logicis__takencare__ofin__otherparts__ofthe__program.As__longas__theactive__variableremains__True,the__loopwill__continue__running 1.In__theif__statementinside__thewhile__loop,we__checkthe__valueof__messageonce__theuser__enterstheir__input.If__theuser__enters 'quit',we__setactive__to False,and__thewhile__loop stops.If__theuser__entersanything__otherthan__'quit',we__printtheir__inputas__a message.This__programhas__thesame__outputas__theprevious__examplewhere__weplaced__theconditional__testdirectly__inthe__while statement.But__nowthat__weUser__Inputand__whileLoops__121have__aflag__toindicate__whetherthe__overallprogram__isin__anactive__state,it__wouldbe__easyto__addmore__tests (suchas__elif statements)for__eventsthat__shouldcause__activeto__become False.This__isuseful__incomplicated__programslike__games,in__whichthere__maybe__manyevents__thatshould__eachmake__theprogram__stop running.When__anyof__theseevents__causesthe__activeflag__tobecome__False,the__maingame__loopwill__exit,a__GameOver__messagecan__be displayed,and__theplayer__canbe__giventhe__optionto__play again.Using__breakto__Exita__LoopTo__exita__whileloop__immediatelywithout__runningany__remainingcode__inthe__loop,regardless__ofthe__resultsof__anyconditional__test,use__thebreak__state ment.The__breakstatement__directsthe__flowof__your program;you__canuse__itto__controlwhich__linesof__codeare__executedand__whicharen__t,so__theprogram__onlyexecutes__codethat__youwant__it to,when__youwant__it to.For__example,consider__aprogram__thatasks__theuser__aboutplaces__theyve__visited.We__canstop__thewhile__loopin__thisprogram__bycalling__breakas__soonas__theuser__entersthe__'quit' value: cities.pyprompt__= "\nPleaseenter__thename__ofa__cityyou__have visited:"prompt__+= "\n(Enter 'quit'when__youare__finished.) " 1while__True:city__= input(prompt)if__city == 'quit':break__else: print(f"I'dlove__togo__to {city.title()}!")A__loopthat__startswith__whileTrue__1will__runforever__unlessit__reachesa__break statement.The__loopin__thisprogram__continuesasking__theuser__toenter__thenames__ofcities__theyve__beento__untilthey__enter 'quit'.When__theyenter__'quit',the__breakstatement__runs,causing__Pythonto__exitthe__loop:Please__enterthe__nameof__acity__youhave__visited: (Enter 'quit'when__youare__finished.)New__York I'dlove__togo__toNew__York!Please__enterthe__nameof__acity__youhave__visited: (Enter 'quit'when__youare__finished.)San__Francisco I'dlove__togo__toSan__Francisco!Please__enterthe__nameof__acity__youhave__visited: (Enter 'quit'when__youare__finished.)quit__NOTEYou__canuse__thebreak__statementin__anyof__Pythons__loops.For__example,you__coulduse__breakto__quita__forloop__thats__workingthrough__alist__ora__dictionary. 122Chapter__7Using__continuein__aLoop__Ratherthan__breakingout__ofa__loopentirely__withoutexecuting__therest__ofits__code,you__canuse__thecontinue__statementto__returnto__thebeginning__ofthe__loop,based__onthe__resultof__aconditional__test.For__example,consider__aloop__thatcounts__from 1to__10but__printsonly__theodd__numbersin__that range: counting.pycurrent_number__= 0while__current_number < 10: 1current_number__+= 1if__current_number % 2 == 0:continue__print(current_number) First,we__setcurrent_number__to 0.Because__its__lessthan__10,Python__entersthe__while loop.Once__insidethe__loop,we__incrementthe__countby__1 1,so__current_numberis__1.The__ifstatement__thenchecks__themodulo__ofcurrent_number__and 2.If__themodulo__is 0 (whichmeans__current_numberis__divisibleby__2),the__continuestatement__tellsPython__toignore__therest__ofthe__loopand__returnto__the beginning.If__thecurrent__numberis__notdivisible__by 2,the__restof__theloop__isexecuted__andPython__printsthe__current number: 1 3 5 7 9Avoiding__InfiniteLoops__Everywhile__loopneeds__away__tostop__runningso__itwon__tcontinue__torun__for ever.For__example,this__countingloop__shouldcount__from 1to__5: counting.pyx__= 1while__x <= 5: print(x)x__+= 1 However,if__youaccidentally__omitthe__linex__+= 1,the__loopwill__run forever: #This__loopruns__forever!x__= 1while__x <= 5: print(x)User__Inputand__whileLoops__123Now__thevalue__ofx__willstart__at 1but__never change.As__a result,the__conditional__testx__<= 5will__alwaysevaluate__toTrue__andthe__whileloop__willrun__forever,printing__aseries__of 1s,like__this: 1 1 1 1 --snip--Every__programmeraccidentally__writesan__infinitewhile__loopfrom__timeto__time,especially__whena__programs__loopshave__subtleexit__conditions.If__yourprogram__getsstuck__inan__infinite loop,press__CTRL-Cor__justclose__theterminal__windowdisplaying__yourprogram__s output.To__avoidwriting__infinite loops,test__everywhile__loopand__makesure__theloop__stopswhen__youexpect__it to.If__youwant__yourprogram__toend__whenthe__userenters__acertain__input value,run__theprogram__andenter__that value.If__theprogram__doesnt__end,scrutinize__theway__yourprogram__handlesthe__valuethat__shouldcause__theloop__to exit.Make__sureat__leastone__partof__theprogram__canmake__theloop__scondition__Falseor__causeit__toreach__abreak__statement.NOTE__VS Code,like__many editors,displays__outputin__anembedded__terminal window.To__cancelan__infinite loop,make__sureyou__clickin__theoutput__areaof__theeditor__beforepressing__CTRL-C.TRY__ITYOURSELF__7-4.Pizza__Toppings:Write__aloop__thatprompts__theuser__toenter__aseries__ofpizza__toppingsuntil__theyenter__a 'quit' value.As__theyenter__each topping,print__amessage__sayingyou__lladd__thattopping__totheir__pizza. 7-5.Movie__Tickets:A__movietheater__chargesdifferent__ticketprices__dependingon__aperson__s age.If__aperson__isunder__theage__of 3,the__ticketis__free;if__theyare__between 3and__12,the__ticketis__$10;and__ifthey__areover__age 12,the__ticketis__$15.Write__aloop__inwhich__youask__userstheir__age,and__thentell__themthe__costof__theirmovie__ticket. 7-6.Three__Exits:Write__differentversions__ofeither__Exercise 7-4or__7-5that__doeach__ofthe__followingat__least once:Use__aconditional__testin__thewhile__statementto__stopthe__loop.Use__anactive__variableto__controlhow__longthe__loop runs.Use__abreak__statementto__exitthe__loopwhen__theuser__entersa__'quit' value. 7-7. Infinity:Write__aloop__thatnever__ends,and__run it. (Toend__the loop,press__CTRL-Cor__closethe__windowdisplaying__the output.) 124Chapter__7Using__awhile__Loopwith__Listsand__DictionariesSo__far,we__veworked__withonly__onepiece__ofuser__informationat__a time.We__receivedthe__users__inputand__thenprinted__theinput__ora__responseto__it.The__nexttime__throughthe__while loop,we__dreceive__anotherinput__valueand__respondto__that.But__tokeep__trackof__manyusers__andpieces__of information,we__llneed__touse__listsand__dictionarieswith__ourwhile__loops.A__forloop__iseffective__forlooping__througha__list,but__youshouldn__tmod__ifya__listinside__afor__loopbecause__Pythonwill__havetrouble__keepingtrack__ofthe__itemsin__the list.To__modifya__listas__youwork__through it,use__awhile__loop.Using__whileloops__withlists__anddictionaries__allowsyou__to collect, store,and__organizelots__ofinput__toexamine__andreport__on later.Moving__Itemsfrom__OneList__toAnother__Considera__listof__newlyregistered__butunverified__usersof__a website.After__weverify__these users,how__canwe__movethem__toa__separatelist__ofconfirmed__users?One__waywould__beto__usea__whileloop__topull__usersfrom__thelist__ofunconfirmed__usersas__weverify__themand__thenadd__themto__aseparate__listof__confirmed users.Here__swhat__thatcode__mightlook__like:confirmed___users.py #Start__withusers__thatneed__tobe__verified, #and__anempty__listto__holdconfirmed__users. 1unconfirmed_users__= ['alice', 'brian', 'candace']confirmed_users__= [] #Verify__eachuser__untilthere__areno__moreunconfirmed__users. #Move__eachverified__userinto__thelist__ofconfirmed__users. 2while__unconfirmed_users: 3current_user__= unconfirmed_users.pop() print(f"Verifying user: {current_user.title()}") 4 confirmed_users.append(current_user) #Display__allconfirmed__users. print("\nThefollowing__usershave__been confirmed:")for__confirmed_userin__confirmed_users: print(confirmed_user.title())We__beginwith__alist__ofunconfirmed__users 1 (Alice, Brian,and__Candace)and__anempty__listto__holdconfirmed__users.The__whileloop__runsas__longas__thelist__unconfirmed_usersis__notempty__2.Within__this loop,the__pop()method__removesunverified__usersone__ata__timefrom__theend__ofunconfirmed_users__3.Because__Candaceis__lastin__theunconfirmed_users__list,her__namewill__bethe__firstto__be removed,assigned__to current_user,and__addedto__theconfirmed_users__list 4.Next__is Brian,then__Alice.We__simulateconfirming__eachuser__byprinting__averification__messageand__thenadding__themto__thelist__ofconfirmed__users.As__thelist__ofuncon__firmedusers__shrinks,the__listof__confirmedusers__grows.When__thelist__ofUser__Inputand__whileLoops__125unconfirmed__usersis__empty,the__loopstops__andthe__listof__confirmedusers__is printed:Verifying__user:Candace__Verifying user:Brian__Verifying user:Alice__Thefollowing__usershave__been confirmed:Candace__BrianAlice__RemovingAll__Instancesof__SpecificValues__froma__ListIn__Chapter 3,we__used remove()to__removea__specificvalue__froma__list.The__remove()function__workedbecause__thevalue__wewere__interestedin__appearedonly__oncein__the list.But__whatif__youwant__toremove__allinstances__ofa__valuefrom__a list?Say__youhave__alist__ofpets__withthe__value 'cat'repeated__several times.To__removeall__instancesof__that value,you__canrun__awhile__loopuntil__'cat'is__nolonger__inthe__list,as__shown here: pets.pypets__= ['dog', 'cat', 'dog', 'goldfish', 'cat', 'rabbit', 'cat'] print(pets)while__'cat'in__pets: pets.remove('cat') print(pets)We__startwith__alist__containingmultiple__instancesof__'cat'.After__printingthe__list,Python__entersthe__whileloop__becauseit__findsthe__value 'cat'in__thelist__atleast__once.Once__insidethe__loop,Python__removesthe__firstinstance__of 'cat',returns__tothe__while line,and__thenreenters__theloop__whenit__findsthat__'cat'is__stillin__the list.It__removeseach__instanceof__'cat'until__thevalue__isno__longerin__the list,at__whichpoint__Pythonexits__theloop__andprints__thelist__again: ['dog', 'cat', 'dog', 'goldfish', 'cat', 'rabbit', 'cat'] ['dog', 'dog', 'goldfish', 'rabbit']Filling__aDictionary__withUser__InputYou__canprompt__foras__muchinput__asyou__needin__eachpass__througha__while loop.Let__smake__apolling__programin__whicheach__passthrough__theloop__promptsfor__theparticipant__sname__and response.We__llstore__thedata__wegather__ina__dictionary,because__wewant__toconnect__eachresponse__witha__particular user: mountain_poll.pyresponses__= {} #Set__aflag__toindicate__thatpolling__is active.polling_active__=True__126Chapter__7while__polling_active: #Prompt__forthe__person'sname__and response. 1name__= input("\nWhatis__your name? ")response__= input("Whichmountain__wouldyou__liketo__climb someday? ") #Store__theresponse__inthe__dictionary. 2 responses[name] =response__#Find__outif__anyoneelse__isgoing__totake__the poll. 3repeat__= input("Wouldyou__liketo__letanother__person respond? (yes/ no) ")if__repeat == 'no':polling_active__=False__#Polling__is complete.Show__the results. print("\n---Poll__Results ---") 4for__name,response__in responses.items(): print(f"{name}would__liketo__climb {response}.")The__programfirst__definesan__emptydictionary__(responses)and__setsa__flag (polling_active)to__indicatethat__pollingis__active.As__longas__polling_activeis__True,Python__willrun__thecode__inthe__while loop.Within__the loop,the__useris__promptedto__entertheir__nameand__amoun__tainthey__dlike__toclimb__1.That__informationis__storedin__theresponses__dictionary 2,and__theuser__isasked__whetheror__notto__keepthe__pollrun__ning 3.If__theyenter__yes,the__programenters__thewhile__loop again.If__theyenter__no,the__polling_activeflag__isset__to False,the__whileloop__stops running,and__thefinal__codeblock__4displays__theresults__ofthe__poll.If__yourun__thisprogram__andenter__sample responses,you__shouldsee__outputlike__this:What__isyour__name?Eric__Whichmountain__wouldyou__liketo__climb someday?Denali__Wouldyou__liketo__letanother__person respond? (yes/ no)yes__Whatis__your name?Lynn__Whichmountain__wouldyou__liketo__climb someday? Devil'sThumb__Wouldyou__liketo__letanother__person respond? (yes/ no)no__---Poll__Results ---Eric__wouldlike__toclimb__Denali.Lynn__wouldlike__toclimb__Devil's Thumb.User__Inputand__whileLoops__127TRY__ITYOURSELF__7-8. Deli:Make__alist__calledsandwich_orders__andfill__itwith__thenames__ofvarious__sandwiches.Then__makean__emptylist__called finished_sandwiches.Loop__throughthe__listof__sandwichorders__andprint__amessage__foreach__order,such__asI__madeyour__tuna sandwich.As__eachsandwich__is made,move__itto__thelist__offinished__sandwiches.After__allthe__sandwicheshave__been made,print__amessage__listingeach__sandwichthat__was made. 7-9.No__Pastrami:Using__thelist__sandwich_ordersfrom__Exercise 7-8,make__surethe__sandwich 'pastrami'appears__inthe__listat__leastthree__times.Add__codenear__thebeginning__ofyour__programto__printa__messagesaying__thedeli__hasrun__outof__pastrami,and__thenuse__awhile__loopto__removeall__occurrencesof__'pastrami'from__sandwich_orders.Make__sureno__pastramisandwiches__endup__in finished_sandwiches. 7-10.Dream__Vacation:Write__aprogram__thatpolls__usersabout__theirdream__vaca tion.Write__aprompt__similarto__Ifyou__couldvisit__oneplace__inthe__world,where__wouldyou__go?Include__ablock__ofcode__thatprints__theresults__ofthe__poll.Summary__Inthis__chapter,you__learnedhow__touse__input()to__allowusers__toprovide__theirown__informationin__your programs.You__learnedto__workwith__bothtext__andnumerical__inputand__howto__usewhile__loopsto__makeyour__programsrun__aslong__asyour__userswant__them to.You__sawseveral__waysto__controlthe__flowof__awhile__loopby__settingan__active flag,using__thebreak__statement,and__usingthe__continue statement.You__learnedhow__touse__awhile__loopto__moveitems__fromone__listto__anotherand__howto__removeall__instancesof__avalue__froma__list.You__alsolearned__howwhile__loopscan__beused__with dictionaries.In__Chapter 8you__lllearn__about functions.Functions__allowyou__tobreak__yourprograms__intosmall__parts,each__ofwhich__doesone__specific job.You__cancall__afunction__asmany__timesas__you want,and__youcan__storeyour__functionsin__separate files.By__using functions,you__llbe__ableto__writemore__efficientcode__thats__easierto__troubleshootand__maintainand__thatcan__bereused__inmany__different programs. 8F__UNC__TION__SIn__thischapter__youll__learnto__writefunc__tions,which__arenamed__blocksof__codedesigned__todo__onespecific__job.When__youwant__toperform__aparticular__taskthat__youve__definedin__a function,you__callthe__functionrespon__siblefor__it.If__youneed__toperform__thattask__multipletimes__throughoutyour__program,you__dont__needto__typeall__thecode__forthe__sametask__againand__again;you__justcall__thefunction__dedicatedto__handlingthat__task,and__thecall__tellsPython__torun__thecode__insidethe__function.You__llfind__thatusing__functionsmakes__yourprograms__easierto__write, read, test,and__fix.In__thischapter__youll__alsolearn__avariety__ofways__topass__informationto__functions.You__lllearn__howto__writecertain__functionswhose__primaryjob__isto__displayinformation__andother__functionsdesigned__toprocess__dataand__returna__valueor__setof__values. Finally,you__lllearn__tostore__functionsin__separate__filescalled__modulesto__helporganize__yourmain__program files. 130Chapter__8Defining__aFunction__Heres__asimple__functionnamed__greet_user()that__printsa__greeting: greeter.pydef__greet_user(): """Displaya__simple greeting.""" print("Hello!") greet_user()This__exampleshows__thesimplest__structureof__a function.The__firstline__usesthe__keyworddef__toinform__Pythonthat__youre__defininga__function.This__isthe__function definition,which__tellsPython__thename__ofthe__function and,if__applicable,what__kindof__informationthe__functionneeds__todo__its job.The__parentheseshold__that information.In__this case,the__nameof__thefunction__is greet_user(),and__itneeds__noinformation__todo__its job,so__itsparentheses__are empty. (Even so,the__parenthesesare__required.) Finally,the__definitionends__ina__colon.Any__indentedlines__thatfollow__def greet_user():make__upthe__bodyof__the function.The__texton__thesecond__lineis__acomment__calleda__docstring,which__describeswhat__thefunction__does.When__Pythongenerates__documentationfor__thefunctions__inyour__programs,it__looksfor__astring__immediatelyafter__the function's definition.These__stringsare__usuallyenclosed__intriple__quotes,which__letsyou__writemultiple__lines.The__line print("Hello!")is__theonly__lineof__actualcode__inthe__bodyof__this function,so__greet_user()has__justone__job: print("Hello!").When__youwant__touse__this function,you__haveto__call it.A__functioncall__tellsPython__toexecute__thecode__inthe__function.To__calla__function,you__writethe__nameof__the function,followed__byany__necessaryinformation__inparen__theses.Because__noinformation__isneeded__here,calling__ourfunction__isas__simpleas__entering greet_user().As__expected,it__prints Hello!: Hello!Passing__Informationto__aFunction__Ifyou__modifythe__function greet_user() slightly,it__cangreet__theuser__by name.For__thefunction__todo__this,you__enterusername__inthe__parenthesesof__thefunction__sdefinition__atdef__greet_user().By__addingusername__here,you__allowthe__functionto__acceptany__valueof__usernameyou__specify.The__functionnow__expectsyou__toprovide__avalue__forusername__eachtime__youcall__it.When__youcall__greet_user(),you__canpass__ita__name,such__as 'jesse',inside__the parentheses:def__greet_user(username): """Displaya__simple greeting.""" print(f"Hello, {username.title()}!") greet_user('jesse')Functions__131Entering__greet_user('jesse')calls__greet_user()and__givesthe__functionthe__informationit__needsto__executethe__print() call.The__functionaccepts__thename__youpassed__itand__displaysthe__greetingfor__that name: Hello, Jesse! Likewise,entering__greet_user('sarah')calls__greet_user(),passes__it 'sarah',and__prints Hello, Sarah!You__cancall__greet_user()as__oftenas__youwant__andpass__itany__nameyou__wantto__producea__predictableoutput__every time.Arguments__andParameters__Inthe__preceding greet_user() function,we__defined greet_user()to__requirea__valuefor__thevariable__username.Once__wecalled__thefunction__andgave__itthe__information (aperson__s name),it__printedthe__right greeting.The__variableusername__inthe__definitionof__greet_user()is__anexample__ofa__parameter,a__pieceof__informationthe__functionneeds__todo__its job.The__value 'jesse'in__greet_user('jesse')is__anexample__ofan__argument.An__argumentis__apiece__ofinformation__thats__passedfrom__afunction__callto__a function.When__wecall__the function,we__placethe__valuewe__wantthe__functionto__workwith__in parentheses.In__thiscase__theargument__'jesse'was__passedto__thefunction__greet_user(),and__thevalue__wasassigned__tothe__parameter username.NOTE__Peoplesometimes__speakof__argumentsand__parameters interchangeably.Don__tbe__surprised__ifyou__seethe__variablesin__afunction__definitionreferred__toas__argumentsor__thevariables__ina__functioncall__referredto__as parameters.TRY__ITYOURSELF__8-1. Message:Write__afunction__called display_message()that__printsone__sentence__tellingeveryone__whatyou__arelearning__aboutin__this chapter.Call__the function,and__makesure__themessage__displays correctly. 8-2.Favorite__Book:Write__afunction__called favorite_book()that__acceptsone__parameter, title.The__functionshould__printa__message,such__asOne__ofmy__favoritebooks__isAlice__in Wonderland.Call__the function,making__sureto__includea__booktitle__asan__argumentin__thefunction__call.Passing__ArgumentsBecause__afunction__definitioncan__havemultiple__parameters,a__functioncall__mayneed__multiple arguments.You__canpass__argumentsto__yourfunctions__ina__numberof__ways.You__canuse__positional arguments,which__needto__bein__thesame__orderthe__parameterswere__written;keyword__arguments,where__eachargument__consistsof__avariable__nameand__a value;and__listsand__dictionariesof__values.Let__slook__ateach__ofthese__in turn. 132Chapter__8Positional__ArgumentsWhen__youcall__a function,Python__mustmatch__eachargument__inthe__function__callwith__aparameter__inthe__function definition.The__simplestway__todo__thisis__basedon__theorder__ofthe__arguments provided.Values__matchedup__thisway__arecalled__positional arguments.To__seehow__this works,consider__afunction__thatdisplays__informationabout__pets.The__functiontells__uswhat__kindof__animaleach__petis__andthe__pets__name,as__shown here: pets.py 1def__describe_pet(animal_type, pet_name): """Displayinformation__abouta__pet.""" print(f"\nIhave__a {animal_type}.") print(f"My {animal_type}'sname__is {pet_name.title()}.") 2 describe_pet('hamster', 'harry')The__definitionshows__thatthis__functionneeds__atype__ofanimal__andthe__animals__name 1.When__wecall__describe_pet(),we__needto__providean__animal__typeand__a name,in__that order.For__example,in__thefunction__call,the__argument 'hamster'is__assignedto__theparameter__animal_typeand__theargu__ment 'harry'is__assignedto__theparameter__pet_name 2.In__thefunction__body,these__twoparameters__areused__todisplay__informationabout__thepet__being described.The__outputdescribes__ahamster__named Harry:I__havea__hamster.My__hamster'sname__is Harry.Multiple__FunctionCalls__Youcan__calla__functionas__manytimes__as needed.Describing__a second,dif__ferentpet__requiresjust__onemore__callto__describe_pet():def__describe_pet(animal_type, pet_name): """Displayinformation__abouta__pet.""" print(f"\nIhave__a {animal_type}.") print(f"My {animal_type}'sname__is {pet_name.title()}.") describe_pet('hamster', 'harry') describe_pet('dog', 'willie')In__thissecond__function call,we__pass describe_pet()the__arguments 'dog'and__'willie'.As__withthe__previousset__ofarguments__we used,Python__matches 'dog'with__theparameter__animal_typeand__'willie'with__theparameter__pet_name.As__before,the__functiondoes__its job,but__thistime__itprints__valuesfor__adog__named Willie.Now__wehave__ahamster__namedHarry__anda__dognamed__Willie:I__havea__hamster.My__hamster'sname__is Harry.Functions__133I__havea__dog.My__dog'sname__is Willie.Calling__afunction__multipletimes__isa__veryefficient__wayto__work.The__codedescribing__apet__iswritten__oncein__the function. Then,anytime__youwant__todescribe__anew__pet,you__callthe__functionwith__thenew__pets__infor mation.Even__ifthe__codefor__describinga__petwere__toexpand__to 10 lines,you__couldstill__describea__newpet__injust__oneline__bycalling__thefunction__again.Order__Mattersin__PositionalArguments__Youcan__getunexpected__resultsif__youmix__upthe__orderof__thearguments__ina__functioncall__whenusing__positional arguments:def__describe_pet(animal_type, pet_name): """Displayinformation__abouta__pet.""" print(f"\nIhave__a {animal_type}.") print(f"My {animal_type}'sname__is {pet_name.title()}.") describe_pet('harry', 'hamster')In__thisfunction__call,we__listthe__namefirst__andthe__typeof__animal second.Because__theargument__'harry'is__listedfirst__this time,that__valueis__assignedto__theparameter__animal_type. Likewise, 'hamster'is__assignedto__pet_name.Now__wehave__aharry__namedHamster__:I__havea__harry.My__harry'sname__is Hamster.If__youget__funnyresults__like this,check__tomake__surethe__orderof__thearguments__inyour__functioncall__matchesthe__orderof__theparameters__inthe__functions__definition.Keyword__ArgumentsA__keywordargument__isa__name-valuepair__thatyou__passto__a function.You__directlyassociate__thename__andthe__valuewithin__the argument,so__whenyou__passthe__argumentto__the function,there__sno__confusion (youwon__tend__upwith__aharry__named Hamster).Keyword__argumentsfree__youfrom__havingto__worryabout__correctlyordering__yourarguments__inthe__function call,and__theyclarify__therole__ofeach__valuein__thefunction__call.Let__srewrite__pets.pyusing__keywordarguments__tocall__describe_pet():def__describe_pet(animal_type, pet_name): """Displayinformation__abouta__pet.""" print(f"\nIhave__a {animal_type}.") print(f"My {animal_type}'sname__is {pet_name.title()}.") describe_pet(animal_type='hamster', pet_name='harry') 134Chapter__8The__function describe_pet()hasn__t changed.But__whenwe__callthe__func tion,we__explicitlytell__Pythonwhich__parametereach__argumentshould__bematched__with.When__Pythonreads__thefunction__call,it__knowsto__assignthe__argument 'hamster'to__theparameter__animal_typeand__theargument__'harry'to__pet_name.The__outputcorrectly__showsthat__wehave__ahamster__named Harry.The__orderof__keywordarguments__doesnt__matterbecause__Pythonknows__whereeach__valueshould__go.The__followingtwo__functioncalls__are equivalent: describe_pet(animal_type='hamster', pet_name='harry') describe_pet(pet_name='harry', animal_type='hamster')NOTE__Whenyou__usekeyword__arguments,be__sureto__usethe__exactnames__ofthe__parametersin__thefunction__s definition.Default__ValuesWhen__writinga__function,you__candefine__adefault__valuefor__each parameter.If__anargument__fora__parameteris__providedin__thefunction__call,Python__usesthe__argument value.If__not,it__usesthe__parameters__default value.So__whenyou__definea__defaultvalue__fora__parameter,you__canexclude__thecor__respondingargument__youd__usuallywrite__inthe__function call.Using__defaultvalues__cansimplify__yourfunction__callsand__clarifythe__waysyour__functionsare__typically used.For__example,if__younotice__thatmost__ofthe__callsto__describe_pet()are__beingused__todescribe__dogs,you__canset__thedefault__valueof__animal_typeto__'dog'.Now__anyonecalling__describe_pet()for__adog__canomit__that information:def__describe_pet(pet_name, animal_type='dog'): """Displayinformation__abouta__pet.""" print(f"\nIhave__a {animal_type}.") print(f"My {animal_type}'sname__is {pet_name.title()}.") describe_pet(pet_name='willie')We__changedthe__definitionof__describe_pet()to__includea__default value, 'dog',for__animal_type.Now__whenthe__functionis__calledwith__noanimal_type__specified,Python__knowsto__usethe__value 'dog'for__this parameter:I__havea__dog.My__dog'sname__is Willie.Note__thatthe__orderof__theparameters__inthe__functiondefinition__hadto__be changed.Because__thedefault__valuemakes__itunnecessary__tospecify__atype__ofanimal__asan__argument,the__onlyargument__leftin__thefunction__callis__thepet__s name.Python__stillinterprets__thisas__apositional__argument,so__ifthe__functionis__calledwith__justa__pets__name,that__argumentwill__matchup__withthe__firstparameter__listedin__thefunction__s definition.This__isthe__reasonthe__firstparameter__needsto__be pet_name.Functions__135The__simplestway__touse__thisfunction__nowis__toprovide__justa__dogs__namein__thefunction__call: describe_pet('willie')This__functioncall__wouldhave__thesame__outputas__theprevious__example.The__onlyargument__providedis__'willie',so__itis__matchedup__withthe__firstparameter__inthe__definition, pet_name.Because__noargument__isprovided__for animal_type,Python__usesthe__defaultvalue__'dog'.To__describean__animalother__thana__dog,you__coulduse__afunction__calllike__this: describe_pet(pet_name='harry', animal_type='hamster')Because__anexplicit__argumentfor__animal_typeis__provided,Python__willignore__theparameter__sdefault__value.NOTE__Whenyou__usedefault__values,any__parameterwith__adefault__valueneeds__tobe__listedafter__allthe__parametersthat__dont__havedefault__values.This__allowsPython__tocon__tinueinterpreting__positionalarguments__correctly.Equivalent__FunctionCalls__Becausepositional__arguments,keyword__arguments,and__defaultvalues__canall__beused__together,you__lloften__haveseveral__equivalentways__tocall__afunc__tion.Consider__thefollowing__definitionfor__describe_pet()with__onedefault__value provided:def__describe_pet(pet_name, animal_type='dog'):With__this definition,an__argumentalways__needsto__beprovided__for pet_name,and__thisvalue__canbe__providedusing__thepositional__orkeyword__for mat.If__theanimal__beingdescribed__isnot__a dog,an__argumentfor__animal_typemust__beincluded__inthe__call,and__thisargument__canalso__bespecified__usingthe__positionalor__keyword format.All__ofthe__followingcalls__wouldwork__forthis__function: #A__dognamed__Willie. describe_pet('willie') describe_pet(pet_name='willie') #A__hamsternamed__Harry. describe_pet('harry', 'hamster') describe_pet(pet_name='harry', animal_type='hamster') describe_pet(animal_type='hamster', pet_name='harry')Each__ofthese__functioncalls__wouldhave__thesame__outputas__theprevious__examples.It__doesnt__reallymatter__whichcalling__styleyou__use.As__longas__yourfunc__tioncalls__producethe__outputyou__want,just__usethe__styleyou__findeasiest__to understand. 136Chapter__8Avoiding__ArgumentErrors__Whenyou__startto__use functions,don__tbe__surprisedif__youencounter__errorsabout__unmatched arguments.Unmatched__argumentsoccur__whenyou__providefewer__ormore__argumentsthan__afunction__needsto__doits__work.For__example,here__swhat__happensif__wetry__tocall__describe_pet()with__no arguments:def__describe_pet(animal_type, pet_name): """Displayinformation__abouta__pet.""" print(f"\nIhave__a {animal_type}.") print(f"My {animal_type}'sname__is {pet_name.title()}.") describe_pet()Python__recognizesthat__someinformation__ismissing__fromthe__function call,and__thetraceback__tellsus__that:Traceback__(mostrecent__call last): 1File__"pets.py",line__6,in__2 describe_pet() ^^^^^^^^^^^^^^ 3 TypeError: describe_pet()missing__2required__positional arguments: 'animal_type'and__'pet_name'The__tracebackfirst__tellsus__thelocation__ofthe__problem 1,allowing__usto__lookback__andsee__thatsomething__wentwrong__inour__function call. Next,the__offendingfunction__callis__writtenout__forus__tosee__2. Last,the__traceback__tellsus__thecall__ismissing__twoarguments__andreports__thenames__ofthe__missingarguments__3.If__thisfunction__werein__aseparate__file,we__couldprobably__rewritethe__callcorrectly__withouthaving__toopen__thatfile__andread__thefunction__code.Python__ishelpful__inthat__itreads__thefunction__scode__forus__andtells__usthe__namesof__thearguments__weneed__to provide.This__isanother__motivation__forgiving__yourvariables__andfunctions__descriptive names.If__you do,Python__serror__messageswill__bemore__usefulto__youand__anyoneelse__whomight__useyour__code.If__youprovide__toomany__arguments,you__shouldget__asimilar__tracebackthat__canhelp__youcorrectly__matchyour__functioncall__tothe__function definition.TRY__ITYOURSELF__8-3. T-Shirt:Write__afunction__called make_shirt()that__acceptsa__sizeand__thetext__ofa__messagethat__shouldbe__printedon__the shirt.The__functionshould__printa__sentencesummarizing__thesize__ofthe__shirtand__themessage__printedon__it.Call__thefunction__onceusing__positionalarguments__tomake__a shirt.Call__thefunction__asecond__timeusing__keyword arguments.Functions__137 8-4.Large__Shirts:Modify__the make_shirt()function__sothat__shirtsare__largeby__defaultwith__amessage__thatreads__Ilove__Python.Make__alarge__shirtand__amedium__shirtwith__thedefault__message,and__ashirt__ofany__sizewith__adifferent__message. 8-5. Cities:Write__afunction__called describe_city()that__acceptsthe__nameof__acity__andits__country.The__functionshould__printa__simple sentence,such__asReykjavik__isin__Iceland.Give__theparameter__forthe__countrya__default value.Call__yourfunction__forthree__different cities,at__leastone__ofwhich__isnot__inthe__default country.Return__ValuesA__functiondoesn__talways__haveto__displayits__output directly. Instead,it__canprocess__somedata__andthen__returna__valueor__setof__values.The__valuethe__functionreturns__iscalled__areturn__value.The__returnstatement__takesa__valuefrom__insidea__functionand__sendsit__backto__theline__thatcalled__thefunc__tion.Return__valuesallow__youto__movemuch__ofyour__programs__gruntwork__into functions,which__cansimplify__thebody__ofyour__program.Returning__aSimple__ValueLet__slook__ata__functionthat__takesa__firstand__last name,and__returnsa__neatlyformatted__full name:formatted___name.pydef__get_formatted_name(first_name, last_name): """Returna__full name,neatly__formatted.""" 1full_name__= f"{first_name} {last_name}" 2return__full_name.title() 3musician__= get_formatted_name('jimi', 'hendrix') print(musician)The__definitionof__get_formatted_name()takes__asparameters__afirst__andlast__name.The__functioncombines__thesetwo__names,adds__aspace__between them,and__assignsthe__resultto__full_name 1.The__valueof__full_nameis__converted__totitle__case,and__thenreturned__tothe__callingline__2.When__youcall__afunction__thatreturns__a value,you__needto__providea__variablethat__thereturn__valuecan__beassigned__to.In__this case,the__returnedvalue__isassigned__tothe__variablemusician__3.The__outputshows__aneatly__formatted__namemade__upof__theparts__ofa__persons__name:Jimi__HendrixThis__mightseem__likea__lotof__workto__geta__neatlyformatted__namewhen__wecould__havejust__written: print("Jimi Hendrix") 138Chapter__8 However,when__youconsider__workingwith__alarge__programthat__needsto__storemany__firstand__lastnames__separately,functions__likeget_formatted___name()become__very useful.You__storefirst__andlast__namesseparately__andthen__callthis__functionwhenever__youwant__todisplay__afull__name.Making__anArgument__OptionalSometimes__itmakes__senseto__makean__argument optional,so__thatpeople__usingthe__functioncan__chooseto__provideextra__informationonly__ifthey__want to.You__canuse__defaultvalues__tomake__anargument__optional.For__example,say__wewant__toexpand__get_formatted_name()to__handlemiddle__namesas__well.A__firstattempt__toinclude__middlenames__mightlook__like this:def__get_formatted_name(first_name, middle_name, last_name): """Returna__full name,neatly__formatted."""full_name__= f"{first_name} {middle_name} {last_name}"return__full_name.title()musician__= get_formatted_name('john', 'lee', 'hooker') print(musician)This__functionworks__whengiven__a first, middle,and__last name.The__functiontakes__inall__threeparts__ofa__nameand__thenbuilds__astring__outof__them.The__functionadds__spaceswhere__appropriateand__convertsthe__fullname__totitle__case:John__LeeHooker__Butmiddle__namesaren__talways__needed,and__thisfunction__aswritten__wouldnot__workif__youtried__tocall__itwith__onlya__firstname__anda__last name.To__makethe__middlename__optional,we__cangive__themiddle_name__argumentan__emptydefault__valueand__ignorethe__argumentunless__theuser__providesa__value.To__make get_formatted_name()work__withouta__middle name,we__setthe__defaultvalue__ofmiddle_name__toan__emptystring__andmove__itto__theend__ofthe__listof__parameters:def__get_formatted_name(first_name, last_name, middle_name=''): """Returna__full name,neatly__formatted.""" 1if__middle_name:full_name__= f"{first_name} {middle_name} {last_name}" 2 else:full_name__= f"{first_name} {last_name}"return__full_name.title()musician__= get_formatted_name('jimi', 'hendrix') print(musician) 3musician__= get_formatted_name('john', 'hooker', 'lee') print(musician)Functions__139In__this example,the__nameis__builtfrom__threepossible__parts.Because__theres__alwaysa__firstand__last name,these__parametersare__listedfirst__inthe__functions__definition.The__middlename__is optional,so__its__listedlast__inthe__definition,and__itsdefault__valueis__anempty__string.In__thebody__ofthe__function,we__checkto__seeif__amiddle__namehas__been provided.Python__interprets non-emptystrings__as True,so__theconditional__testif__middle_nameevaluates__toTrue__ifa__middlename__argumentis__inthe__functioncall__1.If__amiddle__nameis__provided,the__first, middle,and__lastnames__arecombined__toform__afull__name.This__nameis__thenchanged__totitle__caseand__returnedto__thefunction__call line,where__its__assignedto__thevariable__musicianand__printed.If__nomiddle__nameis__provided,the__emptystring__failsthe__iftest__andthe__elseblock__runs 2.The__fullname__ismade__withjust__afirst__andlast__name,and__theformatted__nameis__returnedto__thecalling__linewhere__its__assignedto__musicianand__printed.Calling__thisfunction__witha__firstand__lastname__is straightforward.If__were__usinga__middle name, however,we__haveto__makesure__themiddle__nameis__thelast__argumentpassed__soPython__willmatch__upthe__positionalarguments__correctly 3.This__modifiedversion__ofour__functionworks__forpeople__withjust__afirst__andlast__name,and__itworks__forpeople__whohave__amiddle__nameas__well:Jimi__HendrixJohn__LeeHooker__Optionalvalues__allowfunctions__tohandle__awide__rangeof__usecases__whileletting__functioncalls__remainas__simpleas__possible.Returning__aDictionary__Afunction__canreturn__anykind__ofvalue__youneed__it to,including__morecom__plicateddata__structureslike__listsand__dictionaries.For__example,the__following__functiontakes__inparts__ofa__nameand__returnsa__dictionaryrepresenting__a person: person.pydef__build_person(first_name, last_name): """Returna__dictionaryof__informationabout__a person.""" 1person__= {'first': first_name, 'last': last_name} 2return__personmusician__= build_person('jimi', 'hendrix') 3 print(musician)The__function build_person()takes__ina__firstand__last name,and__putsthese__valuesinto__adictionary__1.The__valueof__first_nameis__storedwith__thekey__'first',and__thevalue__oflast_name__isstored__withthe__key 'last'. Then,the__entiredictionary__representingthe__personis__returned 2.The__returnvalue__isprinted__3with__theoriginal__twopieces__oftextual__informationnow__storedin__a dictionary: {'first': 'jimi', 'last': 'hendrix'} 140Chapter__8This__functiontakes__insimple__textualinformation__andputs__itinto__amore__meaningfuldata__structurethat__letsyou__workwith__theinformation__beyondjust__printing it.The__strings 'jimi'and__'hendrix'are__nowlabeled__asa__firstname__andlast__name.You__caneasily__extendthis__functionto__acceptoptional__valueslike__amiddle__name,an__age,an__occupation,or__anyother__informationyou__wantto__storeabout__a person.For__example,the__followingchange__allowsyou__tostore__aperson__sage__as well:def__build_person(first_name, last_name, age=None): """Returna__dictionaryof__informationabout__a person."""person__= {'first': first_name, 'last': last_name}if__age: person['age'] =age__returnperson__musician = build_person('jimi', 'hendrix', age=27) print(musician)We__adda__newoptional__parameterage__tothe__functiondefinition__andassign__theparameter__thespecial__value None,which__isused__whena__variablehas__nospecific__valueassigned__to it.You__canthink__ofNone__asa__placeholder value.In__conditional tests,None__evaluatesto__False.If__thefunction__callincludes__avalue__for age,that__valueis__storedin__the dictionary.This__functionalways__storesa__persons__name,but__itcan__alsobe__modifiedto__storeany__otherinformation__youwant__abouta__person.Using__aFunction__witha__whileLoop__Youcan__usefunctions__withall__thePython__structuresyou__velearned__aboutso__far.For__example,let__suse__the get_formatted_name()function__witha__whileloop__togreet__usersmore__formally.Here__sa__firstattempt__atgreeting__peopleusing__theirfirst__andlast__names: greeter.pydef__get_formatted_name(first_name, last_name): """Returna__full name,neatly__formatted."""full_name__= f"{first_name} {last_name}"return__full_name.title() #This__isan__infinite loop!while__True: 1 print("\nPleasetell__meyour__name:")f_name__= input("First name: ")l_name__= input("Last name: ")formatted_name__= get_formatted_name(f_name, l_name) print(f"\nHello, {formatted_name}!")For__this example,we__usea__simpleversion__of get_formatted_name()that__doesnt__involvemiddle__names.The__whileloop__asksthe__userto__entertheir__name,and__weprompt__fortheir__firstand__lastname__separately 1.But__theres__oneproblem__withthis__while loop:We__havent__defineda__quit condition.Where__doyou__puta__quitcondition__whenyou__askfor__aseries__ofFunctions__141 inputs?We__wantthe__userto__beable__toquit__aseasily__as possible,so__eachprompt__shouldoffer__away__to quit.The__breakstatement__offersa__straightforward__wayto__exitthe__loopat__either prompt:def__get_formatted_name(first_name, last_name): """Returna__full name,neatly__formatted."""full_name__= f"{first_name} {last_name}"return__full_name.title()while__True: print("\nPleasetell__meyour__name:") print("(enter 'q'at__anytime__to quit)")f_name__= input("First name: ")if__f_name == 'q':break__l_name = input("Last name: ")if__l_name == 'q':break__formatted_name = get_formatted_name(f_name, l_name) print(f"\nHello, {formatted_name}!")We__adda__messagethat__informsthe__userhow__to quit,and__thenwe__breakout__ofthe__loopif__theuser__entersthe__quitvalue__ateither__prompt.Now__thepro__gramwill__continuegreeting__peopleuntil__someoneenters__qfor__either name:Please__tellme__your name: (enter 'q'at__anytime__to quit)First__name:eric__Last name:matthes__Hello,Eric__Matthes!Please__tellme__your name: (enter 'q'at__anytime__to quit)First__name:q__TRYIT__YOURSELF 8-6.City__Names:Write__afunction__called city_country()that__takesin__thename__ofa__cityand__its country.The__functionshould__returna__stringformatted__like this: "Santiago, Chile"Call__yourfunction__withat__leastthree__city-country pairs,and__printthe__valuesthat__are returned. (continued) 142Chapter__8 8-7. Album:Write__afunction__called make_album()that__buildsa__dictionarydescribing__amusic__album.The__functionshould__takein__anartist__nameand__analbum__title,and__itshould__returna__dictionarycontaining__thesetwo__piecesof__information.Use__thefunction__tomake__threedictionaries__representingdifferent__albums.Print__eachreturn__valueto__showthat__thedictionaries__arestoring__thealbum__information correctly.Use__Noneto__addan__optionalparameter__to make_album()that__allowsyou__tostore__thenumber__ofsongs__onan__album.If__thecalling__lineincludes__avalue__forthe__numberof__songs,add__thatvalue__tothe__albums__dictionary.Make__atleast__onenew__functioncall__thatincludes__thenumber__ofsongs__onan__album. 8-8.User__Albums:Start__withyour__programfrom__Exercise 8-7.Write__awhile__loopthat__allowsusers__toenter__analbum__sartist__and title.Once__youhave__that information,call__make_album()with__theuser__sinput__andprint__thedictionary__thats__created.Be__sureto__includea__quitvalue__inthe__while loop.Passing__aList__Youll__oftenfind__ituseful__topass__alist__toa__function,whether__its__alist__of names, numbers,or__morecomplex__objects,such__as dictionaries.When__youpass__alist__toa__function,the__functiongets__directaccess__tothe__contentsof__the list.Let__suse__functionsto__makeworking__withlists__more efficient.Say__wehave__alist__ofusers__andwant__toprint__agreeting__to each.The__followingexample__sendsa__listof__namesto__afunction__called greet_users(),which__greetseach__personin__thelist__individually: greet_users.pydef__greet_users(names): """Printa__simplegreeting__toeach__userin__the list."""for__namein__names:msg__= f"Hello, {name.title()}!" print(msg)usernames__= ['hannah', 'ty', 'margot'] greet_users(usernames)We__define greet_users()so__itexpects__alist__of names,which__itassigns__tothe__parameter names.The__functionloops__throughthe__listit__receivesand__printsa__greetingto__each user.Outside__ofthe__function,we__definea__listof__usersand__thenpass__thelist__usernamesto__greet_users()in__thefunction__call: Hello, Hannah! Hello, Ty! Hello, Margot!This__isthe__outputwe__wanted.Every__usersees__apersonalized__greeting,and__youcan__callthe__functionanytime__youwant__togreet__aspecific__setof__users.Functions__143Modifying__aList__ina__FunctionWhen__youpass__alist__toa__function,the__functioncan__modifythe__list.Any__changesmade__tothe__listinside__thefunction__sbody__are permanent,allowing__youto__workefficiently__evenwhen__youre__dealingwith__largeamounts__of data.Consider__acompany__thatcreates__3Dprinted__modelsof__designsthat__users submit.Designs__thatneed__tobe__printedare__storedin__a list,and__afterbeing__printedthey__removed__toa__separate list.The__followingcode__doesthis__withoutusing__functions:printing___models.py #Start__withsome__designsthat__needto__be printed.unprinted_designs__= ['phone case', 'robot pendant', 'dodecahedron']completed_models__= [] #Simulate__printingeach__design,until__noneare__left. #Move__eachdesign__tocompleted_models__after printing.while__unprinted_designs:current_design__= unprinted_designs.pop() print(f"Printing model: {current_design}") completed_models.append(current_design) #Display__allcompleted__models. print("\nThefollowing__modelshave__been printed:")for__completed_modelin__completed_models: print(completed_model)This__programstarts__witha__listof__designsthat__needto__beprinted__andan__emptylist__calledcompleted_models__thateach__designwill__bemoved__toafter__ithas__been printed.As__longas__designsremain__in unprinted_designs,the__whileloop__simulatesprinting__eachdesign__byremoving__adesign__fromthe__endof__the list,storing__itin__current_design,and__displayinga__messagethat__thecur__rentdesign__isbeing__printed.It__thenadds__thedesign__tothe__listof__completed models.When__theloop__isfinished__running,a__listof__thedesigns__thathave__beenprinted__is displayed:Printing__model:dodecahedron__Printing model:robot__pendantPrinting__model:phone__caseThe__followingmodels__havebeen__printed:dodecahedron__robotpendant__phonecase__Wecan__reorganizethis__codeby__writingtwo__functions,each__ofwhich__doesone__specific job.Most__ofthe__codewon__t change;we__rejust__structuringit__more carefully.The__firstfunction__willhandle__printingthe__designs,and__thesecond__willsummarize__theprints__thathave__been made: 1def__print_models(unprinted_designs, completed_models): """Simulate__printingeach__design,until__noneare__left. 144Chapter__8Move__eachdesign__tocompleted_models__after printing. """while__unprinted_designs:current_design__= unprinted_designs.pop() print(f"Printing model: {current_design}") completed_models.append(current_design) 2def__show_completed_models(completed_models): """Showall__themodels__thatwere__printed.""" print("\nThefollowing__modelshave__been printed:")for__completed_modelin__completed_models: print(completed_model)unprinted_designs__= ['phone case', 'robot pendant', 'dodecahedron']completed_models__= [] print_models(unprinted_designs, completed_models) show_completed_models(completed_models)We__definethe__function print_models()with__two parameters:a__listof__designsthat__needto__beprinted__anda__listof__completedmodels__1.Given__thesetwo__lists,the__functionsimulates__printingeach__designby__emptyingthe__listof__unprinteddesigns__andfilling__upthe__listof__completed models.We__thendefine__thefunction__show_completed_models()with__one parameter:the__listof__completedmodels__2.Given__this list, show_completed_models()displays__thename__ofeach__modelthat__was printed.This__programhas__thesame__outputas__theversion__without functions,but__thecode__ismuch__more organized.The__codethat__doesmost__ofthe__workhas__beenmoved__totwo__separate functions,which__makesthe__mainpart__ofthe__programeasier__to understand.Look__atthe__bodyof__theprogram__andnotice__howeasily__youcan__followwhat__s happening:unprinted_designs__= ['phone case', 'robot pendant', 'dodecahedron']completed_models__= [] print_models(unprinted_designs, completed_models) show_completed_models(completed_models)We__setup__alist__ofunprinted__designsand__anempty__listthat__willhold__thecompleted__models. Then,because__weve__alreadydefined__ourtwo__functions,all__wehave__todo__iscall__themand__passthem__theright__arguments.We__call print_models()and__passit__thetwo__listsit__needs;as__expected, print_models()simulates__printingthe__designs.Then__wecall__show_completed_models()and__passit__thelist__ofcompleted__modelsso__itcan__reportthe__modelsthat__havebeen__printed.The__descriptivefunction__namesallow__othersto__readthis__codeand__understand it,even__without comments.This__programis__easierto__extendand__maintainthan__theversion__without__functions.If__weneed__toprint__moredesigns__later on,we__cansimply__callFunctions__145 print_models() again.If__werealize__theprinting__codeneeds__tobe__modified,we__canchange__thecode__once,and__ourchanges__willtake__placeeverywhere__thefunction__is called.This__techniqueis__moreefficient__thanhaving__toupdate__codeseparately__inseveral__placesin__the program.This__examplealso__demonstratesthe__ideathat__everyfunction__shouldhave__onespecific__job.The__firstfunction__printseach__design,and__thesecond__displaysthe__completed models.This__ismore__beneficialthan__usingone__function__todo__both jobs.If__youre__writinga__functionand__noticethe__functionis__doingtoo__manydifferent__tasks,try__tosplit__thecode__intotwo__functions.Remember__thatyou__canalways__calla__functionfrom__another function,which__canbe__helpfulwhen__splittinga__complextask__intoa__seriesof__steps.Preventing__aFunction__fromModifying__aList__Sometimesyou__llwant__toprevent__afunction__frommodifying__a list.For__example,say__thatyou__startwith__alist__ofunprinted__designsand__writea__functionto__movethem__toa__listof__completed models,as__inthe__previous example.You__maydecide__thateven__thoughyou__veprinted__allthe__designs,you__wantto__keepthe__originallist__ofunprinted__designsfor__your records.But__becauseyou__movedall__thedesign__namesout__of unprinted_designs,the__listis__now empty,and__theempty__listis__theonly__versionyou__have;the__originalis__gone.In__this case,you__canaddress__thisissue__bypassing__thefunction__acopy__ofthe__list,not__the original.Any__changesthe__functionmakes__tothe__listwill__affectonly__the copy,leaving__theoriginal__list intact.You__cansend__acopy__ofa__listto__afunction__like this: function_name(list_name[:])The__slicenotation__[:]makes__acopy__ofthe__listto__sendto__the function.If__wedidn__twant__toempty__thelist__ofunprinted__designsin__printing_models.py,we__couldcall__print_models()like__this: print_models(unprinted_designs[:], completed_models)The__function print_models()can__doits__workbecause__itstill__receivesthe__namesof__allunprinted__designs.But__thistime__ituses__acopy__ofthe__originalunprinted__designs list,not__theactual__unprinted_designs list.The__listcompleted___modelswill__fillup__withthe__namesof__printedmodels__likeit__did before,but__theoriginal__listof__unprinteddesigns__willbe__unaffectedby__the function.Even__thoughyou__canpreserve__thecontents__ofa__listby__passinga__copyof__itto__your functions,you__shouldpass__theoriginal__listto__functionsunless__youhave__aspecific__reasonto__passa__copy.It__smore__efficientfor__afunction__towork__withan__existing list,because__thisavoids__usingthe__timeand__memoryneeded__tomake__aseparate__copy.This__isespecially__truewhen__workingwith__large lists. 146Chapter__8TRY__ITYOURSELF__8-9. Messages:Make__alist__containinga__seriesof__shorttext__messages.Pass__thelist__toa__functioncalled__show_messages(),which__printseach__text message. 8-10.Sending__Messages:Start__witha__copyof__yourprogram__fromExercise__8-9.Write__afunction__called send_messages()that__printseach__textmessage__andmoves__eachmessage__toa__newlist__calledsent_messages__asit__s printed.After__callingthe__function,print__bothof__yourlists__tomake__surethe__messageswere__moved correctly. 8-11.Archived__Messages:Start__withyour__workfrom__Exercise 8-10.Call__thefunc__tion send_messages()with__acopy__ofthe__listof__messages.After__callingthe__func tion,print__bothof__yourlists__toshow__thatthe__originallist__hasretained__its messages.Passing__anArbitrary__Numberof__ArgumentsSometimes__youwon__tknow__aheadof__timehow__manyarguments__afunction__needsto__accept. Fortunately,Python__allowsa__functionto__collectan__arbitrary__numberof__argumentsfrom__thecalling__statement.For__example,consider__afunction__thatbuilds__a pizza.It__needsto__accepta__numberof__toppings,but__youcan__tknow__aheadof__timehow__manytoppings__aperson__will want.The__functionin__thefollowing__examplehas__one parameter, *toppings,but__thisparameter__collectsas__manyarguments__asthe__callingline__provides: pizza.pydef__make_pizza(*toppings): """Printthe__listof__toppingsthat__havebeen__requested.""" print(toppings) make_pizza('pepperoni') make_pizza('mushrooms', 'green peppers', 'extra cheese')The__asteriskin__theparameter__name *toppingstells__Pythonto__makea__tuplecalled__toppings,containing__allthe__valuesthis__function receives.The__print()call__inthe__functionbody__producesoutput__showingthat__Pythoncan__handlea__functioncall__withone__valueand__acall__withthree__values.It__treatsthe__differentcalls__similarly.Note__thatPython__packsthe__argumentsinto__a tuple,even__ifthe__functionreceives__onlyone__value: ('pepperoni',) ('mushrooms', 'green peppers', 'extra cheese')Now__wecan__replacethe__print()call__witha__loopthat__runsthrough__thelist__oftoppings__anddescribes__thepizza__being ordered:def__make_pizza(*toppings): """Summarizethe__pizzawe__areabout__to make."""Functions__147 print("\nMakinga__pizzawith__thefollowing__toppings:")for__toppingin__toppings: print(f"- {topping}") make_pizza('pepperoni') make_pizza('mushrooms', 'green peppers', 'extra cheese')The__functionresponds__appropriately,whether__itreceives__onevalue__orthree__values:Making__apizza__withthe__following toppings: -pepperoni__Makinga__pizzawith__thefollowing__toppings: -mushrooms__-green__peppers -extra__cheeseThis__syntaxworks__nomatter__howmany__argumentsthe__function receives.Mixing__Positionaland__ArbitraryArguments__Ifyou__wanta__functionto__acceptseveral__differentkinds__of arguments,the__parameterthat__acceptsan__arbitrarynumber__ofarguments__mustbe__placedlast__inthe__function definition.Python__matchespositional__andkeyword__argumentsfirst__andthen__collectsany__remainingarguments__inthe__final parameter.For__example,if__thefunction__needsto__takein__asize__forthe__pizza,that__parametermust__comebefore__theparameter__*toppings:def__make_pizza(size, *toppings): """Summarizethe__pizzawe__areabout__to make.""" print(f"\nMakinga__{size}-inchpizza__withthe__following toppings:")for__toppingin__toppings: print(f"- {topping}") make_pizza(16, 'pepperoni') make_pizza(12, 'mushrooms', 'green peppers', 'extra cheese')In__thefunction__definition,Python__assignsthe__firstvalue__itreceives__tothe__parameter size.All__othervalues__thatcome__afterare__storedin__thetuple__toppings.The__functioncalls__includean__argumentfor__thesize__first,followed__byas__manytoppings__as needed.Now__eachpizza__hasa__sizeand__anumber__of toppings,and__eachpiece__ofinformation__isprinted__inthe__proper place,showing__sizefirst__andtoppings__after:Making__a 16-inchpizza__withthe__following toppings: -pepperoni__148Chapter__8Making__a 12-inchpizza__withthe__following toppings: -mushrooms__-green__peppers -extra__cheeseNOTE__Youll__oftensee__thegeneric__parametername__*args,which__collectsarbitrary__positionalarguments__like this.Using__ArbitraryKeyword__ArgumentsSometimes__youll__wantto__acceptan__arbitrarynumber__of arguments,but__youwon__tknow__aheadof__timewhat__kindof__informationwill__bepassed__tothe__function.In__this case,you__canwrite__functionsthat__acceptas__many key-valuepairs__asthe__callingstatement__provides.One__exampleinvolves__buildinguser__profiles:you__knowyou__llget__informationabout__a user,but__youre__notsure__whatkind__ofinformation__youll__receive.The__function build_profile()in__thefollowing__examplealways__takesin__afirst__andlast__name,but__itaccepts__anarbitrary__numberof__keywordarguments__as well: user_profile.pydef__build_profile(first, last, **user_info): """Builda__dictionarycontaining__everythingwe__knowabout__a user.""" 1 user_info['first_name'] =first__user_info['last_name'] =last__returnuser_info__user_profile = build_profile('albert', 'einstein', location='princeton', field='physics') print(user_profile)The__definitionof__build_profile()expects__afirst__andlast__name,and__thenit__allowsthe__userto__passin__asmany__name-valuepairs__asthey__want.The__doubleasterisks__beforethe__parameter **user_infocause__Pythonto__createa__dictionarycalled__user_infocontaining__allthe__extra name-valuepairs__thefunction__receives.Within__the function,you__canaccess__the key-valuepairs__inuser_info__justas__youwould__forany__dictionary.In__thebody__of build_profile(),we__addthe__firstand__lastnames__tothe__user_infodictionary__becausewe__llalways__receivethese__twopieces__ofinfor__mationfrom__theuser__1,and__theyhaven__tbeen__placedinto__thedictionary__yet.Then__wereturn__theuser_info__dictionaryto__thefunction__call line.We__call build_profile(),passing__itthe__firstname__'albert',the__lastname__'einstein',and__thetwo__key-valuepairs__location='princeton'and__field='physics'.We__assignthe__returnedprofile__touser_profile__andprint__user_profile: {'location': 'princeton', 'field': 'physics', 'first_name': 'albert', 'last_name': 'einstein'}The__returneddictionary__containsthe__users__firstand__lastnames__and,in__this case,the__locationand__fieldof__studyas__well.The__functionwill__workno__matterhow__manyadditional__key-valuepairs__areprovided__inthe__function call.Functions__149You__canmix__positional, keyword,and__arbitraryvalues__inmany__different__wayswhen__writingyour__own functions.It__suseful__toknow__thatall__theseargument__typesexist__becauseyou__llsee__themoften__whenyou__startreading__otherpeople__s code.It__takespractice__touse__thedifferent__typescorrectly__andto__knowwhen__touse__each type.For__now,remember__touse__thesimplest__approachthat__getsthe__job done.As__you progress,you__lllearn__touse__themost__efficientapproach__each time.NOTE__Youll__oftensee__theparameter__name **kwargsused__tocollect__nonspecifickeyword__arguments.TRY__ITYOURSELF__8-12. Sandwiches:Write__afunction__thataccepts__alist__ofitems__aperson__wantson__a sandwich.The__functionshould__haveone__parameterthat__collectsas__manyitems__asthe__functioncall__provides,and__itshould__printa__summaryof__thesand__wichthat__sbeing__ordered.Call__thefunction__three times,using__adifferent__number__ofarguments__each time. 8-13.User__Profile:Start__witha__copyof__user_profile.pyfrom__page 148.Build__aprofile__ofyourself__bycalling__build_profile(),using__yourfirst__andlast__namesand__threeother__key-valuepairs__thatdescribe__you. 8-14. Cars:Write__afunction__thatstores__informationabout__acar__ina__diction ary.The__functionshould__alwaysreceive__amanufacturer__anda__model name.It__shouldthen__acceptan__arbitrarynumber__ofkeyword__arguments.Call__thefunc__tionwith__therequired__informationand__twoother__name-value pairs,such__asa__coloror__anoptional__feature.Your__functionshould__workfor__acall__likethis__one:car__= make_car('subaru', 'outback', color='blue', tow_package=True)Print__thedictionary__thats__returnedto__makesure__allthe__informationwas__stored correctly.Storing__YourFunctions__inModules__Oneadvantage__offunctions__isthe__waythey__separateblocks__ofcode__fromyour__main program.When__youuse__descriptivenames__foryour__functions,your__programsbecome__mucheasier__to follow.You__cango__astep__furtherby__storingyour__functionsin__aseparate__filecalled__amodule__andthen__importingthat__moduleinto__yourmain__program.An__importstatement__tellsPython__tomake__thecode__ina__moduleavailable__inthe__currentlyrunning__program file.Storing__yourfunctions__ina__separatefile__allowsyou__tohide__thedetails__ofyour__programs__codeand__focuson__its higher-level logic.It__alsoallows__youto__reusefunctions__inmany__different programs.When__youstore__yourfunctions__inseparate__files,you__canshare__thosefiles__withother__programmerswithout__150Chapter__8having__toshare__yourentire__program.Knowing__howto__importfunctions__alsoallows__youto__uselibraries__offunctions__thatother__programmershave__written.There__areseveral__waysto__importa__module,and__Ill__showyou__eachof__these briefly.Importing__anEntire__ModuleTo__startimporting__functions,we__firstneed__tocreate__a module.A__moduleis__afile__endingin__.pythat__containsthe__codeyou__wantto__importinto__yourpro__gram.Let__smake__amodule__thatcontains__thefunction__make_pizza().To__makethis__module,we__llremove__everythingfrom__thefile__pizza.pyexcept__thefunc__tion make_pizza(): pizza.pydef__make_pizza(size, *toppings): """Summarizethe__pizzawe__areabout__to make.""" print(f"\nMakinga__{size}-inchpizza__withthe__following toppings:")for__toppingin__toppings: print(f"- {topping}")Now__well__makea__separatefile__called making_pizzas.pyin__thesame__directoryas__pizza.py.This__fileimports__themodule__wejust__createdand__thenmakes__twocalls__to make_pizza():making___pizzas.pyimport__pizza 1 pizza.make_pizza(16, 'pepperoni') pizza.make_pizza(12, 'mushrooms', 'green peppers', 'extra cheese')When__Pythonreads__this file,the__lineimport__pizzatells__Pythonto__openthe__file pizza.pyand__copyall__thefunctions__fromit__intothis__program.You__dont__actuallysee__codebeing__copiedbetween__filesbecause__Pythoncopies__thecode__behindthe__scenes,just__beforethe__program runs.All__youneed__toknow__isthat__anyfunction__definedin__pizza.pywill__nowbe__availablein__making_pizzas.py.To__calla__functionfrom__animported__module,enter__thename__ofthe__moduleyou__imported, pizza,followed__bythe__nameof__the function,make___pizza(),separated__bya__dot 1.This__codeproduces__thesame__outputas__theoriginal__programthat__didnt__importa__module:Making__a 16-inchpizza__withthe__following toppings: -pepperoni__Makinga__12-inchpizza__withthe__following toppings: -mushrooms__-green__peppers -extra__cheeseThis__firstapproach__to importing,in__whichyou__simplywrite__importfol__lowedby__thename__ofthe__module,makes__everyfunction__fromthe__moduleFunctions__151available__inyour__program.If__youuse__thiskind__ofimport__statementto__importan__entiremodule__named module_name.py,each__functionin__themodule__isavailable__throughthe__following syntax: module_name.function_name()Importing__SpecificFunctions__Youcan__alsoimport__aspecific__functionfrom__a module.Here__sthe__generalsyntax__forthis__approach:from__module_nameimport__function_nameYou__canimport__asmany__functionsas__youwant__froma__moduleby__separating__eachfunction__sname__witha__comma:from__module_nameimport__function_0, function_1, function_2The__making_pizzas.pyexample__wouldlook__likethis__ifwe__wantto__importjust__thefunction__were__goingto__use:from__pizzaimport__make_pizza make_pizza(16, 'pepperoni') make_pizza(12, 'mushrooms', 'green peppers', 'extra cheese')With__this syntax,you__dont__needto__usethe__dotnotation__whenyou__calla__function.Because__weve__explicitlyimported__thefunction__make_pizza()in__theimport__statement,we__cancall__itby__namewhen__weuse__the function.Using__asto__Givea__Functionan__AliasIf__thename__ofa__functionyou__reimporting__mightconflict__withan__existing__namein__your program,or__ifthe__functionname__is long,you__canuse__a short,unique__aliasan__alternatename__similarto__anickname__forthe__func tion.You__llgive__thefunction__thisspecial__nicknamewhen__youimport__the function.Here__wegive__thefunction__make_pizza()an__alias, mp(),by__importingmake___pizzaas__mp.The__askeyword__renamesa__functionusing__thealias__you provide:from__pizzaimport__make_pizzaas__mp mp(16, 'pepperoni') mp(12, 'mushrooms', 'green peppers', 'extra cheese')The__importstatement__shownhere__renamesthe__function make_pizza()to__mp()in__this program.Anytime__wewant__tocall__make_pizza()we__cansimply__write mp() instead,and__Pythonwill__runthe__codein__make_pizza()while__avoiding__anyconfusion__withanother__make_pizza()function__youmight__havewrit__tenin__thisprogram__file. 152Chapter__8The__generalsyntax__forproviding__analias__is:from__module_nameimport__function_nameas__fnUsing__asto__Givea__Modulean__AliasYou__canalso__providean__aliasfor__amodule__name.Giving__amodule__ashort__alias,like__pfor__pizza,allows__youto__callthe__modules__functionsmore__quickly.Calling__p.make_pizza()is__moreconcise__thancalling__pizza.make_pizza():import__pizzaas__p p.make_pizza(16, 'pepperoni') p.make_pizza(12, 'mushrooms', 'green peppers', 'extra cheese')The__modulepizza__isgiven__thealias__pin__theimport__statement,but__allof__themodule__sfunctions__retaintheir__original names.Calling__thefunctions__bywriting__p.make_pizza()is__notonly__moreconcise__than pizza.make_pizza(),but__italso__redirectsyour__attentionfrom__themodule__nameand__allowsyou__tofocus__onthe__descriptivenames__ofits__functions.These__function names,which__clearlytell__youwhat__eachfunction__does,are__moreimportant__tothe__readabilityof__yourcode__thanusing__thefull__module name.The__generalsyntax__forthis__approach is:import__module_nameas__mnImporting__AllFunctions__ina__ModuleYou__cantell__Pythonto__importevery__functionin__amodule__byusing__theaster__isk (*) operator:from__pizzaimport__* make_pizza(16, 'pepperoni') make_pizza(12, 'mushrooms', 'green peppers', 'extra cheese')The__asteriskin__theimport__statementtells__Pythonto__copyevery__functionfrom__themodule__pizzainto__thisprogram__file.Because__everyfunction__is imported,you__cancall__eachfunction__byname__withoutusing__thedot__notation. However,it__sbest__notto__usethis__approachwhen__youre__workingwith__largermodules__thatyou__didnt__write:if__themodule__hasa__functionname__thatmatches__anexisting__namein__your project,you__canget__unexpected results.Python__maysee__severalfunctions__orvariables__withthe__same name,and__insteadof__importing__allthe__functions separately,it__willoverwrite__the functions.The__bestapproach__isto__importthe__functionor__functionsyou__want,or__importthe__entiremodule__anduse__thedot__notation.This__leadsto__clearcode__thats__easyto__readand__understand.I__includethis__sectionso__youll__recognizeimport__statementslike__thefollowing__whenyou__seethem__inother__peoples__code:from__module_nameimport__*Functions__153Styling__FunctionsYou__needto__keepa__fewdetails__inmind__whenyou__restyling__functions.Functions__shouldhave__descriptive names,and__thesenames__shoulduse__lowercaseletters__and underscores.Descriptive__nameshelp__youand__othersunderstand__whatyour__codeis__tryingto__do.Module__namesshould__usethese__conventionsas__well.Every__functionshould__havea__commentthat__explainsconcisely__whatthe__function does.This__commentshould__appearimmediately__afterthe__functiondefinition__anduse__thedocstring__format.In__a well-documented function,other__programmerscan__usethe__functionby__readingonly__thedescription__inthe__docstring.They__shouldbe__ableto__trustthat__thecode__worksas__described,and__aslong__asthey__knowthe__nameof__the function,the__argumentsit__needs,and__thekind__ofvalue__it returns,they__shouldbe__ableto__useit__intheir__programs.If__youspecify__adefault__valuefor__a parameter,no__spacesshould__beused__oneither__sideof__theequal__sign:def__function_name(parameter_0, parameter_1='default value')The__sameconvention__shouldbe__usedfor__keywordarguments__infunc__tion calls: function_name(value_0, parameter_1='value')PEP__8 (https://www.python.org/dev/peps/pep-0008 )recommends__thatyou__limitlines__ofcode__to 79characters__soevery__lineis__visiblein__areasonably__sizededitor__window.If__aset__ofparameters__causesa__functions__definitionto__belonger__than 79 characters,press__ENTERafter__theopening__parenthesison__thedefinition__line.On__thenext__line,press__theTAB__keytwice__toseparate__thelist__ofarguments__fromthe__bodyof__the function,which__willonly__beindented__one level.Most__editorsautomatically__lineup__anyadditional__linesof__argumentsto__matchthe__indentationyou__haveestablished__onthe__first line:def__function_name( parameter_0, parameter_1, parameter_2, parameter_3, parameter_4, parameter_5):function__body...If__yourprogram__ormodule__hasmore__thanone__function,you__cansepa__rateeach__bytwo__blanklines__tomake__iteasier__tosee__whereone__functionends__andthe__nextone__begins.All__importstatements__shouldbe__writtenat__thebeginning__ofa__file.The__onlyexception__isif__youuse__commentsat__thebeginning__ofyour__fileto__describethe__overall program. 154Chapter__8TRY__ITYOURSELF__8-15.Printing__Models:Put__thefunctions__forthe__example printing_models.pyin__aseparate__filecalled__printing_functions.py.Write__animport__statementat__thetop__of printing_models.py,and__modifythe__fileto__usethe__imported functions. 8-16. Imports:Using__aprogram__youwrote__thathas__onefunction__in it,store__thatfunction__ina__separate file.Import__thefunction__intoyour__mainprogram__file,and__callthe__functionusing__eachof__these approaches:import__module_namefrom__module_nameimport__function_namefrom__module_nameimport__function_nameas__fnimport__module_nameas__mnfrom__module_nameimport__* 8-17.Styling__Functions:Choose__anythree__programsyou__wrotefor__this chapter,and__makesure__theyfollow__thestyling__guidelinesdescribed__inthis__section.Summary__Inthis__chapter,you__learnedhow__towrite__functionsand__topass__argumentsso__thatyour__functionshave__accessto__theinformation__theyneed__todo__their work.You__learnedhow__touse__positionaland__keyword arguments,and__alsohow__toaccept__anarbitrary__numberof__arguments.You__sawfunctions__thatdisplay__outputand__functionsthat__return values.You__learnedhow__touse__functionswith__lists, dictionaries,if__statements,and__while loops.You__alsosaw__howto__storeyour__functionsin__separatefiles__called modules,so__yourprogram__fileswill__besimpler__andeasier__to understand. Finally,you__learnedto__styleyour__functionsso__yourprograms__willcontinue__tobe__well-structuredand__aseasy__aspossible__foryou__andothers__to read.One__ofyour__goalsas__aprogrammer__shouldbe__towrite__simplecode__thatdoes__whatyou__wantit__to,and__functionshelp__youdo__this.They__allowyou__towrite__blocksof__codeand__leavethem__aloneonce__youknow__they work.When__youknow__afunction__doesits__job correctly,you__cantrust__thatit__willcontinue__towork__andmove__onto__yournext__coding task.Functions__allowyou__towrite__codeonce__andthen__reusethat__codeas__manytimes__asyou__want.When__youneed__torun__thecode__ina__function,all__youneed__todo__iswrite__a one-linecall__andthe__functiondoes__its job.When__youneed__tomodify__afunction__s behavior,you__onlyhave__tomodify__oneblock__of code,and__yourchange__takeseffect__everywhereyou__vemade__acall__tothat__function.Using__functionsmakes__yourprograms__easierto__read,and__goodfunc__tionnames__summarizewhat__eachpart__ofa__program does.Reading__aseries__offunction__callsgives__youa__muchquicker__senseof__whata__programdoes__thanreading__along__seriesof__code blocks.Functions__155Functions__alsomake__yourcode__easierto__testand__debug.When__thebulk__ofyour__programs__workis__doneby__aset__of functions,each__ofwhich__hasa__specific job,it__smuch__easierto__testand__maintainthe__codeyou__ve written.You__canwrite__aseparate__programthat__callseach__functionand__testswhether__eachfunction__worksin__allthe__situationsit__may encounter.When__youdo__this,you__canbe__confidentthat__yourfunctions__willwork__properlyeach__timeyou__call them.In__Chapter 9,you__lllearn__towrite__classes.Classes__combinefunctions__anddata__intoone__neatpackage__thatcan__beused__inflexible__andefficient__ways. 9CL__ASSES Object-orientedprogramming__(OOP)is__oneof__themost__effectiveapproaches__towriting__software.In__object-oriented programming,you__writeclasses__thatrepresent__real-worldthings__and situations,and__youcreate__objectsbased__onthese__classes.When__youwrite__a class,you__definethe__generalbehavior__thata__wholecategory__ofobjects__can have.When__youcreate__individualobjects__fromthe__class,each__objectis__automatically__equippedwith__thegeneral__behavior;you__canthen__giveeach__objectwhatever__uniquetraits__you desire.You__llbe__amazedhow__well real-world__situationscan__bemodeled__with object-oriented programming.Making__anobject__froma__classis__called instantiation,and__youwork__withinstances__ofa__class.In__thischapter__youll__writeclasses__andcreate__instancesof__those classes.You__llspecify__thekind__ofinformation__thatcan__bestored__in instances,and__youll__defineactions__thatcan__betaken__withthese__instances.You__llalso__writeclasses__thatextend__thefunctionality__ofexisting__classes,so__similarclasses__canshare__common functionality,and__youcan__domore__with 158Chapter__9less__code.You__llstore__yourclasses__inmodules__andimport__classeswritten__byother__programmersinto__yourown__program files.Learning__about object-orientedprogramming__willhelp__yousee__theworld__asa__programmer does.It__llhelp__youunderstand__yourcode__notjust__whats__happeningline__by line,but__alsothe__biggerconcepts__behind it.Knowing__thelogic__behindclasses__willtrain__youto__think logically,so__youcan__writepro__gramsthat__effectivelyaddress__almostany__problemyou__encounter.Classes__alsomake__lifeeasier__foryou__andthe__otherprogrammers__youll__workwith__asyou__takeon__increasinglycomplex__challenges.When__youand__otherprogrammers__writecode__basedon__thesame__kindof__logic,you__llbe__ableto__understandeach__others__work.Your__programswill__makesense__tothe__peopleyou__work with,allowing__everyoneto__accomplish more.Creating__andUsing__aClass__Youcan__modelalmost__anythingusing__classes.Let__sstart__bywriting__asimple__class, Dog,that__representsa__dognot__onedog__in particular,but__any dog.What__dowe__knowabout__mostpet__dogs? Well,they__allhave__aname__andan__age.We__alsoknow__thatmost__dogssit__androll__over.Those__twopieces__ofinformation__(nameand__age)and__thosetwo__behaviors (sitand__roll over)will__goin__ourDog__classbecause__theyre__commonto__most dogs.This__classwill__tellPython__howto__makean__objectrepresenting__a dog.After__ourclass__is written,we__lluse__itto__makeindividual__instances,each__ofwhich__representsone__specific dog.Creating__theDog__ClassEach__instancecreated__fromthe__Dogclass__willstore__aname__andan__age,and__well__giveeach__dogthe__abilityto__sit()and__roll_over(): dog.py 1class__Dog: """Asimple__attemptto__modela__dog.""" 2def____init__(self, name, age): """Initializename__andage__attributes.""" 3 self.name =name__self.age =age__4def__sit(self): """Simulatea__dogsitting__inresponse__toa__command.""" print(f"{self.name}is__now sitting.")def__roll_over(self): """Simulaterolling__overin__responseto__a command.""" print(f"{self.name}rolled__over!")There__sa__lotto__notice here,but__dont__worry.You__llsee__thisstructure__throughoutthis__chapterand__havelots__oftime__toget__usedto__it.We__firstdefine__aclass__calledDog__1.By__convention,capitalized__namesrefer__toclasses__in Python.There__areno__parenthesesin__theclass__definitionbecause__were__creatingthis__classfrom__scratch.We__thenwrite__adocstring__describingwhat__thisclass__does.Classes__159The____init__()Method__Afunction__thats__partof__aclass__isa__method.Everything__youlearned__aboutfunctions__appliesto__methodsas__well;the__onlypractical__differencefor__nowis__theway__well__call methods.The____init__()method__2is__aspecial__methodthat__Pythonruns__automaticallywhenever__wecreate__anew__instancebased__onthe__Dog class.This__methodhas__twoleading__underscoresand__twotrail__ing underscores,a__conventionthat__helpsprevent__Pythons__defaultmethod__namesfrom__conflictingwith__yourmethod__names.Make__sureto__usetwo__underscoreson__eachside__of __init__().If__youuse__justone__oneach__side,the__methodwon__tbe__calledautomatically__whenyou__useyour__class,which__canresult__inerrors__thatare__difficultto__identify.We__definethe____init__()method__tohave__three parameters: self, name,and__age.The__selfparameter__isrequired__inthe__method definition,and__itmust__come first,before__theother__parameters.It__mustbe__includedin__thedefinition__becausewhen__Pythoncalls__thismethod__later (tocreate__aninstance__of Dog),the__methodcall__willautomatically__passthe__self argument.Every__methodcall__associatedwith__aninstance__automaticallypasses__self,which__isa__referenceto__theinstance__itself;it__givesthe__individualinstance__accessto__theattributes__andmethods__inthe__class.When__wemake__aninstance__of Dog,Python__willcall__the __init__()method__fromthe__Dog class.We__llpass__Dog()a__nameand__anage__as arguments;self__ispassed__automati cally,so__wedon__tneed__topass__it.Whenever__wewant__tomake__aninstance__fromthe__Dog class,we__llprovide__valuesfor__onlythe__lasttwo__parameters,name__and age.The__twovariables__definedin__thebody__ofthe____init__()method__eachhave__theprefix__self 3.Any__variableprefixed__withself__isavailable__toevery__methodin__the class,and__well__alsobe__ableto__accessthese__variablesthrough__anyinstance__createdfrom__the class.The__line self.name =name__takesthe__valueassociated__withthe__parametername__andassigns__itto__thevariable__name,which__isthen__attachedto__theinstance__being created.The__sameprocess__happenswith__self.age = age.Variables__thatare__accessiblethrough__instanceslike__thisare__called attributes.The__Dogclass__hastwo__othermethods__defined: sit()and__roll_over() 4.Because__thesemethods__dont__needadditional__informationto__run,we__justdefine__themto__haveone__parameter, self.The__instanceswe__createlater__willhave__accessto__these methods.In__other words,they__llbe__ableto__sitand__roll over.For__now, sit()and__roll_over()don__tdo__much.They__simplyprint__amessage__sayingthe__dogis__sittingor__rolling over.But__theconcept__canbe__extendedto__realistic situations:if__thisclass__werepart__ofa__computer game,these__methodswould__containcode__tomake__ananimated__dogsit__androll__over.If__thisclass__waswritten__tocontrol__a robot,these__methodswould__directmovements__thatcause__arobotic__dogto__sitand__roll over.Making__anInstance__froma__ClassThink__ofa__classas__aset__ofinstructions__forhow__tomake__an instance.The__Dogclass__isa__setof__instructionsthat__tellsPython__howto__makeindividual__instancesrepresenting__specific dogs. 160Chapter__9Let__smake__aninstance__representinga__specific dog:class__Dog: --snip-- 1my_dog__= Dog('Willie', 6) 2 print(f"My dog'sname__is {my_dog.name}.") 3 print(f"Mydog__is {my_dog.age}years__old.")The__Dogclass__were__usinghere__isthe__onewe__justwrote__inthe__previous__example. Here,we__tellPython__tocreate__adog__whosename__is 'Willie'and__whoseage__is 6 1.When__Pythonreads__this line,it__callsthe____init__()method__inDog__withthe__arguments 'Willie'and__6.The____init__()method__createsan__instancerepresenting__thisparticular__dogand__setsthe__nameand__ageattributes__usingthe__valueswe__provided.Python__thenreturns__aninstance__representingthis__dog.We__assignthat__instanceto__thevariable__my_dog.The__namingconvention__ishelpful__here;we__canusually__assumethat__acapitalized__namelike__Dogrefers__toa__class,and__alowercase__namelike__my_dogrefers__toa__singleinstance__createdfrom__a class.Accessing__AttributesTo__accessthe__attributesof__an instance,you__usedot__notation.We__accessthe__valueof__my_dogs__attributename__2by__writing: my_dog.nameDot__notationis__usedoften__in Python.This__syntaxdemonstrates__howPython__findsan__attributes__value. Here,Python__looksat__theinstance__my_dogand__thenfinds__theattribute__nameassociated__with my_dog.This__isthe__sameattribute__referredto__as self.namein__theclass__Dog.We__usethe__sameapproach__towork__withthe__attributeage__3.The__outputis__asummary__ofwhat__weknow__about my_dog:My__dog'sname__is Willie.My__dogis__6years__old.Calling__MethodsAfter__wecreate__aninstance__fromthe__class Dog,we__canuse__dotnotation__tocall__anymethod__definedin__Dog.Let__smake__ourdog__sitand__roll over:class__Dog: --snip--my_dog__= Dog('Willie', 6) my_dog.sit() my_dog.roll_over()Classes__161To__calla__method,give__thename__ofthe__instance (inthis__case, my_dog)and__themethod__youwant__to call,separated__bya__dot.When__Pythonreads__my_dog.sit(),it__looksfor__themethod__sit()in__theclass__Dogand__runsthat__code.Python__interpretsthe__line my_dog.roll_over()in__thesame__way.Now__Williedoes__whatwe__tellhim__to:Willie__isnow__sitting.Willie__rolled over!This__syntaxis__quite useful.When__attributesand__methodshave__beengiven__appropriatelydescriptive__nameslike__name, age, sit(),and__roll_over(),we__caneasily__inferwhat__ablock__of code,even__onewe__venever__seen before,is__supposedto__do.Creating__MultipleInstances__Youcan__createas__manyinstances__froma__classas__you need.Let__screate__asecond__dogcalled__your_dog:class__Dog: --snip--my_dog__= Dog('Willie', 6)your_dog__= Dog('Lucy', 3) print(f"My dog'sname__is {my_dog.name}.") print(f"Mydog__is {my_dog.age}years__old.") my_dog.sit() print(f"\nYour dog'sname__is {your_dog.name}.") print(f"Yourdog__is {your_dog.age}years__old.") your_dog.sit()In__thisexample__wecreate__adog__namedWillie__anda__dognamed__Lucy.Each__dogis__aseparate__instancewith__itsown__setof__attributes,capable__ofthe__sameset__of actions:My__dog'sname__is Willie.My__dogis__6years__old.Willie__isnow__sitting.Your__dog'sname__is Lucy.Your__dogis__3years__old.Lucy__isnow__sitting.Even__ifwe__usedthe__samename__andage__forthe__second dog,Python__wouldstill__createa__separateinstance__fromthe__Dog class.You__canmake__asmany__instancesfrom__oneclass__asyou__need,as__longas__yougive__eachinstance__aunique__variablename__orit__occupiesa__uniquespot__ina__listor__dictionary. 162Chapter__9TRY__ITYOURSELF__9-1. Restaurant:Make__aclass__called Restaurant.The____init__()method__forRestaurant__shouldstore__two attributes:a__restaurant_nameand__a cuisine_type.Make__amethod__called describe_restaurant()that__printsthese__twopieces__of information,and__amethod__called open_restaurant()that__printsa__messageindi__catingthat__therestaurant__is open.Make__aninstance__calledrestaurant__fromyour__class.Print__thetwo__attributes__individually,and__thencall__both methods. 9-2.Three__Restaurants:Start__withyour__classfrom__Exercise 9-1.Create__threedifferent__instancesfrom__the class,and__call describe_restaurant()for__each instance. 9-3. Users:Make__aclass__called User.Create__twoattributes__calledfirst_name__and last_name,and__thencreate__severalother__attributesthat__aretypically__storedin__auser__profile.Make__amethod__called describe_user()that__printsa__summaryof__theuser__s information.Make__anothermethod__called greet_user()that__printsa__personalizedgreeting__tothe__user.Create__severalinstances__representingdifferent__users,and__callboth__methods__foreach__user.Working__withClasses__andInstances__Youcan__useclasses__torepresent__many real-world situations.Once__youwrite__a class,you__llspend__mostof__yourtime__workingwith__instancescreated__fromthat__class.One__ofthe__firsttasks__youll__wantto__dois__modifythe__attributesassociated__witha__particular instance.You__canmodify__theattributes__ofan__instancedirectly__orwrite__methodsthat__updateattributes__inspecific__ways.The__CarClass__Lets__writea__newclass__representinga__car.Our__classwill__storeinformation__aboutthe__kindof__carwe__reworking__with,and__itwill__havea__methodthat__summarizesthis__information: car.pyclass__Car: """Asimple__attemptto__representa__car.""" 1def____init__(self, make, model, year): """Initializeattributes__todescribe__a car.""" self.make =make__self.model =model__self.year =year__2def__get_descriptive_name(self): """Returna__neatlyformatted__descriptive name."""long_name__= f"{self.year} {self.make} {self.model}"Classes__163return__long_name.title() 3my_new_car__= Car('audi', 'a4', 2024) print(my_new_car.get_descriptive_name())In__theCar__class,we__definethe____init__()method__withthe__selfparameter__first 1,just__likewe__didwith__theDog__class.We__alsogive__itthree__otherparam__eters: make, model,and__year.The____init__()method__takesin__theseparameters__andassigns__themto__theattributes__thatwill__beassociated__withinstances__madefrom__this class.When__wemake__anew__Car instance,we__llneed__tospec__ifya__make, model,and__yearfor__our instance.We__definea__methodcalled__get_descriptive_name() 2that__putsa__cars__year, make,and__modelinto__onestring__neatlydescribing__the car.This__willspare__usfrom__havingto__printeach__attributes__value individually.To__workwith__theattribute__valuesin__this method,we__use self.make, self.model,and__self.year.Outside__ofthe__class,we__makean__instancefrom__theCar__classand__assignit__tothe__variablemy_new_car__3.Then__wecall__get_descriptive_name()to__showwhat__kindof__carwe__have: 2024Audi__A4To__makethe__classmore__interesting,let__sadd__anattribute__thatchanges__over time.We__lladd__anattribute__thatstores__thecar__soverall__mileage.Setting__aDefault__Valuefor__anAttribute__Whenan__instanceis__created,attributes__canbe__definedwithout__beingpassed__inas__parameters.These__attributescan__bedefined__inthe____init__() method,where__theyare__assigneda__default value.Let__sadd__anattribute__calledodometer_reading__thatalways__startswith__avalue__of 0.We__llalso__adda__method read_odometer()that__helpsus__readeach__cars__odometer:class__Car:def____init__(self, make, model, year): """Initializeattributes__todescribe__a car.""" self.make =make__self.model =model__self.year =year__1 self.odometer_reading = 0def__get_descriptive_name(self): --snip-- 2def__read_odometer(self): """Printa__statementshowing__the car's mileage.""" print(f"Thiscar__has {self.odometer_reading}miles__on it.")my_new_car__= Car('audi', 'a4', 2024) print(my_new_car.get_descriptive_name()) my_new_car.read_odometer() 164Chapter__9This__time,when__Pythoncalls__the __init__()method__tocreate__anew__instance,it__storesthe__make, model,and__yearvalues__as attributes,like__itdid__inthe__previous example.Then__Pythoncreates__anew__attributecalled__odometer_readingand__setsits__initialvalue__to 0 1.We__alsohave__anew__methodcalled__read_odometer() 2that__makesit__easyto__reada__cars__mileage.Our__carstarts__witha__mileageof__0: 2024Audi__A4This__carhas__0miles__on it.Not__manycars__aresold__withexactly__0miles__onthe__odometer,so__weneed__away__tochange__thevalue__ofthis__attribute.Modifying__AttributeValues__Youcan__changean__attributes__valuein__three ways:you__canchange__thevalue__directlythrough__an instance,set__thevalue__througha__method,or__incrementthe__value (adda__certainamount__to it)through__a method.Let__slook__ateach__ofthese__approaches.Modifying__anAttribute__sValue__DirectlyThe__simplestway__tomodify__thevalue__ofan__attributeis__toaccess__theattri__butedirectly__throughan__instance.Here__weset__theodometer__readingto__23 directly:class__Car: --snip--my_new_car__= Car('audi', 'a4', 2024) print(my_new_car.get_descriptive_name()) my_new_car.odometer_reading = 23 my_new_car.read_odometer()We__usedot__notationto__accessthe__cars__odometer_reading attribute,and__setits__value directly.This__linetells__Pythonto__takethe__instance my_new_car,find__theattribute__odometer_readingassociated__with it,and__setthe__valueof__thatattribute__to 23: 2024Audi__A4This__carhas__23miles__on it.Sometimes__youll__wantto__accessattributes__directlylike__this,but__othertimes__youll__wantto__writea__methodthat__updatesthe__valuefor__you.Modifying__anAttribute__sValue__Througha__MethodIt__canbe__helpfulto__havemethods__thatupdate__certainattributes__for you.Instead__ofaccessing__theattribute__directly,you__passthe__newvalue__toa__methodthat__handlesthe__updating internally.Classes__165Here__san__exampleshowing__amethod__called update_odometer():class__Car: --snip--def__update_odometer(self, mileage): """Setthe__odometerreading__tothe__given value.""" self.odometer_reading =mileage__my_new_car = Car('audi', 'a4', 2024) print(my_new_car.get_descriptive_name()) 1 my_new_car.update_odometer(23) my_new_car.read_odometer()The__onlymodification__toCar__isthe__additionof__update_odometer().This__methodtakes__ina__mileagevalue__andassigns__itto__self.odometer_reading.Using__themy_new_car__instance,we__call update_odometer()with__23as__anargu__ment 1.This__setsthe__odometerreading__to 23,and__read_odometer()prints__the reading: 2024Audi__A4This__carhas__23miles__on it.We__canextend__themethod__update_odometer()to__doadditional__workevery__timethe__odometerreading__is modified.Let__sadd__alittle__logicto__makesure__noone__triesto__rollback__theodometer__reading:class__Car: --snip--def__update_odometer(self, mileage): """Set__theodometer__readingto__thegiven__value.Reject__thechange__ifit__attemptsto__rollthe__odometer back. """ 1if__mileage >= self.odometer_reading: self.odometer_reading =mileage__else: 2 print("You can'troll__backan__odometer!")Now__update_odometer()checks__thatthe__newreading__makessense__beforemodifying__the attribute.If__thevalue__providedfor__mileageis__greaterthan__orequal__tothe__existing mileage, self.odometer_reading,you__canupdate__theodometer__readingto__thenew__mileage 1.If__thenew__mileageis__lessthan__theexisting__mileage,you__llget__awarning__thatyou__cant__rollback__anodometer__2.Incrementing__anAttribute__sValue__Througha__MethodSometimes__youll__wantto__incrementan__attributes__valueby__acertain__amount,rather__thanset__anentirely__new value.Say__webuy__aused__carand__put 100miles__166Chapter__9on__itbetween__thetime__webuy__itand__thetime__weregister__it.Here__sa__methodthat__allowsus__topass__thisincremental__amountand__addthat__valueto__theodometer__reading:class__Car: --snip--def__update_odometer(self, mileage): --snip--def__increment_odometer(self, miles): """Addthe__givenamount__tothe__odometer reading.""" self.odometer_reading +=miles__1my_used_car__= Car('subaru', 'outback', 2019) print(my_used_car.get_descriptive_name()) 2 my_used_car.update_odometer(23_500) my_used_car.read_odometer() my_used_car.increment_odometer(100) my_used_car.read_odometer()The__newmethod__increment_odometer()takes__ina__numberof__miles,and__addsthis__valueto__self.odometer_reading. First,we__createa__used car,my_used_car__1.We__setits__odometerto__23,500by__calling update_odometer()and__passingit__23_500 2. Finally,we__call increment_odometer()and__passit__100to__addthe__100miles__thatwe__drovebetween__buyingthe__carand__registering it: 2019Subaru__OutbackThis__carhas__23500miles__on it.This__carhas__23600miles__on it.You__canmodify__thismethod__toreject__negativeincrements__sono__oneuses__thisfunction__toroll__backan__odometeras__well.NOTE__Youcan__usemethods__likethis__tocontrol__howusers__ofyour__programupdate__valuessuch__asan__odometer reading,but__anyonewith__accessto__theprogram__canset__theodom__eterreading__toany__valueby__accessingthe__attribute directly.Effective__securitytakes__extremeattention__todetail__inaddition__tobasic__checkslike__thoseshown__here.TRY__ITYOURSELF__9-4.Number__Served:Start__withyour__programfrom__Exercise 9-1 (page 162).Add__anattribute__callednumber_served__witha__defaultvalue__of 0.Create__aninstance__calledrestaurant__fromthis__class.Print__thenumber__ofcustomers__therestaurant__has served,and__thenchange__thisvalue__andprint__it again.Classes__167Add__amethod__called set_number_served()that__letsyou__setthe__numberof__customersthat__havebeen__served.Call__thismethod__witha__newnumber__andprint__thevalue__again.Add__amethod__called increment_number_served()that__letsyou__incrementthe__numberof__customerswho__vebeen__served.Call__thismethod__withany__numberyou__likethat__couldrepresent__howmany__customerswere__served in, say,a__dayof__business. 9-5.Login__Attempts:Add__anattribute__calledlogin_attempts__toyour__Userclass__fromExercise__9-3 (page 162).Write__amethod__called increment_login_attempts()that__incrementsthe__valueof__login_attemptsby__1.Write__anothermethod__called reset_login_attempts()that__resetsthe__valueof__login_attemptsto__0.Make__aninstance__ofthe__Userclass__andcall__increment_login_attempts()several__times.Print__thevalue__oflogin_attempts__tomake__sureit__wasincremented__properly,and__thencall__reset_login_attempts().Print__login_attemptsagain__tomake__sureit__wasreset__to 0.Inheritance__Youdon__talways__haveto__startfrom__scratchwhen__writinga__class.If__theclass__youre__writingis__aspecialized__versionof__anotherclass__you wrote,you__canuse__inheritance.When__oneclass__inheritsfrom__another,it__takeson__theattri__butesand__methodsof__thefirst__class.The__originalclass__iscalled__theparent__class,and__thenew__classis__thechild__class.The__childclass__caninherit__anyor__allof__theattributes__andmethods__ofits__parent class,but__its__alsofree__todefine__newattributes__andmethods__ofits__own.The____init__()Method__fora__ChildClass__Whenyou__rewriting__anew__classbased__onan__existing class,you__lloften__wantto__callthe____init__()method__fromthe__parent class.This__willinitialize__anyattributes__thatwere__definedin__theparent____init__()method__andmake__themavailable__inthe__child class.As__an example,let__smodel__anelectric__car.An__electriccar__isjust__aspe__cifickind__of car,so__wecan__baseour__newElectricCar__classon__theCar__classwe__wrote earlier.Then__well__onlyhave__towrite__codefor__theattributes__andbehaviors__specificto__electric cars.Let__sstart__bymaking__asimple__versionof__theElectricCar__class,which__doeseverything__theCar__class does: electric_car.py 1class__Car: """Asimple__attemptto__representa__car."""def____init__(self, make, model, year): """Initializeattributes__todescribe__a car."" self.make =make__self.model =model__168Chapter__9 self.year =year__self.odometer_reading = 0def__get_descriptive_name(self): """Returna__neatlyformatted__descriptive name."""long_name__= f"{self.year} {self.make} {self.model}"return__long_name.title()def__read_odometer(self): """Printa__statementshowing__the car's mileage.""" print(f"Thiscar__has {self.odometer_reading}miles__on it.")def__update_odometer(self, mileage): """Setthe__odometerreading__tothe__given value."""if__mileage >= self.odometer_reading: self.odometer_reading =mileage__else: print("You can'troll__backan__odometer!")def__increment_odometer(self, miles): """Addthe__givenamount__tothe__odometer reading.""" self.odometer_reading +=miles__2class__ElectricCar(Car): """Representaspects__ofa__car,specific__toelectric__vehicles.""" 3def____init__(self, make, model, year): """Initializeattributes__ofthe__parent class.""" 4 super().__init__(make, model, year) 5my_leaf__= ElectricCar('nissan', 'leaf', 2024) print(my_leaf.get_descriptive_name())We__startwith__Car 1.When__youcreate__achild__class,the__parentclass__mustbe__partof__thecurrent__fileand__mustappear__beforethe__childclass__inthe__file.We__thendefine__thechild__class,ElectricCar__2.The__nameof__thepar__entclass__mustbe__includedin__parenthesesin__thedefinition__ofa__child class.The____init__()method__takesin__theinformation__requiredto__makea__Carinstance__3.The__super()function__4is__aspecial__functionthat__allowsyou__tocall__amethod__fromthe__parent class.This__linetells__Pythonto__callthe____init__()method__from Car,which__givesan__ElectricCarinstance__allthe__attributesdefined__inthat__method.The__namesuper__comesfrom__aconvention__ofcalling__theparent__classa__superclassand__thechild__classa__subclass.We__testwhether__inheritanceis__workingproperly__bytrying__tocreate__anelectric__carwith__thesame__kindof__informationwe__dprovide__whenmaking__aregular__car.We__makean__instanceof__theElectricCar__classand__assignit__tomy_leaf__5.This__linecalls__the __init__()method__definedin__ElectricCar,which__inturn__tellsPython__tocall__the __init__()method__definedin__theparent__class Car.We__providethe__arguments 'nissan', 'leaf',and__2024.Classes__169Aside__from __init__(),there__areno__attributesor__methodsyet__thatare__particularto__anelectric__car.At__thispoint__were__justmaking__surethe__electriccar__hasthe__appropriateCar__behaviors: 2024Nissan__LeafThe__ElectricCarinstance__worksjust__likean__instanceof__Car,so__nowwe__canbegin__definingattributes__andmethods__specificto__electric cars.Defining__Attributesand__Methodsfor__theChild__ClassOnce__youhave__achild__classthat__inheritsfrom__aparent__class,you__canadd__anynew__attributesand__methodsnecessary__todifferentiate__thechild__classfrom__theparent__class.Let__sadd__anattribute__thats__specificto__electriccars__(a battery,for__example)and__amethod__toreport__onthis__attribute.We__llstore__thebattery__sizeand__writea__methodthat__printsa__descriptionof__the battery:class__Car: --snip--class__ElectricCar(Car): """Representaspects__ofa__car,specific__toelectric__vehicles."""def____init__(self, make, model, year): """Initialize__attributesof__theparent__class.Then__initializeattributes__specificto__anelectric__car. """ super().__init__(make, model, year) 1 self.battery_size = 40 2def__describe_battery(self): """Printa__statementdescribing__thebattery__size.""" print(f"Thiscar__hasa__{self.battery_size}-kWh battery.")my_leaf__= ElectricCar('nissan', 'leaf', 2024) print(my_leaf.get_descriptive_name()) my_leaf.describe_battery()We__adda__newattribute__self.battery_sizeand__setits__initialvalue__to 40 1.This__attributewill__beassociated__withall__instancescreated__fromthe__ElectricCarclass__butwon__tbe__associatedwith__anyinstances__of Car.We__alsoadd__amethod__called describe_battery()that__printsinformation__aboutthe__battery 2.When__wecall__this method,we__geta__descriptionthat__isclearly__specificto__anelectric__car: 2024Nissan__LeafThis__carhas__a 40-kWh battery.There__sno__limitto__howmuch__youcan__specializethe__ElectricCar class.You__canadd__asmany__attributesand__methodsas__youneed__tomodel__an 170Chapter__9electric__carto__whateverdegree__ofaccuracy__you need.An__attributeor__methodthat__couldbelong__toany__car,rather__thanone__thats__specificto__anelectric__car,should__beadded__tothe__Carclass__insteadof__theElectricCar__class.Then__anyonewho__usesthe__Carclass__willhave__thatfunctionality__availableas__well,and__theElectricCar__classwill__onlycontain__codefor__theinformation__andbehavior__specificto__electric vehicles.Overriding__Methodsfrom__theParent__ClassYou__canoverride__anymethod__fromthe__parentclass__thatdoesn__tfit__whatyou__retrying__tomodel__withthe__child class.To__do this,you__definea__methodin__thechild__classwith__thesame__nameas__themethod__youwant__tooverride__inthe__parent class.Python__willdisregard__theparent__classmethod__andonly__payattention__tothe__methodyou__definein__thechild__class.Say__theclass__Carhad__amethod__called fill_gas_tank().This__methodis__meaninglessfor__an all-electric vehicle,so__youmight__wantto__overridethis__method.Here__sone__wayto__do that:class__ElectricCar(Car): --snip--def__fill_gas_tank(self): """Electriccars__don'thave__gas tanks.""" print("Thiscar__doesn'thave__agas__tank!")Now__ifsomeone__triesto__call fill_gas_tank()with__anelectric__car,Python__willignore__themethod__fill_gas_tank()in__Carand__runthis__code instead.When__youuse__inheritance,you__canmake__yourchild__classesretain__whatyou__needand__overrideanything__youdon__tneed__fromthe__parent class.Instances__asAttributes__Whenmodeling__somethingfrom__thereal__worldin__code,you__mayfind__thatyou__readding__moreand__moredetail__toa__class.You__llfind__thatyou__havea__growinglist__ofattributes__andmethods__andthat__yourfiles__arebecoming__lengthy.In__these situations,you__mightrecognize__thatpart__ofone__classcan__bewritten__asa__separate class.You__canbreak__yourlarge__classinto__smallerclasses__thatwork__together;this__approachis__called composition.For__example,if__wecontinue__addingdetail__tothe__ElectricCar class,we__mightnotice__thatwe__readding__manyattributes__andmethods__specificto__thecar__s battery.When__wesee__this happening,we__canstop__andmove__thoseattributes__andmethods__toa__separateclass__called Battery.Then__wecan__usea__Batteryinstance__asan__attributein__theElectricCar__class:class__Car: --snip--class__Battery: """Asimple__attemptto__modela__batteryfor__anelectric__car.""" 1def____init__(self, battery_size=40):Classes__171 """Initializethe__battery's attributes.""" self.battery_size =battery_size__2def__describe_battery(self): """Printa__statementdescribing__thebattery__size.""" print(f"Thiscar__hasa__{self.battery_size}-kWh battery.")class__ElectricCar(Car): """Representaspects__ofa__car,specific__toelectric__vehicles."""def____init__(self, make, model, year): """Initialize__attributesof__theparent__class.Then__initializeattributes__specificto__anelectric__car. """ super().__init__(make, model, year) 3 self.battery = Battery()my_leaf__= ElectricCar('nissan', 'leaf', 2024) print(my_leaf.get_descriptive_name()) my_leaf.battery.describe_battery()We__definea__newclass__calledBattery__thatdoesn__tinherit__fromany__other class.The____init__()method__1has__one parameter, battery_size,in__additionto__self.This__isan__optionalparameter__thatsets__thebattery__ssize__to 40if__novalue__is provided.The__method describe_battery()has__beenmoved__tothis__classas__well 2.In__theElectricCar__class,we__nowadd__anattribute__called self.battery 3.This__linetells__Pythonto__createa__newinstance__ofBattery__(witha__defaultsize__of 40,because__were__notspecifying__a value)and__assignthat__instanceto__theattribute__self.battery.This__willhappen__everytime__the __init__()method__is called;any__ElectricCarinstance__willnow__havea__Batteryinstance__created automatically.We__createan__electriccar__andassign__itto__thevariable__my_leaf.When__wewant__todescribe__the battery,we__needto__workthrough__thecar__sbattery__attribute: my_leaf.battery.describe_battery()This__linetells__Pythonto__lookat__theinstance__my_leaf,find__itsbattery__attribute,and__callthe__method describe_battery()that__sassociated__withthe__Batteryinstance__assignedto__the attribute.The__outputis__identicalto__whatwe__saw previously: 2024Nissan__LeafThis__carhas__a 40-kWh battery.This__lookslike__alot__ofextra__work,but__nowwe__candescribe__thebattery__inas__muchdetail__aswe__wantwithout__clutteringthe__ElectricCar class.Let__s 172Chapter__9add__anothermethod__toBattery__thatreports__therange__ofthe__carbased__onthe__battery size:class__Car: --snip--class__Battery: --snip--def__get_range(self): """Printa__statementabout__therange__thisbattery__provides."""if__self.battery_size == 40:range__= 150elif__self.battery_size == 65:range__= 225 print(f"Thiscar__cango__about {range}miles__ona__full charge.")class__ElectricCar(Car): --snip--my_leaf__= ElectricCar('nissan', 'leaf', 2024) print(my_leaf.get_descriptive_name()) my_leaf.battery.describe_battery() 1 my_leaf.battery.get_range()The__newmethod__get_range()performs__somesimple__analysis.If__thebat__terys__capacityis__40 kWh, get_range()sets__therange__to 150 miles,and__ifthe__capacityis__65 kWh,it__setsthe__rangeto__225 miles.It__thenreports__this value.When__wewant__touse__this method,we__againhave__tocall__itthrough__thecar__sbattery__attribute 1.The__outputtells__usthe__rangeof__thecar__basedon__itsbattery__size: 2024Nissan__LeafThis__carhas__a 40-kWh battery.This__carcan__goabout__150miles__ona__full charge.Modeling__Real-WorldObjects__Asyou__beginto__modelmore__complicatedthings__likeelectric__cars,you__llwrestle__withinteresting__questions.Is__therange__ofan__electriccar__aproperty__ofthe__batteryor__ofthe__car?If__were__onlydescribing__one car,it__sprobably__fineto__maintainthe__associationof__themethod__get_range()with__theBattery__class.But__ifwe__redescribing__amanufacturer__sentire__lineof__cars,we__probably__wantto__move get_range()to__theElectricCar__class.The__get_range()method__wouldstill__checkthe__batterysize__beforedetermining__the range,but__itwould__reporta__rangespecific__tothe__kindof__carit__sassociated__with. Alternatively,we__couldmaintain__theassociation__ofthe__get_range()method__withthe__battery__butpass__ita__parametersuch__as car_model.The__get_range()method__wouldthen__reporta__rangebased__onthe__batterysize__andcar__model.This__bringsyou__toan__interestingpoint__inyour__growthas__aprogram__mer.When__youwrestle__withquestions__like these,you__rethinking__ata__higherClasses__173logical__levelrather__thana__syntax-focused level.You__rethinking__notabout__Python,but__abouthow__torepresent__thereal__worldin__code.When__youreach__this point,you__llrealize__thereare__oftenno__rightor__wrongapproaches__tomodeling__real-world situations.Some__approachesare__moreefficient__than others,but__ittakes__practiceto__findthe__mostefficient__representations.If__yourcode__isworking__asyou__wantit__to,you__redoing__well!Don__tbe__discouraged__ifyou__findyou__reripping__apartyour__classesand__rewritingthem__severaltimes__usingdifferent__approaches.In__thequest__towrite__accurate,efficient__code,everyone__goesthrough__this process.TRY__ITYOURSELF__9-6.Ice__Cream Stand:An__icecream__standis__aspecific__kindof__restaurant.Write__aclass__calledIceCreamStand__thatinherits__fromthe__Restaurantclass__youwrote__inExercise__9-1 (page 162)or__Exercise 9-4 (page 166).Either__versionof__theclass__will work;just__pickthe__oneyou__like better.Add__anattribute__calledflavors__thatstores__alist__ofice__cream flavors.Write__amethod__thatdisplays__these flavors.Create__aninstance__of IceCreamStand,and__callthis__method. 9-7. Admin:An__administratoris__aspecial__kindof__user.Write__aclass__calledAdmin__thatinherits__fromthe__Userclass__youwrote__inExercise__9-3 (page 162)or__Exercise 9-5 (page 167).Add__an attribute, privileges,that__storesa__listof__stringslike__"canadd__post", "candelete__post", "canban__user",and__so on.Write__amethod__called show_privileges()that__liststhe__administrators__setof__privileges.Create__aninstance__of Admin,and__callyour__method. 9-8. Privileges:Write__aseparate__Privileges class.The__classshould__haveone__attribute, privileges,that__storesa__listof__stringsas__describedin__Exercise 9-7.Move__the show_privileges()method__tothis__class.Make__aPrivileges__instanceas__anattribute__inthe__Admin class.Create__anew__instanceof__Adminand__useyour__methodto__showits__privileges. 9-9.Battery__Upgrade:Use__thefinal__versionof__electric_car.pyfrom__this section.Add__amethod__tothe__Batteryclass__called upgrade_battery().This__methodshould__checkthe__batterysize__andset__thecapacity__to 65if__itisn__t already.Make__anelectric__carwith__adefault__battery size,call__get_range() once,and__thencall__get_range()a__secondtime__afterupgrading__the battery.You__shouldsee__anincrease__inthe__cars__range.Importing__ClassesAs__youadd__morefunctionality__toyour__classes,your__filescan__get long,even__whenyou__useinheritance__andcomposition__properly.In__keepingwith__theoverall__philosophyof__Python,you__llwant__tokeep__yourfiles__asuncluttered__as possible.To__help,Python__letsyou__storeclasses__inmodules__andthen__importthe__classesyou__needinto__yourmain__program. 174Chapter__9Importing__aSingle__ClassLet__screate__amodule__containingjust__theCar__class.This__bringsup__asubtle__naming issue:we__alreadyhave__afile__named car.pyin__this chapter,but__thismodule__shouldbe__named car.pybecause__itcontains__coderepresenting__a car.We__llresolve__thisnaming__issueby__storingthe__Carclass__ina__modulenamed__car.py,replacing__the car.pyfile__wewere__previously using.From__now on,any__programthat__usesthis__modulewill__needa__morespecific__filename,such__as my_car.py.Here__s car.pywith__justthe__codefrom__theclass__Car: car.py 1 """Aclass__thatcan__beused__torepresent__a car."""class__Car: """Asimple__attemptto__representa__car."""def____init__(self, make, model, year): """Initializeattributes__todescribe__a car.""" self.make =make__self.model =model__self.year =year__self.odometer_reading = 0def__get_descriptive_name(self): """Returna__neatlyformatted__descriptive name."""long_name__= f"{self.year} {self.make} {self.model}"return__long_name.title()def__read_odometer(self): """Printa__statementshowing__the car's mileage.""" print(f"Thiscar__has {self.odometer_reading}miles__on it.")def__update_odometer(self, mileage): """Set__theodometer__readingto__thegiven__value.Reject__thechange__ifit__attemptsto__rollthe__odometer back. """if__mileage >= self.odometer_reading: self.odometer_reading =mileage__else: print("You can'troll__backan__odometer!")def__increment_odometer(self, miles): """Addthe__givenamount__tothe__odometer reading.""" self.odometer_reading +=miles__Weinclude__a module-leveldocstring__thatbriefly__describesthe__contentsof__thismodule__1.You__shouldwrite__adocstring__foreach__moduleyou__create.Now__wemake__aseparate__filecalled__my_car.py.This__filewill__importthe__Carclass__andthen__createan__instancefrom__that class: my_car.py 1from__carimport__Carmy_new_car__= Car('audi', 'a4', 2024) print(my_new_car.get_descriptive_name())Classes__175 my_new_car.odometer_reading = 23 my_new_car.read_odometer()The__importstatement__1tells__Pythonto__openthe__carmodule__andimport__theclass__Car.Now__wecan__usethe__Carclass__asif__itwere__definedin__this file.The__outputis__thesame__aswe__saw earlier: 2024Audi__A4This__carhas__23miles__on it.Importing__classesis__aneffective__wayto__program.Picture__howlong__thisprogram__filewould__beif__theentire__Carclass__were included.When__youinstead__movethe__classto__amodule__andimport__the module,you__stillget__allthe__same functionality,but__youkeep__yourmain__programfile__cleanand__easyto__read.You__alsostore__mostof__thelogic__inseparate__files;once__yourclasses__workas__youwant__them to,you__canleave__thosefiles__aloneand__focuson__the higher-levellogic__ofyour__main program.Storing__MultipleClasses__ina__ModuleYou__canstore__asmany__classesas__youneed__ina__single module,although__eachclass__ina__moduleshould__berelated__somehow.The__classesBattery__andElectricCar__bothhelp__represent cars,so__lets__addthem__tothe__module car.py. car.py """Aset__ofclasses__usedto__representgas__andelectric__cars."""class__Car: --snip--class__Battery: """Asimple__attemptto__modela__batteryfor__anelectric__car."""def____init__(self, battery_size=40): """Initializethe__battery's attributes.""" self.battery_size =battery_size__def describe_battery(self): """Printa__statementdescribing__thebattery__size.""" print(f"Thiscar__hasa__{self.battery_size}-kWh battery.")def__get_range(self): """Printa__statementabout__therange__thisbattery__provides."""if__self.battery_size == 40:range__= 150elif__self.battery_size == 65:range__= 225 print(f"Thiscar__cango__about {range}miles__ona__full charge.")class__ElectricCar(Car): """Modelsaspects__ofa__car,specific__toelectric__vehicles."""def____init__(self, make, model, year): """ 176Chapter__9Initialize__attributesof__theparent__class.Then__initializeattributes__specificto__anelectric__car. """ super().__init__(make, model, year) self.battery = Battery()Now__wecan__makea__newfile__called my_electric_car.py,import__theElectricCar__class,and__makean__electric car:my_electric___car.pyfrom__carimport__ElectricCarmy_leaf__= ElectricCar('nissan', 'leaf', 2024) print(my_leaf.get_descriptive_name()) my_leaf.battery.describe_battery() my_leaf.battery.get_range()This__hasthe__sameoutput__wesaw__earlier,even__thoughmost__ofthe__logicis__hiddenaway__ina__module: 2024Nissan__LeafThis__carhas__a 40-kWh battery.This__carcan__goabout__150miles__ona__full charge.Importing__MultipleClasses__froma__ModuleYou__canimport__asmany__classesas__youneed__intoa__program file.If__wewant__tomake__aregular__carand__anelectric__carin__thesame__file,we__needto__importboth__classes,Car__and ElectricCar: my_cars.py 1from__carimport__Car,ElectricCar__2my_mustang__= Car('ford', 'mustang', 2024) print(my_mustang.get_descriptive_name()) 3my_leaf__= ElectricCar('nissan', 'leaf', 2024) print(my_leaf.get_descriptive_name())You__importmultiple__classesfrom__amodule__byseparating__eachclass__witha__comma 1.Once__youve__importedthe__necessary classes,you__refree__tomake__asmany__instancesof__eachclass__asyou__need.In__thisexample__wemake__a gas-poweredFord__Mustang 2and__thenan__electricNissan__Leaf 3: 2024Ford__Mustang 2024Nissan__LeafImporting__anEntire__ModuleYou__canalso__importan__entiremodule__andthen__accessthe__classesyou__needusing__dot notation.This__approachis__simpleand__resultsin__codethat__iseasy__to read.Because__everycall__thatcreates__aninstance__ofa__classincludes__themodule__name,you__wont__havenaming__conflictswith__anynames__usedin__thecurrent__file.Classes__177Here__swhat__itlooks__liketo__importthe__entirecar__moduleand__thencreate__aregular__carand__anelectric__car: my_cars.py 1import__car 2my_mustang__= car.Car('ford', 'mustang', 2024) print(my_mustang.get_descriptive_name()) 3my_leaf__= car.ElectricCar('nissan', 'leaf', 2024) print(my_leaf.get_descriptive_name())First__weimport__theentire__carmodule__1.We__thenaccess__theclasses__weneed__throughthe__module_name.ClassName syntax.We__againcreate__aFord__Mustang 2,and__aNissan__Leaf 3.Importing__AllClasses__froma__ModuleYou__canimport__everyclass__froma__moduleusing__thefollowing__syntax:from__module_nameimport__*This__methodis__notrecommended__fortwo__reasons. First,it__shelpful__tobe__ableto__readthe__importstatements__atthe__topof__afile__andget__aclear__senseof__whichclasses__aprogram__uses.With__thisapproach__its__unclearwhich__classesyou__reusing__fromthe__module.This__approachcan__alsolead__toconfusion__withnames__inthe__file.If__youaccidentally__importa__classwith__thesame__nameas__somethingelse__inyour__program file,you__cancreate__errorsthat__arehard__to diagnose.I__showthis__herebecause__eventhough__its__nota__recommended approach,you__relikely__tosee__itin__otherpeople__scode__atsome__point.If__youneed__toimport__manyclasses__froma__module,you__rebetter__offimporting__theentire__moduleand__usingthe__module_name.ClassName syntax.You__wont__seeall__theclasses__usedat__thetop__ofthe__file,but__youll__seeclearly__wherethe__moduleis__usedin__the program.You__llalso__avoidthe__potentialnaming__conflictsthat__canarise__whenyou__importevery__classin__a module.Importing__aModule__intoa__ModuleSometimes__youll__wantto__spreadout__yourclasses__overseveral__modulesto__keepany__onefile__fromgrowing__toolarge__andavoid__storingunrelated__classesin__thesame__module.When__youstore__yourclasses__inseveral__modules,you__mayfind__thata__classin__onemodule__dependson__aclass__inanother__module.When__this happens,you__canimport__therequired__classinto__thefirst__module.For__example,let__sstore__theCar__classin__onemodule__andthe__ElectricCarand__Batteryclasses__ina__separate module.We__llmake__anew__modulecalled__electric_car.pyreplacing__the electric_car.pyfile__wecreated__earlierand__copyjust__theBattery__andElectricCar__classesinto__this file: electric_car.py """Aset__ofclasses__thatcan__beused__torepresent__electric cars."""from__carimport__Car 178Chapter__9class__Battery: --snip--class__ElectricCar(Car): --snip--The__classElectricCar__needsaccess__toits__parentclass__Car,so__weimport__Cardirectly__intothe__module.If__weforget__this line,Python__willraise__anerror__whenwe__tryto__importthe__electric_car module.We__alsoneed__toupdate__theCar__moduleso__itcontains__onlythe__Car class: car.py """Aclass__thatcan__beused__torepresent__a car."""class__Car: --snip--Now__wecan__importfrom__eachmodule__separatelyand__createwhatever__kindof__carwe__need: my_cars.pyfrom__carimport__Carfrom__electric_carimport__ElectricCarmy_mustang__= Car('ford', 'mustang', 2024) print(my_mustang.get_descriptive_name())my_leaf__= ElectricCar('nissan', 'leaf', 2024) print(my_leaf.get_descriptive_name())We__importCar__fromits__module,and__ElectricCarfrom__its module.We__thencreate__oneregular__carand__oneelectric__car.Both__carsare__created correctly: 2024Ford__Mustang 2024Nissan__LeafUsing__AliasesAs__yousaw__inChapter__8,aliases__canbe__quitehelpful__whenusing__modulesto__organizeyour__projects code.You__canuse__aliaseswhen__importingclasses__as well.As__an example,consider__aprogram__whereyou__wantto__makea__bunchof__electric cars.It__mightget__tediousto__type (and read)ElectricCar__overand__over again.You__cangive__ElectricCaran__aliasin__theimport__statement:from__electric_carimport__ElectricCaras__ECNow__youcan__usethis__aliaswhenever__youwant__tomake__anelectric__car:my_leaf__= EC('nissan', 'leaf', 2024)Classes__179You__canalso__givea__modulean__alias.Here__show__toimport__theentire__electric_carmodule__usingan__alias:import__electric_caras__ecNow__youcan__usethis__modulealias__withthe__fullclass__name:my_leaf__= ec.ElectricCar('nissan', 'leaf', 2024)Finding__YourOwn__WorkflowAs__youcan__see,Python__givesyou__manyoptions__forhow__tostructure__codein__alarge__project.It__simportant__toknow__allthese__possibilitiesso__youcan__determinethe__bestways__toorganize__yourprojects__aswell__asunderstand__otherpeople__s projects.When__youre__starting out,keep__yourcode__structure simple.Try__doingeverything__inone__fileand__movingyour__classesto__separatemodules__onceevery__thingis__working.If__youlike__howmodules__andfiles__interact,try__storingyour__classesin__moduleswhen__youstart__a project.Find__anapproach__thatlets__youwrite__codethat__works,and__gofrom__there.TRY__ITYOURSELF__9-10.Imported__Restaurant:Using__yourlatest__Restaurant class,store__itin__amod__ule.Make__aseparate__filethat__imports Restaurant.Make__aRestaurant__instance,and__callone__ofRestaurant__smethods__toshow__thatthe__importstatement__iswork__ing properly. 9-11.Imported__Admin:Start__withyour__workfrom__Exercise 9-8 (page 173).Store__theclasses__User, Privileges,and__Adminin__one module.Create__aseparate__file,make__anAdmin__instance,and__call show_privileges()to__showthat__everythingis__working correctly. 9-12.Multiple__Modules:Store__theUser__classin__one module,and__storethe__Privilegesand__Adminclasses__ina__separate module.In__aseparate__file,create__anAdmin__instanceand__call show_privileges()to__showthat__everythingis__stillworking__correctly.The__PythonStandard__LibraryThe__Pythonstandard__libraryis__aset__ofmodules__includedwith__everyPython__installation.Now__thatyou__havea__basicunderstanding__ofhow__functionsand__classes work,you__canstart__touse__moduleslike__thesethat__otherprogrammers__have written.You__canuse__anyfunction__orclass__inthe__standardlibrary__byincluding__asimple__importstatement__atthe__topof__your file.Let__slook__atone__module, random,which__canbe__usefulin__modelingmany__real-world situations. 180Chapter__9One__interestingfunction__fromthe__randommodule__is randint().This__functiontakes__twointeger__argumentsand__returnsa__randomlyselected__integer__between (and including)those__numbers.Here__show__togenerate__arandom__numberbetween__1and__6: >>>from__randomimport__randint >>> randint(1, 6) 3Another__usefulfunction__is choice().This__functiontakes__ina__listor__tupleand__returnsa__randomlychosen__element: >>>from__randomimport__choice >>>players__= ['charles', 'martina', 'michael', 'florence', 'eli'] >>>first_up__= choice(players) >>>first_up__'florence'The__randommodule__shouldnt__beused__whenbuilding__security-related applications,but__itworks__wellfor__manyfun__andinteresting__projects.NOTE__Youcan__alsodownload__modulesfrom__external sources.You__llsee__anumber__ofthese__examplesin__Part II,where__well__needexternal__modulesto__completeeach__project.TRY__ITYOURSELF__9-13. Dice:Make__aclass__Diewith__oneattribute__called sides,which__hasa__defaultvalue__of 6.Write__amethod__called roll_die()that__printsa__randomnum__berbetween__1and__thenumber__ofsides__thedie__has.Make__a 6-sideddie__androll__it 10 times.Make__a 10-sideddie__anda__20-sided die.Roll__eachdie__10 times. 9-14. Lottery:Make__alist__ortuple__containinga__seriesof__10numbers__and 5 letters.Randomly__select 4numbers__orletters__fromthe__listand__printa__messagesaying__thatany__ticketmatching__these 4numbers__orletters__winsa__prize. 9-15.Lottery__Analysis:You__canuse__aloop__tosee__howhard__itmight__beto__winthe__kindof__lotteryyou__just modeled.Make__alist__ortuple__called my_ticket.Write__aloop__thatkeeps__pullingnumbers__untilyour__ticket wins.Print__amessage__reporting__howmany__timesthe__loophad__torun__togive__youa__winning ticket. 9-16.Python__Moduleof__the Week:One__excellentresource__forexploring__thePython__standardlibrary__isa__sitecalled__PythonModule__ofthe__Week.Go__to https://pymotw.comand__lookat__theChapter__10,you__lllearn__towork__withfiles__soyou__cansave__thework__youve__donein__aprogram__andthe__workyou__veallowed__usersto__do.You__llalso__learnabout__exceptions,a__specialPython__classdesigned__tohelp__yourespond__toerrors__whenthey__arise. 10F__ILESANDE__XCEP__TION__SNow__thatyou__vemastered__thebasic__skillsyou__needto__writeorganized__programsthat__areeasy__to use,it__stime__tothink__aboutmaking__yourprograms__evenmore__relevantand__usable.In__this chapter,you__lllearn__towork__withfiles__soyour__programs__canquickly__analyzelots__of data.You__lllearn__tohandle__errorsso__yourprograms__dont__crashwhen__theyencounter__unexpected situations.You__lllearn__about exceptions,which__arespecial__objectsPython__createsto__manageerrors__thatarise__whilea__programis__running.You__llalso__learnabout__thejson__module,which__allowsyou__tosave__userdata__soit__isnt__lostwhen__yourprogram__stops running.Learning__towork__withfiles__andsave__datawill__makeyour__programseasier__forpeople__to use.Users__willbe__ableto__choosewhat__datato__enterand__whento__enter it.People__willbe__ableto__runyour__program,do__some work,and__thenclose__theprogram__andpick__upwhere__theyleft__off.Learning__tohandle__exceptions__willhelp__youdeal__withsituations__inwhich__filesdon__texist__anddeal__withother__problemsthat__cancause__yourprograms__to crash.This__willmake__yourprograms__morerobust__whenthey__encounterbad__data,whether__itcomes__from 184Chapter__10innocent__mistakesor__frommalicious__attemptsto__breakyour__programs.With__theskills__youll__learnin__this chapter,you__llmake__yourprograms__moreappli__cable, usable,and__stable.Reading__froma__FileAn__incredibleamount__ofdata__isavailable__intext__files.Text__filescan__containweather__data,traffic__data,socioeconomic__data,literary__works,and__more.Reading__froma__fileis__particularlyuseful__indata__analysis applications,but__its__alsoapplicable__toany__situationin__whichyou__wantto__analyzeor__modifyinformation__storedin__a file.For__example,you__canwrite__aprogram__thatreads__inthe__contentsof__atext__fileand__rewritesthe__filewith__formattingthat__allowsa__browserto__display it.When__youwant__towork__withthe__informationin__atext__file,the__firststep__isto__readthe__fileinto__memory.You__canthen__workthrough__allof__thefile__scontents__atonce__orwork__throughthe__contentsline__by line.Reading__theContents__ofa__FileTo__begin,we__needa__filewith__afew__linesof__textin__it.Let__sstart__witha__filethat__containspi__to 30decimal__places,with__10decimal__placesper__line: pi_digits.txt 3.1415926535 8979323846 2643383279To__trythe__followingexamples__yourself,you__canenter__theselines__inan__editorand__savethe__fileas__pi_digits.txt,or__youcan__downloadthe__filefrom__thebook__sresources__through https://ehmatthes.github.io/pcc_3e.Save__thefile__inthe__samedirectory__whereyou__llstore__thischapter__s programs.Here__sa__programthat__opensthis__file,reads__it,and__printsthe__contentsof__thefile__tothe__screen: file_reader.pyfrom__pathlibimport__Path 1path__= Path('pi_digits.txt') 2contents__= path.read_text() print(contents)To__workwith__thecontents__ofa__file,we__needto__tellPython__thepath__tothe__file.A__pathis__theexact__locationof__afile__orfolder__ona__system.Python__providesa__modulecalled__pathlibthat__makesit__easierto__workwith__filesand__directories,no__matterwhich__operatingsystem__youor__yourprogram__susers__areworking__with.A__modulethat__providesspecific__functionalitylike__thisis__oftencalled__a library,hence__thename__pathlib.We__startby__importingthe__Pathclass__from pathlib.There__sa__lotyou__cando__witha__Pathobject__thatpoints__toa__file.For__example,you__cancheck__thatthe__fileexists__beforeworking__with it,read__thefile__s contents,or__writenew__datato__the file. Here,we__builda__Pathobject__representingthe__file pi_digits.txt,which__weassign__tothe__variablepath__1.Since__thisfile__issaved__inthe__sameFiles__andExceptions__185directory__asthe__.pyfile__were__writing,the__filenameis__allthat__Pathneeds__toaccess__the file.NOTE__VSCode__looksfor__filesin__thefolder__thatwas__mostrecently__opened.If__youre__usingVS__Code,start__byopening__thefolder__whereyou__restoring__thischapter__s programs.For__example,if__youre__savingyour__programfiles__ina__foldercalled__chapter_10,press__CTRL-O ( -Oon__macOS),and__openthat__folder.Once__wehave__aPath__objectrepresenting__pi_digits.txt,we__usethe__read_text()method__toread__theentire__contentsof__thefile__2.The__contentsof__thefile__arereturned__asa__single string,which__weassign__tothe__variable contents.When__weprint__thevalue__of contents,we__seethe__entirecontents__ofthe__text file: 3.1415926535 8979323846 2643383279The__onlydifference__betweenthis__outputand__theoriginal__fileis__theextra__blankline__atthe__endof__the output.The__blankline__appearsbecause__read_text()returns__anempty__stringwhen__itreaches__theend__ofthe__file;this__emptystring__showsup__asa__blank line.We__canremove__theextra__blankline__byusing__rstrip()on__thecontents__string:from__pathlibimport__Pathpath__= Path('pi_digits.txt')contents__= path.read_text()contents__= contents.rstrip() print(contents)Recall__fromChapter__2that__Pythons__rstrip()method__removes,or__strips,any__whitespacecharacters__fromthe__rightside__ofa__string.Now__theoutput__matchesthe__contentsof__theoriginal__file exactly: 3.1415926535 8979323846 2643383279We__canstrip__thetrailing__newlinecharacter__whenwe__readthe__contents__ofthe__file,by__applyingthe__rstrip()method__immediatelyafter__calling read_text():contents__= path.read_text().rstrip()This__linetells__Pythonto__callthe__read_text()method__onthe__filewe__reworking__with.Then__itapplies__the rstrip()method__tothe__stringthat__read _text() returns.The__cleaned-upstring__isthen__assignedto__thevariable__contents.This__approachis__calledmethod__chaining,and__youll__seeit__usedoften__in programming. 186Chapter__10Relative__andAbsolute__FilePaths__Whenyou__passa__simplefilename__like pi_digits.txtto__Path,Python__looksin__thedirectory__wherethe__filethat__scurrently__beingexecuted__(that is,your__.pyprogram__file)is__stored. Sometimes,depending__onhow__youorganize__your work,the__fileyou__wantto__openwon__tbe__inthe__samedirectory__asyour__program file.For__example,you__mightstore__yourprogram__filesin__afolder__called python_work;inside__python_work,you__mighthave__anotherfolder__calledtext_files__todistinguish__yourprogram__filesfrom__thetext__filesthey__re manipulating.Even__thoughtext_files__isin__python_work,just__passingPath__thename__ofa__filein__text_fileswon__t work,because__Pythonwill__onlylook__inpython_work__andstop__there;it__wont__goon__andlook__in text_files.To__getPython__toopen__filesfrom__adirectory__otherthan__theone__whereyour__programfile__is stored,you__needto__providethe__correct path.There__aretwo__mainways__tospecify__pathsin__programming.A__relativefile__pathtells__Pythonto__lookfor__agiven__locationrelative__tothe__directorywhere__thecurrently__runningprogram__fileis__stored.Since__text_filesis__inside python_work,we__needto__builda__paththat__startswith__thedirectory__text_files,and__endswith__the filename.Here__show__tobuild__this path:path__= Path('text_files/filename.txt')You__canalso__tellPython__exactlywhere__thefile__ison__your computer,regardless__ofwhere__theprogram__thats__beingexecuted__is stored.This__iscalled__anabsolute__file path.You__canuse__anabsolute__pathif__arelative__pathdoesn__t work.For__instance,if__youve__puttext_files__insome__folderother__than python_work,then__justpassing__Paththe__path 'text_files/ filename.txt'won__twork__becausePython__willonly__lookfor__thatlocation__inside python_work.You__llneed__towrite__outan__absolutepath__toclarify__whereyou__wantPython__to look.Absolute__pathsare__usuallylonger__thanrelative__paths,because__theystart__atyour__systems__root folder:path__= Path('/home/eric/data_files/text_files/filename.txt')Using__absolute paths,you__canread__filesfrom__anylocation__onyour__sys tem.For__nowit__seasiest__tostore__filesin__thesame__directoryas__yourprogram__files,or__ina__foldersuch__astext_files__withinthe__directorythat__storesyour__program__files.NOTE__Windowssystems__usea__backslash (\)instead__ofa__forwardslash__(/)when__displayingfile__paths,but__youshould__useforward__slashesin__your code,even__on Windows.The__pathliblibrary__willautomatically__usethe__correctrepresentation__ofthe__pathwhen__itinteracts__withyour__system,or__anyuser__s system.Accessing__aFile__sLines__Whenyou__reworking__witha__file,you__lloften__wantto__examineeach__lineof__the file.You__mightbe__lookingfor__certaininformation__inthe__file,or__Filesand__Exceptions 187you__mightwant__tomodify__thetext__inthe__filein__some way.For__example,you__mightwant__toread__througha__fileof__weatherdata__andwork__withany__linethat__includesthe__wordsunny__inthe__descriptionof__thatday__s weather.In__anews__report,you__mightlook__forany__linewith__thetag__andrewrite__thatline__witha__specifickind__of formatting.You__canuse__the splitlines()method__toturn__along__stringinto__aset__of lines,and__thenuse__afor__loopto__examineeach__linefrom__a file,one__ata__time: file_reader.pyfrom__pathlibimport__Pathpath__= Path('pi_digits.txt') 1contents__= path.read_text() 2lines__= contents.splitlines()for__linein__lines: print(line)We__startout__byreading__theentire__contentsof__the file,as__wedid__earlier__1.If__youre__planningto__workwith__theindividual__linesin__a file,you__dont__needto__stripany__whitespacewhen__readingthe__file.The__splitlines()method__returnsa__listof__alllines__inthe__file,and__weassign__thislist__tothe__variablelines__2.We__thenloop__overthese__linesand__printeach__one: 3.1415926535 8979323846 2643383279Since__wehaven__tmodified__anyof__the lines,the__outputmatches__theoriginal__textfile__exactly.Working__witha__Files__ContentsAfter__youve__readthe__contentsof__afile__into memory,you__cando__whateveryou__wantwith__that data,so__lets__brieflyexplore__thedigits__of pi. First,we__llattempt__tobuild__asingle__stringcontaining__allthe__digitsin__thefile__withno__whitespacein__it: pi_string.pyfrom__pathlibimport__Pathpath__= Path('pi_digits.txt')contents__= path.read_text()lines__= contents.splitlines()pi_string__= '' 1for__linein__lines:pi_string__+=line__print(pi_string) print(len(pi_string))We__startby__readingthe__fileand__storingeach__lineof__digitsin__a list,just__aswe__didin__theprevious__example.We__thencreate__a variable, pi_string, 188Chapter__10to__holdthe__digitsof__pi.We__writea__loopthat__addseach__lineof__digitsto__pi_string 1.We__printthis__string,and__alsoshow__howlong__thestring__is: 3.1415926535 8979323846 2643383279 36The__variablepi_string__containsthe__whitespacethat__wason__theleft__sideof__thedigits__ineach__line,but__wecan__getrid__ofthat__byusing__lstrip()on__each line: --snip--for__linein__lines:pi_string__+= line.lstrip() print(pi_string) print(len(pi_string))Now__wehave__astring__containingpi__to 30decimal__places.The__stringis__32characters__longbecause__italso__includesthe__leading 3and__adecimal__point: 3.141592653589793238462643383279 32NOTE__WhenPython__readsfrom__atext__file,it__interpretsall__textin__thefile__asa__string.If__youread__ina__numberand__wantto__workwith__thatvalue__ina__numerical context,you__llhave__toconvert__itto__aninteger__usingthe__int()function__ora__floatusing__the float() function.Large__Files:One__MillionDigits__So far,we__vefocused__onanalyzing__atext__filethat__containsonly__three lines,but__thecode__inthese__exampleswould__workjust__aswell__onmuch__larger files.If__westart__witha__textfile__thatcontains__pito__1,000,000decimal__places,instead__ofjust__30,we__cancreate__asingle__stringcontaining__allthese__digits.We__dont__needto__changeour__programat__all,except__topass__ita__different file.We__llalso__printjust__thefirst__50decimal__places,so__wedon__thave__towatch__amillion__digitsscroll__byin__the terminal: pi_string.pyfrom__pathlibimport__Pathpath__= Path('pi_million_digits.txt')contents__= path.read_text()lines__= contents.splitlines()pi_string__= ''for__linein__lines:pi_string__+= line.lstrip() print(f"{pi_string[:52]}...") print(len(pi_string))Files__andExceptions__189The__outputshows__thatwe__doindeed__havea__stringcontaining__pito__1,000,000decimal__places: 3.14159265358979323846264338327950288419716939937510... 1000002Python__hasno__inherentlimit__tohow__muchdata__youcan__work with;you__canwork__withas__muchdata__asyour__systems__memorycan__handle.NOTE__Torun__thisprogram__(andmany__ofthe__examplesthat__follow),you__llneed__todownload__theresources__availableat__https://ehmatthes.github.io/pcc_3e.Is__YourBirthday__Containedin__Pi?I__vealways__beencurious__toknow__ifmy__birthdayappears__anywherein__thedigits__of pi.Let__suse__theprogram__wejust__wroteto__findout__ifsomeone__sbirthday__appearsanywhere__inthe__firstmillion__digitsof__pi.We__cando__thisby__expressingeach__birthdayas__astring__ofdigits__andseeing__ifthat__stringappears__anywherein__pi_string: pi_birthday.py --snip--for__linein__lines:pi_string__+= line.strip()birthday__= input("Enteryour__birthday,in__theform__mmddyy: ")if__birthdayin__pi_string: print("Yourbirthday__appearsin__thefirst__milliondigits__of pi!") else: print("Yourbirthday__doesnot__appearin__thefirst__milliondigits__of pi.")We__firstprompt__forthe__users__birthday,and__thencheck__ifthat__stringis__in pi_string.Let__stry__it:Enter__your birthdate,in__theform__mmddyy: 120372Your__birthdayappears__inthe__firstmillion__digitsof__pi!My__birthdaydoes__appearin__thedigits__of pi!Once__youve__readfrom__a file,you__cananalyze__itscontents__injust__aboutany__wayyou__can imagine.TRY__ITYOURSELF__10-1.Learning__Python:Open__ablank__filein__yourtext__editorand__writea__fewlines__summarizingwhat__youve__learnedabout__Pythonso__far.Start__eachline__withthe__phraseIn__Pythonyou__can. . . .Save__thefile__as learning_python.txtin__thesame__directoryas__yourexercises__fromthis__chapter.Write__aprogram__thatreads__thefile__andprints__whatyou__wrotetwo__times:print__thecontents__onceby__readingin__theentire__file,and__onceby__storingthe__linesin__alist__andthen__loopingover__each line. (continued) 190Chapter__10 10-2.Learning__C:You__canuse__the replace()method__toreplace__anyword__ina__stringwith__adifferent__word.Here__sa__quickexample__showinghow__toreplace__'dog'with__'cat'in__a sentence: >>>message__= "Ireally__like dogs." >>> message.replace('dog', 'cat') 'Ireally__like cats.'Read__ineach__linefrom__thefile__youjust__created, learning_python.txt,and__replacethe__wordPython__withthe__nameof__another language,such__as C.Print__eachmodified__lineto__the screen. 10-3.Simpler__Code:The__program file_reader.pyin__thissection__usesa__temporary variable, lines,to__showhow__splitlines() works.You__canskip__thetemporary__variableand__loopdirectly__overthe__listthat__splitlines() returns:for__linein__contents.splitlines():Remove__thetemporary__variablefrom__eachof__theprograms__inthis__section,to__makethem__more concise.Writing__toa__FileOne__ofthe__simplestways__tosave__datais__towrite__itto__a file.When__youwrite__textto__a file,the__outputwill__stillbe__availableafter__youclose__theterminal__containingyour__programs__output.You__canexamine__outputafter__aprogram__finishes running,and__youcan__sharethe__outputfiles__withothers__as well.You__canalso__writeprograms__thatread__thetext__backinto__memoryand__workwith__itagain__later.Writing__aSingle__LineOnce__youhave__apath__defined,you__canwrite__toa__fileusing__the write_text() method.To__seehow__this works,let__swrite__asimple__messageand__storeit__ina__fileinstead__ofprinting__itto__the screen:write___message.pyfrom__pathlibimport__Pathpath__= Path('programming.txt') path.write_text("Ilove__programming.")The__write_text()method__takesa__single argument:the__stringthat__youwant__towrite__tothe__file.This__programhas__noterminal__output,but__ifyou__openthe__file programming.txt,you__llsee__one line: programming.txtI__love programming.Files__andExceptions__191This__filebehaves__likeany__otherfile__onyour__computer.You__canopen__it,write__newtext__in it,copy__from it,paste__to it,and__so forth.NOTE__Pythoncan__onlywrite__stringsto__atext__file.If__youwant__tostore__numericaldata__ina__text file,you__llhave__toconvert__thedata__tostring__formatfirst__usingthe__str() function.Writing__MultipleLines__The write_text()method__doesa__fewthings__behindthe__scenes.If__thefile__thatpath__pointsto__doesnt__exist,it__createsthat__file. Also,after__writingthe__stringto__the file,it__makessure__thefile__isclosed__properly.Files__thataren__tclosed__properlycan__leadto__missingor__corrupted data.To__writemore__thanone__lineto__a file,you__needto__builda__stringcontain__ingthe__entirecontents__ofthe__file,and__thencall__write_text()with__that string.Let__swrite__severallines__tothe__programming.txt file:from__pathlibimport__Pathcontents__= "Ilove__programming.\n"contents__+= "Ilove__creatingnew__games.\n"contents__+= "Ialso__loveworking__with data.\n"path__= Path('programming.txt') path.write_text(contents)We__definea__variablecalled__contentsthat__willhold__theentire__contentsof__the file.On__thenext__line,we__usethe__+=operator__toadd__tothis__string.You__cando__thisas__manytimes__asyou__need,to__buildstrings__ofany__length.In__thiscase__weinclude__newlinecharacters__atthe__endof__each line,to__makesure__eachstatement__appearson__itsown__line.If__yourun__thisand__thenopen__programming.txt,you__llsee__eachof__theselines__inthe__text file:I__love programming.I__lovecreating__new games.I__alsolove__workingwith__data.You__canalso__use spaces,tab__characters,and__blanklines__toformat__your output,just__asyou__vebeen__doingwith__terminal-based output.There__sno__limitto__thelength__ofyour__strings,and__thisis__howmany__computer-generateddocuments__are created.NOTE__Becareful__whencalling__write_text()on__apath__object.If__thefile__already exists, write_text()will__erasethe__currentcontents__ofthe__fileand__writenew__contentsto__the file.Later__inthis__chapter,you__lllearn__tocheck__whethera__fileexists__using pathlib. 192Chapter__10TRY__ITYOURSELF__10-4. Guest:Write__aprogram__thatprompts__theuser__fortheir__name.When__they respond,write__theirname__toa__filecalled__guest.txt. 10-5.Guest__Book:Write__awhile__loopthat__promptsusers__fortheir__name.Collect__allthe__namesthat__are entered,and__thenwrite__thesenames__toa__filecalled__guest_book.txt.Make__sureeach__entryappears__ona__newline__inthe__file.Exceptions__Pythonuses__specialobjects__calledexceptions__tomanage__errorsthat__arisedur__inga__programs__execution.Whenever__anerror__occursthat__makesPython__unsureof__whatto__do next,it__createsan__exception object.If__youwrite__codethat__handlesthe__exception,the__programwill__continue running.If__youdon__thandle__the exception,the__programwill__haltand__showa__traceback,which__includesa__reportof__theexception__thatwas__raised.Exceptions__arehandled__with try-except blocks.A__try-exceptblock__asksPython__todo__something,but__italso__tellsPython__whatto__doif__anexcep__tionis__raised.When__youuse__try-except blocks,your__programswill__continuerunning__evenif__thingsstart__togo__wrong.Instead__of tracebacks,which__canbe__confusingfor__usersto__read,users__willsee__friendlyerror__messagesthat__youve__written.Handling__theZeroDivisionError__ExceptionLet__slook__ata__simpleerror__thatcauses__Pythonto__raisean__exception.You__probablyknow__thatit__simpossible__todivide__anumber__by zero,but__lets__askPython__todo__it anyway:division___calculator.py print(5/0)Python__cant__do this,so__weget__a traceback:Traceback__(mostrecent__call last):File__"division_calculator.py",line__1,in__print(5/0) ~^~ 1 ZeroDivisionError:division__byzero__Theerror__reportedin__the traceback, ZeroDivisionError,is__anexception__object 1.Python__createsthis__kindof__objectin__responseto__asituation__whereit__cant__dowhat__weask__it to.When__this happens,Python__stopsthe__programand__tellsus__thekind__ofexception__thatwas__raised.We__canuse__thisinforma__tionto__modifyour__program.We__lltell__Pythonwhat__todo__whenthis__kindof__exception occurs;that__way,if__ithappens__again,we__llbe__prepared.Files__andExceptions__193Using__try-exceptBlocks__Whenyou__thinkan__errormay__occur,you__canwrite__a try-exceptblock__tohandle__theexception__thatmight__be raised.You__tellPython__totry__runningsome__code,and__youtell__itwhat__todo__ifthe__coderesults__ina__particularkind__of exception.Here__swhat__a try-exceptblock__forhandling__theZeroDivisionError__exception__looks like: try: print(5/0)except__ZeroDivisionError: print("You can'tdivide__by zero!")We__put print(5/0),the__linethat__causedthe__error,inside__atry__block.If__thecode__ina__tryblock__works,Python__skipsover__theexcept__block.If__thecode__inthe__tryblock__causesan__error,Python__looksfor__anexcept__blockwhose__errormatches__theone__thatwas__raised,and__runsthe__codein__that block.In__this example,the__codein__thetry__blockproduces__a ZeroDivisionError,so__Pythonlooks__foran__exceptblock__tellingit__howto__respond.Python__thenruns__thecode__inthat__block,and__theuser__seesa__friendlyerror__messageinstead__ofa__traceback:You__can'tdivide__by zero!If__morecode__followedthe__try-except block,the__programwould__continuerunning__becausewe__toldPython__howto__handlethe__error.Let__slook__atan__examplewhere__catchingan__errorcan__allowa__programto__continue running.Using__Exceptionsto__PreventCrashes__Handlingerrors__correctlyis__especiallyimportant__whenthe__programhas__morework__todo__afterthe__error occurs.This__happensoften__inprograms__thatprompt__usersfor__input.If__theprogram__respondsto__invalidinput__appro priately,it__canprompt__formore__validinput__insteadof__crashing.Let__screate__asimple__calculatorthat__doesonly__division:division___calculator.py print("Giveme__two numbers,and__I'lldivide__them.") print("Enter 'q'to__quit.")while__True: 1first_number__= input("\nFirst number: ")if__first_number == 'q':break__2second_number__= input("Second number: ")if__second_number == 'q':break__3answer__= int(first_number) / int(second_number) print(answer) 194Chapter__10This__programprompts__theuser__toinput__afirst_number__1 and,if__theuser__doesnot__enterq__to quit,a__second_number 2.We__thendivide__thesetwo__numbersto__getan__answer 3.This__programdoes__nothingto__handle errors,so__askingit__todivide__byzero__causesit__to crash:Give__metwo__numbers,and__I'lldivide__them.Enter__'q'to__quit.First__number: 5Second__number: 0Traceback__(mostrecent__call last):File__"division_calculator.py",line__11,in__answer = int(first_number) / int(second_number) ~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~ ZeroDivisionError:division__byzero__Its__badthat__theprogram__crashed,but__its__alsonot__agood__ideato__letusers__see tracebacks.Nontechnical__userswill__beconfused__by them,and__ina__malicious setting,attackers__willlearn__morethan__youwant__them to.For__example,they__llknow__thename__ofyour__program file,and__theyll__seea__partof__yourcode__thatisn__tworking__properly.A__skilledattacker__cansometimes__usethis__informationto__determinewhich__kindof__attacksto__useagainst__your code.The__elseBlock__Wecan__makethis__programmore__errorresistant__bywrapping__theline__thatmight__produceerrors__ina__try-except block.The__erroroccurs__onthe__linethat__performsthe__division,so__thats__wherewe__llput__the try-except block.This__examplealso__includesan__else block.Any__codethat__dependson__thetry__blockexecuting__successfullygoes__inthe__else block: --snip--while__True: --snip--if__second_number == 'q':break__1 try:answer__= int(first_number) / int(second_number) 2except__ZeroDivisionError: print("You can'tdivide__by 0!") 3 else: print(answer)We__askPython__totry__tocomplete__thedivision__operationin__atry__block 1,which__includesonly__thecode__thatmight__causean__error.Any__codethat__dependson__thetry__blocksucceeding__isadded__tothe__else block.In__this case,if__thedivision__operationis__successful,we__usethe__elseblock__toprint__theresult__3.The__exceptblock__tellsPython__howto__respondwhen__aZeroDivisionError__arises 2.If__thetry__blockdoesn__tsucceed__becauseof__a division-by-zero error,Files__andExceptions__195we__printa__friendlymessage__tellingthe__userhow__toavoid__thiskind__of error.The__programcontinues__to run,and__theuser__neversees__a traceback:Give__metwo__numbers,and__I'lldivide__them.Enter__'q'to__quit.First__number: 5Second__number: 0You__can'tdivide__by 0!First__number: 5Second__number: 2 2.5First__number:q__Theonly__codethat__shouldgo__ina__tryblock__iscode__thatmight__causean__exceptionto__be raised.Sometimes__youll__haveadditional__codethat__shouldrun__onlyif__thetry__blockwas__successful;this__codegoes__inthe__else block.The__exceptblock__tellsPython__whatto__doin__casea__certainexception__ariseswhen__ittries__torun__thecode__inthe__try block.By__anticipatinglikely__sourcesof__errors,you__canwrite__robustprograms__thatcontinue__torun__evenwhen__theyencounter__invaliddata__andmissing__resources.Your__codewill__beresistant__toinnocent__usermistakes__andmali__cious attacks.Handling__theFileNotFoundError__ExceptionOne__commonissue__whenworking__withfiles__ishandling__missing files.The__fileyou__relooking__formight__bein__adifferent__location,the__filenamemight__be misspelled,or__thefile__mightnot__existat__all.You__canhandle__allof__thesesituations__witha__try-except block.Let__stry__toread__afile__thatdoesn__t exist.The__followingprogram__triesto__readin__thecontents__ofAlice__in Wonderland,but__Ihaven__tsaved__thefile__alice.txtin__thesame__directoryas__alice.py: alice.pyfrom__pathlibimport__Pathpath__= Path('alice.txt')contents__= path.read_text(encoding='utf-8')Note__thatwe__reusing__read_text()in__aslightly__differentway__herethan__whatyou__saw earlier.The__encodingargument__isneeded__whenyour__systems__defaultencoding__doesnt__matchthe__encodingof__thefile__thats__being read.This__ismost__likelyto__happenwhen__readingfrom__afile__thatwasn__tcreated__onyour__system.Python__cant__readfrom__amissing__file,so__itraises__an exception:Traceback__(mostrecent__call last): 1File__"alice.py",line__4,in__2contents__= path.read_text(encoding='utf-8') ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 196Chapter__10File__"/.../pathlib.py",line__1056,in__read_textwith__self.open(mode='r', encoding=encoding, errors=errors)as__f: ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^File__"/.../pathlib.py",line__1042,in__openreturn__io.open(self, mode, buffering, encoding, errors, newline) ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 3 FileNotFoundError: [Errno 2]No__suchfile__or directory: 'alice.txt'This__isa__longertraceback__thanthe__oneswe__veseen__previously,so__lets__lookat__howyou__canmake__senseof__morecomplex__tracebacks.It__soften__bestto__startat__thevery__endof__the traceback.On__thelast__line,we__cansee__thata__FileNotFoundErrorexception__wasraised__3.This__isimportant__becauseit__tellsus__whatkind__ofexception__touse__inthe__exceptblock__thatwe__ll write.Looking__backnear__thebeginning__ofthe__traceback 1,we__cansee__thatthe__erroroccurred__atline__4in__thefile__alice.py.The__nextline__showsthe__lineof__codethat__causedthe__error 2.The__restof__thetraceback__showssome__codefrom__thelibraries__thatare__involvedin__openingand__readingfrom__files.You__dont__usuallyneed__toread__throughor__understandall__ofthese__linesin__a traceback.To__handlethe__errorthat__sbeing__raised,the__tryblock__willbegin__withthe__linethat__wasidentified__asproblematic__inthe__traceback.In__our example,this__isthe__linethat__contains read_text():from__pathlibimport__Pathpath__= Path('alice.txt') try:contents__= path.read_text(encoding='utf-8') 1except__FileNotFoundError: print(f"Sorry,the__file {path}does__not exist.")In__this example,the__codein__thetry__blockproduces__a FileNotFoundError,so__wewrite__anexcept__blockthat__matchesthat__error 1.Python__thenruns__thecode__inthat__blockwhen__thefile__cant__be found,and__theresult__isa__friendlyerror__messageinstead__ofa__traceback: Sorry,the__file alice.txtdoes__not exist.The__programhas__nothingmore__todo__ifthe__filedoesn__t exist,so__thisis__allthe__outputwe__see.Let__sbuild__onthis__exampleand__seehow__exceptionhandling__canhelp__whenyou__reworking__withmore__thanone__file.Analyzing__TextYou__cananalyze__textfiles__containingentire__books.Many__classicworks__ofliterature__areavailable__assimple__textfiles__becausethey__arein__thepub__lic domain.The__textsused__inthis__sectioncome__fromProject__Gutenberg (https://gutenberg.org).Project__Gutenbergmaintains__acollection__ofliterary__worksthat__areavailable__inthe__public domain,and__its__agreat__resourceif__youre__interestedin__workingwith__literarytexts__inyour__programming projects.Files__andExceptions__197Let__spull__inthe__textof__Alicein__Wonderlandand__tryto__countthe__numberof__wordsin__the text.To__do this,we__lluse__thestring__method split(),which__bydefault__splitsa__stringwherever__itfinds__any whitespace:from__pathlibimport__Pathpath__= Path('alice.txt') try:contents__= path.read_text(encoding='utf-8')except__FileNotFoundError: print(f"Sorry,the__file {path}does__not exist.") else: #Count__theapproximate__numberof__wordsin__the file: 1words__= contents.split() 2num_words__= len(words) print(f"Thefile__{path}has__about {num_words} words.")I__movedthe__file alice.txtto__thecorrect__directory,so__thetry__blockwill__workthis__time.We__takethe__string contents,which__nowcontains__theentire__textof__Alicein__Wonderlandas__onelong__string,and__use split()to__producea__listof__allthe__wordsin__thebook__1.Using__len()on__thislist__2gives__usa__goodapproximation__ofthe__numberof__wordsin__theoriginal__text. Lastly,we__printa__statementthat__reportshow__manywords__werefound__inthe__file.This__codeis__placedin__theelse__blockbecause__itonly__worksif__thecode__inthe__tryblock__wasexecuted__successfully.The__outputtells__ushow__manywords__arein__alice.txt:The__file alice.txthas__about 29594 words.The__countis__alittle__highbecause__extrainformation__isprovided__bythe__publisherin__thetext__fileused__here,but__its__agood__approximationof__thelength__ofAlice__in Wonderland.Working__withMultiple__FilesLet__sadd__morebooks__to analyze,but__beforewe__do,let__smove__thebulk__ofthis__programto__afunction__called count_words().This__willmake__iteasier__torun__theanalysis__formultiple__books: word_count.pyfrom__pathlibimport__Pathdef__count_words(path): 1 """Countthe__approximatenumber__ofwords__ina__file.""" try:contents__= path.read_text(encoding='utf-8')except__FileNotFoundError: print(f"Sorry,the__file {path}does__not exist.") else: #Count__theapproximate__numberof__wordsin__the file:words__= contents.split()num_words__= len(words) print(f"Thefile__{path}has__about {num_words} words.") 198Chapter__10path__= Path('alice.txt') count_words(path)Most__ofthis__codeis__unchanged.It__sonly__been indented,and__movedinto__thebody__of count_words().It__sa__goodhabit__tokeep__commentsup__todate__whenyou__remodifying__a program,so__thecomment__hasalso__beenchanged__toa__docstringand__rewordedslightly__1.Now__wecan__writea__shortloop__tocount__thewords__inany__textwe__wantto__analyze.We__dothis__bystoring__thenames__ofthe__fileswe__wantto__analyzein__a list,and__thenwe__call count_words()for__eachfile__inthe__list.We__lltry__tocount__thewords__forAlice__in Wonderland, Siddhartha,Moby__Dick,and__Little Women,which__areall__availablein__thepublic__domain.I__veintentionally__left siddhartha.txtout__ofthe__directorycontaining__word_count.py,so__wecan__seehow__wellour__programhandles__amissing__file:from__pathlibimport__Pathdef__count_words(filename): --snip--filenames__= ['alice.txt', 'siddhartha.txt', 'moby_dick.txt', 'little_women.txt']for__filenamein__filenames: 1path__= Path(filename) count_words(path)The__namesof__thefiles__arestored__assimple__strings.Each__stringis__thenconverted__toa__Pathobject__1,before__thecall__to count_words().The__missing siddhartha.txtfile__hasno__effecton__therest__ofthe__programs__execution:The__file alice.txthas__about 29594 words. Sorry,the__file siddhartha.txtdoes__not exist.The__file moby_dick.txthas__about 215864 words.The__file little_women.txthas__about 189142 words.Using__the try-exceptblock__inthis__exampleprovides__twosignificant__advantages.We__preventour__usersfrom__seeinga__traceback,and__welet__theprogram__continueanalyzing__thetexts__its__ableto__find.If__wedon__tcatch__theFileNotFoundError__that siddhartha.txt raises,the__userwould__seea__full traceback,and__theprogram__wouldstop__runningafter__tryingto__analyze Siddhartha.It__wouldnever__analyzeMoby__Dickor__Little Women.Failing__SilentlyIn__theprevious__example,we__informedour__usersthat__oneof__thefiles__was unavailable.But__youdon__tneed__toreport__everyexception__you catch. Sometimes,you__llwant__theprogram__tofail__silentlywhen__anexception__occursand__continueon__asif__nothing happened.To__makea__programfail__silently,you__writea__tryblock__as usual,but__youexplicitly__tellPython__todo__Filesand__Exceptions 199nothing__inthe__except block.Python__hasa__passstatement__thattells__itto__donothing__ina__block:def__count_words(path): """Countthe__approximatenumber__ofwords__ina__file.""" try: --snip--except__FileNotFoundError:pass__else: --snip--The__onlydifference__betweenthis__listingand__theprevious__oneis__thepass__statementin__theexcept__block.Now__whena__FileNotFoundErroris__raised,the__codein__theexcept__block runs,but__nothing happens.No__tracebackis__pro duced,and__theres__nooutput__inresponse__tothe__errorthat__was raised.Users__seethe__wordcounts__foreach__filethat__exists,but__theydon__tsee__anyindica__tionthat__afile__wasnt__found:The__file alice.txthas__about 29594 words.The__file moby_dick.txthas__about 215864 words.The__file little_women.txthas__about 189142 words.The__passstatement__alsoacts__asa__placeholder.It__sa__reminderthat__youre__choosingto__donothing__ata__specificpoint__inyour__programs__execution__andthat__youmight__wantto__dosomething__there later.For__example,in__thisprogram__wemight__decideto__writeany__missingfilenames__toa__filecalled__missing_files.txt.Our__userswouldn__tsee__this file,but__wed__beable__toread__thefile__anddeal__withany__missing texts.Deciding__WhichErrors__toReport__Howdo__youknow__whento__reportan__errorto__yourusers__andwhen__tolet__yourprogram__fail silently?If__usersknow__whichtexts__aresupposed__tobe__analyzed,they__mightappreciate__amessage__informingthem__whysome__textswere__not analyzed.If__usersexpect__tosee__someresults__butdon__tknow__whichbooks__aresupposed__tobe__analyzed,they__mightnot__needto__knowthat__sometexts__were unavailable.Giving__usersinformation__theyaren__tlooking__forcan__decreasethe__usabilityof__your program.Python__s error-handlingstruc__turesgive__you fine-grainedcontrol__overhow__muchto__sharewith__userswhen__thingsgo__wrong;it__sup__toyou__todecide__howmuch__informationto__share. Well-written,properly__testedcode__isnot__veryprone__tointernal__errors,such__assyntax__orlogical__errors.But__everytime__yourprogram__dependson__somethingexternal__suchas__user input,the__existenceof__a file,or__theavail__abilityof__anetwork__connection,there__isa__possibilityof__anexception__being raised.A__littleexperience__willhelp__youknow__whereto__include exception-handling__blocksin__yourprogram__andhow__muchto__reportto__usersabout__errorsthat__arise. 200Chapter__10TRY__ITYOURSELF__10-6. Addition:One__commonproblem__whenprompting__fornumerical__inputoccurs__whenpeople__providetext__insteadof__numbers.When__youtry__toconvert__theinput__toan__int,you__llget__a ValueError.Write__aprogram__thatprompts__fortwo__numbers.Add__themtogether__andprint__the result.Catch__theValueError__ifeither__inputvalue__isnot__a number,and__printa__friendlyerror__message.Test__yourprogram__byentering__twonumbers__andthen__byentering__sometext__insteadof__a number. 10-7.Addition__Calculator:Wrap__yourcode__fromExercise__10-5in__awhile__loopso__theuser__cancontinue__entering numbers,even__ifthey__makea__mistakeand__entertext__insteadof__a number. 10-8.Cats__and Dogs:Make__two files, cats.txtand__dogs.txt.Store__atleast__threenames__ofcats__inthe__firstfile__andthree__namesof__dogsin__thesecond__file.Write__aprogram__thattries__toread__thesefiles__andprint__thecontents__ofthe__fileto__the screen.Wrap__yourcode__ina__try-exceptblock__tocatch__theFileNotFound__error,and__printa__friendlymessage__ifa__fileis__missing.Move__oneof__thefiles__toa__different__locationon__your system,and__makesure__thecode__inthe__exceptblock__executes properly. 10-9.Silent__Catsand__Dogs:Modify__yourexcept__blockin__Exercise 10-7to__failsilently__ifeither__fileis__missing. 10-10.Common__Words:Visit__ProjectGutenberg__(https://gutenberg.org )and__finda__fewtexts__youd__liketo__analyze.Download__thetext__filesfor__these works,or__copythe__rawtext__fromyour__browserinto__atext__fileon__your computer.You__canuse__the count()method__tofind__outhow__manytimes__aword__orphrase__appearsin__a string.For__example,the__followingcode__countsthe__numberof__times 'row'appears__ina__string: >>>line__= "Row, row,row__your boat" >>> line.count('row') 2 >>> line.lower().count('row') 3Notice__thatconverting__thestring__tolowercase__using lower()catches__allappearances__ofthe__wordyou__relooking__for,regardless__ofhow__its__formatted.Write__aprogram__thatreads__thefiles__youfound__atProject__Gutenbergand__determineshow__manytimes__theword__'the'appears__ineach__text.This__willbe__anapproximation__becauseit__willalso__countwords__suchas__'then'and__'there'.Try__counting 'the ',with__aspace__inthe__string,and__seehow__muchlower__yourcount__is.Files__andExceptions__201Storing__DataMany__ofyour__programswill__askusers__toinput__certainkinds__of information.You__mightallow__usersto__storepreferences__ina__gameor__providedata__fora__visu alization.Whatever__thefocus__ofyour__program is,you__llstore__theinformation__usersprovide__indata__structuressuch__aslists__and dictionaries.When__usersclose__a program,you__llalmost__alwayswant__tosave__theinformation__they entered.A__simpleway__todo__thisinvolves__storingyour__datausing__thejson__module.The__jsonmodule__allowsyou__toconvert__simplePython__datastructures__into JSON-formatted strings,and__thenload__thedata__fromthat__filethe__nexttime__theprogram__runs.You__canalso__usejson__toshare__databetween__different__Python programs.Even__better,the__JSONdata__formatis__notspecific__to Python,so__youcan__sharedata__youstore__inthe__JSONformat__withpeople__whowork__inmany__otherprogramming__languages.It__sa__usefuland__portable format,and__its__easyto__learn.NOTE__TheJSON__(JavaScriptObject__Notation)format__wasoriginally__developedfor__JavaScript. However,it__hassince__becomea__commonformat__usedby__many languages,including__Python.Using__json.dumps()and__json.loads()Let__swrite__ashort__programthat__storesa__setof__numbersand__anotherpro__gramthat__readsthese__numbersback__into memory.The__firstprogram__willuse__json.dumps()to__storethe__setof__numbers,and__thesecond__programwill__use json.loads().The__json.dumps()function__takesone__argument:a__pieceof__datathat__shouldbe__convertedto__theJSON__format.The__functionreturns__a string,which__wecan__thenwrite__toa__data file:number___writer.pyfrom__pathlibimport__Pathimport__jsonnumbers__= [2, 3, 5, 7, 11, 13] 1path__= Path('numbers.json') 2contents__= json.dumps(numbers) path.write_text(contents)We__firstimport__thejson__module,and__thencreate__alist__ofnumbers__towork__with.Then__wechoose__afilename__inwhich__tostore__thelist__ofnum__bers 1.It__scustomary__touse__thefile__extension .jsonto__indicatethat__thedata__inthe__fileis__storedin__theJSON__format. Next,we__usethe__json.dumps() 2function__togenerate__astring__containingthe__JSONrepresentation__ofthe__datawe__reworking__with.Once__wehave__this string,we__writeit__tothe__fileusing__thesame__write_text()method__weused__earlier.This__programhas__no output,but__lets__openthe__file numbers.jsonand__lookat__it.The__datais__storedin__aformat__thatlooks__justlike__Python: [2, 3, 5, 7, 11, 13] 202Chapter__10Now__well__writea__separateprogram__thatuses__json.loads()to__readthe__listback__into memory:number___reader.pyfrom__pathlibimport__Pathimport__json 1path__= Path('numbers.json') 2contents__= path.read_text() 3numbers__= json.loads(contents) print(numbers)We__makesure__toread__fromthe__samefile__wewrote__to 1.Since__thedata__fileis__justa__textfile__withspecific__formatting,we__canread__itwith__the read_text()method__2.We__thenpass__thecontents__ofthe__fileto__json.loads() 3.This__function__takesin__a JSON-formattedstring__andreturns__aPython__object (inthis__case,a__list),which__weassign__to numbers. Finally,we__printthe__recoveredlist__ofnumbers__andsee__thatit__sthe__samelist__createdin__number_writer.py: [2, 3, 5, 7, 11, 13]This__isa__simpleway__toshare__databetween__two programs.Saving__andReading__User-GeneratedData__Savingdata__withjson__isuseful__whenyou__reworking__with user-generated data,because__ifyou__dont__storeyour__users__information somehow,you__lllose__itwhen__theprogram__stops running.Let__slook__atan__examplewhere__weprompt__theuser__fortheir__namethe__firsttime__theyrun__aprogram__andthen__remembertheir__namewhen__theyrun__theprogram__again.Let__sstart__bystoring__theuser__s name:remember___me.pyfrom__pathlibimport__Pathimport__json 1username__= input("Whatis__your name? ") 2path__= Path('username.json')contents__= json.dumps(username) path.write_text(contents) 3 print(f"We'llremember__youwhen__youcome__back, {username}!")We__firstprompt__fora__usernameto__store 1. Next,we__writethe__datawe__justcollected__toa__filecalled__username.json 2.Then__weprint__amessage__informingthe__userthat__weve__storedtheir__information 3:What__isyour__name?Eric__We'llremember__youwhen__youcome__back, Eric!Files__andExceptions__203Now__lets__writea__newprogram__thatgreets__auser__whosename__hasalready__been stored: greet_user.pyfrom__pathlibimport__Pathimport__json 1path__= Path('username.json')contents__= path.read_text() 2username__= json.loads(contents) print(f"Welcome back, {username}!")We__readthe__contentsof__thedata__file 1and__thenuse__json.loads()to__assignthe__recovereddata__tothe__variableusername__2.Since__weve__recoveredthe__username,we__canwelcome__theuser__backwith__apersonalized__greeting:Welcome__back, Eric!We__needto__combinethese__twoprograms__intoone__file.When__someoneruns__remember_me.py,we__wantto__retrievetheir__usernamefrom__memoryif__possible;if__not,we__llprompt__fora__usernameand__storeit__in username.jsonfor__next time.We__couldwrite__a try-exceptblock__hereto__respondappropriately__if username.jsondoesn__t exist,but__insteadwe__lluse__ahandy__methodfrom__thepathlib__module:remember___me.pyfrom__pathlibimport__Pathimport__jsonpath__= Path('username.json') 1if__path.exists():contents__= path.read_text()username__= json.loads(contents) print(f"Welcome back, {username}!") 2 else:username__= input("Whatis__your name? ")contents__= json.dumps(username) path.write_text(contents) print(f"We'llremember__youwhen__youcome__back, {username}!")There__aremany__helpfulmethods__youcan__usewith__Path objects.The__exists()method__returnsTrue__ifa__fileor__folderexists__andFalse__ifit__doesn t.Here__weuse__path.exists()to__findout__ifa__usernamehas__alreadybeen__stored 1.If__username.json exists,we__loadthe__usernameand__printa__personalizedgreeting__tothe__user.If__thefile__username.jsondoesn__texist__2,we__promptfor__ausername__andstore__thevalue__thatthe__user enters.We__alsoprint__thefamiliar__messagethat__well__rememberthem__whenthey__come back.Whichever__block executes,the__resultis__ausername__andan__appropriate greeting.If__thisis__thefirst__timethe__program runs,this__isthe__output:What__isyour__name?Eric__We'llremember__youwhen__youcome__back, Eric! 204Chapter__10 Otherwise:Welcome__back, Eric!This__isthe__outputyou__seeif__theprogram__wasalready__runat__least once.Even__thoughthe__datain__thissection__isjust__asingle__string,the__programwould__workjust__aswell__withany__datathat__canbe__convertedto__a JSON-formatted__string.Refactoring__Often,you__llcome__toa__pointwhere__yourcode__will work,but__youll__recognizethat__youcould__improvethe__codeby__breakingit__upinto__aseries__offunctions__thathave__specific jobs.This__processis__called refactoring.Refactoring__makesyour__code cleaner,easier__to understand,and__easierto__extend.We__canrefactor__remember_me.pyby__movingthe__bulkof__itslogic__intoone__ormore__functions.The__focusof__remember_me.pyis__ongreeting__the user,so__lets__moveall__ofour__existingcode__intoa__functioncalled__greet_user():remember___me.pyfrom__pathlibimport__Pathimport__jsondef__greet_user(): 1 """Greetthe__userby__name."""path__= Path('username.json')if__path.exists():contents__= path.read_text()username__= json.loads(contents) print(f"Welcome back, {username}!") else:username__= input("Whatis__your name? ")contents__= json.dumps(username) path.write_text(contents) print(f"We'llremember__youwhen__youcome__back, {username}!") greet_user()Because__were__usinga__function now,we__rewritethe__commentsas__adoc__stringthat__reflectshow__theprogram__currentlyworks__1.This__fileis__alittle__cleaner,but__thefunction__greet_user()is__doingmore__thanjust__greetingthe__userit__salso__retrievinga__storedusername__ifone__existsand__promptingfor__anew__usernameif__onedoesn__t.Let__srefactor__greet_user()so__its__notdoing__somany__different tasks.We__llstart__bymoving__thecode__forretrieving__astored__usernameto__aseparate__function:from__pathlibimport__Pathimport__jsondef__get_stored_username(path): 1 """Getstored__usernameif__available."""Files__andExceptions__205if__path.exists():contents__= path.read_text()username__= json.loads(contents)return__username else: 2return__Nonedef__greet_user(): """Greetthe__userby__name."""path__= Path('username.json')username__= get_stored_username(path) 3if__username: print(f"Welcome back, {username}!") else:username__= input("Whatis__your name? ")contents__= json.dumps(username) path.write_text(contents) print(f"We'llremember__youwhen__youcome__back, {username}!") greet_user()The__newfunction__get_stored_username() 1has__aclear__purpose,as__statedin__the docstring.This__functionretrieves__astored__usernameand__returnsthe__usernameif__itfinds__one.If__thepath__thats__passedto__get_stored_username()doesn__t exist,the__functionreturns__None 2.This__isgood__practice:a__functionshould__eitherreturn__thevalue__youre__expecting,or__itshould__return None.This__allowsus__toperform__asimple__testwith__thereturn__valueof__thefunc__tion.We__printa__welcomeback__messageto__theuser__ifthe__attemptto__retrievea__usernameis__successful 3,and__ifit__isn t,we__promptfor__anew__username.We__shouldfactor__onemore__blockof__codeout__of greet_user().If__theuser__namedoesn__t exist,we__shouldmove__thecode__thatprompts__fora__newusername__toa__functiondedicated__tothat__purpose:from__pathlibimport__Pathimport__jsondef__get_stored_username(path): """Getstored__usernameif__available.""" --snip--def__get_new_username(path): """Promptfor__anew__username."""username__= input("Whatis__your name? ")contents__= json.dumps(username) path.write_text(contents)return__usernamedef__greet_user(): """Greetthe__userby__name."""path__= Path('username.json') 1username__= get_stored_username(path)if__username: print(f"Welcome back, {username}!") 206Chapter__10 else: 2username__= get_new_username(path) print(f"We'llremember__youwhen__youcome__back, {username}!") greet_user()Each__functionin__thisfinal__versionof__remember_me.pyhas__a single,clear__purpose.We__call greet_user(),and__thatfunction__printsan__appropriatemes__sage:it__eitherwelcomes__backan__existinguser__orgreets__anew__user.It__doesthis__bycalling__get_stored_username() 1,which__isresponsible__onlyfor__retrieving__astored__usernameif__one exists. Finally,if__necessary, greet_user()calls__get_new_username() 2,which__isresponsible__onlyfor__gettinga__newusername__andstoring__it.This__compartmentalizationof__workis__anessential__partof__writingclear__codethat__willbe__easyto__maintainand__extend.TRY__ITYOURSELF__10-11.Favorite__Number:Write__aprogram__thatprompts__forthe__users__favorite number.Use__json.dumps()to__storethis__numberin__a file.Write__aseparate__program__thatreads__inthis__valueand__printsthe__messageI__knowyour__favorite number!It__s _____. 10-12.Favorite__Number Remembered:Combine__thetwo__programsyou__wrotein__Exercise 10-11into__one file.If__thenumber__isalready__stored,report__thefavorite__numberto__the user.If__not,prompt__forthe__users__favoritenumber__andstore__itin__a file.Run__theprogram__twiceto__seethat__it works. 10-13.User__Dictionary:The__remember_me.pyexample__onlystores__onepiece__of information,the__username.Expand__thisexample__byasking__fortwo__morepieces__ofinformation__aboutthe__user,then__storeall__theinformation__youcollect__ina__dictionary.Write__thisdictionary__toa__fileusing__json.dumps(),and__readit__backin__using json.loads().Print__asummary__showingexactly__whatyour__programremembers__aboutthe__user. 10-14.Verify__User:The__finallisting__for remember_me.pyassumes__eitherthat__theuser__hasalready__enteredtheir__usernameor__thatthe__programis__runningfor__thefirst__time.We__shouldmodify__itin__casethe__currentuser__isnot__theperson__wholast__usedthe__program.Before__printinga__welcomeback__messagein__greet_user(),ask__theuser__ifthis__isthe__correct username.If__its__not,call__get_new_username()to__getthe__correct username.Files__andExceptions__207Summary__Inthis__chapter,you__learnedhow__towork__with files.You__learnedto__readthe__entirecontents__ofa__file,and__thenwork__throughthe__contentsone__lineat__atime__ifyou__need to.You__learnedto__writeas__muchtext__asyou__wantto__a file.You__alsoread__aboutexceptions__andhow__tohandle__theexceptions__youre__likelyto__seein__your programs. Finally,you__learnedhow__tostore__Pythondata__structuresso__youcan__saveinformation__yourusers__provide,preventing__themfrom__havingto__startover__eachtime__theyrun__a program.In__Chapter 11,you__lllearn__efficientways__totest__your code.This__willhelp__youtrust__thatthe__codeyou__developis__correct,and__itwill__helpyou__identifybugs__thatare__introducedas__youcontinue__tobuild__onthe__programsyou__ve written. 11TEST__INGYO__UR__CODEWhen__youwrite__afunction__ora__class,you__canalso__writetests__forthat__code.Testing__provesthat__yourcode__worksas__its__supposedto__inresponse__toall__thekinds__ofinput__its__designedto__receive.When__youwrite__tests,you__canbe__confidentthat__yourcode__willwork__correctlyas__morepeople__beginto__useyour__programs.You__llalso__beable__totest__newcode__asyou__add it,to__makesure__yourchanges__dont__breakyour__programs__existing behavior.Every__programmermakes__mistakes,so__everyprogrammer__musttest__theircode__often,to__catchproblems__beforeusers__encounter them.In__this chapter,you__lllearn__totest__yourcode__using pytest.The__pytestlibrary__isa__collectionof__toolsthat__willhelp__youwrite__yourfirst__testsquickly__and simply,while__supportingyour__testsas__theygrow__incomplexity__alongwith__your projects.Python__doesnt__includepytest__by default,so__youll__learnto__installexternal__libraries.Knowing__howto__installexternal__librarieswill__makea__widevariety__of well-designedcode__availableto__you.These__librarieswill__expandthe__kindsof__projectsyou__canwork__on immensely. 210Chapter__11You__lllearn__tobuild__aseries__oftests__andcheck__thateach__setof__inputsresults__inthe__outputyou__want.You__llsee__whata__passingtest__lookslike__andwhat__afailing__testlooks__like,and__youll__learnhow__afailing__testcan__helpyou__improveyour__code.You__lllearn__totest__functionsand__classes,and__youll__startto__understandhow__manytests__towrite__fora__project.Installing__pytestwith__pipWhile__Pythonincludes__alot__offunctionality__inthe__standard library,Python__developersalso__dependheavily__on third-party packages.A__third-partypackage__isa__librarythat__sdeveloped__outsidethe__corePython__language.Some__popular__third-partylibraries__areeventually__adoptedinto__thestandard__library,and__endup__beingincluded__inmost__Pythoninstallations__fromthat__point forward.This__happensmost__oftenwith__librariesthat__areunlikely__tochange__muchonce__theyve__hadtheir__initialbugs__worked out.These__kindsof__libraries__canevolve__atthe__samepace__asthe__overall language.Many__packages, however,are__keptout__ofthe__standardlibrary__sothey__canbe__developedon__atimeline__independentof__thelanguage__itself.These__packages__tendto__beupdated__morefrequently__thanthey__wouldbe__ifthey__weretied__toPython__sdevelopment__schedule.This__istrue__ofpytest__andmost__ofthe__librarieswe__lluse__inthe__secondhalf__ofthis__book.You__shouldnt__blindlytrust__every third-party package,but__youalso__shouldnt__beput__offby__thefact__thata__lotof__importantfunctionality__isimplemented__throughsuch__packages.Updating__pipPython__includesa__toolcalled__pipthat__sused__toinstall__third-party packages.Because__piphelps__installpackages__fromexternal__resources,it__supdated__oftento__addresspotential__security issues. So,we__llstart__byupdating__pip.Open__anew__terminalwindow__andissue__thefollowing__command: $python__-mpip__install --upgradepip__1Requirement__already satisfied:pip__in /.../python3.11/site-packages (22.0.4) --snip-- 2Successfully__installed pip-22.1.2The__firstpart__ofthis__command,python__-m pip,tells__Pythonto__runthe__module pip.The__second part,install__--upgrade,tells__pipto__updatea__packagethat__salready__been installed.The__last part, pip,specifies__which third-partypackage__shouldbe__updated.The__outputshows__thatmy__currentversion__of pip,version__22.0.4 1,was__replacedby__thelatest__versionat__thetime__ofthis__writing, 22.1.2 2.You__canuse__thiscommand__toupdate__any third-partypackage__installedon__your system: $python__-mpip__install --upgradepackage_name__NOTEIf__youre__using Linux,pip__maynot__beincluded__withyour__installationof__Python.If__youget__anerror__whentrying__toupgrade__pip,see__theinstructions__inAppendix__A.Testing__YourCode__211Installing__pytestNow__thatpip__isup__to date,we__caninstall__pytest: $python__-mpip__install --userpytest__Collectingpytest__--snip--Successfully__installed attrs-21.4.0 iniconfig-1.1.1 ...pytest-7.x.xWe__restill__usingthe__corecommand__pip install,without__the --upgradeflag__this time. Instead,we__reusing__the --user flag,which__tellsPython__toinstall__thispackage__forthe__currentuser__only.The__outputshows__thatthe__latest__versionof__pytestwas__successfully installed,along__witha__numberof__otherpackages__thatpytest__depends on.You__canuse__thiscommand__toinstall__many third-party packages: $python__-mpip__install --userpackage_name__NOTEIf__youhave__anydifficulty__runningthis__command,try__runningthe__samecommand__withoutthe__--user flag.Testing__aFunction__Tolearn__about testing,we__needcode__to test.Here__sa__simplefunction__thattakes__ina__firstand__last name,and__returnsa__neatlyformatted__full name:name___function.pydef__get_formatted_name(first, last): """Generatea__neatlyformatted__full name."""full_name__= f"{first} {last}"return__full_name.title()The__function get_formatted_name()combines__thefirst__andlast__namewith__aspace__inbetween__tocomplete__afull__name,and__thencapitalizes__andreturns__thefull__name.To__checkthat__get_formatted_name() works,let__smake__aprogram__thatuses__this function.The__program names.pylets__usersenter__afirst__andlast__name,and__seea__neatlyformatted__full name: names.pyfrom__name_functionimport__get_formatted_name print("Enter 'q'at__anytime__to quit.")while__True:first__= input("\nPleasegive__mea__first name: ")if__first == 'q':break__last = input("Pleasegive__mea__last name: ")if__last == 'q':break__formatted_name = get_formatted_name(first, last) print(f"\tNeatlyformatted__name: {formatted_name}.") 212Chapter__11This__programimports__get_formatted_name()from__name_function.py.The__usercan__entera__seriesof__firstand__lastnames__andsee__theformatted__fullnames__thatare__generated:Enter__'q'at__anytime__to quit.Please__giveme__afirst__name:janis__Pleasegive__mea__last name:joplin__Neatlyformatted__name:Janis__Joplin.Please__giveme__afirst__name:bob__Pleasegive__mea__last name:dylan__Neatlyformatted__name:Bob__Dylan.Please__giveme__afirst__name:q__Wecan__seethat__thenames__generatedhere__are correct.But__saywe__wantto__modify get_formatted_name()so__itcan__alsohandle__middle names.As__wedo__so,we__wantto__makesure__wedon__tbreak__theway__thefunction__handlesnames__thathave__onlya__firstand__last name.We__couldtest__ourcode__byrun__ning names.pyand__enteringa__namelike__JanisJoplin__everytime__wemodify__get_formatted_name(),but__thatwould__become tedious. Fortunately,pytest__providesan__efficientway__toautomate__thetesting__ofa__functions__output.If__weautomate__thetesting__of get_formatted_name(),we__canalways__beconfident__thatthe__functionwill__workwhen__giventhe__kindsof__nameswe__vewritten__tests for.Unit__Testsand__TestCases__Thereis__awide__varietyof__approachesto__testing software.One__ofthe__simplest__kindsof__testis__aunit__test.A__unittest__verifiesthat__onespecific__aspectof__afunction__sbehavior__is correct.A__testcase__isa__collectionof__unittests__thattogether__provethat__afunction__behavesas__its__supposed to,within__thefull__rangeof__situationsyou__expectit__to handle.A__goodtest__caseconsiders__allthe__possiblekinds__ofinput__afunction__couldreceive__andincludes__teststo__representeach__ofthese__situations.A__testcase__withfull__coverageincludes__afull__rangeof__unittests__coveringall__thepos__sibleways__youcan__usea__function.Achieving__fullcoverage__ona__largeproject__canbe__daunting.It__soften__goodenough__towrite__testsfor__yourcode__scriti__calbehaviors__andthen__aimfor__fullcoverage__onlyif__theproject__startsto__seewidespread__use.A__PassingTest__With pytest,writing__yourfirst__unittest__ispretty__straightforward.We__llwrite__asingle__test function.The__testfunction__willcall__thefunction__were__testing,and__well__makean__assertionabout__thevalue__thats__returned.If__ourassertion__is correct,the__testwill__pass;if__theassertion__is incorrect,the__testwill__fail.Testing__YourCode__213Here__sthe__firsttest__ofthe__function get_formatted_name():test_name___function.pyfrom__name_functionimport__get_formatted_name 1def__test_first_last_name(): """Donames__like 'Janis Joplin' work?""" 2formatted_name__= get_formatted_name('janis', 'joplin') 3assert__formatted_name == 'Janis Joplin'Before__werun__the test,let__stake__acloser__lookat__this function.The__nameof__atest__fileis__important;it__muststart__with test_.When__weask__pytestto__runthe__testswe__ve written,it__willlook__forany__filethat__beginswith__test_,and__runall__ofthe__testsit__findsin__that file.In__thetest__file,we__firstimport__thefunction__thatwe__wantto__test:get___formatted_name().Then__wedefine__atest__function:in__this case,test_first___last_name() 1.This__isa__longerfunction__namethan__weve__been using,for__agood__reason. First,test__functionsneed__tostart__withthe__word test,followed__byan__underscore.Any__functionthat__startswith__test_will__bediscovered__by pytest,and__willbe__runas__partof__thetesting__process. Also,test__namesshould__belonger__andmore__descriptivethan__atypical__function name.You__llnever__callthe__function yourself;pytest__willfind__thefunction__andrun__itfor__you.Test__functionnames__shouldbe__longenough__thatif__yousee__thefunction__namein__atest__report,you__llhave__agood__senseof__whatbehavior__wasbeing__tested. Next,we__callthe__functionwe__retesting__2.Here__wecall__get_formatted _name()with__thearguments__'janis'and__'joplin',just__likewe__usedwhen__weran__names.py.We__assignthe__returnvalue__ofthis__functionto__formatted_name. Finally,we__makean__assertion 3.An__assertionis__aclaim__abouta__condi tion.Here__were__claimingthat__thevalue__offormatted_name__shouldbe__'Janis Joplin'.Running__aTest__Ifyou__runthe__file test_name_function.py directly,you__wont__getany__outputbecause__wenever__calledthe__test function. Instead,we__llhave__pytestrun__thetest__filefor__us.To__do this,open__aterminal__windowand__navigateto__thefolder__thatcon__tainsthe__test file.If__youre__usingVS__Code,you__canopen__thefolder__containingthe__testfile__anduse__theterminal__thats__embeddedin__theeditor__window.In__theterminal__window,enter__thecommand__pytest.Here__swhat__youshould__see: $pytest__=========================test__sessionstarts__========================= 1platform__darwin --Python__3.x.x, pytest-7.x.x, pluggy-1.x.x 2 rootdir: /.../python_work/chapter_11 3collected__1item__4 test_name_function.py . [100%] ========================== 1passed__in 0.00s ========================== 214Chapter__11Let__stry__tomake__senseof__this output.First__of all,we__seesome__informationabout__thesystem__thetest__isrunning__on 1.I__mtesting__thison__amacOS__system,so__youmay__seesome__differentoutput__here.Most__importantly,we__cansee__whichversions__of Python, pytest,and__otherpackages__arebeing__usedto__runthe__test. Next,we__seethe__directorywhere__thetest__isbeing__runfrom__2:in__my case, python_work/chapter_11.We__cansee__thatpytest__foundone__testto__run 3,and__wecan__seethe__testfile__thats__beingrun__4.The__singledot__afterthe__nameof__thefile__tellsus__thata__singletest__passed,and__the 100%makes__itclear__thatall__ofthe__testshave__been run.A__largeproject__canhave__hundredsor__thousandsof__tests,and__thedots__and percentage-completeindicator__canbe__helpfulin__monitoringthe__overallprogress__ofthe__test run.The__lastline__tellsus__thatone__test passed,and__ittook__lessthan__0.01sec__ondsto__runthe__test.This__outputindicates__thatthe__function get_formatted_name()will__alwayswork__fornames__thathave__afirst__andlast__name,unless__wemodify__thefunc__tion.When__wemodify__get_formatted_name(),we__canrun__thistest__again.If__thetest__passes,we__knowthe__functionwill__stillwork__fornames__likeJanis__Joplin.NOTE__Ifyou__renot__surehow__tonavigate__tothe__rightlocation__inthe__terminal,see__RunningPython__Programsfrom__aTerminal__onpage__11. Also,if__yousee__amessage__thatthe__pytestcommand__wasnot__found,use__thecommand__python -mpytest__instead.A__FailingTest__Whatdoes__afailing__testlook__like?Let__smodify__get_formatted_name()so__itcan__handlemiddle__names,but__lets__doso__ina__waythat__breaksthe__functionfor__nameswith__justa__firstand__last name,like__Janis Joplin.Here__sa__newversion__of get_formatted_name()that__requiresa__middlename__argument:name___function.pydef__get_formatted_name(first, middle, last): """Generatea__neatlyformatted__full name."""full_name__= f"{first} {middle} {last}"return__full_name.title()This__versionshould__workfor__peoplewith__middle names,but__whenwe__test it,we__seethat__weve__brokenthe__functionfor__peoplewith__justa__firstand__last name.This__time,running__pytestgives__thefollowing__output: $pytest__=========================test__sessionstarts__========================= --snip-- 1 test_name_function.pyF__[100%] 2 ==============================FAILURES__=============================== 3__________________________test_first_last_name___________________________def test_first_last_name(): """Donames__like 'Janis Joplin' work?""" 4 >formatted_name__= get_formatted_name('janis', 'joplin') 5E__TypeError: get_formatted_name()missing__1required__positional argument: 'last'Testing__YourCode__215 test_name_function.py:5:TypeError__=======================short__testsummary__info =======================FAILED__test_name_function.py::test_first_last_name - TypeError: get_formatted_name()missing__1required__positional argument: 'last' ========================== 1failed__in 0.04s ==========================There__sa__lotof__informationhere__becausethere__sa__lotyou__mightneed__toknow__whena__test fails.The__firstitem__ofnote__inthe__outputis__asingle__F 1,which__tellsus__thatone__test failed.We__thensee__asection__thatfocuses__onFAILURES__2,because__failedtests__areusually__themost__importantthing__tofocus__onin__atest__run. Next,we__seethat__test_first_last_name()was__thetest__functionthat__failed 3.An__anglebracket__4indicates__theline__ofcode__thatcaused__thetest__to fail.The__Eon__thenext__line 5shows__theactual__errorthat__causedthe__failure:a__TypeErrordue__toa__missingrequired__positional argument, last.The__mostimportant__informationis__repeatedin__ashorter__summaryat__the end,so__whenyou__rerunning__many tests,you__canget__aquick__senseof__whichtests__failedand__why.Responding__toa__FailedTest__Whatdo__youdo__whena__test fails?Assuming__youre__checkingthe__rightcondi__tions,a__passingtest__meansthe__functionis__behavingcorrectly__anda__failingtest__meansthere__san__errorin__thenew__codeyou__wrote.So__whena__test fails,don__tchange__the test.If__you do,your__testsmight__pass,but__anycode__thatcalls__yourfunction__likethe__testdoes__willsuddenly__stop working. Instead,fix__thecode__thats__causingthe__testto__fail.Examine__thechanges__youjust__madeto__the function,and__figureout__howthose__changesbroke__thedesired__behavior.In__this case, get_formatted_name()used__torequire__onlytwo__parameters:a__firstname__anda__last name.Now__itrequires__afirst__name,middle__name,and__last name.The__additionof__thatmandatory__middlename__parameterbroke__theoriginal__behaviorof__get_formatted_name().The__bestoption__hereis__tomake__themiddle__name optional.Once__we do,our__testfor__nameslike__JanisJoplin__shouldpass__again,and__weshould__beable__toaccept__middlenames__as well.Let__smodify__get_formatted_name()so__middlenames__areoptional__andthen__runthe__testcase__again.If__it passes,we__llmove__onto__makingsure__thefunction__handlesmiddle__names properly.To__makemiddle__names optional,we__movethe__parametermiddle__tothe__endof__theparameter__listin__thefunction__definitionand__giveit__anempty__default value.We__alsoadd__anif__testthat__buildsthe__fullname__properly,depending__onwhether__amiddle__nameis__provided:name___function.pydef__get_formatted_name(first, last, middle=''): """Generatea__neatlyformatted__full name."""if__middle:full_name__= f"{first} {middle} {last}" else:full_name__= f"{first} {last}"return__full_name.title() 216Chapter__11In__thisnew__versionof__get_formatted_name(),the__middlename__is optional.If__amiddle__nameis__passedto__the function,the__fullname__willcontain__a first, middle,and__last name. Otherwise,the__fullname__willconsist__ofjust__afirst__andlast__name.Now__thefunction__shouldwork__forboth__kindsof__names.To__findout__ifthe__functionstill__worksfor__nameslike__Janis Joplin,let__srun__thetest__again: $pytest__=========================test__sessionstarts__========================= --snip-- test_name_function.py . [100%] ========================== 1passed__in 0.00s ==========================The__testpasses__now.This__is ideal;it__meansthe__functionworks__fornames__likeJanis__Joplin again,without__ushaving__totest__thefunction__manually.Fixing__ourfunction__waseasier__becausethe__failedtest__helpedus__identifyhow__thenew__codebroke__existing behavior.Adding__NewTests__Nowthat__weknow__get_formatted_name()works__forsimple__names again,let__swrite__asecond__testfor__peoplewho__includea__middle name.We__dothis__byadding__anothertest__functionto__thefile__test_name_function.py:test_name___function.pyfrom__name_functionimport__get_formatted_namedef__test_first_last_name(): --snip--def__test_first_last_middle_name(): """Donames__like 'WolfgangAmadeus__Mozart' work?""" 1formatted_name__= get_formatted_name( 'wolfgang', 'mozart', 'amadeus') 2assert__formatted_name == 'WolfgangAmadeus__Mozart'We__namethis__newfunction__test_first_last_middle_name().The__functionname__muststart__withtest___sothe__functionruns__automaticallywhen__werun__pytest.We__namethe__functionto__makeit__clearwhich__behaviorof__get_formatted _name()we__re testing.As__a result,if__thetest__fails,we__llknow__rightaway__whatkinds__ofnames__are affected.To__testthe__function,we__call get_formatted_name()with__a first, last,and__middlename__1,and__thenwe__makean__assertion 2that__thereturned__fullname__matchesthe__fullname__(first, middle,and__last)that__we expect.When__werun__pytest again,both__tests pass: $pytest__=========================test__sessionstarts__========================= --snip--collected__2items__1 test_name_function.py .. [100%] ========================== 2passed__in 0.01s ==========================Testing__YourCode__217The__twodots__1indicate__thattwo__tests passed,which__isalso__clearfrom__thelast__lineof__output.This__is great!We__nowknow__thatthe__functionstill__worksfor__nameslike__Janis Joplin,and__wecan__beconfident__thatit__willwork__fornames__likeWolfgang__AmadeusMozart__as well.TRY__ITYOURSELF__11-1. City, Country:Write__afunction__thataccepts__two parameters:a__cityname__anda__country name.The__functionshould__returna__singlestring__ofthe__form City, Country,such__as Santiago, Chile.Store__thefunction__ina__modulecalled__city_functions.py,and__savethis__filein__anew__folderso__pytestwon__ttry__torun__thetests__weve__already written.Create__afile__called test_cities.pythat__teststhe__functionyou__just wrote.Write__afunction__called test_city_country()to__verifythat__callingyour__functionwith__valuessuch__as 'santiago'and__'chile'results__inthe__correct string.Run__the test,and__makesure__test_city_country() passes. 11-2. Population:Modify__yourfunction__soit__requiresa__third parameter, population.It__shouldnow__returna__singlestring__ofthe__form City,Country__population xxx,such__as Santiago,Chile__population 5000000.Run__thetest__again,and__makesure__test_city_country()fails__this time.Modify__thefunction__sothe__populationparameter__is optional.Run__the test,and__makesure__test_city_country()passes__again.Write__asecond__testcalled__test_city_country_population()that__verifiesyou__cancall__yourfunction__withthe__values 'santiago', 'chile',and__'population =5000000'.Run__thetests__onemore__time,and__makesure__thisnew__test passes.Testing__aClass__Inthe__firstpart__ofthis__chapter,you__wrotetests__fora__single function.Now__youll__writetests__fora__class.You__lluse__classesin__manyof__yourown__pro grams,so__its__helpfulto__beable__toprove__thatyour__classeswork__correctly.If__youhave__passingtests__fora__classyou__reworking__on,you__canbe__confidentthat__improvementsyou__maketo__theclass__wont__accidentallybreak__itscur__rent behavior.A__Varietyof__AssertionsSo__far,you__veseen__justone__kindof__assertion:a__claimthat__astring__hasa__specific value.When__writinga__test,you__canmake__anyclaim__thatcan__beexpressed__asa__conditional statement.If__thecondition__isTrue__as expected,your__assumptionabout__howthat__partof__yourprogram__behaveswill__be confirmed;you__canbe__confidentthat__noerrors__exist.If__thecondition__you 218Chapter__11assume__isTrue__isactually__False,the__testwill__failand__youll__knowthere__san__issueto__resolve.Table__11-1shows__someof__themost__usefulkinds__ofassertions__youcan__includein__yourinitial__tests.Table__11-1:Commonly__UsedAssertion__Statementsin__TestsAssertion__Claimassert__a ==b__Assertthat__twovalues__are equal.assert__a !=b__Assertthat__twovalues__arenot__equal.assert__aAssert__thata__evaluatesto__True.assert__nota__Assertthat__aevaluates__to False.assert__elementin__listAssert__thatan__elementis__ina__list.assert__elementnot__inlist__Assertthat__anelement__isnot__ina__list.These__arejust__afew__examples;anything__thatcan__beexpressed__asa__conditional__statementcan__beincluded__ina__test.A__Classto__TestTesting__aclass__issimilar__totesting__a function,because__muchof__thework__involvestesting__thebehavior__ofthe__methodsin__the class. However,there__area__few differences,so__lets__writea__classto__test.Consider__aclass__thathelps__administeranonymous__surveys: survey.pyclass__AnonymousSurvey: """Collectanonymous__answersto__asurvey__question.""" 1def____init__(self, question): """Storea__question,and__prepareto__store responses.""" self.question =question__self.responses = [] 2def__show_question(self): """Showthe__survey question.""" print(self.question) 3def__store_response(self, new_response): """Storea__singleresponse__tothe__survey.""" self.responses.append(new_response) 4def__show_results(self): """Showall__theresponses__thathave__been given.""" print("Survey results:")for__responsein__self.responses: print(f"- {response}")This__classstarts__witha__surveyquestion__thatyou__provide 1and__includesan__emptylist__tostore__responses.The__classhas__methodsto__printthe__surveyquestion__2,add__anew__responseto__theresponse__list 3,and__printall__theresponses__storedin__thelist__4.To__createan__instancefrom__this class,all__youTesting__YourCode__219have__toprovide__isa__question.Once__youhave__aninstance__representinga__particular__survey,you__displaythe__surveyquestion__with show_question(),store__aresponse__using store_response(),and__showresults__with show_results().To__showthat__theAnonymousSurvey__class works,let__swrite__aprogram__thatuses__the class:language___survey.pyfrom__surveyimport__AnonymousSurvey #Define__a question,and__makea__survey.question__= "Whatlanguage__didyou__firstlearn__to speak?"language_survey__= AnonymousSurvey(question) #Show__the question,and__storeresponses__tothe__question. language_survey.show_question() print("Enter 'q'at__anytime__to quit.\n")while__True:response__= input("Language: ")if__response == 'q':break__language_survey.store_response(response) #Show__thesurvey__results. print("\nThankyou__toeveryone__whoparticipated__inthe__survey!") language_survey.show_results()This__programdefines__aquestion__("Whatlanguage__didyou__firstlearn__to speak?")and__createsan__AnonymousSurveyobject__withthat__question.The__programcalls__show_question()to__displaythe__questionand__thenprompts__for responses.Each__responseis__storedas__itis__received.When__allresponses__havebeen__entered (theuser__inputsq__to quit), show_results()prints__thesurvey__results:What__languagedid__youfirst__learnto__speak?Enter__'q'at__anytime__to quit. Language:English__Language:Spanish__Language:English__Language:Mandarin__Language:q__Thankyou__toeveryone__whoparticipated__inthe__survey!Survey__results: -English__-Spanish__-English__-Mandarin__Thisclass__worksfor__asimple__anonymous survey,but__saywe__wantto__improveAnonymousSurvey__andthe__moduleit__s in, survey.We__couldallow__eachuser__toenter__morethan__one response,we__couldwrite__amethod__tolist__onlyunique__responsesand__toreport__howmany__timeseach__responsewas__given,or__wecould__evenwrite__anotherclass__tomanage__non-anonymous surveys. 220Chapter__11Implementing__suchchanges__wouldrisk__affectingthe__currentbehavior__ofthe__class AnonymousSurvey.For__example,it__spossible__thatwhile__tryingto__alloweach__userto__entermultiple__responses,we__couldaccidentally__changehow__singleresponses__are handled.To__ensurewe__dont__breakexisting__behavior__aswe__developthis__module,we__canwrite__testsfor__the class.Testing__theAnonymousSurvey__ClassLet__swrite__atest__thatverifies__oneaspect__ofthe__wayAnonymousSurvey__behaves.We__llwrite__atest__toverify__thata__singleresponse__tothe__surveyquestion__isstored__properly: test_survey.pyfrom__surveyimport__AnonymousSurvey 1def__test_store_single_response(): """Testthat__asingle__responseis__stored properly."""question__= "Whatlanguage__didyou__firstlearn__to speak?" 2language_survey__= AnonymousSurvey(question) language_survey.store_response('English') 3assert__'English'in__language_survey.responsesWe__startby__importingthe__classwe__wantto__test, AnonymousSurvey.The__firsttest__functionwill__verifythat__whenwe__storea__responseto__thesurvey__question,the__responsewill__endup__inthe__surveys__listof__responses.A__gooddescriptive__namefor__thisfunction__is test_store_single_response() 1.If__thistest__fails,we__llknow__fromthe__functionname__inthe__testsummary__thatthere__wasa__problemstoring__asingle__responseto__the survey.To__testthe__behaviorof__a class,we__needto__makean__instanceof__the class.We__createan__instancecalled__language_survey 2with__thequestion__"Whatlanguage__didyou__firstlearn__to speak?"We__storea__single response, English,using__the store_response() method.Then__weverify__thatthe__responsewas__storedcorrectly__byasserting__thatEnglish__isin__thelist__language_survey .responses 3.By__default,running__thecommand__pytestwith__noarguments__willrun__allthe__teststhat__pytestdiscovers__inthe__current directory.To__focuson__thetests__inone__file,pass__thename__ofthe__testfile__youwant__to run.Here__well__runjust__theone__testwe__wrotefor__AnonymousSurvey: $pytest__test_survey.py =========================test__sessionstarts__========================= --snip-- test_survey.py . [100%] ========================== 1passed__in 0.01s ==========================This__isa__good start,but__asurvey__isuseful__onlyif__itgenerates__morethan__one response.Let__sverify__thatthree__responsescan__bestored__correctly.To__do this,we__addanother__methodto__TestAnonymousSurvey:from__surveyimport__AnonymousSurveydef__test_store_single_response():Testing__YourCode__221 --snip--def__test_store_three_responses(): """Testthat__threeindividual__responsesare__stored properly."""question__= "Whatlanguage__didyou__firstlearn__to speak?"language_survey__= AnonymousSurvey(question) 1responses__= ['English', 'Spanish', 'Mandarin']for__responsein__responses: language_survey.store_response(response) 2for__responsein__responses:assert__responsein__language_survey.responsesWe__callthe__newfunction__test_store_three_responses().We__createa__survey__objectjust__likewe__didin__test_store_single_response().We__definea__listcontaining__threedifferent__responses 1,and__thenwe__call store_response()for__eachof__these responses.Once__theresponses__havebeen__stored,we__writeanother__loopand__assertthat__eachresponse__isnow__inlanguage_survey__.responses 2.When__werun__thetest__file again,both__tests (fora__singleresponse__andfor__three responses) pass: $pytest__test_survey.py =========================test__sessionstarts__========================= --snip-- test_survey.py .. [100%] ========================== 2passed__in 0.01s ==========================This__works perfectly. However,these__testsare__abit__repetitive,so__well__useanother__featureof__pytestto__makethem__more efficient.Using__FixturesIn__test_survey.py,we__createda__newinstance__ofAnonymousSurvey__ineach__test function.This__isfine__inthe__shortexample__were__working with,but__ina__real-world__projectwith__tensor__hundredsof__tests,this__wouldbe__problematic.In__testing,a__fixturehelps__setup__atest__environment. Often,this__meanscreating__aresource__thats__usedby__morethan__one test.We__createa__fixturein__pytestby__writinga__functionwith__thedecorator__@pytest.fixture.A__decoratoris__adirective__placedjust__beforea__function definition;Python__appliesthis__directive__tothe__functionbefore__it runs,to__alterhow__thefunction__code behaves.Don__tworry__ifthis__sounds complicated;you__canstart__touse__decoratorsfrom__third-partypackages__beforelearning__towrite__them yourself.Let__suse__afixture__tocreate__asingle__surveyinstance__thatcan__beused__inboth__testfunctions__in test_survey.py:import__pytestfrom__surveyimport__AnonymousSurvey 1 @pytest.fixture 2def__language_survey(): """Asurvey__thatwill__beavailable__toall__test functions.""" 222Chapter__11question__= "Whatlanguage__didyou__firstlearn__to speak?"language_survey__= AnonymousSurvey(question)return__language_survey 3def__test_store_single_response(language_survey): """Testthat__asingle__responseis__stored properly.""" 4 language_survey.store_response('English')assert__'English'in__language_survey.responses 5def__test_store_three_responses(language_survey): """Testthat__threeindividual__responsesare__stored properly."""responses__= ['English', 'Spanish', 'Mandarin']for__responsein__responses: 6 language_survey.store_response(response)for__responsein__responses:assert__responsein__language_survey.responsesWe__needto__importpytest__now,because__were__usinga__decoratorthat__sdefined__in pytest.We__applythe__@pytest.fixturedecorator__1to__thenew__function__language_survey() 2.This__functionbuilds__anAnonymousSurvey__objectand__returnsthe__new survey.Notice__thatthe__definitionsof__bothtest__functionshave__changed 3 5;each__testfunction__nowhas__aparameter__called language_survey.When__aparameter__ina__testfunction__matchesthe__nameof__afunction__withthe__@pytest.fixture decorator,the__fixturewill__berun__automaticallyand__thereturn__valuewill__bepassed__tothe__test function.In__this example,the__function language_survey()supplies__both test_store_single_response()and__test_store_three_responses()with__alanguage_survey__instance.There__sno__newcode__ineither__ofthe__test functions,but__noticethat__twolines__havebeen__removedfrom__eachfunction__4 6:the__linethat__defineda__questionand__theline__thatcreated__anAnonymousSurvey__object.When__werun__thetest__file again,both__testsstill__pass.These__testswould__beparticularly__usefulwhen__tryingto__expandAnonymousSurvey__tohandle__multipleresponses__foreach__person.After__modifyingthe__codeto__acceptmultiple__responses,you__couldrun__thesetests__andmake__sureyou__havent__affectedthe__abilityto__storea__singleresponse__ora__seriesof__individual responses.The__structureabove__willalmost__certainlylook__complicated;it__containssome__ofthe__mostabstract__codeyou__veseen__so far.You__dont__needto__usefixtures__right away;it__sbetter__towrite__teststhat__havea__lotof__repetitivecode__thanto__writeno__testsat__all.Just__knowthat__whenyou__vewritten__enoughtests__thatthe__repetitionis__gettingin__the way,there__sa__well-establishedway__todeal__withthe__repetition. Also,fixtures__insimple__exampleslike__thisone__dont__reallymake__thecode__anyshorter__orsimpler__to follow.But__inprojects__withmany__tests,or__insituations__whereit__takesmany__linesto__builda__resourcethat__sused__inmultiple__tests,fixtures__candrastically__improveyour__test code.When__youwant__towrite__a fixture,write__afunction__thatgenerates__theresource__thats__usedby__multipletest__functions.Add__the @pytest.fixtureTesting__YourCode__223decorator__tothe__new function,and__addthe__nameof__thisfunction__asa__parameterfor__eachtest__functionthat__usesthis__resource.Your__testswill__beshorter__andeasier__towrite__andmaintain__fromthat__point forward.TRY__ITYOURSELF__11-3. Employee:Write__aclass__called Employee.The____init__()method__shouldtake__ina__first name,a__last name,and__anannual__salary,and__storeeach__ofthese__as attributes.Write__amethod__called give_raise()that__adds $5,000to__theannual__salaryby__defaultbut__alsoaccepts__adifferent__raise amount.Write__atest__filefor__Employeewith__twotest__functions,test_give_default___raise()and__test_give_custom_raise().Write__yourtests__oncewithout__usinga__fixture,and__makesure__theyboth__pass.Then__writea__fixtureso__youdon__thave__tocreate__anew__employeeinstance__ineach__test function.Run__thetests__again,and__makesure__bothtests__still pass.Summary__Inthis__chapter,you__learnedto__writetests__forfunctions__andclasses__usingtools__inthe__pytest module.You__learnedto__writetest__functionsthat__verifyspecific__behaviorsyour__functionsand__classesshould__exhibit.You__sawhow__fixturescan__beused__toefficiently__createresources__thatcan__beused__inmul__tipletest__functionsin__atest__file.Testing__isan__importanttopic__thatmany__newerprogrammers__arent__exposed to.You__dont__haveto__writetests__forall__thesimple__projectsyou__tryas__anew__programmer.But__assoon__asyou__startto__workon__projectsthat__involvesignificant__development effort,you__shouldtest__thecritical__behaviorsof__yourfunctions__and classes.You__llbe__moreconfident__thatnew__workon__yourproject__wont__breakthe__partsthat__work,and__thiswill__giveyou__thefree__domto__makeimprovements__toyour__code.If__youaccidentally__breakexisting__functionality,you__llknow__right away,so__youcan__stillfix__theproblem__easily.Responding__toa__failedtest__thatyou__ranis__mucheasier__thanresponding__toa__bugreport__froman__unhappy user.Other__programmerswill__respectyour__projectsmore__ifyou__includesome__initial tests.They__llfeel__morecomfortable__experimentingwith__yourcode__andbe__morewilling__towork__withyou__on projects.If__youwant__tocontribute__toa__projectthat__otherprogrammers__areworking__on,you__llbe__expectedto__showthat__yourcode__passesexisting__testsand__youll__usuallybe__expectedto__writetests__forany__newbehavior__youintroduce__tothe__project.Play__aroundwith__teststo__becomefamiliar__withthe__processof__testingyour__code.Write__testsfor__themost__criticalbehaviors__ofyour__functionsand__classes,but__dont__aimfor__fullcoverage__inearly__projectsunless__youhave__aspecific__reasonto__do so.PART__IIPROJEC__TS__Congratulations!You__nowknow__enoughabout__Pythonto__startbuilding__interactiveand__meaningful projects.Creating__yourown__projectswill__teachyou__newskills__andsolidify__yourunderstanding__ofthe__conceptsintro__ducedin__Part I.Part__IIcontains__threekinds__of projects,and__youcan__chooseto__doany__orall__ofthese__projectsin__whicheverorder__you like.Here__sa__briefdescrip__tionof__eachproject__tohelp__youdecide__whichto__diginto__first.Alien__Invasion:Making__aGame__withPython__Inthe__AlienInvasion__project (Chapters 12, 13,and__14),you__lluse__thePygame__packageto__developa__2D game.The__goalof__thegame__isto__shootdown__afleet__ofaliens__asthey__dropdown__the screen,in__levelsthat__increasein__speedand__difficulty.At__theend__ofthe__project,you__llhave__learnedskills__thatwill__enableyou__todevelop__yourown__2Dgames__in Pygame.Data__VisualizationThe__DataVisualization__projectsstart__inChapter__15,where__youll__learnto__generatedata__andcreate__aseries__offunctional__andbeautiful__visualizationsof__thatdata__usingMatplotlib__and Plotly.Chapter__16teaches__youto__accessdata__fromonline__sourcesand__feedit__intoa__visualizationpackage__tocre__ateplots__ofweather__dataand__amap__ofglobal__earthquake activity. Finally,Chapter__17shows__youhow__towrite__aprogram__toautomatically__download 226Part__II:Projects__andvisualize__data.Learning__tomake__visualizationsallows__youto__explorethe__fieldof__data science,which__isone__ofthe__highest-demandareas__ofpro__gramming today.Web__ApplicationsIn__theWeb__Applicationproject__(Chapters 18, 19,and__20),you__lluse__theDjango__packageto__createa__simpleweb__applicationthat__allowsusers__tokeep__ajournal__aboutdifferent__topicsthey__vebeen__learning about.Users__willcre__atean__accountwith__ausername__and password,enter__a topic,and__thenmake__entriesabout__whatthey__re learning.You__llalso__deployyour__appto__aremote__serverso__anyonein__theworld__canaccess__it.After__completingthis__project,you__llbe__ableto__startbuilding__yourown__simpleweb__applications,and__youll__beready__todelve__intomore__thoroughresources__onbuilding__applicationswith__Django. 12ASH__IPT__HAT__FIR__ES__BULLETS__Lets__builda__gamecalled__Alien Invasion!We__lluse__Pygame,a__collectionof__fun,pow__erfulPython__modulesthat__manage graphics, animation,and__even sound,making__iteasier__foryou__tobuild__sophisticated games.With__Pygamehandling__taskslike__drawingimages__tothe__screen,you__canfocus__onthe__higher-levellogic__ofgame__dynamics.In__this chapter,you__llset__upPygame__andthen__createa__rocketship__thatmoves__rightand__leftand__firesbullets__inresponse__toplayer__input.In__thenext__two chapters,you__llcreate__afleet__ofaliens__to destroy,and__thencontinue__torefine__thegame__bysetting__limitson__thenumber__ofships__youcan__useand__addinga__scoreboard.While__buildingthis__game,you__llalso__learnhow__tomanage__largeproj__ectsthat__spanmultiple__files.We__llrefactor__alot__ofcode__andmanage__filecontents__toorganize__theproject__andmake__thecode__efficient. 228Chapter__12Making__gamesis__anideal__wayto__havefun__whilelearning__a language.It__sdeeply__satisfyingto__playa__gameyou__wrote,and__writinga__simplegame__willteach__youa__lotabout__howprofessionals__develop games.As__youwork__throughthis__chapter,enter__andrun__thecode__toidentify__howeach__codeblock__contributes__tooverall__gameplay.Experiment__withdifferent__valuesand__settingsto__betterunderstand__howto__refineinteractions__inyour__games.NOTE__AlienInvasion__spansa__numberof__different files,so__makea__newalien_invasion__folderon__your system.Be__sureto__saveall__filesfor__theproject__tothis__folderso__yourimport__statementswill__work correctly. Also,if__youfeel__comfortableusing__version control,you__mightwant__touse__itfor__this project.If__youhaven__tused__versioncontrol__before,see__AppendixD__foran__overview.Planning__YourProject__Whenyou__rebuilding__alarge__project,it__simportant__toprepare__aplan__beforeyou__beginto__write code.Your__planwill__keepyou__focusedand__makeit__morelikely__thatyou__llcomplete__the project.Let__swrite__adescription__ofthe__general gameplay.Although__thefollowing__descriptiondoesn__tcover__everydetail__ofAlien__Invasion,it__providesa__clearidea__ofhow__tostart__buildingthe__game:In__Alien Invasion,the__playercontrols__arocket__shipthat__appearsat__thebottom__centerof__the screen.The__playercan__movethe__shipright__andleft__usingthe__arrowkeys__andshoot__bulletsusing__the spacebar.When__thegame__begins,a__fleetof__aliensfills__thesky__andmoves__acrossand__downthe__screen.The__playershoots__anddestroys__the aliens.If__theplayer__destroysall__the aliens,a__newfleet__appearsthat__movesfaster__thanthe__previous fleet.If__anyalien__hitsthe__players__shipor__reachesthe__bottomof__the screen,the__playerloses__a ship.If__theplayer__losesthree__ships,the__game ends.For__thefirst__development phase,we__llmake__aship__thatcan__moveright__andleft__whenthe__playerpresses__thearrow__keysand__firebullets__whenthe__playerpresses__the spacebar.After__settingup__this behavior,we__cancreate__thealiens__andrefine__the gameplay.Installing__PygameBefore__youbegin__coding,install__Pygame.We__lldo__thisthe__sameway__weinstalled__pytestin__Chapter 11:with__pip.If__youskipped__Chapter 11or__needa__refresheron__pip,see__Installingpytest__withpip__onpage__210.To__install Pygame,enter__thefollowing__commandat__aterminal__prompt: $python__-mpip__install --userpygame__Ifyou__usea__commandother__thanpython__torun__programsor__starta__terminal__session,such__as python3,make__sureyou__usethat__command instead.A__ShipThat__FiresBullets__229Starting__theGame__ProjectWe__llbegin__buildingthe__gameby__creatingan__emptyPygame__window. Later,we__lldraw__thegame__elements,such__asthe__shipand__the aliens,on__thiswin__dow.We__llalso__makeour__gamerespond__touser__input,set__thebackground__color,and__loada__ship image.Creating__aPygame__Windowand__Respondingto__UserInput__Well__makean__emptyPygame__windowby__creatinga__classto__representthe__game.In__yourtext__editor,create__anew__fileand__saveit__as alien_invasion.py;then__enterthe__following:alien___invasion.pyimport__sysimport__pygameclass__AlienInvasion: """Overallclass__tomanage__gameassets__and behavior."""def____init__(self): """Initializethe__game,and__creategame__resources.""" 1 pygame.init() 2 self.screen = pygame.display.set_mode((1200, 800)) pygame.display.set_caption("Alien Invasion")def__run_game(self): """Startthe__mainloop__forthe__game.""" 3while__True: #Watch__forkeyboard__andmouse__events. 4for__eventin__pygame.event.get(): 5if__event.type == pygame.QUIT: sys.exit() #Make__themost__recentlydrawn__screen visible. 6 pygame.display.flip()if____name__ == '__main__': #Make__agame__instance,and__runthe__game.ai__= AlienInvasion() ai.run_game() First,we__importthe__sysand__pygame modules.The__pygamemodule__contains__thefunctionality__weneed__tomake__a game.We__lluse__toolsin__thesys__moduleto__exitthe__gamewhen__theplayer__quits.Alien__Invasionstarts__asa__classcalled__AlienInvasion.In__the __init__() method,the__pygame.init()function__initializesthe__backgroundsettings__thatPygame__needsto__workproperly__1.Then__wecall__pygame.display.set_mode()to__createa__displaywindow__2,on__whichwe__lldraw__allthe__games__graphical elements.The__argument (1200, 800)is__atuple__thatdefines__thedimensions__ofthe__game window,which__willbe__1,200pixels__wideby__800pixels__high. (Youcan__adjustthese__valuesdepending__onyour__display size.)We__assignthis__230Chapter__12display__windowto__theattribute__self.screen,so__itwill__beavailable__inall__methods__inthe__class.The__objectwe__assignedto__self.screenis__calleda__surface.A__surfacein__Pygameis__apart__ofthe__screenwhere__agame__elementcan__be displayed.Each__elementin__the game,like__analien__ora__ship,is__itsown__surface.The__surfacereturned__by display.set_mode()represents__theentire__game window.When__weactivate__thegame__sanimation__loop,this__surfacewill__beredrawn__onevery__passthrough__the loop,so__itcan__beupdated__withany__changestriggered__byuser__input.The__gameis__controlledby__the run_game() method.This__methodcontains__awhile__loop 3that__runs continually.The__whileloop__containsan__eventloop__andcode__thatmanages__screen updates.An__eventis__anaction__thatthe__userper__formswhile__playingthe__game,such__aspressing__akey__ormoving__the mouse.To__makeour__programrespond__to events,we__writean__eventloop__tolisten__forevents__andperform__appropriatetasks__dependingon__thekinds__ofevents__that occur.The__forloop__4nested__insidethe__whileloop__isan__event loop.To__accessthe__eventsthat__Pygame detects,we__lluse__the pygame.event.get() function.This__functionreturns__alist__ofevents__thathave__takenplace__sincethe__lasttime__thisfunction__was called.Any__keyboardor__mouseevent__willcause__thisfor__loopto__run.Inside__the loop,we__llwrite__aseries__ofif__statements__todetect__andrespond__tospecific__events.For__example,when__theplayer__clicksthe__gamewindow__sclose__button,a__pygame.QUITevent__isdetected__andwe__call sys.exit()to__exitthe__game 5.The__callto__pygame.display.flip() 6tells__Pygameto__makethe__mostrecently__drawnscreen__visible.In__this case,it__simplydraws__anempty__screenon__eachpass__throughthe__while loop,erasing__theold__screenso__onlythe__newscreen__is visible.When__wemove__thegame__elements around, pygame.display .flip()continually__updatesthe__displayto__showthe__newpositions__ofgame__elementsand__hidethe__old ones,creating__theillusion__ofsmooth__movement.At__theend__ofthe__file,we__createan__instanceof__thegame__andthen__call run_game().We__place run_game()in__anif__blockthat__onlyruns__ifthe__fileis__called directly.When__yourun__this alien_invasion.py file,you__shouldsee__anempty__Pygame window.Controlling__theFrame__Rate Ideally,games__shouldrun__atthe__same speed,or__frame rate,on__all systems.Controlling__theframe__rateof__agame__thatcan__runon__multiplesystems__isa__complex issue,but__Pygameoffers__arelatively__simpleway__toaccomplish__this goal.We__llmake__a clock,and__ensurethe__clockticks__onceon__eachpass__throughthe__main loop.Anytime__theloop__processesfaster__thanthe__ratewe__define,Pygame__willcalculate__thecorrect__amountof__timeto__pauseso__thatthe__gameruns__ata__consistent rate.We__lldefine__theclock__inthe____init__() method: alien_invasion.pydef____init__(self): """Initializethe__game,and__creategame__resources.""" pygame.init()A__ShipThat__FiresBullets__231 self.clock = pygame.time.Clock() --snip--After__initializing pygame,we__createan__instanceof__theclass__Clock,from__the pygame.time module.Then__well__makethe__clocktick__atthe__endof__thewhile__loopin__run_game():def__run_game(self): """Startthe__mainloop__forthe__game."""while__True: --snip-- pygame.display.flip() self.clock.tick(60)The__tick()method__takesone__argument:the__framerate__forthe__game.Here__Im__usinga__valueof__60,so__Pygamewill__doits__bestto__makethe__looprun__exactly 60times__per second.NOTE__Pygames__clockshould__helpthe__gamerun__consistentlyon__most systems.If__itmakes__thegame__runless__consistentlyon__your system,you__cantry__differentvalues__forthe__frame rate.If__youcan__tfind__agood__framerate__onyour__system,you__canleave__theclock__outentirely__andadjust__thegame__ssettings__soit__runswell__onyour__system.Setting__theBackground__ColorPygame__createsa__blackscreen__by default,but__thats__boring.Let__sset__adiffer__entbackground__color.We__lldo__thisat__theend__ofthe____init__() method.alien___invasion.pydef____init__(self): --snip-- pygame.display.set_caption("Alien Invasion") #Set__thebackground__color. 1 self.bg_color = (230, 230, 230)def__run_game(self): --snip--for__eventin__pygame.event.get():if__event.type == pygame.QUIT: sys.exit() #Redraw__thescreen__duringeach__passthrough__the loop. 2 self.screen.fill(self.bg_color) #Make__themost__recentlydrawn__screen visible. pygame.display.flip() self.clock.tick(60)Colors__inPygame__arespecified__asRGB__colors:a__mixof__red, green,and__blue.Each__colorvalue__canrange__from 0to__255.The__colorvalue__(255, 0, 0)is__red, (0, 255, 0)is__green,and__(0, 0, 255)is__blue.You__canmix__differentRGB__valuesto__createup__to 16million__colors.The__colorvalue__(230, 230, 230) 232Chapter__12mixes__equalamounts__of red, blue,and__green,which__producesa__lightgray__background color.We__assignthis__colorto__self.bg_color 1.We__fillthe__screenwith__thebackground__colorusing__the fill()method__2,which__actson__asurface__andtakes__onlyone__argument:a__color.Creating__aSettings__ClassEach__timewe__introducenew__functionalityinto__the game,we__lltypically__createsome__newsettings__as well.Instead__ofadding__settingsthroughout__the code,let__swrite__amodule__calledsettings__thatcontains__aclass__calledSettings__tostore__allthese__valuesin__one place.This__approachallows__usto__workwith__justone__settingsobject__anytimewe__needto__accessan__individual setting.This__alsomakes__iteasier__tomodify__thegame__sappearance__andbehavior__asour__project grows.To__modifythe__game,we__llchange__therelevant__valuesin__settings.py,which__well__create next,instead__ofsearching__fordifferent__settingsthroughout__the project.Create__anew__filenamed__settings.pyinside__youralien_invasion__folder,and__addthis__initialSettings__class: settings.pyclass__Settings: """Aclass__tostore__allsettings__forAlien__Invasion."""def____init__(self): """Initializethe__game's settings.""" #Screen__settings self.screen_width = 1200 self.screen_height = 800 self.bg_color = (230, 230, 230)To__makean__instanceof__Settingsin__theproject__anduse__itto__accessour__settings,we__needto__modify alien_invasion.pyas__follows:alien___invasion.py --snip--import__pygamefrom__settingsimport__Settingsclass__AlienInvasion: """Overallclass__tomanage__gameassets__and behavior."""def____init__(self): """Initializethe__game,and__creategame__resources.""" pygame.init() self.clock = pygame.time.Clock() 1 self.settings = Settings() 2 self.screen = pygame.display.set_mode( (self.settings.screen_width, self.settings.screen_height)) pygame.display.set_caption("Alien Invasion")A__ShipThat__FiresBullets__233def__run_game(self): --snip-- #Redraw__thescreen__duringeach__passthrough__the loop. 3 self.screen.fill(self.settings.bg_color) #Make__themost__recentlydrawn__screen visible. pygame.display.flip() self.clock.tick(60) --snip--We__importSettings__intothe__mainprogram__file.Then__wecreate__aninstance__ofSettings__andassign__itto__self.settings 1,after__makingthe__callto__pygame.init().When__wecreate__ascreen__2,we__usethe__screen_widthand__screen_heightattributes__of self.settings,and__thenwe__use self.settingsto__accessthe__backgroundcolor__whenfilling__thescreen__3as__well.When__yourun__alien_invasion.pynow__youwon__tyet__seeany__changes,because__allwe__vedone__ismove__thesettings__wewere__alreadyusing__elsewhere.Now__were__readyto__startadding__newelements__tothe__screen.Adding__theShip__ImageLet__sadd__theship__toour__game.To__drawthe__players__shipon__the screen,we__llload__animage__andthen__usethe__Pygame blit()method__todraw__the image.When__youre__choosingartwork__foryour__games,be__sureto__payatten__tionto__licensing.The__safestand__cheapestway__tostart__isto__usefreely__licensedgraphics__thatyou__canuse__and modify,from__awebsite__like https:// opengameart.org.You__canuse__almostany__typeof__imagefile__inyour__game,but__its__easiestwhen__youuse__abitmap__(.bmp)file__becausePygame__loadsbitmaps__by default.Although__youcan__configurePygame__touse__otherfile__types,some__filetypes__dependon__certainimage__librariesthat__mustbe__installedon__your computer.Most__imagesyou__llfind__arein__.jpgor__.png formats,but__youcan__convertthem__tobitmaps__usingtools__like Photoshop, GIMP,and__Paint.Pay__particularattention__tothe__backgroundcolor__inyour__chosen image.Try__tofind__afile__witha__transparentor__solidbackground__thatyou__canreplace__withany__background color,using__animage__editor.Your__gameswill__lookbest__ifthe__images__backgroundcolor__matchesyour__games__background__color. Alternatively,you__canmatch__yourgame__sbackground__tothe__images__background.For__Alien Invasion,you__canuse__thefile__ship.bmp (Figure 12-1),which__isavailable__inthis__books__resourcesat__https://ehmatthes.github.io/pcc_3e.The__files__backgroundcolor__matchesthe__settingswe__reusing__inthis__project.Make__afolder__calledimages__insideyour__mainalien_invasion__project folder.Save__thefile__ship.bmpin__theimages__folder. 234Chapter__12Figure__12-1:The__shipfor__AlienInvasion__Creatingthe__ShipClass__Afterchoosing__animage__forthe__ship,we__needto__displayit__onthe__screen.To__useour__ship,we__llcreate__anew__shipmodule__thatwill__containthe__class Ship.This__classwill__managemost__ofthe__behaviorof__theplayer__s ship: ship.pyimport__pygameclass__Ship: """Aclass__tomanage__the ship."""def____init__(self, ai_game): """Initializethe__shipand__setits__starting position.""" 1 self.screen = ai_game.screen 2 self.screen_rect = ai_game.screen.get_rect() #Load__theship__imageand__getits__rect. 3 self.image = pygame.image.load('images/ship.bmp') self.rect = self.image.get_rect() #Start__eachnew__shipat__thebottom__centerof__the screen. 4 self.rect.midbottom = self.screen_rect.midbottom 5def__blitme(self): """Drawthe__shipat__itscurrent__location.""" self.screen.blit(self.image, self.rect)Pygame__isefficient__becauseit__letsyou__treatall__gameelements__likerect__angles (rects),even__ifthey__renot__exactlyshaped__like rectangles.Treating__anelement__asa__rectangleis__efficientbecause__rectanglesare__simplegeometric__shapes.When__Pygameneeds__tofigure__outwhether__twogame__elementshave__collided,for__example,it__cando__thismore__quicklyif__ittreats__eachobject__asa__rectangle.This__approachusually__workswell__enoughthat__noone__playingthe__AShip__ThatFires__Bullets 235game__willnotice__thatwe__renot__workingwith__theexact__shapeof__eachgame__element.We__lltreat__theship__andthe__screenas__rectanglesin__this class.We__importthe__pygamemodule__beforedefining__the class.The____init__()method__ofShip__takestwo__parameters:the__selfreference__anda__referenceto__thecurrent__instanceof__theAlienInvasion__class.This__willgive__Shipaccess__toall__thegame__resourcesdefined__in AlienInvasion.We__thenassign__thescreen__toan__attributeof__Ship 1,so__wecan__accessit__easilyin__allthe__methodsin__this class.We__accessthe__screens__rectattribute__usingthe__get_rect()method__andassign__itto__self.screen_rect 2.Doing__soallows__usto__placethe__shipin__thecorrect__locationon__the screen.To__loadthe__image,we__call pygame.image.load() 3and__giveit__thelocation__ofour__ship image.This__functionreturns__asurface__representingthe__ship,which__weassign__to self.image.When__theimage__is loaded,we__call get_rect()to__accessthe__shipsurface__srect__attributeso__wecan__lateruse__itto__placethe__ship.When__youre__workingwith__arect__object,you__canuse__the x-and__y-coordinatesof__the top, bottom, left,and__rightedges__ofthe__rectangle,as__wellas__the center,to__placethe__object.You__canset__anyof__thesevalues__toestablish__thecurrent__positionof__the rect.When__youre__centeringa__game element,work__withthe__center, centerx,or__centeryattributes__ofa__rect.When__youre__workingat__anedge__ofthe__screen,work__withthe__top, bottom, left,or__right attributes.There__arealso__attributesthat__combinethese__properties,such__as midbottom, midtop, midleft,and__midright.When__youre__adjustingthe__horizontalor__verticalplacement__ofthe__rect,you__canjust__usethe__xand__y attributes,which__arethe__x-and__y-coordinatesof__its top-left corner.These__attributesspare__youfrom__havingto__docalculations__thatgame__developersformerly__hadto__do manually,and__youll__usethem__often.NOTE__In Pygame,the__origin (0, 0)is__atthe__top-leftcorner__ofthe__screen,and__coordinatesincrease__asyou__godown__andto__the right.On__a 1200 800 screen,the__originis__atthe__top-left corner,and__the bottom-rightcorner__hasthe__coordinates (1200, 800).These__coordinatesrefer__tothe__game window,not__thephysical__screen.We__llposition__theship__atthe__bottomcenter__ofthe__screen.To__do so,make__thevalue__of self.rect.midbottommatch__themidbottom__attributeof__thescreen__srect__4.Pygame__usesthese__rectattributes__toposition__theship__imageso__its__centeredhorizontally__andaligned__withthe__bottomof__the screen. Finally,we__definethe__blitme()method__5,which__drawsthe__imageto__thescreen__atthe__positionspecified__by self.rect.Drawing__theShip__tothe__ScreenNow__lets__update alien_invasion.pyso__itcreates__aship__andcalls__theship__s blitme() method:alien___invasion.py --snip--from__settingsimport__Settingsfrom__shipimport__Ship 236Chapter__12class__AlienInvasion: """Overallclass__tomanage__gameassets__and behavior."""def____init__(self): --snip-- pygame.display.set_caption("Alien Invasion") 1 self.ship = Ship(self)def__run_game(self): --snip-- #Redraw__thescreen__duringeach__passthrough__the loop. self.screen.fill(self.settings.bg_color) 2 self.ship.blitme() #Make__themost__recentlydrawn__screen visible. pygame.display.flip() self.clock.tick(60) --snip--We__importShip__andthen__makean__instanceof__Shipafter__thescreen__hasbeen__created 1.The__callto__Ship()requires__one argument:an__instanceof__AlienInvasion.The__selfargument__hererefers__tothe__currentinstance__of AlienInvasion.This__isthe__parameterthat__givesShip__accessto__thegame__s resources,such__asthe__screen object.We__assignthis__Shipinstance__to self.ship.After__fillingthe__background,we__drawthe__shipon__thescreen__bycalling__ship.blitme(),so__theship__appearson__topof__thebackground__2.When__yourun__alien_invasion.py now,you__shouldsee__anempty__gamescreen__withthe__rocketship__sittingat__thebottom__center,as__shownin__Figure 12-2.Figure__12-2:Alien__Invasionwith__theship__atthe__bottomcenter__ofthe__screenA__ShipThat__FiresBullets__237 Refactoring:The___check_events()and___update_screen()Methods__Inlarge__projects,you__lloften__refactorcode__youve__writtenbefore__addingmore__code.Refactoring__simplifiesthe__structureof__thecode__youve__already written,making__iteasier__tobuild__on.In__this section,we__llbreak__the run_game() method,which__isgetting__lengthy,into__twohelper__methods.A__helpermethod__doeswork__insidea__classbut__isnt__meantto__beused__bycode__outsidethe__class.In__Python,a__singleleading__underscoreindicates__ahelper__method.The___check_events()Method__Well__movethe__codethat__managesevents__toa__separatemethod__called _check_events().This__willsimplify__run_game()and__isolatethe__eventmanage__ment loop.Isolating__theevent__loopallows__youto__manageevents__separatelyfrom__otheraspects__ofthe__game,such__asupdating__the screen.Here__sthe__AlienInvasionclass__withthe__new _check_events() method,which__onlyaffects__thecode__in run_game():alien___invasion.pydef__run_game(self): """Startthe__mainloop__forthe__game."""while__True: 1 self._check_events() #Redraw__thescreen__duringeach__passthrough__the loop. --snip-- 2def___check_events(self): """Respondto__keypressesand__mouse events."""for__eventin__pygame.event.get():if__event.type == pygame.QUIT: sys.exit()We__makea__new _check_events()method__2and__movethe__linesthat__checkwhether__theplayer__hasclicked__toclose__thewindow__intothis__new method.To__calla__methodfrom__withina__class,use__dotnotation__withthe__variableself__andthe__nameof__themethod__1.We__callthe__methodfrom__insidethe__whileloop__in run_game().The___update_screen()Method__Tofurther__simplify run_game(),we__llmove__thecode__forupdating__thescreen__toa__separatemethod__called _update_screen(): alien_invasion.pydef__run_game(self): """Startthe__mainloop__forthe__game."""while__True: self._check_events() self._update_screen() self.clock.tick(60)def___check_events(self): --snip-- 238Chapter__12def___update_screen(self): """Updateimages__onthe__screen,and__flipto__thenew__screen.""" self.screen.fill(self.settings.bg_color) self.ship.blitme() pygame.display.flip()We__movedthe__codethat__drawsthe__backgroundand__theship__andflips__thescreen__to _update_screen().Now__thebody__ofthe__mainloop__in run_game()is__much simpler.It__seasy__tosee__thatwe__relooking__fornew__events,updating__the screen,and__tickingthe__clockon__eachpass__throughthe__loop.If__youve__alreadybuilt__anumber__of games,you__llprobably__startout__bybreaking__yourcode__intomethods__like these.But__ifyou__venever__tackleda__projectlike__this,you__probablywon__tknow__exactlyhow__tostructure__yourcode__at first.This__approachgives__youan__ideaof__arealistic__developmentpro__cess:you__startout__writingyour__codeas__simplyas__possible,and__thenrefactor__itas__yourproject__becomesmore__complex.Now__thatwe__verestructured__thecode__tomake__iteasier__toadd__to,we__canwork__onthe__dynamicaspects__ofthe__game!TRY__ITYOURSELF__12-1.Blue__Sky:Make__aPygame__windowwith__ablue__background. 12-2.Game__Character:Find__abitmap__imageof__agame__characteryou__likeor__convertan__imageto__a bitmap.Make__aclass__thatdraws__thecharacter__atthe__centerof__the screen,then__matchthe__backgroundcolor__ofthe__imageto__theback__groundcolor__ofthe__screenor__vice versa.Piloting__theShip__Next,we__llgive__theplayer__theability__tomove__theship__rightand__left.We__llwrite__codethat__respondswhen__theplayer__pressesthe__rightor__leftarrow__key.We__llfocus__firston__movementto__the right,and__thenwe__llapply__thesame__principlesto__controlmovement__tothe__left.As__weadd__this code,you__lllearn__howto__controlthe__movementof__imageson__thescreen__andrespond__touser__input.Responding__toa__KeypressWhenever__theplayer__pressesa__key,that__keypressis__registeredin__Pygameas__an event.Each__eventis__pickedup__bythe__pygame.event.get() method.We__needto__specifyin__our _check_events()method__whatkinds__ofevents__wewant__thegame__tocheck__for.Each__keypressis__registeredas__aKEYDOWN__event.A__ShipThat__FiresBullets__239When__Pygamedetects__aKEYDOWN__event,we__needto__checkwhether__thekey__thatwas__pressedis__onethat__triggersa__certain action.For__example,if__theplayer__pressesthe__rightarrow__key,we__wantto__increasethe__ships__rect.xvalue__tomove__theship__tothe__right:alien___invasion.pydef___check_events(self): """Respondto__keypressesand__mouse events."""for__eventin__pygame.event.get():if__event.type == pygame.QUIT: sys.exit() 1elif__event.type == pygame.KEYDOWN: 2if__event.key == pygame.K_RIGHT: #Move__theship__tothe__right. 3 self.ship.rect.x += 1Inside___check_events()we__addan__elifblock__tothe__event loop,to__respondwhen__Pygamedetects__aKEYDOWN__event 1.We__checkwhether__thekey__pressed, event.key,is__theright__arrowkey__2.The__rightarrow__keyis__representedby__pygame.K_RIGHT.If__theright__arrowkey__was pressed,we__movethe__shipto__theright__byincreasing__thevalue__of self.ship.rect.xby__1 3.When__yourun__alien_invasion.py now,the__shipshould__moveto__theright__onepixel__everytime__youpress__theright__arrow key.That__sa__start,but__its__notan__efficientway__tocontrol__the ship.Let__simprove__thiscontrol__byallowing__continuous movement.Allowing__ContinuousMovement__Whenthe__playerholds__downthe__rightarrow__key,we__wantthe__shipto__continuemoving__rightuntil__theplayer__releasesthe__key.We__llhave__thegame__detecta__pygame.KEYUPevent__sowe__llknow__whenthe__rightarrow__keyis__released;then__well__usethe__KEYDOWNand__KEYUPevents__togetherwith__aflag__calledmoving_right__toimplement__continuous motion.When__themoving_right__flagis__False,the__shipwill__be motionless.When__theplayer__pressesthe__rightarrow__key,we__llset__theflag__to True,and__whenthe__playerreleases__the key,we__llset__theflag__toFalse__again.The__Shipclass__controlsall__attributesof__the ship,so__well__giveit__anattri__butecalled__moving_rightand__an update()method__tocheck__thestatus__ofthe__moving_right flag.The__update()method__willchange__theposition__ofthe__shipif__theflag__isset__to True.We__llcall__thismethod__onceon__eachpass__throughthe__whileloop__toupdate__theposition__ofthe__ship.Here__arethe__changesto__Ship: ship.pyclass__Ship: """Aclass__tomanage__the ship."""def____init__(self, ai_game): --snip-- #Start__eachnew__shipat__thebottom__centerof__the screen. self.rect.midbottom = self.screen_rect.midbottom 240Chapter__12 #Movement__flag;start__witha__ship that'snot__moving. 1 self.moving_right =False__2def__update(self): """Updatethe__ship'sposition__basedon__themovement__flag."""if__self.moving_right: self.rect.x += 1def__blitme(self): --snip--We__adda__self.moving_rightattribute__inthe____init__()method__andset__itto__Falseinitially__1.Then__weadd__update(),which__movesthe__shipright__ifthe__flagis__True 2.The__update()method__willbe__calledfrom__outsidethe__class,so__its__notconsidered__ahelper__method.Now__weneed__tomodify___check_events()so__thatmoving_right__isset__toTrue__whenthe__rightarrow__keyis__pressedand__Falsewhen__thekey__is released:alien___invasion.pydef___check_events(self): """Respondto__keypressesand__mouse events."""for__eventin__pygame.event.get(): --snip--elif__event.type == pygame.KEYDOWN:if__event.key == pygame.K_RIGHT: 1 self.ship.moving_right =True__2elif__event.type == pygame.KEYUP:if__event.key == pygame.K_RIGHT: self.ship.moving_right =False__Here,we__modifyhow__thegame__respondswhen__theplayer__pressesthe__rightarrow__key:instead__ofchanging__theship__sposition__directly,we__merelyset__moving_rightto__True 1.Then__weadd__anew__elif block,which__respondsto__KEYUPevents__2.When__theplayer__releasesthe__rightarrow__key (K_RIGHT),we__setmoving_right__to False. Next,we__modifythe__whileloop__in run_game()so__itcalls__theship__s update()method__oneach__passthrough__the loop: alien_invasion.pydef__run_game(self): """Startthe__mainloop__forthe__game."""while__True: self._check_events() self.ship.update() self._update_screen() self.clock.tick(60)The__ships__positionwill__beupdated__afterwe__vechecked__forkeyboard__eventsand__beforewe__updatethe__screen.This__allowsthe__ships__positionto__beupdated__inresponse__toplayer__inputand__ensuresthe__updatedposition__willbe__usedwhen__drawingthe__shipto__the screen.When__yourun__alien_invasion.pyand__holddown__theright__arrow key,the__shipshould__movecontinuously__tothe__rightuntil__yourelease__the key.A__ShipThat__FiresBullets__241Moving__BothLeft__andRight__Nowthat__theship__canmove__continuouslyto__the right,adding__movementto__theleft__is straightforward. Again,we__llmodify__theShip__classand__the _check_events() method.Here__arethe__relevantchanges__to __init__()and__update()in__Ship: ship.pydef____init__(self, ai_game): --snip-- #Movement__flags;start__witha__ship that'snot__moving. self.moving_right =False__self.moving_left =False__def update(self): """Updatethe__ship'sposition__basedon__movement flags."""if__self.moving_right: self.rect.x += 1if__self.moving_left: self.rect.x -= 1In____init__(),we__adda__self.moving_left flag.In__update(),we__usetwo__separateif__blocks,rather__thanan__elif,to__allowthe__ships__rect.xvalue__tobe__increasedand__thendecreased__whenboth__arrowkeys__areheld__down.This__resultsin__theship__standing still.If__weused__eliffor__motionto__the left,the__rightarrow__keywould__alwayshave__priority.Using__twoif__blocksmakes__themovements__moreaccurate__whenthe__playermight__momentarilyhold__downboth__keyswhen__changing directions.We__haveto__maketwo__additionsto___check_events(): alien_invasion.pydef___check_events(self): """Respondto__keypressesand__mouse events."""for__eventin__pygame.event.get(): --snip--elif__event.type == pygame.KEYDOWN:if__event.key == pygame.K_RIGHT: self.ship.moving_right =True__elif event.key == pygame.K_LEFT: self.ship.moving_left =True__elif event.type == pygame.KEYUP:if__event.key == pygame.K_RIGHT: self.ship.moving_right =False__elif event.key == pygame.K_LEFT: self.ship.moving_left =False__Ifa__KEYDOWNevent__occursfor__theK_LEFT__key,we__setmoving_left__to True.If__aKEYUP__eventoccurs__forthe__K_LEFT key,we__setmoving_left__to False.We__canuse__elifblocks__herebecause__eachevent__isconnected__toonly__one key.If__theplayer__pressesboth__keysat__once,two__separateevents__willbe__detected.When__yourun__alien_invasion.py now,you__shouldbe__ableto__movethe__shipcontinuously__tothe__rightand__left.If__youhold__downboth__keys,the__shipshould__stop moving. 242Chapter__12 Next,we__llfurther__refinethe__ships__movement.Let__sadjust__theship__sspeed__andlimit__howfar__theship__canmove__soit__cant__disappearoff__thesides__ofthe__screen.Adjusting__theShip__sSpeed__Currently,the__shipmoves__onepixel__percycle__throughthe__while loop,but__wecan__takefiner__controlof__theship__sspeed__byadding__aship_speed__attributeto__theSettings__class.We__lluse__thisattribute__todetermine__howfar__tomove__theship__oneach__passthrough__the loop.Here__sthe__newattribute__in settings.py: settings.pyclass__Settings: """Aclass__tostore__allsettings__forAlien__Invasion."""def____init__(self): --snip-- #Ship__settings self.ship_speed = 1.5We__setthe__initialvalue__ofship_speed__to 1.5.When__theship__moves now,its__positionis__adjustedby__1.5pixels__(ratherthan__1 pixel)on__eachpass__throughthe__loop.We__reusing__afloat__forthe__speedsetting__togive__usfiner__controlof__theship__sspeed__whenwe__increasethe__tempoof__thegame__later on. However,rect__attributessuch__asx__storeonly__integer values,so__weneed__tomake__somemodifications__to Ship: ship.pyclass__Ship: """Aclass__tomanage__the ship."""def____init__(self, ai_game): """Initializethe__shipand__setits__starting position.""" self.screen = ai_game.screen 1 self.settings = ai_game.settings --snip-- #Start__eachnew__shipat__thebottom__centerof__the screen. self.rect.midbottom = self.screen_rect.midbottom #Store__afloat__forthe__ship'sexact__horizontal position. 2 self.x = float(self.rect.x) #Movement__flags;start__witha__ship that'snot__moving. self.moving_right =False__self.moving_left =False__def update(self): """Updatethe__ship'sposition__basedon__movement flags.""" #Update__the ship'sx__value,not__the rect.if__self.moving_right: 3 self.x += self.settings.ship_speedA__ShipThat__FiresBullets__243if__self.moving_left: self.x -= self.settings.ship_speed #Update__rectobject__from self.x. 4 self.rect.x = self.xdef__blitme(self): --snip--We__createa__settingsattribute__for Ship,so__wecan__useit__in update() 1.Because__were__adjustingthe__positionof__theship__byfractions__ofa__pixel,we__needto__assignthe__positionto__avariable__thatcan__havea__floatassigned__to it.You__canuse__afloat__toset__anattribute__ofa__rect,but__therect__willonly__keepthe__integerportion__ofthat__value.To__keeptrack__ofthe__ships__positionaccu__rately,we__definea__new self.x 2.We__usethe__float()function__toconvert__thevalue__of self.rect.xto__afloat__andassign__thisvalue__to self.x.Now__whenwe__changethe__ships__positionin__update(),the__valueof__self.xis__adjustedby__theamount__storedin__settings.ship_speed 3.After__self.xhas__been updated,we__usethe__newvalue__toupdate__self.rect.x,which__controls__theposition__ofthe__ship 4.Only__theinteger__portionof__self.xwill__beassigned__to self.rect.x,but__thats__finefor__displayingthe__ship.Now__wecan__changethe__valueof__ship_speed,and__anyvalue__greaterthan__1will__makethe__shipmove__faster.This__willhelp__makethe__shiprespond__quicklyenough__toshoot__down aliens,and__itwill__letus__changethe__tempoof__thegame__asthe__playerprogresses__in gameplay.Limiting__theShip__sRange__Atthis__point,the__shipwill__disappearoff__eitheredge__ofthe__screenif__youhold__downan__arrowkey__long enough.Let__scorrect__thisso__theship__stopsmoving__whenit__reachesthe__screens__edge.We__dothis__bymodifying__the update()method__in Ship: ship.pydef__update(self): """Updatethe__ship'sposition__basedon__movement flags.""" #Update__the ship'sx__value,not__the rect. 1if__self.moving_rightand__self.rect.right < self.screen_rect.right: self.x += self.settings.ship_speed 2if__self.moving_leftand__self.rect.left > 0: self.x -= self.settings.ship_speed #Update__rectobject__from self.x. self.rect.x = self.xThis__codechecks__theposition__ofthe__shipbefore__changingthe__valueof__self.x.The__code self.rect.rightreturns__the x-coordinateof__theright__edgeof__theship__s rect.If__thisvalue__isless__thanthe__valuereturned__by self.screen _rect.right,the__shiphasn__treached__theright__edgeof__thescreen__1.The__samegoes__forthe__left edge:if__thevalue__ofthe__leftside__ofthe__rectis__greaterthan__0,the__shiphasn__treached__theleft__edgeof__thescreen__2.This__ensuresthe__shipis__withinthese__boundsbefore__adjustingthe__valueof__self.x. 244Chapter__12When__yourun__alien_invasion.py now,the__shipshould__stopmoving__ateither__edgeof__the screen.This__ispretty__cool;all__weve__doneis__adda__conditional__testin__anif__statement,but__itfeels__likethe__shiphits__awall__orforce__fieldat__eitheredge__ofthe__screen!Refactoring___check_events()The___check_events()method__willincrease__inlength__aswe__continueto__developthe__game,so__lets__break _check_events()into__twoseparate__methods:one__thathandles__KEYDOWNevents__andanother__thathandles__KEYUP events: alien_invasion.pydef___check_events(self): """Respondto__keypressesand__mouse events."""for__eventin__pygame.event.get():if__event.type == pygame.QUIT: sys.exit()elif__event.type == pygame.KEYDOWN: self._check_keydown_events(event)elif__event.type == pygame.KEYUP: self._check_keyup_events(event)def___check_keydown_events(self, event): """Respondto__keypresses."""if__event.key == pygame.K_RIGHT: self.ship.moving_right =True__elif event.key == pygame.K_LEFT: self.ship.moving_left =True__def _check_keyup_events(self, event): """Respondto__key releases."""if__event.key == pygame.K_RIGHT: self.ship.moving_right =False__elif event.key == pygame.K_LEFT: self.ship.moving_left =False__Wemake__twonew__helper methods: _check_keydown_events()and___check _keyup_events().Each__needsa__selfparameter__andan__event parameter.The__bodiesof__thesetwo__methodsare__copiedfrom___check_events(),and__weve__replacedthe__oldcode__withcalls__tothe__new methods.The___check_events()method__issimpler__nowwith__thiscleaner__code structure,which__willmake__iteasier__todevelop__furtherresponses__toplayer__input.Pressing__Qto__QuitNow__thatwe__reresponding__tokeypresses__efficiently,we__canadd__anotherway__toquit__the game.It__getstedious__toclick__theX__atthe__topof__thegame__windowto__endthe__gameevery__timeyou__testa__new feature,so__well__adda__keyboardshortcut__toend__thegame__whenthe__playerpresses__Q: alien_invasion.pydef___check_keydown_events(self, event): --snip--elif__event.key == pygame.K_LEFT:A__ShipThat__FiresBullets__245 self.ship.moving_left =True__elif event.key == pygame.K_q: sys.exit()In___check_keydown_events(),we__adda__newblock__thatends__thegame__whenthe__playerpresses__Q. Now,when__testing,you__canpress__Qto__closethe__gameinstead__ofusing__yourcursor__toclose__the window.Running__theGame__inFullscreen__ModePygame__hasa__fullscreenmode__thatyou__mightlike__betterthan__runningthe__gamein__aregular__window.Some__gameslook__betterin__fullscreen mode,and__onsome__systems,the__gamemay__performbetter__overallin__fullscreen mode.To__runthe__gamein__fullscreen mode,make__thefollowing__changesin____init__():alien___invasion.pydef____init__(self): """Initializethe__game,and__creategame__resources.""" pygame.init() self.settings = Settings() 1 self.screen = pygame.display.set_mode((0, 0), pygame.FULLSCREEN) 2 self.settings.screen_width = self.screen.get_rect().width self.settings.screen_height = self.screen.get_rect().height pygame.display.set_caption("Alien Invasion")When__creatingthe__screen surface,we__passa__sizeof__(0, 0)and__theparameter__pygame.FULLSCREEN 1.This__tellsPygame__tofigure__outa__windowsize__thatwill__fillthe__screen.Because__wedon__tknow__thewidth__andheight__ofthe__screenahead__of time,we__updatethese__settingsafter__thescreen__iscre__ated 2.We__usethe__widthand__heightattributes__ofthe__screens__rectto__updatethe__settings object.If__youlike__howthe__gamelooks__orbehaves__infullscreen__mode,keep__these settings.If__youliked__thegame__betterin__itsown__window,you__canrevert__backto__theoriginal__approachwhere__weset__aspecific__screensize__forthe__game.NOTE__Makesure__youcan__quitby__pressingQ__beforerunning__thegame__infullscreen__mode;Pygame__offersno__defaultway__toquit__agame__whilein__fullscreen mode.A__QuickRecap__Inthe__next section,we__lladd__theability__toshoot__bullets,which__involvesadd__inga__newfile__called bullet.pyand__makingsome__modificationsto__someof__thefiles__were__already using.Right__now,we__havethree__filescontaining__anum__berof__classesand__methods.To__beclear__abouthow__theproject__is organized,let__sreview__eachof__thesefiles__beforeadding__more functionality. 246Chapter__12 alien_invasion.pyThe__main file, alien_invasion.py,contains__theAlienInvasion__class.This__classcreates__anumber__ofimportant__attributesused__throughoutthe__game:the__settingsare__assignedto__settings,the__maindisplay__surfaceis__assignedto__screen,and__aship__instanceis__createdin__thisfile__as well.The__mainloop__ofthe__game,a__while loop,is__alsostored__inthis__module.The__whileloop__calls _check_events(), ship.update(),and___update_screen().It__alsoticks__theclock__oneach__passthrough__the loop.The___check_events()method__detectsrelevant__events,such__askeypresses__and releases,and__processeseach__ofthese__typesof__eventsthrough__themeth__ods _check_keydown_events()and___check_keyup_events().For__now,these__methodsmanage__theship__s movement.The__AlienInvasionclass__alsocontains___update _screen(),which__redrawsthe__screenon__eachpass__throughthe__main loop.The__alien_invasion.pyfile__isthe__onlyfile__youneed__torun__whenyou__wantto__playAlien__Invasion.The__other files, settings.pyand__ship.py,contain__codethat__isimported__intothis__file. settings.pyThe__settings.pyfile__containsthe__Settings class.This__classonly__hasan____init__() method,which__initializesattributes__controllingthe__games__appearanceand__theship__s speed. ship.pyThe__ship.pyfile__containsthe__Ship class.The__Shipclass__hasan____init__() method,an__update()method__tomanage__theship__s position,and__a blitme()method__todraw__theship__tothe__screen.The__imageof__theship__isstored__in ship.bmp,which__isin__theimages__folder.TRY__ITYOURSELF__12-3.Pygame__Documentation:We__refar__enoughinto__thegame__nowthat__youmight__wantto__lookat__someof__thePygame__documentation.The__Pygamehome__pageis__at https://pygame.org,and__thehome__pagefor__thedocumentation__isat__https://pygame.org/docs.Just__skimthe__documentationfor__now.You__wont__needit__tocomplete__this project,but__itwill__helpif__youwant__tomodify__AlienInvasion__ormake__yourown__game afterward. 12-4. Rocket:Make__agame__thatbegins__witha__rocketin__thecenter__ofthe__screen.Allow__theplayer__tomove__therocket__up, down, left,or__rightusing__thefour__arrow keys.Make__surethe__rocketnever__movesbeyond__anyedge__ofthe__screen. 12-5. Keys:Make__aPygame__filethat__createsan__empty screen.In__theevent__loop,print__the event.keyattribute__whenevera__pygame.KEYDOWNevent__is detected.Run__theprogram__andpress__variouskeys__tosee__howPygame__responds.A__ShipThat__FiresBullets__247Shooting__BulletsNow__lets__addthe__abilityto__shoot bullets.We__llwrite__codethat__firesa__bullet,which__isrepresented__bya__small rectangle,when__theplayer__pressesthe__space bar.Bullets__willthen__travelstraight__upthe__screenuntil__theydisappear__offthe__topof__the screen.Adding__theBullet__SettingsAt__theend__ofthe____init__() method,we__llupdate__settings.pyto__includethe__valueswe__llneed__fora__newBullet__class: settings.pydef____init__(self): --snip-- #Bullet__settings self.bullet_speed = 2.0 self.bullet_width = 3 self.bullet_height = 15 self.bullet_color = (60, 60, 60)These__settingscreate__darkgray__bulletswith__awidth__of 3pixels__anda__heightof__15 pixels.The__bulletswill__travelslightly__fasterthan__the ship.Creating__theBullet__ClassNow__createa__bullet.pyfile__tostore__ourBullet__class.Here__sthe__firstpart__of bullet.py: bullet.pyimport__pygamefrom__pygame.spriteimport__Spriteclass__Bullet(Sprite): """Aclass__tomanage__bulletsfired__fromthe__ship."""def____init__(self, ai_game): """Createa__bulletobject__atthe__ship'scurrent__position.""" super().__init__() self.screen = ai_game.screen self.settings = ai_game.settings self.color = self.settings.bullet_color #Create__abullet__rectat__(0, 0)and__thenset__correct position. 1 self.rect = pygame.Rect(0, 0, self.settings.bullet_width, self.settings.bullet_height) 2 self.rect.midtop = ai_game.ship.rect.midtop #Store__the bullet'sposition__asa__float. 3 self.y = float(self.rect.y)The__Bulletclass__inheritsfrom__Sprite,which__weimport__fromthe__pygame .sprite module.When__youuse__sprites,you__cangroup__relatedelements__inyour__gameand__acton__allthe__groupedelements__at once.To__createa__bullet instance, __init__()needs__thecurrent__instanceof__AlienInvasion,and__wecall__248Chapter__12 super()to__inheritproperly__from Sprite.We__alsoset__attributesfor__thescreen__andsettings__objects,and__forthe__bullets__color.Next__wecreate__thebullet__srect__attribute 1.The__bulletisn__tbased__onan__image,so__wehave__tobuild__arect__fromscratch__usingthe__pygame.Rect() class.This__classrequires__the x-and__y-coordinatesof__the top-leftcorner__ofthe__rect,and__thewidth__andheight__ofthe__rect.We__initializethe__rectat__(0, 0),but__well__moveit__tothe__correctlocation__inthe__next line,because__thebullet__sposition__dependson__theship__s position.We__getthe__widthand__heightof__thebullet__fromthe__valuesstored__in self.settings.We__setthe__bullets__midtopattribute__tomatch__theship__smidtop__attribute 2.This__willmake__thebullet__emergefrom__thetop__ofthe__ship,making__itlook__likethe__bulletis__firedfrom__the ship.We__usea__floatfor__thebullet__s y-coordinateso__wecan__makefine__adjustmentsto__thebullet__sspeed__3.Here__sthe__secondpart__of bullet.py, update()and__draw_bullet(): bullet.pydef__update(self): """Movethe__bulletup__the screen.""" #Update__theexact__positionof__the bullet. 1 self.y -= self.settings.bullet_speed #Update__therect__position. 2 self.rect.y = self.ydef__draw_bullet(self): """Drawthe__bulletto__the screen.""" 3 pygame.draw.rect(self.screen, self.color, self.rect)The__update()method__managesthe__bullets__position.When__abullet__is fired,it__movesup__the screen,which__correspondsto__adecreasing__y-coordinate value.To__updatethe__position,we__subtractthe__amountstored__insettings__.bullet_speedfrom__self.y 1.We__thenuse__thevalue__of self.yto__setthe__valueof__self.rect.y 2.The__bullet_speedsetting__allowsus__toincrease__thespeed__ofthe__bulletsas__thegame__progressesor__asneeded__torefine__thegame__s behavior.Once__abullet__is fired,we__neverchange__thevalue__ofits__x-coordinate,so__itwill__travelvertically__ina__straightline__evenif__theship__moves.When__wewant__todraw__a bullet,we__call draw_bullet().The__draw.rect()function__fillsthe__partof__thescreen__definedby__thebullet__srect__withthe__colorstored__in self.color 3.Storing__Bulletsin__aGroup__Nowthat__wehave__aBullet__classand__thenecessary__settings defined,we__canwrite__codeto__firea__bulleteach__timethe__playerpresses__the spacebar.We__llcreate__agroup__inAlienInvasion__tostore__allthe__activebullets__sowe__canman__agethe__bulletsthat__havealready__been fired.This__groupwill__bean__instanceof__the pygame.sprite.Group class,which__behaveslike__alist__withsome__extrafunctionality__thats__helpfulwhen__building games.We__lluse__thisgroup__todraw__bulletsto__thescreen__oneach__passthrough__themain__loopand__toupdate__eachbullet__s position.A__ShipThat__FiresBullets__249 First,we__llimport__thenew__Bullet class: alien_invasion.py --snip--from__shipimport__Shipfrom__bulletimport__BulletNext__well__createthe__groupthat__holdsthe__bulletsin____init__(): alien_invasion.pydef____init__(self): --snip-- self.ship = Ship(self) self.bullets = pygame.sprite.Group()Then__weneed__toupdate__theposition__ofthe__bulletson__eachpass__throughthe__while loop: alien_invasion.pydef__run_game(self): """Startthe__mainloop__forthe__game."""while__True: self._check_events() self.ship.update() self.bullets.update() self._update_screen() self.clock.tick(60)When__youcall__update()on__a group,the__groupautomatically__calls update()for__eachsprite__inthe__group.The__line self.bullets.update()calls__bullet.update()for__eachbullet__weplace__inthe__group bullets.Firing__BulletsIn__AlienInvasion,we__needto__modify _check_keydown_events()to__firea__bulletwhen__theplayer__pressesthe__spacebar.We__dont__needto__change_check_keyup___events()because__nothinghappens__whenthe__spacebaris__released.We__alsoneed__tomodify___update_screen()to__makesure__eachbullet__isdrawn__tothe__screenbefore__wecall__flip().There__willbe__abit__ofwork__todo__whenwe__firea__bullet,so__lets__writea__new method, _fire_bullet(),to__handlethis__work:alien___invasion.pydef___check_keydown_events(self, event): --snip--elif__event.key == pygame.K_q: sys.exit() 1elif__event.key == pygame.K_SPACE: self._fire_bullet()def___check_keyup_events(self, event): --snip--def___fire_bullet(self): """Createa__newbullet__andadd__itto__thebullets__group.""" 2new_bullet__= Bullet(self) 3 self.bullets.add(new_bullet) 250Chapter__12def___update_screen(self): """Updateimages__onthe__screen,and__flipto__thenew__screen.""" self.screen.fill(self.settings.bg_color) 4for__bulletin__self.bullets.sprites(): bullet.draw_bullet() self.ship.blitme() pygame.display.flip() --snip--We__call _fire_bullet()when__thespacebar__ispressed__1.In___fire_bullet(),we__makean__instanceof__Bulletand__callit__new_bullet 2.We__thenadd__itto__thegroup__bulletsusing__the add()method__3.The__add()method__issimilar__to append(),but__its__writtenspecifically__forPygame__groups.The__bullets.sprites()method__returnsa__listof__allsprites__inthe__group bullets.To__drawall__firedbullets__tothe__screen,we__loopthrough__thesprites__inbullets__andcall__draw_bullet()on__eachone__4.We__placethis__loopbefore__theline__thatdraws__the ship,so__thebullets__dont__startout__ontop__ofthe__ship.When__yourun__alien_invasion.py now,you__shouldbe__ableto__movethe__shipright__andleft__andfire__asmany__bulletsas__you want.The__bulletstravel__upthe__screenand__disappearwhen__theyreach__the top,as__shownin__Figure 12-3.You__canalter__the size, color,and__speedof__thebullets__in settings.py.Figure__12-3:The__shipafter__firinga__seriesof__bulletsDeleting__OldBullets__Atthe__moment,the__bulletsdisappear__whenthey__reachthe__top,but__onlybecause__Pygamecan__tdraw__themabove__thetop__ofthe__screen.The__bulletsactually__continueto__exist;their__y-coordinatevalues__justgrow__increasingly negative.This__isa__problembecause__theycontinue__toconsume__memoryand__processing power.A__ShipThat__FiresBullets__251We__needto__getrid__ofthese__old bullets,or__thegame__willslow__downfrom__doingso__muchunnecessary__work.To__do this,we__needto__detectwhen__thebottom__valueof__abullet__srect__hasa__valueof__0,which__indicatesthe__bullethas__passedoff__thetop__ofthe__screen:alien___invasion.pydef__run_game(self): """Startthe__mainloop__forthe__game."""while__True: self._check_events() self.ship.update() self.bullets.update() #Get__ridof__bulletsthat__have disappeared. 1for__bulletin__self.bullets.copy(): 2if__bullet.rect.bottom <= 0: 3 self.bullets.remove(bullet) 4 print(len(self.bullets)) self._update_screen() self.clock.tick(60)When__youuse__afor__loopwith__alist__(ora__groupin__Pygame),Python__expectsthat__thelist__willstay__thesame__lengthas__longas__theloop__is running.That__meansyou__cant__removeitems__froma__listor__groupwithin__afor__loop,so__wehave__toloop__overa__copyof__the group.We__usethe__copy()method__toset__upthe__forloop__1,which__leavesus__freeto__modifythe__originalbullets__groupinside__the loop.We__checkeach__bulletto__seewhether__ithas__disappearedoff__thetop__ofthe__screen 2.If__it has,we__removeit__frombullets__3.We__inserta__print()call__toshow__howmany__bulletscurrently__existin__thegame__andverify__theyre__beingdeleted__whenthey__reachthe__topof__thescreen__4.If__thiscode__works correctly,we__canwatch__theterminal__outputwhile__firing__bulletsand__seethat__thenumber__ofbullets__decreasesto__zeroafter__eachseries__ofbullets__hascleared__thetop__ofthe__screen.After__yourun__thegame__andverify__thatbullets__arebeing__deleted properly,remove__the print() call.If__youleave__it in,the__gamewill__slowdown__significantlybecause__ittakes__moretime__towrite__outputto__theterminal__thanit__doesto__drawgraphics__tothe__game window.Limiting__theNumber__ofBullets__Manyshooting__gameslimit__thenumber__ofbullets__aplayer__canhave__onthe__screenat__one time;doing__soencourages__playersto__shoot accurately.We__lldo__thesame__inAlien__Invasion. First,store__thenumber__ofbullets__allowedin__settings.py: settings.py #Bullet__settings --snip-- self.bullet_color = (60, 60, 60) self.bullets_allowed = 3 252Chapter__12This__limitsthe__playerto__threebullets__ata__time.We__lluse__thissetting__inAlienInvasion__tocheck__howmany__bulletsexist__beforecreating__anew__bulletin___fire_bullet(): alien_invasion.pydef___fire_bullet(self): """Createa__newbullet__andadd__itto__thebullets__group."""if__len(self.bullets) < self.settings.bullets_allowed:new_bullet__= Bullet(self) self.bullets.add(new_bullet)When__theplayer__pressesthe__spacebar,we__checkthe__lengthof__bullets.If__len(self.bullets)is__lessthan__three,we__createa__new bullet.But__ifthree__bulletsare__already active,nothing__happenswhen__thespacebar__is pressed.When__yourun__thegame__now,you__shouldonly__beable__tofire__bulletsin__groupsof__three.Creating__the _update_bullets()Method__Wewant__tokeep__theAlienInvasion__classreasonably__well organized,so__nowthat__weve__writtenand__checkedthe__bulletmanagement__code,we__canmove__itto__aseparate__method.We__llcreate__anew__methodcalled___update_bullets()and__addit__justbefore___update_screen(): alien_invasion.pydef___update_bullets(self): """Updateposition__ofbullets__andget__ridof__old bullets.""" #Update__bullet positions. self.bullets.update() #Get__ridof__bulletsthat__have disappeared.for__bulletin__self.bullets.copy():if__bullet.rect.bottom <= 0: self.bullets.remove(bullet)The__codefor___update_bullets()is__cutand__pastedfrom__run_game();all__weve__donehere__isclarify__the comments.The__whileloop__in run_game()looks__simple again: alien_invasion.pywhile__True: self._check_events() self.ship.update() self._update_bullets() self._update_screen() self.clock.tick(60)Now__ourmain__loopcontains__onlyminimal__code,so__wecan__quicklyread__themethod__namesand__understandwhat__shappening__inthe__game.The__mainloop__checksfor__player input,and__thenupdates__theposition__ofthe__shipand__anybullets__thathave__been fired.We__thenuse__theupdated__positions__todraw__anew__screenand__tickthe__clockat__theend__ofeach__passthrough__the loop.A__ShipThat__FiresBullets__253Run__alien_invasion.pyone__more time,and__makesure__youcan__stillfire__bulletswithout__errors.TRY__ITYOURSELF__12-6.Sideways__Shooter:Write__agame__thatplaces__aship__onthe__leftside__ofthe__screenand__allowsthe__playerto__movethe__shipup__and down.Make__theship__firea__bulletthat__travelsright__acrossthe__screenwhen__theplayer__pressesthe__space bar.Make__surebullets__aredeleted__oncethey__disappearoff__the screen.Summary__Inthis__chapter,you__learnedto__makea__planfor__agame__andlearned__thebasic__structureof__agame__writtenin__Pygame.You__learnedto__seta__background__colorand__storesettings__ina__separateclass__whereyou__canadjust__themmore__easily.You__sawhow__todraw__animage__tothe__screenand__givethe__playercontrol__overthe__movementof__game elements.You__createdelements__thatmove__ontheir__own,like__bulletsflying__upa__screen,and__youdeleted__objectsthat__areno__longer needed.You__alsolearned__torefactor__codein__aproject__ona__regularbasis__tofacilitate__ongoing development.In__Chapter 13,we__lladd__aliensto__Alien Invasion.By__theend__ofthe__chapter,you__llbe__ableto__shootdown__aliens,hopefully__beforethey__reachyour__ship! 13A__LIE__N S!In__this chapter,we__lladd__aliensto__Alien Invasion.We__lladd__onealien__nearthe__topof__thescreen__andthen__generatea__wholefleet__of aliens.We__llmake__thefleet__advancesideways__and down,and__well__getrid__ofany__alienshit__bya__bullet. Finally,we__lllimit__thenumber__ofships__aplayer__hasand__endthe__gamewhen__theplayer__runsout__of ships.As__youwork__throughthis__chapter,you__lllearn__moreabout__Pygameand__aboutmanaging__alarge__project.You__llalso__learnto__detectcollisions__betweengame__objects,like__bulletsand__aliens.Detecting__collisionshelps__youdefine__interactionsbetween__elementsin__your games.For__example,you__canconfine__acharacter__insidethe__wallsof__amaze__orpass__aball__betweentwo__characters.We__llcontinue__towork__froma__planthat__werevisit__occasionallyto__maintainthe__focusof__our code-writing sessions.Before__westart__writingnew__codeto__adda__fleetof__aliensto__the screen,let__slook__atthe__projectand__updateour__plan. 256Chapter__13Reviewing__theProject__Whenyou__rebeginning__anew__phaseof__developmenton__alarge__project,it__salways__agood__ideato__revisityour__planand__clarifywhat__youwant__toaccomplish__withthe__codeyou__reabout__to write.In__this chapter,we__lldo__the following:Add__asingle__aliento__the top-leftcorner__ofthe__screen,with__appropriatespacing__around it.Fill__theupper__portionof__thescreen__withas__manyaliens__aswe__canfit__horizontally.We__llthen__createadditional__rowsof__aliensuntil__wehave__afull__fleet.Make__thefleet__movesideways__anddown__untilthe__entirefleet__isshot__down,an__alienhits__the ship,or__analien__reachesthe__ground.If__theentire__fleetis__shot down,we__llcreate__anew__fleet.If__analien__hitsthe__shipor__the ground,we__lldestroy__theship__andcreate__anew__fleet.Limit__thenumber__ofships__theplayer__can use,and__endthe__gamewhen__theplayer__hasused__upthe__allottednumber__of ships.We__llrefine__thisplan__aswe__implement features,but__thisis__specificenough__tostart__writing code.You__shouldalso__reviewyour__existingcode__whenyou__beginworking__ona__newseries__offeatures__ina__project.Because__eachnew__phasetypically__makesa__projectmore__complex,it__sbest__toclean__upany__clutteredor__inefficient code.We__vebeen__refactoringas__we go,so__thereisn__tany__codethat__weneed__torefactor__atthis__point.Creating__theFirst__AlienPlacing__onealien__onthe__screenis__likeplacing__aship__onthe__screen.Each__aliens__behavioris__controlledby__aclass__called Alien,which__well__structurelike__theShip__class.We__llcontinue__usingbitmap__imagesfor__simplicity.You__canfind__yourown__imagefor__analien__oruse__theone__shownin__Figure 13-1,which__isavailable__inthe__books__resourcesat__https://ehmatthes.github.io/pcc_3e.This__imagehas__agray__background,which__matchesthe__screens__background color.Make__sureyou__savethe__imagefile__youchoose__inthe__images folder.Figure__13-1:The__alienwe__lluse__tobuild__thefleet__Aliens! 257Creating__theAlien__ClassNow__well__writethe__Alienclass__andsave__itas__alien.py: alien.pyimport__pygamefrom__pygame.spriteimport__Spriteclass__Alien(Sprite): """Aclass__torepresent__asingle__alienin__the fleet."""def____init__(self, ai_game): """Initializethe__alienand__setits__starting position.""" super().__init__() self.screen = ai_game.screen #Load__thealien__imageand__setits__rect attribute. self.image = pygame.image.load('images/alien.bmp') self.rect = self.image.get_rect() #Start__eachnew__aliennear__thetop__leftof__the screen. 1 self.rect.x = self.rect.width self.rect.y = self.rect.height #Store__the alien'sexact__horizontal position. 2 self.x = float(self.rect.x)Most__ofthis__classis__likethe__Ship class,except__forthe__aliens__placementon__the screen.We__initiallyplace__eachalien__nearthe__top-leftcorner__ofthe__screen;we__adda__spaceto__theleft__ofit__thats__equalto__thealien__swidth__anda__spaceabove__itequal__toits__height 1,so__its__easyto__see.We__remainly__concernedwith__thealiens__horizontal speed,so__well__trackthe__horizontalposition__ofeach__alienprecisely__2.This__Alienclass__doesnt__needa__methodfor__drawingit__tothe__screen; instead,we__lluse__aPygame__groupmethod__thatautomatically__drawsall__theelements__ofa__groupto__the screen.Creating__anInstance__ofthe__AlienWe__wantto__createan__instanceof__Alienso__wecan__seethe__firstalien__onthe__screen.Because__its__partof__oursetup__work,we__lladd__thecode__forthis__instanceat__theend__ofthe____init__()method__in AlienInvasion. Eventually,we__llcreate__anentire__fleetof__aliens,which__willbe__quitea__bitof__work,so__well__makea__newhelper__methodcalled___create_fleet().The__orderof__methodsin__aclass__doesnt__matter,as__longas__theres__someconsistency__tohow__theyre__placed.I__llplace___create_fleet()just__beforethe___update_screen() method,but__anywherein__AlienInvasionwill__work. First,we__llimport__theAlien__class.Here__arethe__updatedimport__statementsfor__alien_invasion.py: alien_invasion.py --snip--from__bulletimport__Bulletfrom__alienimport__Alien 258Chapter__13And__heres__theupdated____init__() method: alien_invasion.pydef____init__(self): --snip-- self.ship = Ship(self) self.bullets = pygame.sprite.Group() self.aliens = pygame.sprite.Group() self._create_fleet()We__createa__groupto__holdthe__fleetof__aliens,and__wecall___create_fleet(),which__were__aboutto__write.Here__sthe__new _create_fleet() method: alien_invasion.pydef___create_fleet(self): """Createthe__fleetof__aliens.""" #Make__an alien.alien__= Alien(self) self.aliens.add(alien)In__this method,we__recreating__oneinstance__ofAlien__andthen__addingit__tothe__groupthat__willhold__the fleet.The__alienwill__beplaced__inthe__default upper-leftarea__ofthe__screen.To__makethe__alien appear,we__needto__callthe__groups__draw()method__in _update_screen(): alien_invasion.pydef___update_screen(self): --snip-- self.ship.blitme() self.aliens.draw(self.screen) pygame.display.flip()When__youcall__draw()on__a group,Pygame__drawseach__elementin__thegroup__atthe__positiondefined__byits__rect attribute.The__draw()method__requiresone__argument:a__surfaceon__whichto__drawthe__elementsfrom__the group.Figure__13-2shows__thefirst__alienon__the screen.Figure__13-2:The__firstalien__appears. Aliens! 259Now__thatthe__firstalien__appears correctly,we__llwrite__thecode__todraw__anentire__fleet.Building__theAlien__FleetTo__drawa__fleet,we__needto__figureout__howto__fillthe__upperportion__ofthe__screenwith__aliens,without__overcrowdingthe__game window.There__area__number__ofways__toaccomplish__this goal.We__llapproach__itby__addingaliens__acrossthe__topof__the screen,until__theres__nospace__leftfor__anew__alien.Then__well__repeatthis__process,as__longas__wehave__enoughvertical__spaceto__adda__new row.Creating__aRow__ofAliens__Nowwe__reready__togenerate__afull__rowof__aliens.To__makea__full row,we__llfirst__makea__singlealien__sowe__haveaccess__tothe__aliens__width.We__llplace__analien__onthe__leftside__ofthe__screenand__thenkeep__addingaliens__untilwe__runout__of space:alien___invasion.pydef___create_fleet(self): """Createthe__fleetof__aliens.""" #Create__analien__andkeep__addingaliens__until there'sno__room left. #Spacing__betweenaliens__isone__alien width.alien__= Alien(self)alien_width__= alien.rect.width 1current_x__=alien_width__2while__current_x < (self.settings.screen_width - 2 * alien_width): 3new_alien__= Alien(self) 4 new_alien.x =current_x__new_alien.rect.x =current_x__self.aliens.add(new_alien) 5current_x__+= 2 *alien_width__Weget__thealien__swidth__fromthe__firstalien__we created,and__thendefine__avariable__calledcurrent_x__1.This__refersto__thehorizontal__positionof__thenext__alienwe__intendto__placeon__the screen.We__initiallyset__thisto__onealien__width,to__offsetthe__firstalien__inthe__fleetfrom__theleft__edgeof__the screen. Next,we__beginthe__whileloop__2;we__regoing__tokeep__addingaliens__whilethere__senough__roomto__place one.To__determinewhether__theres__roomto__placeanother__alien,we__llcompare__current_xto__somemaximum__value.A__firstattempt__atdefining__thisloop__mightlook__like this:while__current_x < self.settings.screen_width:This__seemslike__itmight__work,but__itwould__placethe__finalalien__inthe__rowat__the far-rightedge__ofthe__screen.So__weadd__alittle__marginon__theright__sideof__the screen.As__longas__theres__atleast__twoalien__widthsworth__ofspace__atthe__rightedge__ofthe__screen,we__enterthe__loopand__addanother__aliento__the fleet. 260Chapter__13Whenever__theres__enoughhorizontal__spaceto__continuethe__loop,we__wantto__dotwo__things:create__analien__atthe__correct position,and__definethe__horizontalposition__ofthe__nextalien__inthe__row.We__createan__alienand__assignit__tonew_alien__3.Then__weset__theprecise__horizontalposition__tothe__currentvalue__ofcurrent_x__4.We__alsoposition__thealien__srect__atthis__same x-value,and__addthe__newalien__tothe__group self.aliens. Finally,we__incrementthe__valueof__current_x 5.We__addtwo__alienwidths__tothe__horizontal position,to__movepast__thealien__wejust__addedand__toleave__somespace__betweenthe__aliensas__well.Python__will re-evaluatethe__conditionat__thestart__ofthe__whileloop__anddecide__ifthere__sroom__foranother__alien.When__theres__noroom__left,the__loopwill__end,and__weshould__havea__fullrow__of aliens.When__yourun__AlienInvasion__now,you__shouldsee__thefirst__rowof__aliens appear,as__inFigure__13-3.Figure__13-3:The__firstrow__ofaliens__NOTEIt__snot__alwaysobvious__exactlyhow__toconstruct__aloop__likethe__oneshown__inthis__sec tion.One__nicething__aboutprogramming__isthat__yourinitial__ideasfor__howto__approacha__problemlike__thisdon__thave__tobe__correct.It__sperfectly__reasonableto__starta__looplike__thiswith__thealiens__positionedtoo__farto__the right,and__thenmodify__theloop__untilyou__havean__appropriateamount__ofspace__onthe__screen.Refactoring___create_fleet()If__thecode__weve__writtenso__farwas__allwe__neededto__createa__fleet,we__dprobably__leave _create_fleet()as__is.But__wehave__morework__to do,so__lets__cleanup__themethod__a bit.We__lladd__anew__helper method, _create_alien(),and__callit__from _create_fleet():alien___invasion.pydef___create_fleet(self): --snip--while__current_x < (self.settings.screen_width - 2 * alien_width): self._create_alien(current_x)current_x__+= 2 *alien_width__Aliens! 261 1def___create_alien(self, x_position): """Createan__alienand__placeit__inthe__row."""new_alien__= Alien(self) new_alien.x =x_position__new_alien.rect.x =x_position__self.aliens.add(new_alien)The__method _create_alien()requires__oneparameter__inaddition__to self:the__x-valuethat__specifieswhere__thealien__shouldbe__placed 1.The__codein__thebody__of _create_alien()is__thesame__codethat__wasin___create_fleet(),except__weuse__theparameter__namex_position__inplace__of current_x.This__refactoringwill__makeit__easierto__addnew__rowsand__createan__entire fleet.Adding__RowsTo__finishthe__fleet,we__llkeep__addingmore__rowsuntil__werun__outof__room.We__lluse__anested__loopwe__llwrap__anotherwhile__looparound__thecurrent__one.The__innerloop__willplace__alienshorizontally__ina__rowby__focusingon__thealiens__x-values.The__outerloop__willplace__aliensvertically__byfocusing__onthe__y-values.We__llstop__addingrows__whenwe__getnear__thebottom__ofthe__screen,leaving__enoughspace__forthe__shipand__someroom__tostart__firingat__the aliens.Here__show__tonest__thetwo__whileloops__in _create_fleet():def___create_fleet(self): """Createthe__fleetof__aliens.""" #Create__analien__andkeep__addingaliens__until there'sno__room left. #Spacing__betweenaliens__isone__alienwidth__andone__alien height.alien__= Alien(self) 1 alien_width,alien_height__= alien.rect.size 2 current_x,current_y__= alien_width,alien_height__3while__current_y < (self.settings.screen_height - 3 * alien_height):while__current_x < (self.settings.screen_width - 2 * alien_width): 4 self._create_alien(current_x, current_y)current_x__+= 2 *alien_width__5 #Finished__a row;reset__x value,and__incrementy__value.current_x__=alien_width__current_y += 2 *alien_height__Well__needto__knowthe__aliens__heightin__orderto__place rows,so__wegrab__thealien__swidth__andheight__usingthe__sizeattribute__ofan__alienrect__1.A__rects__sizeattribute__isa__tuplecontaining__itswidth__and height. Next,we__setthe__initial x-and__y-valuesfor__theplacement__ofthe__firstalien__inthe__fleet 2.We__placeit__onealien__widthin__fromthe__leftand__onealien__heightdown__fromthe__top.Then__wedefine__thewhile__loopthat__controlshow__manyrows__areplaced__ontothe__screen 3.As__longas__the y-valuefor__thenext__rowis__lessthan__thescreen__height,minus__threealien__heights,we__llkeep__adding rows. (Ifthis__doesnt__leavethe__rightamount__of space,we__canadjust__it later.) 262Chapter__13We__call _create_alien(),and__passit__the y-valueas__wellas__its x-position 4.We__llmodify___create_alien()in__a moment.Notice__theindentation__ofthe__lasttwo__linesof__code 5.They__reinside__theouter__while loop,but__outsidethe__innerwhile__loop.This__blockruns__afterthe__innerloop__is finished;it__runsonce__aftereach__rowis__created.After__eachrow__hasbeen__added,we__resetthe__valueof__current_xso__thefirst__alienin__thenext__rowwill__beplaced__atthe__sameposition__asthe__firstalien__inthe__previous rows.Then__weadd__twoalien__heightsto__thecurrent__valueof__current_y,so__thenext__rowwill__beplaced__furtherdown__the screen.Indentation__isreally__important__here;if__youdon__tsee__thecorrect__fleetwhen__yourun__alien_invasion.pyat__theend__ofthis__section,check__theindentation__ofall__thelines__inthese__nested loops.We__needto__modify _create_alien()to__setthe__verticalposition__ofthe__alien correctly:def___create_alien(self, x_position, y_position): """Createan__alienand__placeit__inthe__fleet."""new_alien__= Alien(self) new_alien.x =x_position__new_alien.rect.x =x_position__new_alien.rect.y =y_position__self.aliens.add(new_alien)We__modifythe__definitionof__themethod__toaccept__the y-valuefor__thenew__alien,and__weset__thevertical__positionof__therect__inthe__bodyof__the method.When__yourun__thegame__now,you__shouldsee__afull__fleetof__aliens,as__shownin__Figure 13-4.Figure__13-4:The__fullfleet__appears.In__thenext__section,we__llmake__thefleet__move! Aliens! 263TRY__ITYOURSELF__13-1. Stars:Find__animage__ofa__star.Make__agrid__ofstars__appearon__the screen. 13-2.Better__Stars:You__canmake__amore__realisticstar__patternby__introducingrandomness__whenyou__placeeach__star.Recall__fromChapter__9that__youcan__geta__randomnumber__like this:from__randomimport__randintrandom_number__= randint(-10, 10)This__codereturns__arandom__integerbetween__10and__10.Using__yourcode__inExercise__13-1,adjust__eachstar__sposition__bya__random amount.Making__theFleet__MoveNow__lets__makethe__fleetof__aliensmove__tothe__rightacross__thescreen__untilit__hitsthe__edge,and__thenmake__itdrop__aset__amountand__movein__theother__direction.We__llcontinue__thismovement__untilall__alienshave__beenshot__down,one__collideswith__the ship,or__onereaches__thebottom__ofthe__screen.Let__sbegin__bymaking__thefleet__moveto__the right.Moving__theAliens__RightTo__movethe__aliens,we__lluse__an update()method__in alien.py,which__well__callfor__eachalien__inthe__groupof__aliens. First,add__asetting__tocontrol__thespeed__ofeach__alien: settings.pydef____init__(self): --snip-- #Alien__settings self.alien_speed = 1.0Then__usethis__settingto__implement update()in__alien.py: alien.pydef____init__(self, ai_game): """Initializethe__alienand__setits__starting position.""" super().__init__() self.screen = ai_game.screen self.settings = ai_game.settings --snip--def__update(self): """Movethe__aliento__the right.""" 1 self.x += self.settings.alien_speed 2 self.rect.x = self.xWe__createa__settingsparameter__in __init__()so__wecan__accessthe__aliens__speedin__update().Each__timewe__updatean__aliens__position,we__moveit__tothe__264Chapter__13right__bythe__amountstored__in alien_speed.We__trackthe__aliens__exactposition__withthe__self.x attribute,which__canhold__floatvalues__1.We__thenuse__thevalue__of self.xto__updatethe__positionof__thealien__srect__2.In__themain__while loop,we__alreadyhave__callsto__updatethe__shipand__bullet__positions.Now__well__adda__callto__updatethe__positionof__eachalien__as well: alien_invasion.pywhile__True: self._check_events() self.ship.update() self._update_bullets() self._update_aliens() self._update_screen() self.clock.tick(60)We__reabout__towrite__somecode__tomanage__themovement__ofthe__fleet,so__wecreate__anew__methodcalled___update_aliens().We__updatethe__alienspositions__afterthe__bulletshave__been updated,because__well__soonbe__checking__tosee__whetherany__bulletshit__any aliens.Where__youplace__thismethod__inthe__moduleis__not critical.But__tokeep__thecode__organized,I__llplace__itjust__after _update_bullets()to__matchthe__orderof__methodcalls__inthe__while loop.Here__sthe__firstversion__of _update_aliens(): alien_invasion.pydef___update_aliens(self): """Updatethe__positionsof__allaliens__inthe__fleet.""" self.aliens.update()We__usethe__update()method__onthe__aliens group,which__callseach__aliens__update() method.When__yourun__AlienInvasion__now,you__shouldsee__thefleet__moveright__anddisappear__offthe__sideof__the screen.Creating__Settingsfor__FleetDirection__Nowwe__llcreate__thesettings__thatwill__makethe__fleetmove__downthe__screenand__tothe__leftwhen__ithits__theright__edgeof__the screen.Here__show__toimplement__this behavior: settings.py #Alien__settings self.alien_speed = 1.0 self.fleet_drop_speed = 10 #fleet_direction__of 1represents__right; -1represents__left. self.fleet_direction = 1The__settingfleet_drop_speed__controlshow__quicklythe__fleetdrops__downthe__screeneach__timean__alienreaches__either edge.It__shelpful__toseparate__thisspeed__fromthe__alienshorizontal__speedso__youcan__adjustthe__twospeeds__independently.To__implementthe__setting fleet_direction,we__coulduse__atext__valuesuch__as 'left'or__'right',but__wed__endup__with if-elifstatements__testingfor__thefleet__direction. Instead,because__weonly__havetwo__directionsto__deal with,let__suse__thevalues__1and__1and__switchbetween__themeach__timethe__fleet Aliens! 265changes__direction. (Usingnumbers__alsomakes__sensebecause__movingright__involvesadding__toeach__aliens__x-coordinate value,and__movingleft__involvessubtracting__fromeach__aliens__x-coordinate value.)Checking__Whetheran__AlienHas__Hitthe__EdgeWe__needa__methodto__checkwhether__analien__isat__either edge,and__weneed__tomodify__update()to__alloweach__aliento__movein__theappropriate__direction.This__codeis__partof__theAlien__class: alien.pydef__check_edges(self): """ReturnTrue__ifalien__isat__edgeof__screen."""screen_rect__= self.screen.get_rect() 1return__(self.rect.right >= screen_rect.right)or__(self.rect.left <= 0)def__update(self): """Movethe__alienright__or left.""" 2 self.x += self.settings.alien_speed * self.settings.fleet_direction self.rect.x = self.xWe__cancall__thenew__method check_edges()on__anyalien__tosee__whetherit__sat__theleft__orright__edge.The__alienis__atthe__rightedge__ifthe__rightattri__buteof__itsrect__isgreater__thanor__equalto__theright__attributeof__thescreen__s rect.It__sat__theleft__edgeif__itsleft__valueis__lessthan__orequal__to 0 1.Rather__thanput__thisconditional__testin__anif__block,we__putthe__testdirectly__inthe__return statement.This__methodwill__returnTrue__ifthe__alienis__atthe__rightor__left edge,and__Falseif__itis__notat__either edge.We__modifythe__method update()to__allowmotion__tothe__leftor__rightby__multiplyingthe__aliens__speedby__thevalue__offleet_direction__2.If__fleet_direction__is 1,the__valueof__alien_speedwill__beadded__tothe__aliens__current position,moving__thealien__tothe__right;if__fleet_directionis__1,the__valuewill__besubtracted__fromthe__aliens__position,moving__thealien__tothe__left.Dropping__theFleet__andChanging__DirectionWhen__analien__reachesthe__edge,the__entirefleet__needsto__dropdown__andchange__direction. Therefore,we__needto__addsome__codeto__AlienInvasionbecause__thats__wherewe__llcheck__whetherany__aliensare__atthe__leftor__right edge.We__llmake__thishappen__bywriting__themethods___check_fleet_edges()and___change_fleet_direction(),and__thenmodifying___update_aliens().I__llput__thesenew__methodsafter___create_alien(),but__again,the__placementof__thesemethods__inthe__classisn__t critical.alien___invasion.pydef___check_fleet_edges(self): """Respondappropriately__ifany__alienshave__reachedan__edge.""" 1for__alienin__self.aliens.sprites():if__alien.check_edges(): 2 self._change_fleet_direction()break__def _change_fleet_direction(self): 266Chapter__13 """Dropthe__entirefleet__andchange__the fleet's direction."""for__alienin__self.aliens.sprites(): 3 alien.rect.y += self.settings.fleet_drop_speed self.settings.fleet_direction *= -1In___check_fleet_edges(),we__loopthrough__thefleet__andcall__check_edges()on__eachalien__1.If__check_edges()returns__True,we__knowan__alienis__atan__edgeand__thewhole__fleetneeds__tochange__direction;so__wecall___change_fleet_direction()and__breakout__ofthe__loop 2.In___change_fleet_direction(),we__loopthrough__allthe__aliensand__dropeach__oneusing__thesetting__fleet_drop_speed 3;then__wechange__thevalue__offleet_direction__bymultiplying__itscurrent__valueby__1.The__linethat__changesthe__fleets__directionisn__tpart__ofthe__for loop.We__wantto__changeeach__aliens__vertical position,but__weonly__wantto__changethe__directionof__thefleet__once.Here__arethe__changesto___update_aliens(): alien_invasion.pydef___update_aliens(self): """Checkif__thefleet__isat__an edge,then__update positions.""" self._check_fleet_edges() self.aliens.update()We__vemodified__themethod__bycalling___check_fleet_edges()before__updatingeach__aliens__position.When__yourun__thegame__now,the__fleetshould__moveback__andforth__betweenthe__edgesof__thescreen__anddrop__downevery__timeit__hitsan__edge.Now__wecan__startshooting__downaliens__andwatch__forany__aliensthat__hitthe__shipor__reachthe__bottomof__the screen.TRY__ITYOURSELF__13-3. Raindrops:Find__animage__ofa__raindropand__createa__gridof__raindrops.Make__theraindrops__falltoward__thebottom__ofthe__screenuntil__they disappear. 13-4.Steady__Rain:Modify__yourcode__inExercise__13-3so__whena__rowof__raindrops__disappearsoff__thebottom__ofthe__screen,a__newrow__appearsat__thetop__ofthe__screenand__beginsto__fall.Shooting__AliensWe__vebuilt__ourship__anda__fleetof__aliens,but__whenthe__bulletsreach__the aliens,they__simplypass__throughbecause__wearen__tchecking__for collisions.In__game programming,collisions__happenwhen__gameelements__overlap.To__makethe__bulletsshoot__down aliens,we__lluse__thefunction__sprite.groupcollide()to__lookfor__collisionsbetween__membersof__two groups. Aliens! 267Detecting__BulletCollisions__Wewant__toknow__rightaway__whena__bullethits__analien__sowe__canmake__analien__disappearas__soonas__its__hit.To__do this,we__lllook__forcollisions__immediately__afterupdating__theposition__ofall__the bullets.The__sprite.groupcollide()function__comparesthe__rectsof__eachelement__inone__groupwith__therects__ofeach__elementin__another group.In__this case,it__compares__eachbullet__srect__witheach__aliens__rectand__returnsa__dictionarycontain__ingthe__bulletsand__aliensthat__have collided.Each__keyin__thedictionary__willbe__a bullet,and__thecorresponding__valuewill__bethe__alienthat__was hit. (Well__alsouse__thisdictionary__whenwe__implementa__scoringsystem__inChapter__14.)Add__thefollowing__codeto__theend__of _update_bullets()to__checkfor__collisions__betweenbullets__and aliens: alien_invasion.pydef___update_bullets(self): """Updateposition__ofbullets__andget__ridof__old bullets.""" --snip-- #Check__forany__bulletsthat__havehit__aliens. #If__so,get__ridof__thebullet__andthe__alien.collisions__= pygame.sprite.groupcollide( self.bullets, self.aliens, True, True)The__newcode__weadded__comparesthe__positionsof__allthe__bulletsin__self.bulletsand__allthe__aliensin__self.aliens,and__identifiesany__that overlap.Whenever__therects__ofa__bulletand__alien overlap, groupcollide()adds__a key-value__pairto__thedictionary__it returns.The__twoTrue__argumentstell__Pygameto__deletethe__bulletsand__aliensthat__have collided. (Tomake__a high-poweredbullet__thatcan__travelto__thetop__ofthe__screen,destroying__everyalien__inits__path,you__couldset__thefirst__Booleanargument__toFalse__andkeep__thesecond__Booleanargument__setto__True.The__alienshit__would disappear,but__allbullets__wouldstay__activeuntil__theydisappeared__offthe__topof__the screen.)When__yourun__AlienInvasion__now,aliens__youhit__should disappear.Figure__13-5shows__afleet__thathas__beenpartially__shot down.Figure__13-5:We__canshoot__aliens! 268Chapter__13Making__LargerBullets__forTesting__Youcan__testmany__featuresof__AlienInvasion__simplyby__runningthe__game,but__somefeatures__aretedious__totest__inthe__normalversion__ofthe__game.For__example,it__sa__lotof__workto__shootdown__everyalien__onthe__screenmultiple__timesto__testwhether__yourcode__respondsto__anempty__fleet correctly.To__testparticular__features,you__canchange__certaingame__settingsto__focuson__aparticular__area.For__example,you__mightshrink__thescreen__sothere__arefewer__aliensto__shootdown__orincrease__thebullet__speedand__giveyourself__lotsof__bulletsat__once.My__favoritechange__fortesting__AlienInvasion__isto__usereally__widebul__letsthat__remainactive__evenafter__theyve__hitan__alien (seeFigure__13-6).Try__settingbullet_width__to 300,or__even 3,000,to__seehow__quicklyyou__canshoot__downthe__fleet!Figure__13-6: Extra-powerfulbullets__makesome__aspectsof__thegame__easierto__test.Changes__likethese__willhelp__youtest__thegame__moreefficiently__andpos__siblyspark__ideasfor__givingplayers__bonus powers.Just__rememberto__restorethe__settingsto__normalwhen__youre__finishedtesting__a feature.Repopulating__theFleet__Onekey__featureof__AlienInvasion__isthat__thealiens__are relentless:every__timethe__fleetis__destroyed,a__newfleet__should appear.To__makea__newfleet__ofaliens__appearafter__afleet__hasbeen__destroyed,we__firstcheck__whetherthe__aliensgroup__is empty.If__it is,we__makea__callto___create_fleet().We__llperform__thischeck__atthe__endof___update_bullets(),because__thats__whereindividual__aliensare__destroyed.alien___invasion.pydef___update_bullets(self): --snip-- 1if__not self.aliens: Aliens! 269 #Destroy__existingbullets__andcreate__new fleet. 2 self.bullets.empty() self._create_fleet()We__checkwhether__thealiens__groupis__empty 1.An__emptygroup__evaluatesto__False,so__thisis__asimple__wayto__checkwhether__thegroup__is empty.If__it is,we__getrid__ofany__existingbullets__byusing__the empty() method,which__removesall__theremaining__spritesfrom__agroup__2.We__alsocall___create_fleet(),which__fillsthe__screenwith__aliens again.Now__anew__fleetappears__assoon__asyou__destroythe__current fleet.Speeding__Upthe__BulletsIf__youve__triedfiring__atthe__aliensin__thegame__scurrent__state,you__mightfind__thatthe__bulletsaren__ttraveling__atthe__bestspeed__for gameplay.They__mightbe__alittle__tooslow__ora__littletoo__fast.At__this point,you__canmodify__theset__tingsto__makethe__gameplaymore__interesting.Keep__inmind__thatthe__gameis__goingto__getprogressively__faster,so__dont__makethe__gametoo__fastat__the beginning.We__modifythe__speedof__thebullets__byadjusting__thevalue__ofbullet_speed__in settings.py.On__my system,I__lladjust__thevalue__ofbullet_speed__to 2.5,so__thebullets__travela__little faster: settings.py #Bullet__settings self.bullet_speed = 2.5 self.bullet_width = 3 --snip--The__bestvalue__forthis__settingdepends__onyour__experienceof__the game,so__finda__valuethat__worksfor__you.You__canadjust__othersettings__as well.Refactoring___update_bullets()Let__srefactor___update_bullets()so__its__notdoing__somany__different tasks.We__llmove__thecode__fordealing__with bullet-aliencollisions__toa__separate method: alien_invasion.pydef___update_bullets(self): --snip-- #Get__ridof__bulletsthat__have disappeared.for__bulletin__self.bullets.copy():if__bullet.rect.bottom <= 0: self.bullets.remove(bullet) self._check_bullet_alien_collisions()def___check_bullet_alien_collisions(self): """Respondto__bullet-alien collisions.""" #Remove__anybullets__andaliens__thathave__collided.collisions__= pygame.sprite.groupcollide( self.bullets, self.aliens, True, True) 270Chapter__13if__not self.aliens: #Destroy__existingbullets__andcreate__new fleet. self.bullets.empty() self._create_fleet()We__vecreated__anew__method, _check_bullet_alien_collisions(),to__lookfor__collisionsbetween__bulletsand__aliensand__torespond__appropriatelyif__theentire__fleethas__been destroyed.Doing__sokeeps___update_bullets()from__growing__toolong__andsimplifies__further development.TRY__ITYOURSELF__13-5.Sideways__ShooterPart__2:We__vecome__along__waysince__Exercise 12-6,Sideways__Shooter.For__this exercise,try__todevelop__SidewaysShooter__tothe__samepoint__weve__broughtAlien__Invasion to.Add__afleet__of aliens,and__makethem__movesideways__towardthe__ship. Or,write__codethat__placesaliens__atran__dompositions__alongthe__rightside__ofthe__screenand__thensends__themtoward__the ship. Also,write__codethat__makesthe__aliensdisappear__whenthey__re hit.Ending__theGame__Whats__thefun__andchallenge__inplaying__agame__youcan__t lose?If__theplayer__doesnt__shootdown__thefleet__quickly enough,we__llhave__thealiens__destroythe__shipwhen__theymake__contact.At__thesame__time,we__lllimit__thenumber__ofships__aplayer__can use,and__well__destroythe__shipwhen__analien__reachesthe__bottomof__the screen.The__gamewill__endwhen__theplayer__hasused__upall__their ships.Detecting__Alien-ShipCollisions__Well__startby__checkingfor__collisionsbetween__aliensand__theship__sowe__canrespond__appropriatelywhen__analien__hits it.We__llcheck__for alien-shipcolli__sionsimmediately__afterupdating__theposition__ofeach__alienin__AlienInvasion:alien___invasion.pydef___update_aliens(self): --snip-- self.aliens.update() #Look__for alien-ship collisions. 1if__pygame.sprite.spritecollideany(self.ship, self.aliens): 2 print("Ship hit!!!")The__spritecollideany()function__takestwo__arguments:a__spriteand__a group.The__functionlooks__forany__memberof__thegroup__thathas__collidedwith__thesprite__andstops__loopingthrough__thegroup__assoon__asit__findsone__memberthat__hascollided__withthe__sprite. Here,it__loopsthrough__thegroup__aliensand__returnsthe__firstalien__itfinds__thathas__collidedwith__ship. Aliens! 271If__nocollisions__occur, spritecollideany()returns__Noneand__theif__blockwon__texecute__1.If__itfinds__analien__thathas__collidedwith__the ship,it__returnsthat__alienand__theif__block executes:it__printsShip__hit!!! 2.When__analien__hitsthe__ship,we__llneed__todo__anumber__of tasks:delete__allremaining__aliensand__bullets,recenter__the ship,and__createa__new fleet.Before__wewrite__codeto__doall__this,we__wantto__knowthat__ourapproach__todetecting__alien-shipcol__lisionsworks__correctly.Writing__a print()call__isa__simpleway__toensure__were__detectingthese__collisions properly.Now__whenyou__runAlien__Invasion,the__messageShip__hit!!!should__appearin__theterminal__wheneveran__alienruns__intothe__ship.When__youre__testingthis__feature,set__fleet_drop_speedto__ahigher__value,such__as 50or__100,so__thealiens__reachyour__ship faster.Responding__to Alien-ShipCollisions__Nowwe__needto__figureout__exactlywhat__willhappen__whenan__aliencollides__withthe__ship.Instead__ofdestroying__theship__instanceand__creatinga__new one,we__llcount__howmany__timesthe__shiphas__beenhit__bytracking__statisticsfor__the game.Tracking__statisticswill__alsobe__usefulfor__scoring.Let__swrite__anew__class, GameStats,to__trackgame__statistics,and__lets__saveit__as game_stats.py: game_stats.pyclass__GameStats: """Trackstatistics__forAlien__Invasion."""def____init__(self, ai_game): """Initialize statistics.""" self.settings = ai_game.settings 1 self.reset_stats()def__reset_stats(self): """Initializestatistics__thatcan__changeduring__the game.""" self.ships_left = self.settings.ship_limitWe__llmake__oneGameStats__instancefor__theentire__timeAlien__Invasionis__running,but__well__needto__resetsome__statisticseach__timethe__playerstarts__anew__game.To__do this,we__llinitialize__mostof__thestatistics__inthe__reset_stats() method,instead__ofdirectly__in __init__().We__llcall__thismethod__from __init__()so__thestatistics__areset__properlywhen__theGameStats__instanceis__firstcreated__1.But__well__alsobe__ableto__call reset_stats()anytime__theplayer__startsa__new game.Right__nowwe__haveonly__one statistic, ships_left,the__valueof__whichwill__changethroughout__the game.The__numberof__shipsthe__playerstarts__withshould__bestored__in settings.pyas__ship_limit: settings.py #Ship__settings self.ship_speed = 1.5 self.ship_limit = 3 272Chapter__13We__alsoneed__tomake__afew__changesin__alien_invasion.pyto__createan__instanceof__GameStats. First,we__llupdate__theimport__statementsat__thetop__ofthe__file: alien_invasion.pyimport__sysfrom__timeimport__sleepimport__pygamefrom__settingsimport__Settingsfrom__game_statsimport__GameStatsfrom__shipimport__Ship --snip--We__importthe__sleep()function__fromthe__timemodule__inthe__Pythonstandard__library,so__wecan__pausethe__gamefor__amoment__whenthe__shipis__hit.We__alsoimport__GameStats.We__llcreate__aninstance__ofGameStats__in __init__(): alien_invasion.pydef____init__(self): --snip-- self.screen = pygame.display.set_mode( (self.settings.screen_width, self.settings.screen_height)) pygame.display.set_caption("Alien Invasion") #Create__aninstance__tostore__game statistics. self.stats = GameStats(self) self.ship = Ship(self) --snip--We__makethe__instanceafter__creatingthe__gamewindow__butbefore__defining__othergame__elements,such__asthe__ship.When__analien__hitsthe__ship,we__llsubtract__1from__thenumber__ofships__left,destroy__allexisting__aliensand__bullets,create__anew__fleet,and__repositionthe__shipin__themiddle__ofthe__screen.We__llalso__pausethe__gamefor__amoment__sothe__playercan__noticethe__collisionand__regroupbefore__anew__fleet appears.Let__sput__mostof__thiscode__ina__newmethod__called _ship_hit().We__llcall__thismethod__from _update_aliens()when__analien__hitsthe__ship:alien___invasion.pydef___ship_hit(self): """Respondto__theship__beinghit__byan__alien.""" #Decrement__ships_left. 1 self.stats.ships_left -= 1 #Get__ridof__anyremaining__bulletsand__aliens. 2 self.bullets.empty() self.aliens.empty() #Create__anew__fleetand__centerthe__ship. 3 self._create_fleet() self.ship.center_ship() Aliens! 273 # Pause. 4 sleep(0.5)The__newmethod___ship_hit()coordinates__theresponse__whenan__alienhits__a ship.Inside___ship_hit(),the__numberof__shipsleft__isreduced__by 1 1,after__whichwe__emptythe__groupsbullets__andaliens__2. Next,we__createa__newfleet__andcenter__theship__3. (Well__addthe__method center_ship()to__Shipin__a moment.)Then__weadd__apause__afterthe__updateshave__beenmade__toall__thegame__elementsbut__beforeany__changeshave__beendrawn__tothe__screen,so__theplayer__cansee__thattheir__shiphas__beenhit__4.The__sleep()call__pausesprogram__executionfor__halfa__second,long__enoughfor__theplayer__tosee__thatthe__alienhas__hitthe__ship.When__the sleep()function__ends,code__executionmoves__onto__the _update_screen() method,which__drawsthe__newfleet__tothe__screen.In___update_aliens(),we__replacethe__print()call__witha__callto___ship_hit()when__analien__hitsthe__ship: alien_invasion.pydef___update_aliens(self): --snip--if__pygame.sprite.spritecollideany(self.ship, self.aliens): self._ship_hit()Here__sthe__newmethod__center_ship(),which__belongsin__ship.py: ship.pydef__center_ship(self): """Centerthe__shipon__the screen.""" self.rect.midbottom = self.screen_rect.midbottom self.x = float(self.rect.x)We__centerthe__shipthe__sameway__wedid__in __init__().After__centering it,we__resetthe__self.x attribute,which__allowsus__totrack__theship__sexact__position.NOTE__Noticethat__wenever__makemore__thanone__ship;we__makeonly__oneship__instancefor__thewhole__gameand__recenterit__wheneverthe__shiphas__been hit.The__statisticships_left__willtell__uswhen__theplayer__hasrun__outof__ships.Run__the game,shoot__afew__aliens,and__letan__alienhit__the ship.The__gameshould__pause,and__anew__fleetshould__appearwith__theship__centeredat__thebottom__ofthe__screen again.Aliens__ThatReach__theBottom__ofthe__ScreenIf__analien__reachesthe__bottomof__the screen,we__llhave__thegame__respondthe__sameway__itdoes__whenan__alienhits__the ship.To__checkwhen__thishap__pens,add__anew__methodin__alien_invasion.py:alien___invasion.pydef___check_aliens_bottom(self): """Checkif__anyaliens__havereached__thebottom__ofthe__screen."""for__alienin__self.aliens.sprites(): 274Chapter__13 1if__alien.rect.bottom >= self.settings.screen_height: #Treat__thisthe__sameas__ifthe__shipgot__hit. self._ship_hit()break__Themethod___check_aliens_bottom()checks__whetherany__alienshave__reachedthe__bottomof__the screen.An__alienreaches__thebottom__whenits__rect.bottomvalue__isgreater__thanor__equalto__thescreen__sheight__1.If__analien__reachesthe__bottom,we__call _ship_hit().If__onealien__hitsthe__bottom,there__sno__needto__checkthe__rest,so__webreak__outof__theloop__aftercalling___ship_hit().We__llcall__thismethod__from _update_aliens(): alien_invasion.pydef___update_aliens(self): --snip-- #Look__for alien-ship collisions.if__pygame.sprite.spritecollideany(self.ship, self.aliens): self._ship_hit() #Look__foraliens__hittingthe__bottomof__the screen. self._check_aliens_bottom()We__call _check_aliens_bottom()after__updatingthe__positionsof__allthe__aliensand__afterlooking__for alien-ship collisions.Now__anew__fleetwill__appearevery__timethe__shipis__hitby__analien__oran__alienreaches__thebottom__ofthe__screen.Game__Over!Alien__Invasionfeels__morecomplete__now,but__thegame__never ends.The__valueof__ships_leftjust__growsincreasingly__negative.Let__sadd__agame_active__flag,so__wecan__endthe__gamewhen__theplayer__runsout__of ships.We__llset__thisflag__atthe__endof__the __init__()method__in AlienInvasion: alien_invasion.pydef____init__(self): --snip-- #Start__AlienInvasion__inan__active state. self.game_active =True__Nowwe__addcode__to _ship_hit()that__setsgame_active__toFalse__whenthe__playerhas__usedup__alltheir__ships: alien_invasion.pydef___ship_hit(self): """Respondto__shipbeing__hitby__alien."""if__self.stats.ships_left > 0: #Decrement__ships_left. self.stats.ships_left -= 1 --snip-- # Pause. sleep(0.5) else: self.game_active =False__Aliens! 275Most__of _ship_hit()is__unchanged.We__vemoved__allthe__existingcode__intoan__if block,which__teststo__makesure__theplayer__hasat__leastone__ship remaining.If__so,we__createa__new fleet, pause,and__move on.If__theplayer__hasno__ships left,we__setgame_active__to False.Identifying__WhenParts__ofthe__GameShould__RunWe__needto__identifythe__partsof__thegame__thatshould__alwaysrun__andthe__partsthat__shouldrun__onlywhen__thegame__is active: alien_invasion.pydef__run_game(self): """Startthe__mainloop__forthe__game."""while__True: self._check_events()if__self.game_active: self.ship.update() self._update_bullets() self._update_aliens() self._update_screen() self.clock.tick(60)In__themain__loop,we__alwaysneed__tocall___check_events(),even__ifthe__gameis__inactive.For__example,we__stillneed__toknow__ifthe__userpresses__Qto__quitthe__gameor__clicksthe__buttonto__closethe__window.We__alsocontinue__updatingthe__screenso__wecan__makechanges__tothe__screenwhile__waitingto__seewhether__theplayer__choosesto__starta__new game.The__restof__thefunction__callsneed__tohappen__onlywhen__thegame__is active,because__whenthe__gameis__inactive,we__dont__needto__updatethe__positionsof__game elements.Now__whenyou__playAlien__Invasion,the__gameshould__freezewhen__youve__usedup__allyour__ships.TRY__ITYOURSELF__13-6.Game__Over:In__Sideways Shooter,keep__trackof__thenumber__oftimes__theship__ishit__andthe__numberof__timesan__alienis__hitby__the ship.Decide__onan__appropriatecondition__forending__the game,and__stopthe__gamewhen__thissitua__tion occurs.Summary__Inthis__chapter,you__learnedhow__toadd__alarge__numberof__identicalelements__toa__gameby__creatinga__fleetof__aliens.You__usednested__loopsto__createa__gridof__elements,and__youmade__alarge__setof__gameelements__moveby__calling__eachelement__s update() method.You__learnedto__controlthe__directionof__276Chapter__13objects__onthe__screenand__torespond__tospecific__situations,such__aswhen__thefleet__reachesthe__edgeof__the screen.You__detectedand__respondedto__collisions__whenbullets__hitaliens__andaliens__hitthe__ship.You__alsolearned__howto__trackstatistics__ina__gameand__usea__game_activeflag__todetermine__whenthe__gameis__over.In__thenext__andfinal__chapterof__this project,we__lladd__aPlay__buttonso__theplayer__canchoose__whento__starttheir__firstgame__andwhether__toplay__againwhen__thegame__ends.We__llspeed__upthe__gameeach__timethe__playershoots__downthe__entire fleet,and__well__adda__scoring system.The__finalresult__willbe__afully__playable game! 14SCOR__INGIn__this chapter,we__llfinish__buildingAlien__Invasion.We__lladd__aPlay__buttonto__startthe__gameon__demandand__torestart__thegame__onceit__ends.We__llalso__changethe__gameso__itspeeds__upwhen__theplayer__movesup__a level,and__well__implementa__scoring system.By__theend__ofthe__chap ter,you__llknow__enoughto__startwriting__gamesthat__increasein__difficultyas__aplayer__progressesand__thatfeature__completescoring__systems. 278Chapter__14Adding__thePlay__ButtonIn__this section,we__lladd__aPlay__buttonthat__appearsbefore__agame__beginsand__reappearswhen__thegame__endsso__theplayer__canplay__again.Right__now,the__gamebegins__assoon__asyou__run alien_invasion.py.Let__sstart__thegame__inan__inactivestate__andthen__promptthe__playerto__clicka__Playbutton__to begin.To__do this,modify__the __init__()method__of AlienInvasion: alien_invasion.pydef____init__(self): """Initializethe__game,and__creategame__resources.""" pygame.init() --snip-- #Start__AlienInvasion__inan__inactive state. self.game_active =False__Nowthe__gameshould__startin__aninactive__state,with__noway__forthe__playerto__startit__untilwe__makea__Play button.Creating__aButton__ClassBecause__Pygamedoesn__thave__a built-inmethod__formaking__buttons,we__llwrite__aButton__classto__createa__filledrectangle__witha__label.You__canuse__thiscode__tomake__anybutton__ina__game.Here__sthe__firstpart__ofthe__Button class;save__itas__button.py: button.pyimport__pygame.fontclass__Button: """Aclass__tobuild__buttonsfor__the game.""" 1def____init__(self, ai_game, msg): """Initializebutton__attributes.""" self.screen = ai_game.screen self.screen_rect = self.screen.get_rect() #Set__thedimensions__andproperties__ofthe__button. 2 self.width, self.height = 200, 50 self.button_color = (0, 135, 0) self.text_color = (255, 255, 255) 3 self.font = pygame.font.SysFont(None, 48) #Build__the button'srect__objectand__center it. 4 self.rect = pygame.Rect(0, 0, self.width, self.height) self.rect.center = self.screen_rect.center #The__buttonmessage__needsto__beprepped__only once. 5 self._prep_msg(msg) First,we__importthe__pygame.font module,which__letsPygame__rendertext__tothe__screen.The____init__()method__takesthe__parameters self,the__ai_game object,and__msg,which__containsthe__buttons__text 1.We__setthe__buttondimensions__2,set__button_colorto__colorthe__buttons__rectobject__dark green,and__settext_color__torender__thetext__in white.Scoring__279 Next,we__preparea__fontattribute__forrendering__text 3.The__Noneargu__menttells__Pygameto__usethe__default font,and__48specifies__thesize__ofthe__text.To__centerthe__buttonon__the screen,we__createa__rectfor__thebutton__4and__setits__centerattribute__tomatch__thatof__the screen.Pygame__workswith__textby__renderingthe__stringyou__wantto__displayas__an image. Finally,we__call _prep_msg()to__handlethis__rendering 5.Here__sthe__codefor___prep_msg(): button.pydef___prep_msg(self, msg): """Turnmsg__intoa__renderedimage__andcenter__texton__the button.""" 1 self.msg_image = self.font.render(msg, True, self.text_color, self.button_color) 2 self.msg_image_rect = self.msg_image.get_rect() self.msg_image_rect.center = self.rect.centerThe___prep_msg()method__needsa__selfparameter__andthe__textto__beren__deredas__animage__(msg).The__callto__font.render()turns__thetext__storedin__msginto__an image,which__wethen__storein__self.msg_image 1.The__font.render()method__alsotakes__aBoolean__valueto__turnantialiasing__onor__off (antialiasingmakes__theedges__ofthe__text smoother).The__remainingarguments__arethe__specifiedfont__colorand__background color.We__setantialiasing__toTrue__andset__thetext__backgroundto__thesame__coloras__the button. (Ifyou__dont__includea__background color,Pygame__willtry__torender__thefont__witha__transparent background.)We__centerthe__textimage__onthe__buttonby__creatinga__rectfrom__theimage__andsetting__itscenter__attributeto__matchthat__ofthe__button 2. Finally,we__createa__draw_button()method__thatwe__cancall__todisplay__thebutton__onscreen: button.pydef__draw_button(self): """Drawblank__buttonand__thendraw__message.""" self.screen.fill(self.button_color, self.rect) self.screen.blit(self.msg_image, self.msg_image_rect)We__call screen.fill()to__drawthe__rectangularportion__ofthe__button.Then__wecall__screen.blit()to__drawthe__textimage__tothe__screen,passing__itan__imageand__therect__objectassociated__withthe__image.This__completesthe__Button class.Drawing__theButton__tothe__ScreenWe__lluse__theButton__classto__createa__Playbutton__in AlienInvasion. First,we__llupdate__theimport__statements: alien_invasion.py --snip--from__game_statsimport__GameStatsfrom__buttonimport__Button 280Chapter__14Because__weneed__onlyone__Play button,we__llcreate__thebutton__inthe____init__()method__of AlienInvasion.We__canplace__thiscode__atthe__veryend__of __init__(): alien_invasion.pydef____init__(self): --snip-- self.game_active =False__#Make__thePlay__button. self.play_button = Button(self, "Play")This__codecreates__aninstance__ofButton__withthe__label Play,but__itdoesn__tdraw__thebutton__tothe__screen.To__do this,we__llcall__thebutton__s draw_button()method__in _update_screen(): alien_invasion.pydef___update_screen(self): --snip-- self.aliens.draw(self.screen) #Draw__theplay__buttonif__thegame__is inactive.if__not self.game_active: self.play_button.draw_button() pygame.display.flip()To__makethe__Playbutton__visibleabove__allother__elementson__the screen,we__drawit__afterall__theother__elementshave__beendrawn__butbefore__flippingto__anew__screen.We__includeit__inan__if block,so__thebutton__onlyappears__whenthe__gameis__inactive.Now__whenyou__runAlien__Invasion,you__shouldsee__aPlay__buttonin__thecenter__ofthe__screen,as__shownin__Figure 14-1.Figure__14-1:A__Playbutton__appearswhen__thegame__is inactive.Scoring__281Starting__theGame__Tostart__anew__gamewhen__theplayer__clicks Play,add__thefollowing__elifblock__tothe__endof___check_events()to__monitormouse__eventsover__the button:alien___invasion.pydef___check_events(self): """Respondto__keypressesand__mouse events."""for__eventin__pygame.event.get():if__event.type == pygame.QUIT: --snip-- 1elif__event.type == pygame.MOUSEBUTTONDOWN: 2mouse_pos__= pygame.mouse.get_pos() 3 self._check_play_button(mouse_pos)Pygame__detectsa__MOUSEBUTTONDOWNevent__whenthe__playerclicks__anywhereon__thescreen__1,but__wewant__torestrict__ourgame__torespond__tomouse__clicksonly__onthe__Play button.To__accomplish this,we__use pygame.mouse.get_pos(),which__returnsa__tuplecontaining__themouse__cursors__x-and__y-coordinateswhen__themouse__buttonis__clicked 2.We__sendthese__valuesto__thenew__method _check_play_button() 3.Here__s _check_play_button(),which__Ichose__toplace__after _check_events():alien___invasion.pydef___check_play_button(self, mouse_pos): """Starta__newgame__whenthe__playerclicks__Play.""" 1if__self.play_button.rect.collidepoint(mouse_pos): self.game_active =True__Weuse__therect__method collidepoint()to__checkwhether__thepoint__ofthe__mouseclick__overlapsthe__regiondefined__bythe__Playbutton__srect__1.If__so,we__setgame_active__to True,and__thegame__begins!At__this point,you__shouldbe__ableto__startand__playa__full game.When__thegame__ends,the__valueof__game_activeshould__becomeFalse__andthe__Playbut__tonshould__reappear.Resetting__theGame__ThePlay__buttoncode__wejust__wroteworks__thefirst__timethe__playerclicks__Play.But__itdoesn__twork__afterthe__firstgame__ends,because__theconditions__thatcaused__thegame__toend__havent__been reset.To__resetthe__gameeach__timethe__playerclicks__Play,we__needto__resetthe__game statistics,clear__outthe__oldaliens__and bullets,build__anew__fleet,and__centerthe__ship,as__shown here:alien___invasion.pydef___check_play_button(self, mouse_pos): """Starta__newgame__whenthe__playerclicks__Play."""if__self.play_button.rect.collidepoint(mouse_pos): #Reset__thegame__statistics. 1 self.stats.reset_stats() self.game_active =True__282Chapter__14 #Get__ridof__anyremaining__bulletsand__aliens. 2 self.bullets.empty() self.aliens.empty() #Create__anew__fleetand__centerthe__ship. 3 self._create_fleet() self.ship.center_ship()We__resetthe__gamestatistics__1,which__givesthe__playerthree__new ships.Then__weset__game_activeto__Trueso__thegame__willbegin__assoon__asthe__codein__thisfunction__finishes running.We__emptythe__aliensand__bulletsgroups__2,and__thenwe__createa__newfleet__andcenter__theship__3.Now__thegame__willreset__properlyeach__timeyou__click Play,allowing__youto__playit__asmany__timesas__you want!Deactivating__thePlay__ButtonOne__issuewith__ourPlay__buttonis__thatthe__buttonregion__onthe__screenwill__continueto__respondto__clickseven__whenthe__Playbutton__isnt__visible.If__youclick__thePlay__buttonarea__byaccident__aftera__game begins,the__gamewill__restart!To__fix this,set__thegame__tostart__onlywhen__game_activeis__False:alien___invasion.pydef___check_play_button(self, mouse_pos): """Starta__newgame__whenthe__playerclicks__Play.""" 1button_clicked__= self.play_button.rect.collidepoint(mouse_pos) 2if__button_clickedand__not self.game_active: #Reset__thegame__statistics. self.stats.reset_stats() --snip--The__flagbutton_clicked__storesa__Trueor__Falsevalue__1,and__thegame__willrestart__onlyif__Playis__clickedand__thegame__isnot__currentlyactive__2.To__testthis__behavior,start__anew__gameand__repeatedlyclick__wherethe__Playbutton__should be.If__everythingworks__as expected,clicking__thePlay__buttonarea__shouldhave__noeffect__onthe__gameplay.Hiding__theMouse__CursorWe__wantthe__mousecursor__tobe__visiblewhen__thegame__is inactive,but__onceplay__begins,it__justgets__inthe__way.To__fix this,we__llmake__itinvisible__whenthe__gamebecomes__active.We__cando__thisat__theend__ofthe__ifblock__in _check_play_button(): alien_invasion.pydef___check_play_button(self, mouse_pos): """Starta__newgame__whenthe__playerclicks__Play."""button_clicked__= self.play_button.rect.collidepoint(mouse_pos)if__button_clickedand__not self.game_active: --snip-- #Hide__themouse__cursor. pygame.mouse.set_visible(False)Scoring__283Passing__Falseto__set_visible()tells__Pygameto__hidethe__cursorwhen__themouse__isover__thegame__window.We__llmake__thecursor__reappearonce__thegame__endsso__theplayer__canclick__Playagain__tobegin__anew__game.Here__sthe__codeto__do that: alien_invasion.pydef___ship_hit(self): """Respondto__shipbeing__hitby__alien."""if__self.stats.ships_left > 0: --snip-- else: self.game_active =False__pygame.mouse.set_visible(True)We__makethe__cursorvisible__againas__soonas__thegame__becomes inactive,which__happensin___ship_hit().Attention__todetails__likethis__makesyour__gamemore__professionallooking__andallows__theplayer__tofocus__on playing,rather__thanfiguring__outthe__user interface.TRY__ITYOURSELF__14-1.Press__Pto__Play:Because__AlienInvasion__useskeyboard__inputto__controlthe__ship,it__wouldbe__usefulto__startthe__gamewith__a keypress.Add__codethat__letsthe__playerpress__Pto__start.It__mighthelp__tomove__somecode__from _check_play_button()to__a _start_game()method__thatcan__becalled__from _check_play_button()and___check_keydown_events(). 14-2.Target__Practice:Create__arectangle__atthe__rightedge__ofthe__screenthat__movesup__anddown__ata__steady rate.Then__onthe__leftside__ofthe__screen,cre__atea__shipthat__theplayer__canmove__upand__downwhile__firingbullets__atthe__rectangular target.Add__aPlay__buttonthat__startsthe__game,and__whenthe__playermisses__thetarget__three times,end__thegame__andmake__thePlay__button reappear.Let__theplayer__restartthe__gamewith__thisPlay__button.Leveling__UpIn__ourcurrent__game,once__aplayer__shootsdown__theentire__alien fleet,the__playerreaches__anew__level,but__thegame__difficultydoesn__t change.Let__sliven__thingsup__abit__andmake__thegame__morechallenging__byincreasing__thegame__sspeed__eachtime__aplayer__clearsthe__screen.Modifying__theSpeed__SettingsWe__llfirst__reorganizethe__Settingsclass__togroup__thegame__settingsinto__staticand__dynamic ones.We__llalso__makesure__anysettings__thatchange__284Chapter__14during__thegame__resetwhen__westart__anew__game.Here__sthe____init__()method__for settings.py: settings.pydef____init__(self): """Initializethe__game'sstatic__settings.""" #Screen__settings self.screen_width = 1200 self.screen_height = 800 self.bg_color = (230, 230, 230) #Ship__settings self.ship_limit = 3 #Bullet__settings self.bullet_width = 3 self.bullet_height = 15 self.bullet_color = 60, 60, 60 self.bullets_allowed = 3 #Alien__settings self.fleet_drop_speed = 10 #How__quicklythe__gamespeeds__up 1 self.speedup_scale = 1.1 2 self.initialize_dynamic_settings()We__continueto__initializesettings__thatstay__constantin__the __init__() method.We__adda__speedup_scalesetting__1to__controlhow__quicklythe__gamespeeds__up:a__valueof__2will__doublethe__gamespeed__everytime__theplayer__reachesa__new level;a__valueof__1will__keepthe__speed constant.A__valuelike__1.1should__increasethe__speedenough__tomake__thegame__challengingbut__not impossible. Finally,we__callthe__initialize_dynamic_settings()method__toinitialize__thevalues__forattributes__thatneed__tochange__throughoutthe__game 2.Here__sthe__codefor__initialize_dynamic_settings(): settings.pydef__initialize_dynamic_settings(self): """Initializesettings__thatchange__throughoutthe__game.""" self.ship_speed = 1.5 self.bullet_speed = 2.5 self.alien_speed = 1.0 #fleet_direction__of 1represents__right; -1represents__left. self.fleet_direction = 1This__methodsets__theinitial__valuesfor__the ship, bullet,and__alien speeds.We__llincrease__thesespeeds__asthe__playerprogresses__inthe__gameand__resetthem__eachtime__theplayer__startsa__new game.We__includefleet___directionin__thismethod__sothe__aliensalways__moveright__atthe__beginningof__anew__game.We__dont__needto__increasethe__valueof__fleet_drop_speed,Scoring__285because__whenthe__aliensmove__fasteracross__the screen,they__llalso__comedown__thescreen__faster.To__increasethe__speedsof__the ship, bullets,and__alienseach__timethe__playerreaches__anew__level,we__llwrite__anew__methodcalled__increase_speed(): settings.pydef__increase_speed(self): """Increasespeed__settings.""" self.ship_speed *= self.speedup_scale self.bullet_speed *= self.speedup_scale self.alien_speed *= self.speedup_scaleTo__increasethe__speedof__thesegame__elements,we__multiplyeach__speedsetting__bythe__valueof__speedup_scale.We__increasethe__games__tempoby__calling increase_speed()in___check _bullet_alien_collisions()when__thelast__alienin__afleet__hasbeen__shot down: alien_invasion.pydef___check_bullet_alien_collisions(self): --snip--if__not self.aliens: #Destroy__existingbullets__andcreate__new fleet. self.bullets.empty() self._create_fleet() self.settings.increase_speed()Changing__thevalues__ofthe__speedsettings__ship_speed, alien_speed,and__bullet_speedis__enoughto__speedup__theentire__game!Resetting__theSpeed__Nowwe__needto__returnany__changedsettings__totheir__initialvalues__eachtime__theplayer__startsa__new game; otherwise,each__newgame__wouldstart__withthe__increasedspeed__settingsof__theprevious__game: alien_invasion.pydef___check_play_button(self, mouse_pos): """Starta__newgame__whenthe__playerclicks__Play."""button_clicked__= self.play_button.rect.collidepoint(mouse_pos)if__button_clickedand__not self.game_active: #Reset__thegame__settings. self.settings.initialize_dynamic_settings() --snip--Playing__AlienInvasion__shouldbe__morefun__andchallenging__now.Each__timeyou__clearthe__screen,the__gameshould__speedup__andbecome__slightlymore__difficult.If__thegame__becomestoo__difficulttoo__quickly,decrease__thevalue__of settings.speedup_scale.Or__ifthe__gameisn__tchallenging__enough,increase__thevalue__slightly.Find__asweet__spotby__rampingup__thedifficulty__ina__reasonableamount__of time.The__firstcouple__ofscreens__shouldbe__easy,the__nextfew__shouldbe__challengingbut__doable,and__subsequentscreens__shouldbe__almostimpossibly__difficult. 286Chapter__14TRY__ITYOURSELF__14-3.Challenging__Target Practice:Start__withyour__workfrom__Exercise 14-2 (page 283).Make__thetarget__movefaster__asthe__game progresses,and__restartthe__targetat__theoriginal__speedwhen__theplayer__clicks Play. 14-4.Difficulty__Levels:Make__aset__ofbuttons__forAlien__Invasionthat__allowsthe__playerto__selectan__appropriatestarting__difficultylevel__forthe__game.Each__button__shouldassign__theappropriate__valuesfor__theattributes__inSettings__neededto__createdifferent__difficulty levels.Scoring__Lets__implementa__scoringsystem__totrack__thegame__sscore__inreal__timeand__displaythe__high score, level,and__numberof__ships remaining.The__scoreis__agame__statistic,so__well__adda__scoreattribute__to GameStats: game_stats.pyclass__GameStats: --snip--def__reset_stats(self): """Initializestatistics__thatcan__changeduring__the game.""" self.ships_left = self.ai_settings.ship_limit self.score = 0To__resetthe__scoreeach__timea__newgame__starts,we__initializescore__in reset_stats()rather__than __init__().Displaying__theScore__Todisplay__thescore__onthe__screen,we__firstcreate__anew__class, Scoreboard.For__now,this__classwill__justdisplay__thecurrent__score. Eventually,we__lluse__itto__reportthe__high score, level,and__numberof__shipsremaining__as well.Here__sthe__firstpart__ofthe__class;save__itas__scoreboard.py: scoreboard.pyimport__pygame.fontclass__Scoreboard: """Aclass__toreport__scoring information.""" 1def____init__(self, ai_game): """Initializescorekeeping__attributes.""" self.screen = ai_game.screen self.screen_rect = self.screen.get_rect() self.settings = ai_game.settings self.stats = ai_game.stats #Font__settingsfor__scoring information. 2 self.text_color = (30, 30, 30) 3 self.font = pygame.font.SysFont(None, 48)Scoring__287 #Prepare__theinitial__score image. 4 self.prep_score()Because__Scoreboardwrites__textto__the screen,we__beginby__importingthe__pygame.font module. Next,we__give __init__()the__ai_gameparameter__soit__canaccess__the settings, screen,and__stats objects,which__itwill__needto__reportthe__valueswe__retracking__1.Then__weset__atext__color 2and__instantiatea__fontobject__3.To__turnthe__textto__bedisplayed__intoan__image,we__call prep_score() 4,which__wedefine__here: scoreboard.pydef__prep_score(self): """Turnthe__scoreinto__arendered__image.""" 1score_str__= str(self.stats.score) 2 self.score_image = self.font.render(score_str, True, self.text_color, self.settings.bg_color) #Display__thescore__atthe__topright__ofthe__screen. 3 self.score_rect = self.score_image.get_rect() 4 self.score_rect.right = self.screen_rect.right - 20 5 self.score_rect.top = 20In__prep_score(),we__turnthe__numericalvalue__stats.scoreinto__astring__1and__thenpass__thisstring__to render(),which__createsthe__image 2.To__displaythe__scoreclearly__onscreen,we__passthe__screens__backgroundcolor__andthe__textcolor__to render().We__llposition__thescore__inthe__upper-rightcorner__ofthe__screenand__haveit__expandto__theleft__asthe__scoreincreases__andthe__widthof__thenum__ber grows.To__makesure__thescore__alwayslines__upwith__theright__sideof__the screen,we__createa__rectcalled__score_rect 3and__setits__rightedge__20pixels__fromthe__rightedge__ofthe__screen 4.We__thenplace__thetop__edge 20pixels__downfrom__thetop__ofthe__screen 5.Then__wecreate__a show_score()method__todisplay__therendered__score image: scoreboard.pydef__show_score(self): """Drawscore__tothe__screen.""" self.screen.blit(self.score_image, self.score_rect)This__methoddraws__thescore__imageonscreen__atthe__locationscore_rect__specifies.Making__aScoreboard__Todisplay__the score,we__llcreate__aScoreboard__instancein__AlienInvasion. First,let__supdate__theimport__statements: alien_invasion.py --snip--from__game_statsimport__GameStatsfrom__scoreboardimport__Scoreboard --snip-- 288Chapter__14 Next,we__makean__instanceof__Scoreboardin____init__(): alien_invasion.pydef____init__(self): --snip-- pygame.display.set_caption("Alien Invasion") #Create__aninstance__tostore__game statistics, #and__createa__scoreboard. self.stats = GameStats(self) self.sb = Scoreboard(self) --snip--Then__wedraw__thescoreboard__onscreenin___update_screen(): alien_invasion.pydef___update_screen(self): --snip-- self.aliens.draw(self.screen) #Draw__thescore__information. self.sb.show_score() #Draw__theplay__buttonif__thegame__is inactive. --snip--We__call show_score()just__beforewe__drawthe__Play button.When__yourun__AlienInvasion__now,a__0should__appearat__thetop__rightof__the screen. (Atthis__point,we__justwant__tomake__surethe__scoreappears__inthe__rightplace__beforedeveloping__thescoring__system further.)Figure__14-2shows__thescore__asit__appearsbefore__thegame__starts. Next,we__llassign__pointvalues__toeach__alien!Figure__14-2:The__scoreappears__atthe__top-rightcorner__ofthe__screen.Scoring__289Updating__theScore__asAliens__AreShot__DownTo__writea__livescore__onscreen,we__updatethe__valueof__stats.scorewhenever__analien__is hit,and__thencall__prep_score()to__updatethe__score image.But__first,let__sdetermine__howmany__pointsa__playergets__eachtime__theyshoot__downan__alien: settings.pydef__initialize_dynamic_settings(self): --snip-- #Scoring__settings self.alien_points = 50We__llincrease__eachalien__spoint__valueas__thegame__progresses.To__makesure__thispoint__valueis__reseteach__timea__newgame__starts,we__setthe__valuein__initialize_dynamic_settings().Let__supdate__thescore__in _check_bullet_alien_collisions()each__timean__alienis__shot down: alien_invasion.pydef___check_bullet_alien_collisions(self): """Respondto__bullet-alien collisions.""" #Remove__anybullets__andaliens__thathave__collided.collisions__= pygame.sprite.groupcollide( self.bullets, self.aliens, True, True)if__collisions: self.stats.score += self.settings.alien_points self.sb.prep_score() --snip--When__abullet__hitsan__alien,Pygame__returnsa__collisions dictionary.We__checkwhether__thedictionary__exists,and__ifit__does,the__aliens__valueis__addedto__the score.We__thencall__prep_score()to__createa__newimage__forthe__updated score.Now__whenyou__playAlien__Invasion,you__shouldbe__ableto__rackup__points!Resetting__theScore__Right now,we__reonly__preppinga__newscore__afteran__alienhas__been hit,which__worksfor__mostof__the game.But__whenwe__starta__new game,we__llstill__seeour__scorefrom__theold__gameuntil__thefirst__alienis__hit.We__canfix__thisby__preppingthe__scorewhen__startinga__new game: alien_invasion.pydef___check_play_button(self, mouse_pos): --snip--if__button_clickedand__not self.game_active: --snip-- #Reset__thegame__statistics. self.stats.reset_stats() self.sb.prep_score() --snip-- 290Chapter__14We__call prep_score()after__resettingthe__gamestats__whenstarting__anew__game.This__prepsthe__scoreboardwith__ascore__of 0.Making__Sureto__ScoreAll__HitsAs__currently written,our__codecould__missscoring__forsome__aliens.For__example,if__twobullets__collidewith__aliensduring__thesame__passthrough__theloop__orif__wemake__an extra-widebullet__tohit__multiple aliens,the__playerwill__onlyreceive__pointsfor__hittingone__ofthe__aliens.To__fix this,let__srefine__theway__that bullet-aliencollisions__are detected.In___check_bullet_alien_collisions(),any__bulletthat__collideswith__analien__becomesa__keyin__thecollisions__dictionary.The__valueassociated__witheach__bulletis__alist__ofaliens__ithas__collided with.We__loopthrough__thevalues__inthe__collisionsdictionary__tomake__surewe__awardpoints__foreach__alien hit: alien_invasion.pydef___check_bullet_alien_collisions(self): --snip--if__collisions:for__aliensin__collisions.values(): self.stats.score += self.settings.alien_points * len(aliens) self.sb.prep_score() --snip--If__thecollisions__dictionaryhas__been defined,we__loopthrough__allvalues__inthe__dictionary.Remember__thateach__valueis__alist__ofaliens__hitby__asingle__bullet.We__multiplythe__valueof__eachalien__bythe__numberof__aliensin__eachlist__andadd__thisamount__tothe__current score.To__test this,change__thewidth__ofa__bulletto__300pixels__andverify__thatyou__receivepoints__foreach__alienyou__hitwith__your extra-wide bullets;then__returnthe__bulletwidth__toits__normal value.Increasing__PointValues__Becausethe__gamegets__moredifficult__eachtime__aplayer__reachesa__new level,aliens__inlater__levelsshould__beworth__more points.To__implementthis__func tionality,we__lladd__codeto__increasethe__pointvalue__whenthe__games__speed increases: settings.pyclass__Settings: """Aclass__tostore__allsettings__forAlien__Invasion."""def____init__(self): --snip-- #How__quicklythe__gamespeeds__up self.speedup_scale = 1.1 #How__quicklythe__alienpoint__valuesincrease__1 self.score_scale = 1.5 self.initialize_dynamic_settings()def__initialize_dynamic_settings(self): --snip--Scoring__291def__increase_speed(self): """Increasespeed__settingsand__alienpoint__values.""" self.ship_speed *= self.speedup_scale self.bullet_speed *= self.speedup_scale self.alien_speed *= self.speedup_scale 2 self.alien_points = int(self.alien_points * self.score_scale)We__definea__rateat__whichpoints__increase,which__wecall__score_scale 1.A__smallincrease__inspeed__(1.1)makes__thegame__morechallenging__quickly.But__tosee__amore__notabledifference__in scoring,we__needto__changethe__alienpoint__valueby__alarger__amount (1.5).Now__whenwe__increasethe__games__speed,we__alsoincrease__thepoint__valueof__eachhit__2.We__usethe__int()func__tionto__increasethe__pointvalue__bywhole__integers.To__seethe__valueof__each alien,add__a print()call__tothe__increase_speed()method__in Settings: settings.pydef__increase_speed(self): --snip-- self.alien_points = int(self.alien_points * self.score_scale) print(self.alien_points)The__newpoint__valueshould__appearin__theterminal__everytime__youreach__anew__level.NOTE__Besure__toremove__the print()call__afterverifying__thatthe__pointvalue__is increasing,or__itmight__affectyour__games__performanceand__distractthe__player.Rounding__theScore__Most arcade-styleshooting__gamesreport__scoresas__multiplesof__10,so__lets__follow__thatlead__withour__scores. Also,let__sformat__thescore__toinclude__commaseparators__inlarge__numbers.We__llmake__thischange__in Scoreboard: scoreboard.pydef__prep_score(self): """Turnthe__scoreinto__arendered__image."""rounded_score__= round(self.stats.score, -1)score_str__= f"{rounded_score:,}" self.score_image = self.font.render(score_str, True, self.text_color, self.settings.bg_color) --snip--The__round()function__normallyrounds__afloat__toa__setnumber__ofdeci__malplaces__givenas__thesecond__argument. However,when__youpass__anega__tivenumber__asthe__second argument, round()will__roundthe__valueto__thenearest__10, 100, 1,000,and__so on.This__codetells__Pythonto__roundthe__valueof__stats.scoreto__thenearest__10and__assignit__to rounded_score.We__thenuse__aformat__specifierin__the f-stringfor__the score.A__formatspecifier__isa__specialsequence__ofcharacters__thatmodifies__theway__avari__ables__valueis__presented.In__thiscase__thesequence__:,tells__Pythonto__insert 292Chapter__14commas__atappropriate__placesin__thenumerical__valuethat__s provided.This__resultsin__stringslike__1,000,000instead__of 1000000.Now__whenyou__runthe__game,you__shouldsee__aneatly__formatted,rounded__scoreeven__whenyou__rackup__lotsof__points,as__shownin__Figure 14-3.Figure__14-3:A__roundedscore__withcomma__separatorsHigh__ScoresEvery__playerwants__tobeat__agame__shigh__score,so__lets__trackand__reporthigh__scoresto__giveplayers__somethingto__work toward.We__llstore__highscores__in GameStats: game_stats.pydef____init__(self, ai_game): --snip-- #High__scoreshould__neverbe__reset. self.high_score = 0Because__thehigh__scoreshould__neverbe__reset,we__initializehigh_score__in __init__()rather__thanin__reset_stats(). Next,we__llmodify__Scoreboardto__displaythe__high score.Let__sstart__withthe____init__() method: scoreboard.pydef____init__(self, ai_game): --snip-- #Prepare__theinitial__score images. self.prep_score() 1 self.prep_high_score()The__highscore__willbe__displayedseparately__fromthe__score,so__weneed__anew__method, prep_high_score(),to__preparethe__high-scoreimage__1.Scoring__293Here__sthe__prep_high_score() method: scoreboard.pydef__prep_high_score(self): """Turnthe__highscore__intoa__rendered image.""" 1high_score__= round(self.stats.high_score, -1)high_score_str__= f"{high_score:,}" 2 self.high_score_image = self.font.render(high_score_str, True, self.text_color, self.settings.bg_color) #Center__thehigh__scoreat__thetop__ofthe__screen. self.high_score_rect = self.high_score_image.get_rect() 3 self.high_score_rect.centerx = self.screen_rect.centerx 4 self.high_score_rect.top = self.score_rect.topWe__roundthe__highscore__tothe__nearest 10and__formatit__withcom__mas 1.We__thengenerate__animage__fromthe__highscore__2,center__thehigh__scorerect__horizontally 3,and__setits__topattribute__tomatch__thetop__ofthe__scoreimage__4.The__show_score()method__nowdraws__thecurrent__scoreat__thetop__rightand__thehigh__scoreat__thetop__centerof__the screen: scoreboard.pydef__show_score(self): """Drawscore__tothe__screen.""" self.screen.blit(self.score_image, self.score_rect) self.screen.blit(self.high_score_image, self.high_score_rect)To__checkfor__high scores,we__llwrite__anew__method, check_high_score(),in__Scoreboard: scoreboard.pydef__check_high_score(self): """Checkto__seeif__there'sa__newhigh__score."""if__self.stats.score > self.stats.high_score: self.stats.high_score = self.stats.score self.prep_high_score()The__method check_high_score()checks__thecurrent__scoreagainst__thehigh__score.If__thecurrent__scoreis__greater,we__updatethe__valueof__high_scoreand__call prep_high_score()to__updatethe__highscore__s image.We__needto__call check_high_score()each__timean__alienis__hitafter__updating__thescore__in _check_bullet_alien_collisions(): alien_invasion.pydef___check_bullet_alien_collisions(self): --snip--if__collisions:for__aliensin__collisions.values(): self.stats.score += self.settings.alien_points * len(aliens) self.sb.prep_score() self.sb.check_high_score() --snip--We__call check_high_score()when__thecollisions__dictionaryis__present,and__wedo__soafter__updatingthe__scorefor__allthe__aliensthat__havebeen__hit. 294Chapter__14The__firsttime__youplay__Alien Invasion,your__scorewill__bethe__high score,so__itwill__bedisplayed__asthe__currentscore__andthe__high score.But__whenyou__starta__second game,your__highscore__shouldappear__inthe__middleand__yourcurrent__scoreshould__appearat__the right,as__shownin__Figure 14-4.Figure__14-4:The__highscore__isshown__atthe__topcenter__ofthe__screen.Displaying__theLevel__Todisplay__theplayer__slevel__inthe__game,we__firstneed__anattribute__inGameStats__representingthe__current level.To__resetthe__levelat__thestart__ofeach__new game,initialize__itin__reset_stats(): game_stats.pydef__reset_stats(self): """Initializestatistics__thatcan__changeduring__the game.""" self.ships_left = self.settings.ship_limit self.score = 0 self.level = 1To__haveScoreboard__displaythe__current level,we__calla__new method, prep_level(),from____init__(): scoreboard.pydef____init__(self, ai_game): --snip-- self.prep_high_score() self.prep_level()Here__s prep_level(): scoreboard.pydef__prep_level(self): """Turnthe__levelinto__arendered__image."""level_str__= str(self.stats.level)Scoring__295 1 self.level_image = self.font.render(level_str, True, self.text_color, self.settings.bg_color) #Position__thelevel__belowthe__score. self.level_rect = self.level_image.get_rect() 2 self.level_rect.right = self.score_rect.right 3 self.level_rect.top = self.score_rect.bottom + 10The__prep_level()method__createsan__imagefrom__thevalue__storedin__stats.level 1and__setsthe__images__rightattribute__tomatch__thescore__sright__attribute 2.It__thensets__thetop__attribute 10pixels__beneaththe__bottomof__thescore__imageto__leavespace__betweenthe__scoreand__thelevel__3.We__alsoneed__toupdate__show_score(): scoreboard.pydef__show_score(self): """Drawscores__andlevel__tothe__screen.""" self.screen.blit(self.score_image, self.score_rect) self.screen.blit(self.high_score_image, self.high_score_rect) self.screen.blit(self.level_image, self.level_rect)This__newline__drawsthe__levelimage__tothe__screen.We__llincrement__stats.leveland__updatethe__levelimage__in_check_bullet___alien_collisions(): alien_invasion.pydef___check_bullet_alien_collisions(self): --snip--if__not self.aliens: #Destroy__existingbullets__andcreate__new fleet. self.bullets.empty() self._create_fleet() self.settings.increase_speed() #Increase__level. self.stats.level += 1 self.sb.prep_level()If__afleet__is destroyed,we__incrementthe__valueof__stats.leveland__call prep_level()to__makesure__thenew__leveldisplays__correctly.To__ensurethe__levelimage__updatesproperly__atthe__startof__anew__game,we__alsocall__prep_level()when__theplayer__clicksthe__Play button: alien_invasion.pydef___check_play_button(self, mouse_pos): --snip--if__button_clickedand__not self.game_active: --snip-- self.sb.prep_score() self.sb.prep_level() --snip--We__call prep_level()right__aftercalling__prep_score().Now__youll__seehow__manylevels__youve__completed,as__shownin__Figure 14-5. 296Chapter__14Figure__14-5:The__currentlevel__appearsjust__belowthe__current score.NOTE__Insome__classic games,the__scoreshave__labels,such__as Score,High__Score,and__Level.We__veomitted__theselabels__becausethe__meaningof__eachnumber__becomesclear__onceyou__veplayed__the game.To__includethese__labels,add__themto__thescore__stringsjust__beforethe__callsto__font.render()in__Scoreboard.Displaying__theNumber__ofShips__Finally,let__sdisplay__thenumber__ofships__theplayer__has left,but__this time,let__suse__a graphic.To__do so,we__lldraw__shipsin__the upper-leftcorner__ofthe__screento__representhow__manyships__are left,just__asmany__classicarcade__games do. First,we__needto__makeShip__inheritfrom__Spriteso__wecan__createa__groupof__ships: ship.pyimport__pygamefrom__pygame.spriteimport__Sprite 1class__Ship(Sprite): """Aclass__tomanage__the ship."""def____init__(self, ai_game): """Initializethe__shipand__setits__starting position.""" 2 super().__init__() --snip--Here__weimport__Sprite,make__sureShip__inheritsfrom__Sprite 1,and__call super()at__thebeginning__of __init__() 2.Scoring__297 Next,we__needto__modifyScoreboard__tocreate__agroup__ofships__wecan__display.Here__arethe__importstatements__for Scoreboard: scoreboard.pyimport__pygame.fontfrom__pygame.spriteimport__Groupfrom__shipimport__ShipBecause__were__makinga__groupof__ships,we__importthe__Groupand__Ship classes.Here__s __init__(): scoreboard.pydef____init__(self, ai_game): """Initializescorekeeping__attributes.""" self.ai_game =ai_game__self.screen = ai_game.screen --snip-- self.prep_level() self.prep_ships()We__assignthe__gameinstance__toan__attribute,because__well__needit__tocreate__some ships.We__call prep_ships()after__thecall__to prep_level().Here__s prep_ships(): scoreboard.pydef__prep_ships(self): """Showhow__manyships__are left.""" 1 self.ships = Group() 2for__ship_numberin__range(self.stats.ships_left):ship__= Ship(self.ai_game) 3 ship.rect.x = 10 +ship_number__* ship.rect.width 4 ship.rect.y = 10 5 self.ships.add(ship)The__prep_ships()method__createsan__empty group, self.ships,to__holdthe__shipinstances__1.To__fillthis__group,a__loopruns__oncefor__everyship__theplayer__hasleft__2.Inside__the loop,we__createa__newship__andset__eachship__s x-coordinatevalue__sothe__shipsappear__nextto__eachother__witha__10-pixelmargin__onthe__leftside__ofthe__groupof__ships 3.We__setthe__y-coordinatevalue__10pixels__downfrom__thetop__ofthe__screenso__theships__appearin__the upper-leftcorner__ofthe__screen 4.Then__weadd__eachnew__shipto__thegroup__ships 5.Now__weneed__todraw__theships__tothe__screen: scoreboard.pydef__show_score(self): """Draw scores, level,and__shipsto__the screen.""" self.screen.blit(self.score_image, self.score_rect) self.screen.blit(self.high_score_image, self.high_score_rect) self.screen.blit(self.level_image, self.level_rect) self.ships.draw(self.screen) 298Chapter__14To__displaythe__shipson__the screen,we__call draw()on__the group,and__Pygamedraws__each ship.To__showthe__playerhow__manyships__theyhave__tostart__with,we__call prep_ships()when__anew__game starts.We__dothis__in _check_play_button()in__AlienInvasion: alien_invasion.pydef___check_play_button(self, mouse_pos): --snip--if__button_clickedand__not self.game_active: --snip-- self.sb.prep_level() self.sb.prep_ships() --snip--We__alsocall__prep_ships()when__aship__is hit,to__updatethe__displayof__shipimages__whenthe__playerloses__a ship: alien_invasion.pydef___ship_hit(self): """Respondto__shipbeing__hitby__alien."""if__self.stats.ships_left > 0: #Decrement__ships_left,and__update scoreboard. self.stats.ships_left -= 1 self.sb.prep_ships() --snip--We__call prep_ships()after__decreasingthe__valueof__ships_left,so__thecor__rectnumber__ofremaining__shipsdisplays__eachtime__aship__is destroyed.Figure__14-6shows__thecomplete__scoring system,with__theremaining__shipsdisplayed__atthe__topleft__ofthe__screen.Figure__14-6:The__completescoring__systemfor__AlienInvasion__Scoring 299TRY__ITYOURSELF__14-5. All-TimeHigh__Score:The__highscore__isreset__everytime__aplayer__closesand__restartsAlien__Invasion.Fix__thisby__writingthe__highscore__toa__filebefore__calling sys.exit()and__readingin__thehigh__scorewhen__initializingits__valuein__GameStats. 14-6. Refactoring:Look__formethods__thatare__doingmore__thanone__task,and__refactorthem__toorganize__yourcode__andmake__it efficient.For__example,move__someof__thecode__in _check_bullet_alien_collisions(),which__startsa__newlevel__whenthe__fleetof__alienshas__been destroyed,to__afunction__calledstart___new_level(). Also,move__thefour__separatemethod__callsin__the __init__()method__inScoreboard__toa__methodcalled__prep_images()to__shorten __init__().The__prep _images()method__couldalso__helpsimplify___check_play_button()or__start_game()if__youve__alreadyrefactored___check_play_button().NOTE__Beforeattempting__torefactor__the project,see__AppendixD__tolearn__howto__restorethe__projectto__aworking__stateif__youintroduce__bugswhile__refactoring. 14-7.Expanding__the Game:Think__ofa__wayto__expandAlien__Invasion.For__example,you__couldprogram__thealiens__toshoot__bulletsdown__atyour__ship.You__canalso__addshields__foryour__shipto__hide behind,which__canbe__destroyedby__bulletsfrom__either side.Or__youcan__usesomething__likethe__pygame.mixermodule__toadd__sound effects,such__asexplosions__andshooting__sounds. 14-8.Sideways__Shooter,Final__Version:Continue__developingSideways__Shooter,using__everythingwe__vedone__inthis__project.Add__aPlay__button,make__thegame__speedup__atappropriate__points,and__developa__scoring system.Be__sureto__refactor__yourcode__asyou__work,and__lookfor__opportunitiesto__customizethe__gamebeyond__whathas__beenshown__inthis__chapter.Summary__Inthis__chapter,you__learnedhow__toimplement__aPlay__buttonto__starta__new game.You__alsolearned__howto__detectmouse__eventsand__hidethe__cursorin__active games.You__canuse__whatyou__velearned__tocreate__other buttons,like__aHelp__buttonto__displayinstructions__onhow__toplay__your games.You__alsolearned__howto__modifythe__speedof__agame__asit__progresses,implement__aprogressive__scoring system,and__displayinformation__intextual__andnontextual__ways. 15GENER__ATING__DATAData__visualizationis__theuse__ofvisual__representations__toexplore__andpresent__patternsin__datasets.It__sclosely__associatedwith__data analysis,which__usescode__toexplore__thepat__ternsand__connectionsin__a dataset.A__datasetcan__bea__smalllist__ofnumbers__thatfits__ina__singleline__of code,or__itcan__beterabytes__ofdata__thatinclude__manydiffer__entkinds__of information.Creating__effectivedata__visualizationsis__aboutmore__thanjust__makinginformation__look nice.When__arepresentation__ofa__datasetis__simpleand__visually appealing,its__meaningbecomes__clearto__viewers.People__willsee__patternsand__significancein__yourdatasets__thatthey__neverknew__existed. Fortunately,you__dont__needa__supercomputerto__visualizecomplex__data.Python__isso__efficientthat__withjust__a laptop,you__canquickly__exploredata__setscontaining__millionsof__individualdata__points.These__datapoints__dont__302Chapter__15have__tobe__numbers;with__thebasics__youlearned__inthe__firstpart__ofthis__book,you__cananalyze__non-numericaldata__as well.People__usePython__for data-intensivework__in genetics,climate__research,political__andeconomic__analysis,and__much more.Data__scientistshave__written__animpressive__arrayof__visualizationand__analysistools__in Python,many__ofwhich__areavailable__toyou__as well.One__ofthe__mostpopular__toolsis__Matplotlib,a__mathematicalplotting__library.In__this chapter,we__lluse__Matplotlibto__makesimple__plots,such__asline__graphsand__scatter plots.Then__well__createa__moreinteresting__datasetbased__onthe__conceptof__arandom__walka__visualizationgenerated__froma__seriesof__random decisions.We__llalso__usea__packagecalled__Plotly,which__createsvisualizations__thatwork__wellon__digital devices,to__analyzethe__resultsof__rolling dice.Plotly__generates__visualizationsthat__automaticallyresize__tofit__avariety__ofdisplay__devices.These__visualizationscan__alsoinclude__anumber__ofinteractive__features,such__asemphasizing__particularaspects__ofthe__datasetwhen__usershover__overdifferent__partsof__the visualization.Learning__touse__Matplotliband__Plotlywill__helpyou__getstarted__visualizingthe__kindsof__datayou__remost__interested in.Installing__MatplotlibTo__useMatplotlib__foryour__initialset__of visualizations,you__llneed__toinstall__itusing__pip,just__likewe__didwith__pytestin__Chapter 11 (seeInstalling__pytestwith__pipon__page 210).To__install Matplotlib,enter__thefollowing__commandat__aterminal__prompt: $python__-mpip__install --usermatplotlib__Ifyou__usea__commandother__thanpython__torun__programsor__starta__terminal__session,such__as python3,your__commandwill__looklike__this: $ python3 -mpip__install --usermatplotlib__Tosee__thekinds__ofvisualizations__youcan__makewith__Matplotlib,visit__theMatplotlib__homepage__at https://matplotlib.organd__clickPlot__types.When__youclick__avisualization__inthe__gallery,you__llsee__thecode__usedto__generatethe__plot.Plotting__aSimple__LineGraph__Lets__plota__simpleline__graphusing__Matplotliband__thencustomize__itto__createa__moreinformative__data visualization.We__lluse__thesquare__numbersequence__1, 4, 9, 16,and__25as__thedata__forthe__graph.To__makea__simpleline__graph,specify__thenumbers__youwant__towork__withand__letMatplotlib__dothe__rest: mpl_squares.pyimport__matplotlib.pyplotas__pltsquares__= [1, 4, 9, 16, 25]Generating__Data 303 1 fig,ax__= plt.subplots() ax.plot(squares) plt.show()We__firstimport__thepyplot__moduleusing__thealias__pltso__wedon__thave__totype__pyplot repeatedly. (Youll__seethis__conventionoften__inonline__examples,so__well__useit__here.)The__pyplotmodule__containsa__numberof__functionsthat__helpgenerate__chartsand__plots.We__createa__listcalled__squaresto__holdthe__datathat__well__plot.Then__wefollow__anothercommon__Matplotlibconvention__bycalling__the subplots()function__1.This__functioncan__generateone__ormore__plotsin__thesame__figure.The__variablefig__representsthe__entire figure,which__isthe__collectionof__plotsthat__are generated.The__variableax__representsa__singleplot__inthe__figure;this__isthe__variablewe__lluse__mostof__thetime__whendefining__andcus__tomizinga__single plot.We__thenuse__the plot() method,which__triesto__plotthe__datait__sgiven__ina__meaningful way.The__function plt.show()opens__Matplotlibs__viewerand__displaysthe__plot,as__shownin__Figure 15-1.The__viewerallows__youto__zoomand__navigatethe__plot,and__youcan__saveany__plotimages__youlike__byclicking__thedisk__icon.Figure__15-1:One__ofthe__simplestplots__youcan__makein__MatplotlibChanging__theLabel__Typeand__LineThickness__Althoughthe__plotin__Figure 15-1shows__thatthe__numbersare__increasing,the__labeltype__istoo__smalland__theline__isa__littlethin__toread__easily. Fortunately,Matplotlib__allowsyou__toadjust__everyfeature__ofa__visualization. 304Chapter__15We__lluse__afew__ofthe__availablecustomizations__toimprove__thisplot__s readability.Let__sstart__byadding__atitle__andlabeling__the axes: mpl_squares.pyimport__matplotlib.pyplotas__pltsquares__= [1, 4, 9, 16, 25] fig,ax__= plt.subplots() 1 ax.plot(squares, linewidth=3) #Set__charttitle__andlabel__axes. 2 ax.set_title("Square Numbers", fontsize=24) 3 ax.set_xlabel("Value", fontsize=14) ax.set_ylabel("Squareof__Value", fontsize=14) #Set__sizeof__tick labels. 4 ax.tick_params(labelsize=14) plt.show()The__linewidthparameter__controlsthe__thicknessof__theline__that plot()generates__1.Once__aplot__hasbeen__generated,there__aremany__methodsavailable__tomodify__theplot__beforeit__s presented.The__set_title()method__setsan__overalltitle__forthe__chart 2.The__fontsize parameters,which__appearrepeatedly__throughoutthe__code,control__thesize__ofthe__textin__variousele__mentson__the chart.The__set_xlabel()and__set_ylabel()methods__allowyou__toset__atitle__foreach__ofthe__axes 3,and__themethod__tick_params()styles__thetick__marks 4.Here__tick_params()sets__thefont__sizeof__thetick__marklabels__to 14on__both axes.As__youcan__seein__Figure 15-2,the__resultingchart__ismuch__easierto__read.The__labeltype__is bigger,and__theline__graphis__thicker.It__soften__worthexperi__mentingwith__thesevalues__tosee__whatworks__bestin__theresulting__graph.Figure__15-2:The__chartis__mucheasier__toread__now.Generating__Data 305Correcting__thePlot__Nowthat__wecan__readthe__chart better,we__cansee__thatthe__datais__notplot__ted correctly.Notice__atthe__endof__thegraph__thatthe__squareof__4.0is__shownas__25!Let__sfix__that.When__yougive__plot()a__singlesequence__of numbers,it__assumesthe__firstdata__pointcorresponds__toan__x-valueof__0,but__ourfirst__pointcorresponds__toan__x-valueof__1.We__canoverride__thedefault__behaviorby__giving plot()both__theinput__andoutput__valuesused__tocalculate__the squares: mpl_squares.pyimport__matplotlib.pyplotas__pltinput_values__= [1, 2, 3, 4, 5]squares__= [1, 4, 9, 16, 25] fig,ax__= plt.subplots() ax.plot(input_values, squares, linewidth=3) #Set__charttitle__andlabel__axes. --snip--Now__plot()doesn__thave__tomake__anyassumptions__abouthow__theout__putnumbers__were generated.The__resulting plot,shown__inFigure__15-3,is__correct.Figure__15-3:The__datais__nowplotted__correctly.You__canspecify__anumber__ofarguments__whencalling__plot()and__usea__numberof__methodsto__customizeyour__plotsafter__generating them.We__llcontinue__toexplore__theseapproaches__tocustomization__aswe__workwith__moreinteresting__datasetsthroughout__this chapter. 306Chapter__15Using__Built-inStyles__Matplotlibhas__anumber__ofpredefined__styles available.These__stylescontain__avariety__ofdefault__settingsfor__background colors, gridlines,line__widths, fonts,font__sizes,and__more.They__canmake__yourvisualizations__appealingwithout__requiringmuch__customization.To__seethe__fulllist__ofavailable__styles,run__thefollowing__linesin__aterminal__session: >>>import__matplotlib.pyplotas__plt >>> plt.style.available ['Solarize_Light2', '_classic_test_patch', '_mpl-gallery', --snip--To__useany__ofthese__styles,add__oneline__ofcode__beforecalling__subplots(): mpl_squares.pyimport__matplotlib.pyplotas__pltinput_values__= [1, 2, 3, 4, 5]squares__= [1, 4, 9, 16, 25] plt.style.use('seaborn') fig,ax__= plt.subplots() --snip--This__codegenerates__theplot__shownin__Figure 15-4.A__widevariety__ofstyles__is available;play__aroundwith__thesestyles__tofind__somethat__you like.Figure__15-4:The__built-inseaborn__stylePlotting__andStyling__IndividualPoints__with scatter() Sometimes,it__suseful__toplot__andstyle__individualpoints__basedon__certain characteristics.For__example,you__mightplot__smallvalues__inone__colorand__largervalues__ina__different color.You__couldalso__plota__largedataset__withone__setof__stylingoptions__andthen__emphasizeindividual__pointsby__replotting__themwith__different options.Generating__Data 307To__plota__single point,pass__thesingle__x-and__y-valuesof__thepoint__to scatter():scatter___squares.pyimport__matplotlib.pyplotas__plt plt.style.use('seaborn') fig,ax__= plt.subplots() ax.scatter(2, 4) plt.show()Let__sstyle__theoutput__tomake__itmore__interesting.We__lladd__a title,label__the axes,and__makesure__allthe__textis__largeenough__to read:import__matplotlib.pyplotas__plt plt.style.use('seaborn') fig,ax__= plt.subplots() 1 ax.scatter(2, 4, s=200) #Set__charttitle__andlabel__axes. ax.set_title("Square Numbers", fontsize=24) ax.set_xlabel("Value", fontsize=14) ax.set_ylabel("Squareof__Value", fontsize=14) #Set__sizeof__tick labels. ax.tick_params(labelsize=14) plt.show()We__call scatter()and__usethe__sargument__toset__thesize__ofthe__dotsused__todraw__thegraph__1.When__yourun__scatter_squares.py now,you__shouldsee__asingle__pointin__themiddle__ofthe__chart,as__shownin__Figure 15-5.Figure__15-5:Plotting__asingle__point 308Chapter__15Plotting__aSeries__ofPoints__with scatter()To__plota__seriesof__points,we__canpass__scatter()separate__listsof__x-and__y-values,like__this:scatter___squares.pyimport__matplotlib.pyplotas__pltx_values__= [1, 2, 3, 4, 5]y_values__= [1, 4, 9, 16, 25] plt.style.use('seaborn') fig,ax__= plt.subplots() ax.scatter(x_values, y_values, s=100) #Set__charttitle__andlabel__axes. --snip--The__x_valueslist__containsthe__numbersto__be squared,and__y_valuescontains__thesquare__ofeach__number.When__theselists__arepassed__to scatter(),Matplotlib__readsone__valuefrom__eachlist__asit__plotseach__point.The__pointsto__beplotted__are (1, 1), (2, 4), (3, 9), (4, 16),and__(5, 25);Figure__15-6shows__the result.Figure__15-6:A__scatterplot__withmultiple__pointsCalculating__DataAutomatically__Writinglists__byhand__canbe__inefficient,especially__whenwe__havemany__points.Rather__thanwriting__outeach__value,let__suse__aloop__todo__thecal__culationsfor__us.Here__show__thiswould__lookwith__1,000 points:scatter___squares.pyimport__matplotlib.pyplotas__plt 1x_values__= range(1, 1001)y_values__= [x**2for__xin__x_values]Generating__Data 309 plt.style.use('seaborn') fig,ax__= plt.subplots() 2 ax.scatter(x_values, y_values, s=10) #Set__charttitle__andlabel__axes. --snip-- #Set__therange__foreach__axis. 3 ax.axis([0, 1100, 0, 1_100_000]) plt.show()We__startwith__arange__of x-valuescontaining__thenumbers__1through__1,000 1. Next,a__listcomprehension__generatesthe__y-valuesby__loopingthrough__the x-values (forx__in x_values),squaring__eachnumber__(x**2),and__assigningthe__resultsto__y_values.We__thenpass__theinput__andoutput__liststo__scatter() 2.Because__thisis__alarge__dataset,we__usea__smallerpoint__size.Before__showingthe__plot,we__usethe__axis()method__tospecify__therange__ofeach__axis 3.The__axis()method__requiresfour__values:the__minimum__andmaximum__valuesfor__the x-axisand__the y-axis. Here,we__runthe__x-axisfrom__0to__1,100and__the y-axisfrom__0to__1,100,000.Figure__15-7shows__the result.Figure__15-7:Python__canplot__1,000points__aseasily__asit__plots 5 points.Customizing__TickLabels__Whenthe__numberson__anaxis__getlarge__enough,Matplotlib__defaultsto__scientificnotation__fortick__labels.This__isusually__agood__thing,because__largernumbers__inplain__notationtake__upa__lotof__unnecessaryspace__ona__visualization. 310Chapter__15Almost__everyelement__ofa__chartis__customizable,so__youcan__tellMatplotlib__tokeep__usingplain__notationif__you prefer: --snip-- #Set__therange__foreach__axis. ax.axis([0, 1100, 0, 1_100_000]) ax.ticklabel_format(style='plain') plt.show()The__ticklabel_format()method__allowsyou__tooverride__thedefault__ticklabel__stylefor__any plot.Defining__CustomColors__Tochange__thecolor__ofthe__points,pass__theargument__colorto__scatter()with__thename__ofa__colorto__usein__quotation marks,as__shown here: ax.scatter(x_values, y_values, color='red', s=10)You__canalso__definecustom__colorsusing__theRGB__color model.To__definea__color,pass__thecolor__argumenta__tuplewith__threefloat__values (oneeach__for red, green,and__blue,in__that order),using__valuesbetween__0and__1.For__example,the__followingline__createsa__plotwith__light-green dots: ax.scatter(x_values, y_values, color=(0, 0.8, 0), s=10)Values__closerto__0produce__darker colors,and__valuescloser__to 1produce__lighter colors.Using__aColormap__Acolormap__isa__sequenceof__colorsin__agradient__thatmoves__froma__startingto__anending__color.In__visualizations,colormaps__areused__toemphasize__patterns__in data.For__example,you__mightmake__lowvalues__alight__colorand__highvalues__adarker__color.Using__acolormap__ensuresthat__allpoints__inthe__visualizationvary__smoothlyand__accuratelyalong__a well-designedcolor__scale.The__pyplotmodule__includesa__setof__built-in colormaps.To__useone__ofthese__colormaps,you__needto__specifyhow__pyplotshould__assigna__colorto__eachpoint__inthe__dataset.Here__show__toassign__acolor__toeach__point,based__onits__y-value:scatter___squares.py --snip-- plt.style.use('seaborn') fig,ax__= plt.subplots() ax.scatter(x_values, y_values, c=y_values, cmap=plt.cm.Blues, s=10) #Set__charttitle__andlabel__axes. --snip--The__cargument__issimilar__to color,but__its__usedto__associatea__sequenceof__valueswith__acolor__mapping.We__passthe__listof__y-valuesto__c,and__thenGenerating__Data 311tell__pyplotwhich__colormapto__usewith__thecmap__argument.This__codecolors__thepoints__withlower__y-valueslight__blueand__thepoints__withhigher__y-valuesdark__blue.Figure__15-8shows__theresulting__plot.NOTE__Youcan__seeall__thecolormaps__availablein__pyplotat__https://matplotlib.org.Go__to Tutorials,scroll__downto__Colors,and__clickChoosing__Colormapsin__Matplotlib.Figure__15-8:A__plotusing__theBlues__colormapSaving__YourPlots__AutomaticallyIf__youwant__tosave__theplot__toa__fileinstead__ofshowing__itin__theMatplotlib__viewer,you__canuse__plt.savefig()instead__of plt.show(): plt.savefig('squares_plot.png', bbox_inches='tight')The__firstargument__isa__filenamefor__theplot__image,which__willbe__savedin__thesame__directoryas__scatter_squares.py.The__secondargument__trimsextra__whitespacefrom__the plot.If__youwant__theextra__whitespacearound__the plot,you__canomit__this argument.You__canalso__call savefig()with__aPath__object,and__writethe__outputfile__anywhereyou__wanton__your system.TRY__ITYOURSELF__15-1. Cubes:A__numberraised__tothe__thirdpower__isa__cube.Plot__thefirst__fivecubic__numbers,and__thenplot__thefirst__5,000cubic__numbers. 15-2.Colored__Cubes:Apply__acolormap__toyour__cubes plot. 312Chapter__15Random__WalksIn__this section,we__lluse__Pythonto__generatedata__fora__randomwalk__andthen__useMatplotlib__tocreate__avisually__appealingrepresentation__ofthat__data.A__randomwalk__isa__paththat__sdetermined__bya__seriesof__simpledeci__sions,each__ofwhich__isleft__entirelyto__chance.You__mightimagine__arandom__walkas__thepath__aconfused__antwould__takeif__ittook__everystep__ina__random__direction.Random__walkshave__practicalapplications__in nature, physics, biology, chemistry,and__economics.For__example,a__pollengrain__floatingon__adrop__ofwater__movesacross__thesurface__ofthe__waterbecause__its__constantlypushed__aroundby__water molecules.Molecular__motionin__awater__dropis__random,so__thepath__apollen__graintraces__onthe__surfaceis__arandom__walk.The__codewe__llwrite__nextmodels__many real-world situations.Creating__theRandomWalk__ClassTo__createa__random walk,we__llcreate__aRandomWalk__class,which__willmake__random__decisionsabout__whichdirection__thewalk__should take.The__classneeds__three attributes:one__variableto__trackthe__numberof__pointsin__the walk,and__twolists__tostore__the x-and__y-coordinatesof__eachpoint__inthe__walk.We__llonly__needtwo__methodsfor__theRandomWalk__class:the____init__()method__and fill_walk(),which__willcalculate__thepoints__inthe__walk.Let__sstart__withthe____init__() method:random___walk.py 1from__randomimport__choiceclass__RandomWalk: """Aclass__togenerate__random walks.""" 2def____init__(self, num_points=5000): """Initializeattributes__ofa__walk.""" self.num_points =num_points__#All__walksstart__at (0, 0). 3 self.x_values = [0] self.y_values = [0]To__makerandom__decisions,we__llstore__possiblemoves__ina__listand__usethe__choice()function__(fromthe__random module)to__decidewhich__moveto__makeeach__timea__stepis__taken 1.We__setthe__defaultnumber__ofpoints__ina__walkto__5000,which__islarge__enoughto__generatesome__interestingpatterns__butsmall__enoughto__generatewalks__quickly 2.Then__wemake__twolists__tohold__the x-and__y-values,and__westart__eachwalk__atthe__point (0, 0) 3.Choosing__DirectionsWe__lluse__the fill_walk()method__todetermine__thefull__sequenceof__pointsin__the walk.Add__thismethod__to random_walk.py:random___walk.pydef__fill_walk(self): """Calculateall__thepoints__inthe__walk."""Generating__Data 313 #Keep__takingsteps__untilthe__walkreaches__thedesired__length. 1while__len(self.x_values) < self.num_points: #Decide__whichdirection__to go,and__howfar__to go. 2x_direction__= choice([1, -1])x_distance__= choice([0, 1, 2, 3, 4]) 3x_step__=x_direction__*x_distance__y_direction = choice([1, -1])y_distance__= choice([0, 1, 2, 3, 4]) 4y_step__=y_direction__*y_distance__#Reject__movesthat__go nowhere. 5if__x_step == 0and__y_step == 0:continue__#Calculate__thenew__position. 6x__= self.x_values[-1] +x_step__y = self.y_values[-1] +y_step__self.x_values.append(x) self.y_values.append(y)We__firstset__upa__loopthat__runsuntil__thewalk__isfilled__withthe__correctnumber__ofpoints__1.The__mainpart__of fill_walk()tells__Pythonhow__tosimu__latefour__random decisions:Will__thewalk__goright__or left?How__farwill__itgo__inthat__direction?Will__itgo__upor__down?How__farwill__itgo__inthat__direction?We__use choice([1, -1])to__choosea__valuefor__x_direction,which__returnseither__1for__movementto__theright__or 1for__movementto__theleft__2. Next, choice([0, 1, 2, 3, 4])randomly__selectsa__distanceto__movein__thatdirec__tion.We__assignthis__valueto__x_distance.The__inclusionof__a 0allows__forthe__possibilityof__stepsthat__havemovement__alongonly__one axis.We__determinethe__lengthof__eachstep__inthe__x-and__y-directionsby__multiplying__thedirection__ofmovement__bythe__distancechosen__3 4.A__positiveresult__forx_step__meansmove__tothe__right,a__negativeresult__meansmove__tothe__left,and__0means__move vertically.A__positiveresult__fory_step__meansmove__up,negative__meansmove__down,and__0means__move horizontally.If__thevalues__ofboth__x_stepand__y_stepare__0,the__walkdoesn__tgo__anywhere;when__this happens,we__continuethe__loop 5.To__getthe__next x-valuefor__the walk,we__addthe__valuein__x_stepto__thelast__valuestored__inx_values__6and__dothe__samefor__the y-values.When__wehave__thenew__points__coordinates,we__appendthem__tox_values__and y_values.Plotting__theRandom__WalkHere__sthe__codeto__plotall__thepoints__inthe__walk: rw_visual.pyimport__matplotlib.pyplotas__pltfrom__random_walkimport__RandomWalk #Make__arandom__walk. 314Chapter__15 1rw__= RandomWalk() rw.fill_walk() #Plot__thepoints__inthe__walk. plt.style.use('classic') fig,ax__= plt.subplots() 2 ax.scatter(rw.x_values, rw.y_values, s=15) 3 ax.set_aspect('equal') plt.show()We__beginby__importingpyplot__and RandomWalk.We__thencreate__arandom__walkand__assignit__torw__1,making__sureto__call fill_walk().To__visualizethe__walk,we__feedthe__walks__x-and__y-valuesto__scatter()and__choosean__appropriatedot__size 2.By__default,Matplotlib__scaleseach__axis independently.But__thatapproach__wouldstretch__mostwalks__outhorizontally__or vertically.Here__weuse__the set_aspect()method__tospecify__thatboth__axesshould__haveequal__spacingbetween__tickmarks__3.Figure__15-9shows__theresulting__plotwith__5,000 points.The__imagesin__thissection__omitMatplotlib__s viewer,but__youll__continueto__seeit__whenyou__run rw_visual.py.Figure__15-9:A__randomwalk__with 5,000points__GeneratingMultiple__RandomWalks__Everyrandom__walkis__different,and__its__funto__explorethe__variouspatterns__thatcan__be generated.One__wayto__usethe__precedingcode__tomake__multiplewalks__withouthaving__torun__theprogram__severaltimes__isto__wrapit__ina__while loop,like__this: rw_visual.pyimport__matplotlib.pyplotas__pltfrom__random_walkimport__RandomWalk #Keep__makingnew__walks,as__longas__theprogram__is active.Generating__Data 315while__True: #Make__arandom__walk. --snip-- plt.show()keep_running__= input("Makeanother__walk? (y/n): ")if__keep_running == 'n':break__Thiscode__generatesa__random walk,displays__itin__Matplotlibs__viewer,and__pauseswith__theviewer__open.When__youclose__the viewer,you__llbe__askedwhether__youwant__togenerate__another walk.If__yougenerate__afew__walks,you__shouldsee__somethat__staynear__thestarting__point,some__thatwander__offmostly__inone__direction,some__thathave__thinsections__connectinglarger__groupsof__points,and__manyother__kindsof__walks.When__youwant__toend__the program,press__N.Styling__theWalk__Inthis__section,we__llcustomize__ourplots__toemphasize__theimportant__characteristics__ofeach__walkand__deemphasizedistracting__elements.To__do so,we__identifythe__characteristicswe__wantto__emphasize,such__aswhere__thewalk__began,where__it ended,and__thepath__taken. Next,we__identifythe__characteristics__to deemphasize,such__astick__marksand__labels.The__resultshould__bea__simplevisual__representationthat__clearlycommunicates__thepath__takenin__eachrandom__walk.Coloring__thePoints__Well__usea__colormapto__showthe__orderof__thepoints__inthe__walk,and__removethe__blackoutline__fromeach__dotso__thecolor__ofthe__dotswill__be clearer.To__colorthe__pointsaccording__totheir__positionin__the walk,we__passthe__cargument__alist__containingthe__positionof__each point.Because__thepoints__areplotted__in order,this__listjust__containsthe__numbersfrom__0to__4,999: rw_visual.py --snip--while__True: #Make__arandom__walk.rw__= RandomWalk() rw.fill_walk() #Plot__thepoints__inthe__walk. plt.style.use('classic') fig,ax__= plt.subplots() 1point_numbers__= range(rw.num_points) ax.scatter(rw.x_values, rw.y_values, c=point_numbers, cmap=plt.cm.Blues, edgecolors='none', s=15) ax.set_aspect('equal') plt.show() --snip-- 316Chapter__15We__use range()to__generatea__listof__numbersequal__tothe__numberof__pointsin__thewalk__1.We__assignthis__listto__point_numbers,which__well__useto__setthe__colorof__eachpoint__inthe__walk.We__passpoint_numbers__tothe__cargu__ment,use__theBlues__colormap,and__thenpass__edgecolors='none'to__getrid__ofthe__blackoutline__aroundeach__point.The__resultis__aplot__thatvaries__fromlight__todark__blue,showing__exactlyhow__thewalk__movesfrom__itsstarting__pointto__itsending__point.This__isshown__inFigure__15-10.Figure__15-10:A__randomwalk__coloredwith__theBlues__colormapPlotting__theStarting__andEnding__PointsIn__additionto__coloringpoints__toshow__theirposition__alongthe__walk,it__wouldbe__usefulto__seeexactly__whereeach__walkbegins__and ends.To__do so,we__canplot__thefirst__andlast__pointsindividually__afterthe__mainseries__hasbeen__plotted.We__llmake__theend__pointslarger__andcolor__themdifferently__tomake__themstand__out: rw_visual.py --snip--while__True: --snip-- ax.scatter(rw.x_values, rw.y_values, c=point_numbers, cmap=plt.cm.Blues, edgecolors='none', s=15) ax.set_aspect('equal') #Emphasize__thefirst__andlast__points. ax.scatter(0, 0, c='green', edgecolors='none', s=100) ax.scatter(rw.x_values[-1], rw.y_values[-1], c='red', edgecolors='none', s=100) plt.show() --snip--To__showthe__starting point,we__plotthe__point (0, 0)in__greenand__ina__largersize__(s=100)than__therest__ofthe__points.To__markthe__end point,we__GeneratingData__317plot__thelast__x-and__y-valuesin__redwith__asize__of 100as__well.Make__sureyou__insertthis__codejust__beforethe__callto__plt.show()so__thestarting__andending__pointsare__drawnon__topof__allthe__other points.When__yourun__this code,you__shouldbe__ableto__spotexactly__whereeach__walkbegins__and ends.If__theseend__pointsdon__tstand__outclearly__enough,adjust__theircolor__andsize__untilthey__do.Cleaning__Upthe__AxesLet__sremove__theaxes__inthis__plotso__theydon__tdistract__fromthe__pathof__each walk.Here__show__tohide__the axes: rw_visual.py --snip--while__True: --snip-- ax.scatter(rw.x_values[-1], rw.y_values[-1], c='red', edgecolors='none', s=100) #Remove__the axes. ax.get_xaxis().set_visible(False) ax.get_yaxis().set_visible(False) plt.show() --snip--To__modifythe__axes,we__usethe__ax.get_xaxis()and__ax.get_yaxis()meth__odsto__geteach__axis,and__thenchain__the set_visible()method__tomake__eachaxis__invisible.As__youcontinue__towork__with visualizations,you__llfre__quentlysee__thischaining__ofmethods__tocustomize__differentaspects__ofa__visualization.Run__rw_visual.py now;you__shouldsee__aseries__ofplots__withno__axes.Adding__PlotPoints__Lets__increasethe__numberof__points,to__giveus__moredata__towork__with.To__do so,we__increasethe__valueof__num_pointswhen__wemake__aRandomWalk__instanceand__adjustthe__sizeof__eachdot__whendrawing__the plot: rw_visual.py --snip--while__True: #Make__arandom__walk.rw__= RandomWalk(50_000) rw.fill_walk() #Plot__thepoints__inthe__walk. plt.style.use('classic') fig,ax__= plt.subplots()point_numbers__= range(rw.num_points) ax.scatter(rw.x_values, rw.y_values, c=point_numbers, cmap=plt.cm.Blues, edgecolors='none', s=1) --snip-- 318Chapter__15This__examplecreates__arandom__walkwith__50,000points__andplots__eachpoint__atsize__s=1.The__resultingwalk__iswispy__and cloudlike,as__shownin__Figure 15-11.We__vecreated__apiece__ofart__froma__simplescatter__plot!Experiment__withthis__codeto__seehow__muchyou__canincrease__thenum__berof__pointsin__awalk__beforeyour__systemstarts__toslow__downsignificantly__orthe__plotloses__itsvisual__appeal.Figure__15-11:A__walkwith__50,000points__Alteringthe__Sizeto__Fillthe__ScreenA__visualizationis__muchmore__effectiveat__communicatingpatterns__indata__ifit__fitsnicely__onthe__screen.To__makethe__plottingwindow__betterfit__your screen,you__canadjust__thesize__ofMatplotlib__s output.This__isdone__inthe__subplots() call: fig,ax__= plt.subplots(figsize=(15, 9))When__creatinga__plot,you__canpass__subplots()a__figsize argument,which__setsthe__sizeof__the figure.The__figsizeparameter__takesa__tuplethat__tellsMatplotlib__thedimensions__ofthe__plottingwindow__in inches.Matplotlib__assumesyour__screenresolution__is 100pixels__per inch;if__thiscode__doesnt__giveyou__anaccurate__plot size,adjust__thenumbers__as necessary. Or,if__youknow__yoursystem__s resolution,you__canpass__subplots()the__resolution__usingthe__dpi parameter: fig,ax__= plt.subplots(figsize=(10, 6), dpi=128)This__shouldhelp__makethe__mostefficient__useof__thespace__availableon__your screen.Generating__Data 319TRY__ITYOURSELF__15-3.Molecular__Motion:Modify__rw_visual.pyby__replacing ax.scatter()with__ax.plot().To__simulatethe__pathof__apollen__grainon__thesurface__ofa__dropof__water,pass__inthe__rw.x_valuesand__rw.y_values,and__includea__linewidthargu__ment.Use__5,000instead__of 50,000points__tokeep__theplot__frombeing__too busy. 15-4.Modified__Random Walks:In__theRandomWalk__class,x_step__andy_step__aregenerated__fromthe__sameset__of conditions.The__directionis__chosenrandomly__fromthe__list [1, -1]and__thedistance__fromthe__list [0, 1, 2, 3, 4].Modify__thevalues__inthese__liststo__seewhat__happensto__theoverall__shapeof__your walks.Try__alonger__listof__choicesfor__the distance,such__as 0through__8,or__removethe__1from__the x-or__y-direction list. 15-5. Refactoring:The__fill_walk()method__is lengthy.Create__anew__methodcalled__get_step()to__determinethe__directionand__distancefor__each step,and__thencalculate__the step.You__shouldend__upwith__twocalls__to get_step()in__fill_walk():x_step__= self.get_step()y_step__= self.get_step()This__refactoringshould__reducethe__sizeof__fill_walk()and__makethe__methodeasier__toread__and understand.Rolling__Dicewith__PlotlyIn__this section,we__lluse__Plotlyto__produceinteractive__visualizations.Plotly__isparticularly__usefulwhen__youre__creatingvisualizations__thatwill__bedisplayed__ina__browser,because__thevisualizations__willscale__automaticallyto__fitthe__viewers__screen.These__visualizationsare__also interactive;when__theuser__hovers__overcertain__elementson__the screen,information__aboutthose__elementsis__highlighted.We__llbuild__ourinitial__visualizationin__justa__couplelines__ofcode__usingPlotly__Express,a__subsetof__Plotlythat__focuseson__generatingplots__withas__littlecode__as possible.Once__weknow__ourplot__is correct,we__llcus__tomizethe__outputjust__aswe__didwith__Matplotlib.In__this project,we__llanalyze__theresults__ofrolling__dice.When__youroll__one regular, six-sided die,you__havean__equalchance__ofrolling__anyof__thenumbers__from 1through__6. However,when__youuse__two dice,you__remore__likelyto__rollcertain__numbersthan__others.We__lltry__todetermine__whichnumbers__aremost__likelyto__occurby__generatinga__datasetthat__representsrolling__dice.Then__well__plotthe__resultsof__alarge__numberof__rollsto__determine__whichresults__aremore__likelythan__others.This__workhelps__modelgames__involving dice,but__thecore__ideasalso__applyto__gamesthat__involvechance__ofany__kind,such__ascard__games.It__alsorelates__tomany__real-worldsituations__whererandomness__playsa__significant factor. 320Chapter__15Installing__PlotlyInstall__Plotlyusing__pip,just__asyou__didfor__Matplotlib: $python__-mpip__install --userplotly__$python__-mpip__install --userpandas__PlotlyExpress__dependson__pandas,which__isa__libraryfor__workingeffi__cientlywith__data,so__weneed__toinstall__thatas__well.If__youused__python3or__somethingelse__wheninstalling__Matplotlib,make__sureyou__usethe__samecommand__here.To__seewhat__kindof__visualizationsare__possiblewith__Plotly,visit__thegal__leryof__charttypes__at https://plotly.com/python.Each__exampleincludes__source code,so__youcan__seehow__Plotlygenerates__the visualizations.Creating__theDie__ClassWe__llcreate__thefollowing__Dieclass__tosimulate__theroll__ofone__die: die.pyfrom__randomimport__randintclass__Die: """Aclass__representinga__single die.""" 1def____init__(self, num_sides=6): """Assumea__six-sided die.""" self.num_sides =num_sides__def roll(self): """"Returna__randomvalue__between 1and__numberof__sides.""" 2return__randint(1, self.num_sides)The____init__()method__takesone__optionalargument__1.With__theDie__class,when__aninstance__ofour__dieis__created,the__numberof__sideswill__besix__ifno__argumentis__included.If__anargument__is included,that__valuewill__setthe__numberof__sideson__the die. (Diceare__namedfor__theirnumber__of sides:a__six-sideddie__isa__D6,an__eight-sideddie__isa__D8,and__so on.)The__roll()method__usesthe__randint()function__toreturn__arandom__numberbetween__1and__thenumber__ofsides__2.This__functioncan__returnthe__startingvalue__(1),the__endingvalue__(num_sides),or__anyinteger__betweenthe__two.Rolling__theDie__Beforecreating__avisualization__basedon__theDie__class,let__sroll__a D6,print__the results,and__checkthat__theresults__look reasonable: die_visual.pyfrom__dieimport__Die #Create__a D6. 1die__= Die()Generating__Data 321 #Make__some rolls,and__storeresults__ina__list.results__= [] 2for__roll_numin__range(100):result__= die.roll() results.append(result) print(results)We__createan__instanceof__Diewith__thedefault__sixsides__1.Then__weroll__thedie__100times__2and__storethe__resultof__eachroll__inthe__list results.Here__sa__sampleset__of results: [4, 6, 5, 6, 1, 5, 6, 3, 5, 3, 5, 3, 2, 2, 1, 3, 1, 5, 3, 6, 3, 6, 5, 4, 1, 1, 4, 2, 3, 6, 4, 2, 6, 4, 1, 3, 2, 5, 6, 3, 6, 2, 1, 1, 3, 4, 1, 4, 3, 5, 1, 4, 5, 5, 2, 3, 3, 1, 2, 3, 5, 6, 2, 5, 6, 1, 3, 2, 1, 1, 1, 6, 5, 5, 2, 2, 6, 4, 1, 4, 5, 1, 1, 1, 4, 5, 3, 3, 1, 3, 5, 4, 5, 6, 5, 4, 1, 5, 1, 2]A__quickscan__ofthese__resultsshows__thatthe__Dieclass__seemsto__bework__ing.We__seethe__values 1and__6,so__weknow__thesmallest__andlargest__possiblevalues__arebeing__returned,and__becausewe__dont__see 0or__7,we__knowall__theresults__arein__theappropriate__range.We__alsosee__eachnumber__from 1through__6,which__indicatesthat__allpossible__outcomesare__represented.Let__sdetermine__exactlyhow__manytimes__eachnumber__appears.Analyzing__theResults__Well__analyzethe__resultsof__rollingone__D6by__countinghow__manytimes__weroll__each number: die_visual.py --snip-- #Make__some rolls,and__storeresults__ina__list.results__= [] 1for__roll_numin__range(1000):result__= die.roll() results.append(result) #Analyze__the results.frequencies__= [] 2poss_results__= range(1, die.num_sides+1)for__valuein__poss_results: 3frequency__= results.count(value) 4 frequencies.append(frequency) print(frequencies)Because__were__nolonger__printingthe__results,we__canincrease__thenum__berof__simulatedrolls__to 1000 1.To__analyzethe__rolls,we__createthe__emptylist__frequenciesto__storethe__numberof__timeseach__valueis__rolled.We__thengenerate__allthe__possibleresults__wecould__get;in__this example,that__sall__thenumbers__from 1to__howevermany__sidesdie__has 2.We__loopthrough__thepos__sible values,count__howmany__timeseach__numberappears__inresults__3,and__322Chapter__15then__appendthis__valueto__frequencies 4.We__printthis__listbefore__makinga__visualization: [155, 167, 168, 170, 159, 181]These__resultslook__reasonable:we__seesix__frequencies,one__foreach__possible__numberwhen__youroll__a D6.We__alsosee__thatno__frequencyis__significantlyhigher__thanany__other.Now__lets__visualizethese__results.Making__aHistogram__Nowthat__wehave__thedata__we want,we__cangenerate__avisualization__injust__acouple__linesof__codeusing__Plotly Express: die_visual.pyimport__plotly.expressas__pxfrom__dieimport__Die --snip--for__valuein__poss_results:frequency__= results.count(value) frequencies.append(frequency) #Visualize__the results.fig__= px.bar(x=poss_results, y=frequencies) fig.show()We__firstimport__the plotly.express module,using__theconventional__alias px.We__thenuse__the px.bar()function__tocreate__abar__graph.In__thesimplest__useof__this function,we__onlyneed__topass__aset__of x-valuesand__aset__of y-values.Here__the x-valuesare__thepossible__resultsfrom__rollinga__single die,and__the y-valuesare__thefrequencies__foreach__possible result.The__finalline__calls fig.show(),which__tellsPlotly__torender__theresulting__chartas__anHTML__fileand__openthat__filein__anew__browser tab.The__resultis__shownin__Figure 15-12.This__isa__reallysimple__chart,and__its__certainlynot__complete.But__thisis__exactlyhow__PlotlyExpress__ismeant__tobe__used;you__writea__couplelines__of code,look__atthe__plot,and__makesure__itrepresents__thedata__theway__youwant__it to.If__youlike__whatyou__see,you__canmove__onto__customizingele__mentsof__thechart__suchas__labelsand__styles.But__ifyou__wantto__exploreother__possiblechart__types,you__cando__so now,without__havingspent__extratime__oncustomization__work.Feel__freeto__trythis__nowby__changing px.bar()to__something__like px.scatter()or__px.line().You__canfind__afull__listof__availablechart__typesat__https://plotly.com/python/plotly-express.This__chartis__dynamicand__interactive.If__youchange__thesize__ofyour__browser window,the__chartwill__resizeto__matchthe__available space.If__youhover__overany__ofthe__bars,you__llsee__a pop-uphighlighting__thespecific__datarelated__tothat__bar.Generating__Data 323Figure__15-12:The__initialplot__producedby__PlotlyExpress__Customizingthe__PlotNow__thatwe__knowwe__havethe__correctkind__ofplot__andour__datais__beingrepresented__accurately,we__canfocus__onadding__theappropriate__labelsand__stylesfor__the chart.The__firstway__tocustomize__aplot__withPlotly__isto__usesome__optionalparameters__inthe__initialcall__thatgenerates__the plot,in__this case, px.bar().Here__show__toadd__anoverall__titleand__alabel__foreach__axis: die_visual.py --snip-- #Visualize__the results. 1title__= "Resultsof__RollingOne__D6 1,000 Times" 2labels__= {'x': 'Result', 'y': 'Frequencyof__Result'}fig__= px.bar(x=poss_results, y=frequencies, title=title, labels=labels) fig.show()We__firstdefine__thetitle__thatwe__want,here__assignedto__title 1.To__defineaxis__labels,we__writea__dictionary 2.The__keysin__thedictionary__referto__thelabels__wewant__to customize,and__thevalues__arethe__customlabels__wewant__to use.Here__wegive__the x-axisthe__labelResult__andthe__y-axisthe__labelFrequency__of Result.The__callto__px.bar()now__includesthe__optionalargu__mentstitle__and labels.Now__whenthe__plotis__generatedit__includesan__appropriatetitle__anda__labelfor__each axis,as__shownin__Figure 15-13. 324Chapter__15Figure__15-13:A__simplebar__chartcreated__withPlotly__RollingTwo__DiceRolling__twodice__resultsin__largernumbers__anda__differentdistribution__of results.Let__smodify__ourcode__tocreate__two D6dice__tosimulate__theway__weroll__apair__of dice.Each__timewe__rollthe__pair,we__lladd__thetwo__numbers (onefrom__each die)and__storethe__sumin__results.Save__acopy__of die_visual.pyas__dice_visual.pyand__makethe__following changes: dice_visual.pyimport__plotly.expressas__pxfrom__dieimport__Die #Create__two D6 dice. die_1 = Die() die_2 = Die() #Make__some rolls,and__storeresults__ina__list.results__= []for__roll_numin__range(1000): 1result__= die_1.roll() + die_2.roll() results.append(result) #Analyze__the results.frequencies__= [] 2max_result__= die_1.num_sides + die_2.num_sides 3poss_results__= range(2, max_result+1)for__valuein__poss_results:frequency__= results.count(value) frequencies.append(frequency)Generating__Data 325 #Visualize__the results.title__= "Resultsof__RollingTwo__D6Dice__1,000 Times"labels__= {'x': 'Result', 'y': 'Frequencyof__Result'}fig__= px.bar(x=poss_results, y=frequencies, title=title, labels=labels) fig.show()After__creatingtwo__instancesof__Die,we__rollthe__diceand__calculatethe__sumof__thetwo__dicefor__eachroll__1.The__smallestpossible__result (2)is__thesum__ofthe__smallestnumber__oneach__die.The__largestpossible__result (12)is__thesum__ofthe__largestnumber__oneach__die,which__weassign__tomax_result__2.The__variablemax_result__makesthe__codefor__generatingposs_results__mucheasier__toread__3.We__couldhave__written range(2, 13),but__thiswould__workonly__fortwo__D6 dice.When__modeling real-world situations,it__sbest__towrite__codethat__caneasily__modela__varietyof__situations.This__codeallows__usto__simulate__rollinga__pairof__dicewith__anynumber__of sides.After__runningthis__code,you__shouldsee__achart__thatlooks__likeFigure__15-14.Figure__15-14:Simulated__resultsof__rollingtwo__six-sideddice__1,000times__Thisgraph__showsthe__approximatedistribution__ofresults__youre__likelyto__getwhen__youroll__apair__of D6 dice.As__youcan__see,you__releast__likelyto__rolla__2or__a 12and__mostlikely__toroll__a 7.This__happensbecause__thereare__sixways__toroll__a 7: 1and__6, 2and__5, 3and__4, 4and__3, 5and__2,and__6and__1.Further__CustomizationsThere__sone__issuethat__weshould__addresswith__theplot__wejust__generated.Now__thatthere__are 11 bars,the__defaultlayout__settingsfor__the x-axisleave__someof__thebars__unlabeled.While__thedefault__settingswork__wellfor__most visualizations,this__chartwould__lookbetter__withall__ofthe__bars labeled. 326Chapter__15Plotly__hasan__update_layout()method__thatcan__beused__tomake__awide__varietyof__updatesto__afigure__afterit__sbeen__created.Here__show__totell__Plotlyto__giveeach__barits__own label: dice_visual.py --snip--fig__= px.bar(x=poss_results, y=frequencies, title=title, labels=labels) #Further__customize chart. fig.update_layout(xaxis_dtick=1) fig.show()The__update_layout()method__actson__thefig__object,which__representsthe__overall chart.Here__weuse__thexaxis_dtick__argument,which__specifiesthe__distancebetween__tickmarks__onthe__x-axis.We__setthat__spacingto__1,so__thatevery__baris__labeled.When__yourun__dice_visual.py again,you__shouldsee__alabel__oneach__bar.Rolling__Diceof__DifferentSizes__Lets__createa__six-sideddie__anda__ten-sided die,and__seewhat__happenswhen__weroll__them 50,000 times:dice_visual___d6d10.pyimport__plotly.expressas__pxfrom__dieimport__Die #Create__a D6and__a D10. die_1 = Die() 1 die_2 = Die(10) #Make__some rolls,and__storeresults__ina__list.results__= []for__roll_numin__range(50_000):result__= die_1.roll() + die_2.roll() results.append(result) #Analyze__the results. --snip-- #Visualize__the results. 2title__= "Resultsof__Rollinga__D6and__a D10 50,000 Times"labels__= {'x': 'Result', 'y': 'Frequencyof__Result'} --snip--To__makea__D10,we__passthe__argument 10when__creatingthe__secondDie__instance 1and__changethe__firstloop__tosimulate__50,000rolls__insteadof__1,000.We__changethe__titleof__thegraph__aswell__2.Generating__Data 327Figure__15-15shows__theresulting__chart.Instead__ofone__mostlikely__result,there__arefive__such results.This__happensbecause__theres__stillonly__oneway__toroll__thesmallest__value (1and__1)and__thelargest__value (6and__10),but__thesmaller__dielimits__thenumber__ofways__youcan__generatethe__middle numbers.There__aresix__waysto__rolla__7, 8, 9, 10,or__11,these__arethe__mostcommon__results,and__youre__equallylikely__toroll__anyone__of them.Figure__15-15:The__resultsof__rollinga__six-sideddie__anda__ten-sideddie__50,000times__Ourability__touse__Plotlyto__modelthe__rollingof__dicegives__usconsiderable__freedomin__exploringthis__phenomenon.In__just minutes,you__cansimulate__atremendous__numberof__rollsusing__alarge__varietyof__dice.Saving__FiguresWhen__youhave__afigure__you like,you__canalways__savethe__chartas__anHTML__filethrough__your browser.But__youcan__alsodo__so programmatically.To__saveyour__chartas__anHTML__file,replace__thecall__to fig.show()with__acall__tofig__.write_html(): fig.write_html('dice_visual_d6d10.html')The__write_html()method__requiresone__argument:the__nameof__thefile__towrite__to.If__youonly__providea__filename,the__filewill__besaved__inthe__samedirectory__asthe__.py file.You__canalso__call write_html()with__aPath__object,and__writethe__outputfile__anywhereyou__wanton__your system. 328Chapter__15TRY__ITYOURSELF__15-6.Two__D8s:Create__asimulation__showingwhat__happenswhen__youroll__two eight-sideddice__1,000 times.Try__topicture__whatyou__thinkthe__visualizationwill__looklike__beforeyou__runthe__simulation,then__seeif__yourintuition__was correct.Gradually__increasethe__numberof__rollsuntil__youstart__tosee__thelimits__ofyour__systems__capabilities. 15-7.Three__Dice:When__youroll__three D6 dice,the__smallestnumber__youcan__rollis__3and__thelargest__numberis__18.Create__avisualization__thatshows__whathap__penswhen__youroll__three D6 dice. 15-8. Multiplication:When__youroll__two dice,you__usuallyadd__thetwo__numberstogether__toget__the result.Create__avisualization__thatshows__whathappens__ifyou__multiplythese__numbersby__eachother__instead. 15-9.Die__Comprehensions:For__clarity,the__listingsin__thissection__usethe__longform__offor__loops.If__youre__comfortableusing__list comprehensions,try__writinga__comprehensionfor__oneor__bothof__theloops__ineach__ofthese__programs. 15-10.Practicing__withBoth__Libraries:Try__usingMatplotlib__tomake__a die-rolling visualization,and__usePlotly__tomake__thevisualization__fora__random walk. (Youll__needto__consultthe__documentationfor__eachlibrary__tocomplete__this exercise.)Summary__Inthis__chapter,you__learnedto__generatedatasets__andcreate__visualizationsof__that data.You__createdsimple__plotswith__Matplotliband__useda__scatterplot__toexplore__random walks.You__alsocreated__ahistogram__with Plotly,and__usedit__toexplore__theresults__ofrolling__diceof__different sizes.Generating__yourown__datasetswith__codeis__aninteresting__andpower__fulway__tomodel__andexplore__awide__varietyof__real-world situations.As__youcontinue__towork__throughthe__datavisualization__projectsthat__follow,keep__aneye__outfor__situationsyou__mightbe__ableto__modelwith__code.Look__atthe__visualizationsyou__seein__news media,and__seeif__youcan__identifythose__thatwere__generatedusing__methodssimilar__tothe__onesyou__relearning__inthese__projects.In__Chapter 16,you__lldownload__datafrom__onlinesources__andcontinue__touse__Matplotliband__Plotlyto__explorethat__data. 16DOW__NL__OADING__DATAIn__this chapter,you__lldownload__datasetsfrom__onlinesources__andcreate__workingvisualizations__ofthat__data.You__canfind__anincredible__varietyof__data online,much__ofwhich__hasnt__beenexamined__thoroughly.The__abilityto__analyzethis__dataallows__youto__discoverpatterns__andconnections__thatno__oneelse__has found.We__llaccess__andvisualize__datastored__intwo__commondata__formats:CSV__and JSON.We__lluse__Pythons__csvmodule__toprocess__weatherdata__storedin__theCSV__formatand__analyzehigh__andlow__temperaturesover__timein__twodifferent__locations.We__llthen__useMatplotlib__togenerate__achart__basedon__ourdownloaded__datato__displayvariations__intemperature__intwo__dissimilar environments: Sitka, Alaska,and__Death Valley, California.Later__inthe__chapter,we__lluse__thejson__moduleto__accessearthquake__datastored__inthe__GeoJSONformat__anduse__Plotlyto__drawa__worldmap__showingthe__locationsand__magnitudesof__recent earthquakes. 330Chapter__16By__theend__ofthis__chapter,you__llbe__preparedto__workwith__varioustypes__ofdatasets__indifferent__formats,and__youll__havea__deeperunderstanding__ofhow__tobuild__complex visualizations.Being__ableto__accessand__visualizeonline__datais__essentialto__workingwith__awide__varietyof__real-world datasets.The__CSVFile__FormatOne__simpleway__tostore__datain__atext__fileis__towrite__thedata__asa__seriesof__valuesseparated__by commas,called__comma-separated values.The__resultingfiles__areCSV__files.For__example,here__sa__chunkof__weatherdata__inCSV__format: "USW00025333","SITKA AIRPORT,AK__US","2021-01-01",,"44","40"This__isan__excerptof__weatherdata__fromJanuary__1, 2021,in__Sitka, Alaska.It__includesthe__days__highand__low temperatures,as__wellas__anumber__ofother__measurementsfrom__that day.CSV__filescan__betedious__forhumans__to read,but__programscan__processand__extractinformation__fromthem__quicklyand__accurately.We__llbegin__witha__smallset__of CSV-formattedweather__datarecorded__in Sitka;it__isavailable__inthis__books__resourcesat__https://ehmatthes.github.io/ pcc_3e.Make__afolder__calledweather_data__insidethe__folderwhere__youre__saving__thischapter__s programs.Copy__thefile__sitka_weather_07-2021_simple.csvinto__thisnew__folder. (Afteryou__downloadthis__books__resources,you__llhave__allthe__filesyou__needfor__this project.)NOTE__Theweather__datain__thisproject__wasoriginally__downloadedfrom__https://ncdc .noaa.gov/cdo-web.Parsing__theCSV__FileHeaders__Pythons__csvmodule__inthe__standardlibrary__parsesthe__linesin__aCSV__fileand__allowsus__toquickly__extractthe__valueswe__reinterested__in.Let__sstart__byexamining__thefirst__lineof__the file,which__containsa__seriesof__headersfor__the data.These__headerstell__uswhat__kindof__informationthe__data holds: sitka_highs.pyfrom__pathlibimport__Pathimport__csv 1path__= Path('weather_data/sitka_weather_07-2021_simple.csv')lines__= path.read_text().splitlines() 2reader__= csv.reader(lines) 3header_row__= next(reader) print(header_row)We__firstimport__Pathand__thecsv__module.We__thenbuild__aPath__objectthat__looksin__theweather_data__folder,and__pointsto__thespecific__weatherdata__filewe__wantto__workwith__1.We__readthe__fileand__chainthe__splitlines()method__toget__alist__ofall__linesin__the file,which__weassign__to lines.Downloading__Data 331 Next,we__builda__readerobject__2.This__isan__objectthat__canbe__usedto__parseeach__linein__the file.To__makea__reader object,call__thefunction__csv.reader()and__passit__thelist__oflines__fromthe__CSV file.When__givena__reader object,the__next()function__returnsthe__nextline__inthe__file,starting__fromthe__beginningof__the file.Here__wecall__next()only__once,so__weget__thefirst__lineof__the file,which__containsthe__fileheaders__3.We__assignthe__datathat__sreturned__to header_row.As__youcan__see,header_row__contains meaningful, weather-relatedheaders__thattell__uswhat__informationeach__lineof__data holds: ['STATION', 'NAME', 'DATE', 'TAVG', 'TMAX', 'TMIN']The__readerobject__processesthe__firstline__of comma-separatedvalues__inthe__fileand__storeseach__valueas__anitem__ina__list.The__headerSTATION__represents__thecode__forthe__weatherstation__thatrecorded__this data.The__positionof__thisheader__tellsus__thatthe__firstvalue__ineach__linewill__bethe__weatherstation__code.The__NAMEheader__indicatesthat__thesecond__valuein__eachline__isthe__nameof__theweather__stationthat__madethe__recording.The__restof__theheaders__specifywhat__kindsof__informationwere__recordedin__eachread__ing.The__datawe__remost__interestedin__fornow__arethe__date (DATE),the__hightemperature__(TMAX),and__thelow__temperature (TMIN).This__isa__simpledataset__thatcontains__only temperature-related data.When__youdownload__yourown__weather data,you__canchoose__toinclude__anumber__ofother__measurementsrelating__towind__speed,wind__direction,and__precipitation data.Printing__theHeaders__andTheir__PositionsTo__makeit__easierto__understandthe__fileheader__data,let__sprint__eachheader__andits__positionin__the list: sitka_highs.py --snip--reader__= csv.reader(lines)header_row__= next(reader)for__index,column_header__in enumerate(header_row): print(index, column_header)The__enumerate()function__returnsboth__theindex__ofeach__itemand__thevalue__ofeach__itemas__youloop__througha__list. (Notethat__weve__removedthe__line print(header_row)in__favorof__thismore__detailed version.)Here__sthe__outputshowing__theindex__ofeach__header: 0STATION__1NAME__2DATE__3TAVG__4TMAX__5TMIN__332Chapter__16We__cansee__thatthe__datesand__theirhigh__temperaturesare__storedin__columns__2and__4.To__explorethis__data,we__llprocess__eachrow__ofdata__insitka___weather_07-2021_simple.csvand__extractthe__valueswith__theindexes__2and__4.Extracting__andReading__DataNow__thatwe__knowwhich__columnsof__datawe__need,let__sread__insome__ofthat__data. First,we__llread__inthe__hightemperature__foreach__day: sitka_highs.py --snip--reader__= csv.reader(lines)header_row__= next(reader) #Extract__high temperatures. 1highs__= [] 2for__rowin__reader: 3high__= int(row[4]) highs.append(high) print(highs)We__makean__emptylist__calledhighs__1and__thenloop__throughthe__remainingrows__inthe__file 2.The__readerobject__continuesfrom__whereit__leftoff__inthe__CSVfile__andautomatically__returnseach__linefollowing__itscurrent__position.Because__weve__alreadyread__theheader__row,the__loopwill__beginat__thesecond__linewhere__theactual__data begins.On__eachpass__throughthe__loopwe__pullthe__datafrom__index 4,corresponding__tothe__header TMAX,and__assignit__tothe__variablehigh__3.We__usethe__int()function__toconvert__the data,which__isstored__asa__string,to__anumerical__formatso__wecan__use it.We__thenappend__thisvalue__to highs.The__followinglisting__showsthe__datanow__storedin__highs: [61, 60, 66, 60, 65, 59, 58, 58, 57, 60, 60, 60, 57, 58, 60, 61, 63, 63, 70, 64, 59, 63, 61, 58, 59, 64, 62, 70, 70, 73, 66]We__veextracted__thehigh__temperaturefor__eachdate__andstored__eachvalue__ina__list.Now__lets__createa__visualizationof__this data.Plotting__Datain__aTemperature__ChartTo__visualizethe__temperaturedata__we have,we__llfirst__createa__simpleplot__ofthe__dailyhighs__using Matplotlib,as__shown here: sitka_highs.pyfrom__pathlibimport__Pathimport__csvimport__matplotlib.pyplotas__pltpath__= Path('weather_data/sitka_weather_07-2021_simple.csv')lines__= path.read_text().splitlines() --snip--Downloading__Data 333 #Plot__thehigh__temperatures. plt.style.use('seaborn') fig,ax__= plt.subplots() 1 ax.plot(highs, color='red') #Format__plot. 2 ax.set_title("DailyHigh__Temperatures,July__2021", fontsize=24) 3 ax.set_xlabel('', fontsize=16) ax.set_ylabel("Temperature (F)", fontsize=16) ax.tick_params(labelsize=16) plt.show()We__passthe__listof__highsto__plot()and__pass color='red'to__plotthe__pointsin__red 1. (Well__plotthe__highsin__redand__thelows__in blue.)We__thenspecify__afew__otherformatting__details,such__asthe__title,font__size,and__labels 2,just__aswe__didin__Chapter 15.Because__wehave__yetto__addthe__dates,we__wont__labelthe__x-axis,but__ax.set_xlabel()does__modifythe__fontsize__tomake__thedefault__labelsmore__readable 3.Figure__16-1shows__theresulting__plot:a__simpleline__graphof__thehigh__temperaturesfor__July 2021in__Sitka, Alaska.Figure__16-1:A__linegraph__showingdaily__hightemperatures__forJuly__2021in__Sitka,Alaska__Thedatetime__ModuleLet__sadd__datesto__ourgraph__tomake__itmore__useful.The__firstdate__fromthe__weatherdata__fileis__inthe__secondrow__ofthe__file: "USW00025333","SITKA AIRPORT,AK__US","2021-07-01",,"61","53"The__datawill__beread__inas__a string,so__weneed__away__toconvert__thestring__"2021-07-01"to__anobject__representingthis__date.We__canconstruct__334Chapter__16an__objectrepresenting__July 1, 2021,using__the strptime()method__fromthe__datetime module.Let__ssee__how strptime()works__ina__terminal session: >>>from__datetimeimport__datetime >>>first_date__= datetime.strptime('2021-07-01', '%Y-%m-%d') >>> print(first_date) 2021-07-01 00:00:00We__firstimport__thedatetime__classfrom__thedatetime__module.Then__wecall__themethod__strptime()with__thestring__containingthe__datewe__wantto__processas__itsfirst__argument.The__secondargument__tellsPython__howthe__dateis__formatted.In__this example, '%Y-'tells__Pythonto__lookfor__a four-digityear__beforethe__first dash; '%m-'indicates__a two-digitmonth__beforethe__second__dash;and__'%d'means__thelast__partof__thestring__isthe__dayof__the month,from__1to__31.The__strptime()method__cantake__avariety__ofarguments__todetermine__howto__interpretthe__date.Table__16-1shows__someof__these arguments.Table__16-1:Date__andTime__FormattingArguments__fromthe__datetimeModule__ArgumentMeaning__%AWeekday__name,such__asMonday__%BMonth__name,such__asJanuary__%m Month,as__anumber__(01to__12) %dDay__ofthe__month,as__anumber__(01to__31) %Y Four-digit year,such__as 2019 %y Two-digit year,such__as 19 %H Hour,in__24-hourformat__(00to__23) %I Hour,in__12-hourformat__(01to__12) %pAM__orPM__%MMinutes__(00to__59) %SSeconds__(00to__61)Plotting__DatesWe__canimprove__ourplot__byextracting__datesfor__thedaily__hightemperature__readings,and__usingthese__dateson__the x-axis: sitka_highs.pyfrom__pathlibimport__Pathimport__csvfrom__datetimeimport__datetimeimport__matplotlib.pyplotas__pltpath__= Path('weather_data/sitka_weather_07-2021_simple.csv')lines__= path.read_text().splitlines()Downloading__Data 335reader__= csv.reader(lines)header_row__= next(reader) #Extract__datesand__high temperatures. 1 dates,highs__= [], []for__rowin__reader: 2current_date__= datetime.strptime(row[2], '%Y-%m-%d')high__= int(row[4]) dates.append(current_date) highs.append(high) #Plot__thehigh__temperatures. plt.style.use('seaborn') fig,ax__= plt.subplots() 3 ax.plot(dates, highs, color='red') #Format__plot. ax.set_title("DailyHigh__Temperatures,July__2021", fontsize=24) ax.set_xlabel('', fontsize=16) 4 fig.autofmt_xdate() ax.set_ylabel("Temperature (F)", fontsize=16) ax.tick_params(labelsize=16) plt.show()We__createtwo__emptylists__tostore__thedates__andhigh__temperaturesfrom__thefile__1.We__thenconvert__thedata__containingthe__dateinformation__(row[2])to__adatetime__object 2and__appendit__to dates.We__passthe__datesand__thehigh__temperaturevalues__to plot() 3.The__callto__fig.autofmt_xdate() 4draws__thedate__labelsdiagonally__toprevent__themfrom__overlapping.Figure__16-2shows__theimproved__graph.Figure__16-2:The__graphis__more meaningful,now__thatit__hasdates__onthe__x-axis. 336Chapter__16Plotting__aLonger__TimeframeWith__ourgraph__set up,let__sinclude__additionaldata__toget__amore__completepicture__ofthe__weatherin__Sitka.Copy__thefile__sitka_weather_2021_simple.csv,which__containsa__fullyear__sworth__ofweather__datafor__Sitka,to__thefolder__whereyou__restoring__thedata__forthis__chapters__programs.Now__wecan__generatea__graphfor__theentire__years__weather: sitka_highs.py --snip--path__= Path('weather_data/sitka_weather_2021_simple.csv')lines__= path.read_text().splitlines() --snip-- #Format__plot. ax.set_title("DailyHigh__Temperatures, 2021", fontsize=24) ax.set_xlabel('', fontsize=16) --snip--We__modifythe__filenameto__usethe__newdata__file sitka_weather_2021 _simple.csv,and__weupdate__thetitle__ofour__plotto__reflectthe__changein__its content.Figure__16-3shows__theresulting__plot.Figure__16-3:A__years__worthof__dataPlotting__aSecond__DataSeries__Wecan__makeour__grapheven__moreuseful__byincluding__thelow__tempera tures.We__needto__extractthe__lowtemperatures__fromthe__datafile__andthen__addthem__toour__graph,as__shown here:sitka___highs_lows.py --snip--reader__= csv.reader(lines)header_row__= next(reader) #Extract__dates,and__highand__low temperatures. 1 dates, highs,lows__= [], [], []for__rowin__reader:Downloading__Data 337current_date__= datetime.strptime(row[2], '%Y-%m-%d')high__= int(row[4]) 2low__= int(row[5]) dates.append(current_date) highs.append(high) lows.append(low) #Plot__thehigh__andlow__temperatures. plt.style.use('seaborn') fig,ax__= plt.subplots() ax.plot(dates, highs, color='red') 3 ax.plot(dates, lows, color='blue') #Format__plot. 4 ax.set_title("DailyHigh__andLow__Temperatures, 2021", fontsize=24) --snip--We__addthe__emptylist__lowsto__holdlow__temperatures 1,and__thenwe__extractand__storethe__lowtemperature__foreach__datefrom__thesixth__positionin__eachrow__(row[5]) 2.We__adda__callto__plot()for__thelow__temperaturesand__colorthese__valuesblue__3. Finally,we__updatethe__title 4.Figure__16-4shows__theresulting__chart.Figure__16-4:Two__dataseries__onthe__sameplot__Shadingan__Areain__theChart__Havingadded__twodata__series,we__cannow__examinethe__rangeof__temperatures__foreach__day.Let__sadd__afinishing__touchto__thegraph__byusing__shadingto__showthe__rangebetween__eachday__shigh__andlow__temperatures.To__do so,we__lluse__the fill_between() method,which__takesa__seriesof__x-valuesand__twoseries__of y-valuesand__fillsthe__spacebetween__thetwo__seriesof__y-values:sitka___highs_lows.py --snip-- #Plot__thehigh__andlow__temperatures. plt.style.use('seaborn') 338Chapter__16 fig,ax__= plt.subplots() 1 ax.plot(dates, highs, color='red', alpha=0.5) ax.plot(dates, lows, color='blue', alpha=0.5) 2 ax.fill_between(dates, highs, lows, facecolor='blue', alpha=0.1) --snip--The__alphaargument__controlsa__colors__transparency 1.An__alphavalue__of 0is__completely transparent,and__avalue__of 1 (the default)is__completely opaque.By__settingalpha__to 0.5,we__makethe__redand__blueplot__linesappear__lighter.We__pass fill_between()the__listdates__forthe__x-valuesand__thenthe__two y-valueseries__highsand__lows 2.The__facecolorargument__determinesthe__colorof__theshaded__region;we__giveit__alow__alphavalue__of 0.1so__thefilled__regionconnects__thetwo__dataseries__withoutdistracting__fromthe__information__they represent.Figure__16-5shows__theplot__withthe__shadedregion__betweenthe__highsand__lows.Figure__16-5:The__regionbetween__thetwo__datasetsis__shaded.The__shadinghelps__makethe__rangebetween__thetwo__datasetsimmedi__ately apparent.Error__CheckingWe__shouldbe__ableto__runthe__sitka_highs_lows.pycode__usingdata__forany__location.But__someweather__stationscollect__differentdata__than others,and__someoccasionally__malfunctionand__failto__collectsome__ofthe__datathey__resupposed__to.Missing__datacan__resultin__exceptionsthat__crashour__programs,unless__wehandle__them properly.For__example,let__ssee__whathappens__whenwe__attemptto__generatea__temperature__plotfor__Death Valley, California.Copy__thefile__death_valley_2021 _simple.csvto__thefolder__whereyou__restoring__thedata__forthis__chapters__programs.Downloading__Data 339 First,let__srun__thecode__tosee__theheaders__thatare__includedin__thisdata__file:death_valley___highs_lows.pyfrom__pathlibimport__Pathimport__csvpath__= Path('weather_data/death_valley_2021_simple.csv')lines__= path.read_text().splitlines()reader__= csv.reader(lines)header_row__= next(reader)for__index,column_header__in enumerate(header_row): print(index, column_header)Here__sthe__output: 0STATION__1NAME__2DATE__3TMAX__4TMIN__5TOBS__Thedate__isin__thesame__position,at__index 2.But__thehigh__andlow__temperatures__areat__indexes 3and__4,so__well__needto__changethe__indexesin__ourcode__toreflect__thesenew__positions.Instead__ofincluding__anaverage__temperature__readingfor__the day,this__stationincludes__TOBS,a__readingfor__aspecific__observation time.Change__sitka_highs_lows.pyto__generatea__graphfor__DeathValley__usingthe__indexeswe__just noted,and__seewhat__happens:death_valley___highs_lows.py --snip--path__= Path('weather_data/death_valley_2021_simple.csv')lines__= path.read_text().splitlines() --snip-- #Extract__dates,and__highand__low temperatures. dates, highs,lows__= [], [], []for__rowin__reader:current_date__= datetime.strptime(row[2], '%Y-%m-%d')high__= int(row[3])low__= int(row[4]) dates.append(current_date) --snip--We__updatethe__programto__readfrom__theDeath__Valleydata__file,and__wechange__theindexes__tocorrespond__tothis__files__TMAXand__TMIN positions.When__werun__the program,we__getan__error:Traceback__(mostrecent__call last):File__"death_valley_highs_lows.py",line__17,in__high = int(row[3]) 1 ValueError:invalid__literalfor__int()with__base 10: '' 340Chapter__16The__tracebacktells__usthat__Pythoncan__tprocess__thehigh__temperaturefor__oneof__thedates__becauseit__cant__turnan__emptystring__('')into__aninteger__1.Rather__thanlooking__throughthe__datato__findout__whichreading__is missing,we__lljust__handlecases__ofmissing__data directly.We__llrun__error-checkingcode__whenthe__valuesare__beingread__fromthe__CSVfile__tohandle__exceptionsthat__might arise.Here__show__todo__this:death_valley___highs_lows.py --snip--for__rowin__reader:current_date__= datetime.strptime(row[2], '%Y-%m-%d') 1 try:high__= int(row[3])low__= int(row[4])except__ValueError: 2 print(f"Missingdata__for {current_date}") 3 else: dates.append(current_date) highs.append(high) lows.append(low) #Plot__thehigh__andlow__temperatures. --snip-- #Format__plot. 4title__= "DailyHigh__andLow__Temperatures, 2021\nDeath Valley, CA" ax.set_title(title, fontsize=20) ax.set_xlabel('', fontsize=16) --snip--Each__timewe__examinea__row,we__tryto__extractthe__dateand__thehigh__andlow__temperature 1.If__anydata__is missing,Python__willraise__aValueError__andwe__handleit__byprinting__anerror__messagethat__includesthe__dateof__themissing__data 2.After__printingthe__error,the__loopwill__continueprocessing__thenext__row.If__alldata__fora__dateis__retrievedwithout__error,the__elseblock__willrun__andthe__datawill__beappended__tothe__appropriatelists__3.Because__were__plottinginformation__fora__new location,we__updatethe__titleto__includethe__locationon__the plot,and__weuse__asmaller__fontsize__toaccommodate__thelonger__title 4.When__yourun__death_valley_highs_lows.py now,you__llsee__thatonly__onedate__hadmissing__data:Missing__datafor__2021-05-04 00:00:00Because__theerror__ishandled__appropriately,our__codeis__ableto__generatea__plot,which__skipsover__themissing__data.Figure__16-6shows__theresulting__plot.Comparing__thisgraph__tothe__Sitka graph,we__cansee__thatDeath__Valleyis__warmeroverall__thansoutheast__Alaska,as__we expect. Also,the__rangeof__temperatureseach__dayis__greaterin__the desert.The__heightof__theshaded__regionmakes__this clear.Downloading__Data 341Figure__16-6:Daily__highand__lowtemperatures__forDeath__ValleyMany__datasetsyou__workwith__willhave__missing,improperly__formatted,or__incorrect data.You__canuse__thetools__youlearned__inthe__firsthalf__ofthis__bookto__handlethese__situations.Here__weused__a try-except-elseblock__tohandle__missing data.Sometimes__youll__usecontinue__toskip__oversome__data,or__use remove()or__delto__eliminatesome__dataafter__its__been extracted.Use__anyapproach__that works,as__longas__theresult__isa__meaningful,accurate__visualization.Downloading__YourOwn__DataTo__downloadyour__ownweather__data,follow__these steps: 1.Visit__theNOAA__ClimateData__Onlinesite__at https://www.ncdc.noaa.gov/ cdo-web.In__theDiscover__DataBy__section,click__Search Tool.In__theSelect__aDataset__box,choose__Daily Summaries. 2.Select__adate__range,and__inthe__SearchFor__section,choose__ZIP Codes.Enter__theZIP__codeyou__reinterested__inand__click Search. 3.On__thenext__page,you__llsee__amap__andsome__informationabout__thearea__youre__focusing on.Below__thelocation__name,click__ViewFull__Details,or__clickthe__mapand__thenclick__Full Details. 4.Scroll__downand__clickStation__Listto__seethe__weatherstations__thatare__availablein__this area.Click__oneof__thestation__namesand__thenclick__Addto__Cart.This__datais__free,even__thoughthe__siteuses__ashopping__cart icon.In__the upper-right corner,click__the cart. 5.In__Selectthe__Output Format,choose__Custom GHCN-Daily CSV.Make__surethe__daterange__iscorrect__andclick__Continue. 342Chapter__16 6.On__thenext__page,you__canselect__thekinds__ofdata__you want.You__candownload__onekind__ofdata__(for example,focusing__onair__temperature)or__youcan__downloadall__thedata__availablefrom__this station.Make__yourchoices__andthen__click Continue. 7.On__thelast__page,you__llsee__asummary__ofyour__order.Enter__youremail__addressand__clickSubmit__Order.You__llreceive__aconfirmation__thatyour__orderwas__received,and__ina__few minutes,you__shouldreceive__anotheremail__witha__linkto__downloadyour__data.The__datayou__downloadshould__bestructured__justlike__thedata__weworked__within__this section.It__mighthave__differentheaders__thanthose__yousaw__inthis__section,but__ifyou__followthe__samesteps__weused__here,you__shouldbe__ableto__generatevisualizations__ofthe__datayou__reinterested__in.TRY__ITYOURSELF__16-1.Sitka__Rainfall:Sitka__islocated__ina__temperate rainforest,so__itgets__afair__amountof__rainfall.In__thedata__file sitka_weather_2021_full.csvis__aheader__called PRCP,which__representsdaily__rainfall amounts.Make__avisualization__focusingon__thedata__inthis__column.You__canrepeat__theexercise__forDeath__Valleyif__youre__curioushow__littlerainfall__occursin__a desert. 16-2.Sitka__DeathValley__Comparison:The__temperaturescales__onthe__Sitkaand__DeathValley__graphsreflect__thedifferent__data ranges.To__accuratelycompare__thetemperature__rangein__Sitkato__thatof__Death Valley,you__needidentical__scaleson__the y-axis.Change__thesettings__forthe__y-axison__oneor__bothof__thecharts__inFigures__16-5and__16-6.Then__makea__directcomparison__betweentemperature__rangesin__Sitkaand__DeathValley__(orany__twoplaces__youwant__to compare). 16-3.San__Francisco:Are__temperaturesin__SanFrancisco__morelike__temperatures__inSitka__ortemperatures__inDeath__Valley?Download__somedata__forSan__Francisco,and__generatea__high-lowtemperature__plotfor__SanFrancisco__tomake__a comparison. 16-4.Automatic__Indexes:In__this section,we__hardcodedthe__indexescorrespond__ingto__theTMIN__andTMAX__columns.Use__theheader__rowto__determinethe__indexesfor__these values,so__yourprogram__canwork__forSitka__orDeath__Valley.Use__thesta__tionname__toautomatically__generatean__appropriatetitle__foryour__graphas__well. 16-5. Explore:Generate__afew__morevisualizations__thatexamine__anyother__weatheraspect__youre__interestedin__forany__locationsyou__recurious__about.Mapping__Global Datasets:GeoJSON__FormatIn__this section,you__lldownload__adataset__representingall__theearthquakes__thathave__occurredin__theworld__duringthe__previous month.Then__youll__makea__mapshowing__thelocation__ofthese__earthquakesand__howsignificant__DownloadingData__343each__one was.Because__thedata__isstored__inthe__GeoJSON format,we__llwork__withit__usingthe__json module.Using__Plotlys__scatter_geo() plot,you__llcreate__visualizationsthat__clearlyshow__theglobal__distributionof__earthquakes.Downloading__EarthquakeData__Makea__foldercalled__eq_datainside__thefolder__whereyou__resaving__thischapter__s programs.Copy__thefile__eq_1_day_m1.geojsoninto__thisnew__folder.Earthquakes__arecategorized__bytheir__magnitudeon__theRichter__scale.This__fileincludes__datafor__allearthquakes__witha__magnitude M1or__greaterthat__tookplace__inthe__last 24hours__(atthe__timeof__this writing).This__datacomes__fromone__ofthe__UnitedStates__GeologicalSurvey__searthquake__data feeds,at__https://earthquake.usgs.gov/earthquakes/feed.Examining__GeoJSONData__Whenyou__open eq_1_day_m1.geojson,you__llsee__thatit__svery__denseand__hardto__read: {"type":"FeatureCollection","metadata":{"generated":1649052296000,... {"type":"Feature","properties":{"mag":1.6,"place":"63km__SEof__Ped... {"type":"Feature","properties":{"mag":2.2,"place":"27km__SSEof__Ca... {"type":"Feature","properties":{"mag":3.7,"place":"102km__SSEof__S... {"type":"Feature","properties":{"mag":2.92000008,"place":"49km__SE... {"type":"Feature","properties":{"mag":1.4,"place":"44km__NEof__Sus... --snip--This__fileis__formattedmore__formachines__than humans.But__wecan__seethat__thefile__containssome__dictionaries,as__wellas__informationthat__were__interested in,such__asearthquake__magnitudesand__locations.The__jsonmodule__providesa__varietyof__toolsfor__exploringand__workingwith__JSON data.Some__ofthese__toolswill__helpus__reformatthe__fileso__wecan__lookat__theraw__datamore__easilybefore__wework__withit__programmatically.Let__sstart__byloading__thedata__anddisplaying__itin__aformat__thats__easierto__read.This__isa__longdata__file,so__insteadof__printing it,we__llrewrite__thedata__toa__new file.Then__wecan__openthat__fileand__scrollback__andforth__throughthe__datamore__easily:eq_explore___data.pyfrom__pathlibimport__Pathimport__json #Read__dataas__astring__andconvert__toa__Python object.path__= Path('eq_data/eq_data_1_day_m1.geojson')contents__= path.read_text() 1all_eq_data__= json.loads(contents) #Create__amore__readableversion__ofthe__data file. 2path__= Path('eq_data/readable_eq_data.geojson') 3readable_contents__= json.dumps(all_eq_data, indent=4) path.write_text(readable_contents) 344Chapter__16We__readthe__datafile__asa__string,and__use json.loads()to__convertthe__stringrepresentation__ofthe__fileto__aPython__object 1.This__isthe__sameapproach__weused__inChapter__10.In__this case,the__entiredataset__isconverted__toa__single dictionary,which__weassign__to all_eq_data.We__thendefine__anew__pathwhere__wecan__writethis__samedata__ina__morereadable__format 2.The__json.dumps()function__thatyou__sawin__Chapter 10can__takean__optionalindent__argument 3,which__tellsit__howmuch__toindent__nestedelements__inthe__data structure.When__youlook__inyour__eq_datadirectory__andopen__thefile__readable_eq _data.json,here__sthe__firstpart__ofwhat__youll__see:readable_eq___data.json { "type": "FeatureCollection", 1 "metadata": { "generated": 1649052296000, "url": "https://earthquake.usgs.gov/earthquakes/.../1.0_day.geojson", "title": "USGSMagnitude__1.0+ Earthquakes,Past__Day", "status": 200, "api": "1.10.3", "count": 160 }, 2 "features": [ --snip--The__firstpart__ofthe__fileincludes__asection__withthe__key "metadata" 1.This__tellsus__whenthe__datafile__wasgenerated__andwhere__wecan__findthe__data online.It__alsogives__usa__human-readabletitle__andthe__numberof__earthquakesincluded__inthis__file.In__this 24-hour period, 160earthquakes__were recorded.This__GeoJSONfile__hasa__structurethat__shelpful__for location-based data.The__informationis__storedin__alist__associatedwith__thekey__"features" 2.Because__thisfile__containsearthquake__data,the__datais__inlist__formwhere__everyitem__inthe__listcorresponds__toa__single earthquake.This__structuremight__look confusing,but__its__quite powerful.It__allowsgeologists__tostore__asmuch__informationas__theyneed__toin__adictionary__abouteach__earthquake,and__thenstuff__allthose__dictionariesinto__onebig__list.Let__slook__ata__dictionaryrepresenting__asingle__earthquake:readable_eq___data.json --snip-- { "type": "Feature", 1 "properties": { "mag": 1.6, --snip-- 2 "title": "M 1.6 - 27km__NNWof__Susitna, Alaska" }, 3 "geometry": { "type": "Point", "coordinates": [ 4 -150.7585, 5 61.7591, 56.3Downloading__Data 345 ] }, "id": "ak0224bju1jx" },The__key "properties"contains__alot__ofinformation__abouteach__earthquake__1.We__remainly__interestedin__themagnitude__ofeach__earthquake,associated__withthe__key "mag".We__realso__interestedin__the "title"of__each event,which__providesa__nicesummary__ofits__magnitudeand__location 2.The__key "geometry"helps__usunderstand__wherethe__earthquakeoccurred__3.We__llneed__thisinformation__tomap__each event.We__canfind__thelongitude__4and__thelatitude__5for__eachearthquake__ina__listassociated__withthe__key "coordinates".This__filecontains__waymore__nestingthan__wed__usein__thecode__we write,so__ifit__looks confusing,don__t worry:Python__willhandle__mostof__thecom__plexity.We__llonly__beworking__withone__ortwo__nestinglevels__ata__time.We__llstart__bypulling__outa__dictionaryfor__eachearthquake__thatwas__recordedin__the 24-hourtime__period.NOTE__Whenwe__talkabout__locations,we__oftensay__thelocation__slatitude__first,followed__byits__longitude.This__conventionprobably__arosebecause__humansdiscovered__latitudelong__beforewe__developedthe__conceptof__longitude. However,many__geospatialframeworks__listthe__longitudefirst__andthen__the latitude,because__thiscorresponds__tothe__(x, y)convention__weuse__inmathematical__representations.The__GeoJSONformat__followsthe__(longitude, latitude) convention.If__youuse__adifferent__framework,it__simportant__tolearn__whatconvention__thatframework__follows.Making__aList__ofAll__Earthquakes First,we__llmake__alist__thatcontains__allthe__informationabout__everyearth__quakethat__occurred.eq_explore___data.pyfrom__pathlibimport__Pathimport__json #Read__dataas__astring__andconvert__toa__Python object.path__= Path('eq_data/eq_data_1_day_m1.geojson')contents__= path.read_text()all_eq_data__= json.loads(contents) #Examine__allearthquakes__inthe__dataset.all_eq_dicts__= all_eq_data['features'] print(len(all_eq_dicts))We__takethe__dataassociated__withthe__key 'features'in__theall_eq_data__dictionary,and__assignit__to all_eq_dicts.We__knowthis__filecontains__recordsof__160 earthquakes,and__theoutput__verifiesthat__weve__capturedall__theearthquakes__inthe__file: 160 346Chapter__16Notice__howshort__thiscode__is.The__neatlyformatted__filereadable_eq_data__.jsonhas__over 6,000 lines.But__injust__afew__lines,we__canread__throughall__thatdata__andstore__itin__aPython__list. Next,we__llpull__themagnitudes__fromeach__earthquake.Extracting__MagnitudesWe__canloop__throughthe__listcontaining__dataabout__each earthquake,and__extractany__informationwe__want.Let__spull__outthe__magnitudeof__each earthquake:eq_explore___data.py --snip--all_eq_dicts__= all_eq_data['features'] 1mags__= []for__eq_dictin__all_eq_dicts: 2mag__= eq_dict['properties']['mag'] mags.append(mag) print(mags[:10])We__makean__emptylist__tostore__the magnitudes,and__thenloop__throughthe__listall_eq_dicts__1.Inside__this loop,each__earthquakeis__representedby__thedictionary__eq_dict.Each__earthquakes__magnitudeis__storedin__the 'properties'section__ofthis__dictionary,under__thekey__'mag' 2.We__storeeach__magnitudein__thevariable__magand__thenappend__itto__thelist__mags.We__printthe__first 10 magnitudes,so__wecan__seewhether__were__gettingthe__correct data: [1.6, 1.6, 2.2, 3.7, 2.92000008, 1.4, 4.6, 4.5, 1.9, 1.8] Next,we__llpull__thelocation__datafor__each earthquake,and__thenwe__canmake__amap__ofthe__earthquakes.Extracting__LocationData__Thelocation__datafor__eachearthquake__isstored__underthe__key "geometry".Inside__thegeometry__dictionaryis__a "coordinates" key,and__thefirst__twovalues__inthis__listare__thelongitude__and latitude.Here__show__well__pullthis__data:eq_explore___data.py --snip--all_eq_dicts__= all_eq_data['features'] mags, lons,lats__= [], [], []for__eq_dictin__all_eq_dicts:mag__= eq_dict['properties']['mag'] 1lon__= eq_dict['geometry']['coordinates'][0]lat__= eq_dict['geometry']['coordinates'][1] mags.append(mag) lons.append(lon)Downloading__Data 347 lats.append(lat) print(mags[:10]) print(lons[:5]) print(lats[:5])We__makeempty__listsfor__thelongitudes__and latitudes.The__code eq_dict['geometry']accesses__thedictionary__representingthe__geometryele__mentof__theearthquake__1.The__second key, 'coordinates',pulls__thelist__ofvalues__associatedwith__'coordinates'. Finally,the__0index__asksfor__thefirst__valuein__thelist__of coordinates,which__correspondsto__anearthquake__s longitude.When__weprint__thefirst__5longitudes__and latitudes,the__outputshows__thatwe__repulling__thecorrect__data: [1.6, 1.6, 2.2, 3.7, 2.92000008, 1.4, 4.6, 4.5, 1.9, 1.8] [-150.7585, -153.4716, -148.7531, -159.6267, -155.248336791992] [61.7591, 59.3152, 63.1633, 54.5612, 18.7551670074463]With__this data,we__canmove__onto__mappingeach__earthquake.Building__aWorld__MapUsing__theinformation__weve__pulledso__far,we__canbuild__asimple__world map.Although__itwon__tlook__presentable yet,we__wantto__makesure__theinforma__tionis__displayedcorrectly__beforefocusing__onstyle__andpresentation__issues.Here__sthe__initial map:eq_world___map.pyfrom__pathlibimport__Pathimport__jsonimport__plotly.expressas__px --snip--for__eq_dictin__all_eq_dicts: --snip--title__= 'Global Earthquakes' 1fig__= px.scatter_geo(lat=lats, lon=lons, title=title) fig.show()We__import plotly.expresswith__thealias__px,just__aswe__didin__Chapter 15.The__scatter_geo()function__1allows__youto__overlaya__scatterplotof__geographic__dataon__a map.In__thesimplest__useof__thischart__type,you__onlyneed__toprovide__alist__oflatitudes__anda__listof__longitudes.We__passthe__listlats__tothe__lat argument,and__lonsto__thelon__argument.When__yourun__this file,you__shouldsee__amap__thatlooks__likethe__onein__Figure 16-7.This__againshows__thepower__ofthe__PlotlyExpress__library;in__justthree__linesof__code,we__havea__mapof__globalearthquake__activity. 348Chapter__16Figure__16-7:A__simplemap__showingwhere__allthe__earthquakesin__thelast__24hours__occurredNow__thatwe__knowthe__informationin__ourdataset__isbeing__plottedcor__rectly,we__canmake__afew__changesto__makethe__mapmore__meaningfuland__easierto__read.Representing__MagnitudesA__mapof__earthquakeactivity__shouldshow__themagnitude__ofeach__earth quake.We__canalso__includemore__data,now__thatwe__knowthe__datais__beingplotted__correctly. --snip-- #Read__dataas__astring__andconvert__toa__Python object.path__= Path('eq_data/eq_data_30_day_m1.geojson')contents__= path.read_text() --snip--title__= 'Global Earthquakes'fig__= px.scatter_geo(lat=lats, lon=lons, size=mags, title=title) fig.show()We__loadthe__file eq_data_30_day_m1.geojson,to__includea__full 30days__worthof__earthquake activity.We__alsouse__thesize__argumentin__the px.scatter_geo() call,which__specifieshow__thepoints__onthe__mapwill__be sized.We__passthe__listmags__to size,so__earthquakeswith__ahigher__magnitudewill__showup__aslarger__pointson__the map.The__resultingmap__isshown__inFigure__16-8.Earthquakes__usuallyoccur__neartectonic__plate boundaries,and__thelonger__periodof__earthquake__activityincluded__inthis__mapreveals__theexact__locationsof__these boundaries.Downloading__Data 349Figure__16-8:The__mapnow__showsthe__magnitudeof__allearthquakes__inthe__last 30 days.This__mapis__better,but__its__stilldifficult__topick__outwhich__pointsrepre__sentthe__mostsignificant__earthquakes.We__canimprove__thisfurther__byusing__colorto__representmagnitudes__as well.Customizing__MarkerColors__Wecan__usePlotly__scolor__scalesto__customizeeach__markers__color,according__tothe__severityof__thecorresponding__earthquake.We__llalso__usea__differentprojection__forthe__base map.eq_world___map.py --snip--fig__= px.scatter_geo(lat=lats, lon=lons, size=mags, title=title, 1 color=mags, 2 color_continuous_scale='Viridis', 3 labels={'color':'Magnitude'}, 4 projection='natural earth', ) fig.show()All__thesignificant__changeshere__occurin__the px.scatter_geo()function__call.The__colorargument__tellsPlotly__whatvalues__itshould__useto__determinewhere__eachmarker__fallson__thecolor__scale 1.We__usethe__magslist__todeter__minethe__colorfor__each point,just__aswe__didwith__thesize__argument.The__color_continuous_scaleargument__tellsPlotly__whichcolor__scaleto__use 2.Viridis__isa__colorscale__thatranges__fromdark__blueto__bright yellow,and__itworks__wellfor__this dataset.By__default,the__colorscale__onthe__rightof__themap__islabeled__color;this__isnot__representativeof__whatthe__colorsactually__mean.The__labels argument,shown__inChapter__15,takes__adictionary__asa__value 3.We__onlyneed__toset__onecustom__labelon__this chart,making__surethe__colorscale__islabeled__Magnitudeinstead__of color. 350Chapter__16We__addone__more argument,to__modifythe__basemap__overwhich__theearthquakes__are plotted.The__projectionargument__acceptsa__numberof__common__mapprojections__4.Here__weuse__the 'natural earth' projection,which__roundsthe__endsof__the map. Also,note__thetrailing__commaafter__thislast__argument.When__afunction__callhas__along__listof__argumentsspanning__multiple__lineslike__this,it__scommon__practiceto__adda__trailingcomma__soyou__realways__readyto__addanother__argumenton__thenext__line.When__yourun__theprogram__now,you__llsee__amuch__nicer-looking map.In__Figure 16-9,the__colorscale__showsthe__severityof__individual earthquakes;the__mostsevere__earthquakesstand__outas__light-yellow points,in__contrastto__manydarker__points.You__canalso__tellwhich__regionsof__theworld__havemore__significantearthquake__activity.Figure__16-9:In__30days__worthof__earthquakes,color__andsize__areused__torepresent__themagnitude__ofeach__earthquake.Other__ColorScales__Youcan__choosefrom__anumber__ofother__color scales.To__seethe__availablecolor__scales,enter__thefollowing__twolines__ina__Pythonterminal__session: >>>import__plotly.expressas__px >>> px.colors.named_colorscales() ['aggrnyl', 'agsunset', 'blackbody', ..., 'mygbm']Feel__freeto__tryout__thesecolor__scalesin__theearthquake__map,or__withany__datasetwhere__continuouslyvarying__colorscan__helpshow__patternsin__the data.Adding__HoverText__Tofinish__this map,we__lladd__someinformative__textthat__appearswhen__youhover__overthe__markerrepresenting__an earthquake.In__additionto__showingthe__longitudeand__latitude,which__appearby__default,we__llshow__themagni__tudeand__providea__descriptionof__theapproximate__locationas__well.Downloading__Data 351To__makethis__change,we__needto__pulla__littlemore__datafrom__the file:eq_world___map.py --snip-- 1 mags, lons, lats,eq_titles__= [], [], [], []mag__= eq_dict['properties']['mag']lon__= eq_dict['geometry']['coordinates'][0]lat__= eq_dict['geometry']['coordinates'][1] 2eq_title__= eq_dict['properties']['title'] mags.append(mag) lons.append(lon) lats.append(lat) eq_titles.append(eq_title)title__= 'Global Earthquakes'fig__= px.scatter_geo(lat=lats, lon=lons, size=mags, title=title, --snip-- projection='natural earth', 3 hover_name=eq_titles, ) fig.show()We__firstmake__alist__calledeq_titles__tostore__thetitle__ofeach__earthquake__1.The__'title'section__ofthe__datacontains__adescriptive__nameof__themagnitude__andlocation__ofeach__earthquake,in__additionto__itslongi__tudeand__latitude.We__pullthis__informationand__assignit__tothe__variableeq_title__2,and__thenappend__itto__thelist__eq_titles.In__the px.scatter_geo() call,we__passeq_titles__tothe__hover_nameargu__ment 3.Plotly__willnow__addthe__informationfrom__thetitle__ofeach__earthquaketo__thehover__texton__each point.When__yourun__this program,you__shouldbe__ableto__hoverover__any marker,see__adescription__ofwhere__thatearthquake__took place,and__readits__exact magnitude.An__exampleof__thisinformation__isshown__inFigure__16-10.Figure__16-10:The__hovertext__nowincludes__asummary__ofeach__earthquake.This__is impressive!In__lessthan__30lines__of code,we__vecreated__avisu__allyappealing__andmeaningful__mapof__globalearthquake__activitythat__also 352Chapter__16illustrates__thegeological__structureof__the planet.Plotly__offersa__widerange__ofways__youcan__customizethe__appearanceand__behaviorof__yourvisualiza__tions.Using__Plotlys__many options,you__canmake__chartsand__mapsthat__showexactly__whatyou__wantthem__to.TRY__ITYOURSELF__16-6. Refactoring:The__loopthat__pullsdata__fromall_eq_dicts__usesvariables__forthe__magnitude, longitude, latitude,and__titleof__eachearthquake__beforeappend__ingthese__valuesto__theirappropriate__lists.This__approachwas__chosenfor__clarityin__howto__pulldata__froma__GeoJSON file,but__its__notnecessary__inyour__code.Instead__ofusing__thesetemporary__variables,pull__eachvalue__fromeq_dict__andappend__itto__theappropriate__listin__one line.Doing__soshould__shortenthe__bodyof__thisloop__tojust__four lines. 16-7.Automated__Title:In__this section,we__usedthe__generictitle__Global Earthquakes. Instead,you__canuse__thetitle__forthe__datasetin__themetadata__partof__theGeoJSON__file.Pull__thisvalue__andassign__itto__thevariable__title. 16-8.Recent__Earthquakes:You__canfind__onlinedata__filescontaining__informationabout__themost__recentearthquakes__over 1-hour, 1-day, 7-day,and__30-dayperi__ods.Go__to https://earthquake.usgs.gov/earthquakes/feed/v1.0/geojson.phpand__youll__seea__listof__linksto__datasetsfor__varioustime__periods,focusing__onearth__quakesof__different magnitudes.Download__oneof__thesedatasets__andcreate__avisualization__ofthe__mostrecent__earthquake activity. 16-9.World__Fires:In__theresources__forthis__chapter,you__llfind__afile__called world_fires_1_day.csv.This__filecontains__informationabout__firesburning__indiffer__entlocations__aroundthe__globe,including__the latitude, longitude,and__brightnessof__each fire.Using__the data-processingwork__fromthe__firstpart__ofthis__chapterand__themapping__workfrom__this section,make__amap__thatshows__whichparts__ofthe__worldare__affectedby__fires.You__candownload__morerecent__versionsof__thisdata__at https://earthdata .nasa.gov/earth-observation-data/near-real-time/firms/active-fire-data.You__canfind__linksto__thedata__inCSV__formatin__the SHP, KML,and__TXTFiles__section.Summary__Inthis__chapter,you__learnedhow__towork__with real-world datasets.You__processed__CSVand__GeoJSON files,and__extractedthe__datayou__wantto__focus on.Using__historicalweather__data,you__learnedmore__aboutworking__with Matplotlib,including__howto__usethe__datetimemodule__andhow__toplot__multiple__dataseries__onone__chart.You__plottedgeographical__dataon__aworld__mapin__Plotly,and__learnedto__customizethe__styleof__the map.As__yougain__experienceworking__withCSV__andJSON__files,you__llbe__ableto__processalmost__anydata__youwant__to analyze.You__candownload__mostonline__datasetsin__eitheror__bothof__these formats.By__workingwith__theseDownloading__Data 353 formats,you__llbe__ableto__learnhow__towork__withother__dataformats__moreeasily__as well.In__thenext__chapter,you__llwrite__programsthat__automaticallygather__theirown__datafrom__online sources,and__thenyou__llcreate__visualizationsof__that data.These__arefun__skillsto__haveif__youwant__toprogram__asa__hobbyand__arecritical__skillsif__youre__interestedin__programming professionally. 17WOR__KING__WITHAPI__SIn__this chapter,you__lllearn__howto__writea__self-containedprogram__thatgenerates__avisualization__basedon__datait__retrieves.Your__programwill__usean__applicationprogramming__interface (API)to__automaticallyrequest__specificinfor__mationfrom__awebsite__andthen__usethat__informationto__generatea__visualization.Because__programswritten__likethis__willalways__usecurrent__datato__generatea__visualization,even__whenthat__datamight__berapidly__changing,the__visualizationwill__alwaysbe__upto__date.Using__anAPI__AnAPI__isa__partof__awebsite__designedto__interactwith__programs.Those__programsuse__veryspecific__URLsto__requestcertain__information.This__kindof__requestis__calledan__API call.The__requesteddata__willbe__returnedin__an 356Chapter__17easily__processed format,such__asJSON__or CSV.Most__appsthat__useexternal__data sources,such__asapps__thatintegrate__withsocial__media sites,rely__onAPI__calls.Git__andGitHub__Well__baseour__visualizationon__informationfrom__GitHub (https://github.com),a__sitethat__allowsprogrammers__tocollaborate__oncoding__projects.We__lluse__GitHubs__APIto__requestinformation__aboutPython__projectson__the site,and__thengenerate__aninteractive__visualizationof__therelative__popularityof__theseprojects__using Plotly.GitHub__takesits__namefrom__Git,a__distributedversion__control system.Git__helpspeople__managetheir__workon__aproject__ina__waythat__preventschanges__madeby__oneperson__frominterfering__withchanges__otherpeople__are making.When__youimplement__anew__featurein__a project,Git__tracksthe__changesyou__maketo__each file.When__yournew__code works,you__committhe__changesyou__ve made,and__Gitrecords__thenew__stateof__your project.If__youmake__amistake__andwant__torevert__your changes,you__caneasily__returnto__anypreviously__working state. (Tolearn__moreabout__versioncontrol__using Git,see__Appendix D.)Projects__onGitHub__arestored__in repositories,which__containeverything__associatedwith__the project:its__code,information__onits__collaborators,any__issuesor__bug reports,and__so on.When__userson__GitHublike__a project,they__canstar__itto__showtheir__supportand__keeptrack__ofprojects__theymight__wantto__use.In__this chapter,we__llwrite__aprogram__toautomatically__downloadinformation__aboutthe__most-starredPython__projectson__GitHub,and__thenwe__llcreate__aninforma__tivevisualization__ofthese__projects.Requesting__DataUsing__anAPI__CallGitHub__sAPI__letsyou__requesta__widerange__ofinformation__throughAPI__calls.To__seewhat__anAPI__calllooks__like,enter__thefollowing__intoyour__browser__saddress__barand__press ENTER: https://api.github.com/search/repositories?q=language:python+sort:starsThis__callreturns__thenumber__ofPython__projectscurrently__hostedon__GitHub,as__wellas__informationabout__themost__popularPython__repositories.Let__sexamine__the call.The__first part, https://api.github.com/,directs__therequest__tothe__partof__GitHubthat__respondsto__API calls.The__next part, search/repositories,tells__theAPI__toconduct__asearch__throughall__thereposi__torieson__GitHub.The__questionmark__afterrepositories__signalsthat__were__aboutto__passan__argument.The__qstands__for query,and__theequal__sign (=)lets__usbegin__specifyinga__query (q=).By__using language:python,we__indicatethat__wewant__informationonly__onrepositories__thathave__Pythonas__theprimary__language.The__final part, +sort:stars,sorts__theprojects__bythe__numberof__starsthey__vebeen__given.Working__withAPIs__357The__followingsnippet__showsthe__firstfew__linesof__the response: { 1 "total_count": 8961993, 2 "incomplete_results": true, 3 "items": [ { "id": 54346799, "node_id": "MDEwOlJlcG9zaXRvcnk1NDM0Njc5OQ==", "name": "public-apis", "full_name": "public-apis/public-apis", --snip--You__cansee__fromthe__responsethat__thisURL__isnot__primarilyintended__tobe__enteredby__humans,because__its__ina__formatthat__smeant__tobe__processed__bya__program.GitHub__foundjust__undernine__millionPython__projectsas__ofthis__writing 1.The__valuefor__"incomplete_results"is__true,which__tellsus__thatGitHub__didnt__fullyprocess__thequery__2.GitHub__limitshow__longeach__querycan__run,in__orderto__keepthe__APIresponsive__forall__users.In__thiscase__itfound__someof__themost__popularPython__repositories,but__itdidn__thave__timeto__findall__of them;we__llfix__thatin__a moment.The__"items"returned__aredisplayed__inthe__listthat__follows,which__containsdetails__aboutthe__mostpopular__Pythonprojects__onGitHub__3.Installing__RequestsThe__Requestspackage__allowsa__Pythonprogram__toeasily__requestinformation__froma__websiteand__examinethe__response.Use__pipto__install Requests: $python__-mpip__install --userrequests__Ifyou__usea__commandother__thanpython__torun__programsor__starta__terminal__session,such__as python3,your__commandwill__looklike__this: $ python3 -mpip__install --userrequests__Processingan__APIResponse__Nowwe__llwrite__aprogram__toautomatically__issuean__APIcall__andprocess__the results:python___repos.pyimport__requests #Make__anAPI__calland__checkthe__response. 1url__= "https://api.github.com/search/repositories"url__+= "?q=language:python+sort:stars+stars:>10000" 2headers__= {"Accept": "application/vnd.github.v3+json"} 3r__= requests.get(url, headers=headers) 4 print(f"Status code: {r.status_code}") 358Chapter__17 #Convert__theresponse__objectto__a dictionary. 5response_dict__= r.json() #Process__results. print(response_dict.keys())We__firstimport__therequests__module.Then__weassign__theURL__ofthe__APIcall__tothe__urlvariable__1.This__isa__long URL,so__webreak__itinto__two lines.The__firstline__isthe__mainpart__ofthe__URL,and__thesecond__lineis__thequery__string.We__veincluded__onemore__conditionto__theoriginal__query string: stars:>10000,which__tellsGitHub__toonly__lookfor__Pythonrepositories__thathave__morethan__10,000 stars.This__shouldallow__GitHubto__returna__complete,consistent__setof__results.GitHub__iscurrently__onthe__thirdversion__ofits__API,so__wedefine__headersfor__theAPI__callthat__askexplicitly__touse__thisversion__ofthe__API,and__returnthe__resultsin__theJSON__format 2.Then__weuse__requeststo__makethe__callto__theAPI__3.We__call get()and__passit__theURL__andthe__headerthat__we defined,and__weassign__theresponse__objectto__thevariable__r.The__responseobject__hasan__attributecalled__status_code,which__tellsus__whetherthe__requestwas__successful. (Astatus__codeof__200indicates__asuccess__ful response.)We__printthe__valueof__status_codeso__wecan__makesure__thecall__wentthrough__successfully 4.We__askedthe__APIto__returnthe__informationin__JSON format,so__weuse__the json()method__toconvert__theinformation__toa__Pythondictionary__5.We__assignthe__resultingdictionary__to response_dict. Finally,we__printthe__keysfrom__response_dictand__seethe__following output:Status__code: 200 dict_keys(['total_count', 'incomplete_results', 'items'])Because__thestatus__codeis__200,we__knowthat__therequest__was successful.The__responsedictionary__containsonly__three keys: 'total_count', 'incomplete _results',and__'items'.Let__stake__alook__insidethe__response dictionary.Working__withthe__ResponseDictionary__Withthe__informationfrom__theAPI__callrepresented__asa__dictionary,we__canwork__withthe__datastored__there.Let__sgenerate__someoutput__thatsum__marizesthe__information.This__isa__goodway__tomake__surewe__receivedthe__informationwe__expected,and__tostart__examiningthe__informationwe__reinterested__in:python___repos.pyimport__requests #Make__anAPI__calland__storethe__response. --snip-- #Convert__theresponse__objectto__a dictionary.response_dict__= r.json()Working__withAPIs__359 1 print(f"Total repositories: {response_dict['total_count']}") print(f"Complete results: {not response_dict['incomplete_results']}") #Explore__informationabout__the repositories. 2repo_dicts__= response_dict['items'] print(f"Repositories returned: {len(repo_dicts)}") #Examine__thefirst__repository. 3repo_dict__= repo_dicts[0] 4 print(f"\nKeys: {len(repo_dict)}") 5for__keyin__sorted(repo_dict.keys()): print(key)We__startexploring__theresponse__dictionaryby__printingthe__valueasso__ciatedwith__'total_count',which__representsthe__totalnumber__ofPython__repositoriesreturned__bythis__APIcall__1.We__alsouse__thevalue__associatedwith__'incomplete_results',so__we'llknow__ifGitHub__wasable__tofully__processthe__query.Rather__thanprinting__thisvalue__directly,we__printits__opposite:a__valueof__Truewill__indicatethat__wereceived__acomplete__setof__results.The__valueassociated__with 'items'is__alist__containinga__numberof__dic tionaries,each__ofwhich__containsdata__aboutan__individualPython__reposi tory.We__assignthis__listof__dictionariesto__repo_dicts 2.We__thenprint__thelength__ofrepo_dicts__tosee__howmany__repositorieswe__haveinformation__for.To__lookcloser__atthe__informationreturned__abouteach__repository,we__pullout__thefirst__itemfrom__repo_dictsand__assignit__torepo_dict__3.We__thenprint__thenumber__ofkeys__inthe__dictionaryto__seehow__muchinformation__wehave__4. Finally,we__printall__thedictionary__skeys__tosee__whatkind__ofinfor__mationis__included 5.The__resultsgive__usa__clearerpicture__ofthe__actual data:Status__code: 200 1Total__repositories: 248 2Complete__results:True__Repositories returned: 30 3 Keys: 78allow_forking__archive_urlarchived__--snip--url__visiblitywatchers__watchers_countAt__thetime__ofthis__writing,there__areonly__248Python__repositorieswith__over 10,000stars__1.We__cansee__thatGitHub__wasable__tofully__processthe__APIcall__2.In__this response,GitHub__returnedinformation__aboutthe__first 30repositories__thatmatch__theconditions__ofour__query.If__wewant__morereposi__tories,we__canrequest__additionalpages__of data. 360Chapter__17GitHub__sAPI__returnsa__lotof__informationabout__each repository:there__are 78keys__inrepo_dict__3.When__youlook__throughthese__keys,you__llget__asense__ofthe__kindof__informationyou__canextract__abouta__project. (Theonly__wayto__knowwhat__informationis__availablethrough__anAPI__isto__readthe__documentationor__toexamine__theinformation__through code,as__were__doing here.)Let__spull__outthe__valuesfor__someof__thekeys__in repo_dict:python___repos.py --snip-- #Examine__thefirst__repository.repo_dict__= repo_dicts[0] print("\nSelectedinformation__aboutfirst__repository:") 1 print(f"Name: {repo_dict['name']}") 2 print(f"Owner: {repo_dict['owner']['login']}") 3 print(f"Stars: {repo_dict['stargazers_count']}") print(f"Repository: {repo_dict['html_url']}") 4 print(f"Created: {repo_dict['created_at']}") 5 print(f"Updated: {repo_dict['updated_at']}") print(f"Description: {repo_dict['description']}") Here,we__printthe__valuesfor__anumber__ofkeys__fromthe__firstrepository__s dictionary.We__startwith__thename__ofthe__project 1.An__entiredictionary__representsthe__projects__owner,so__weuse__thekey__ownerto__accessthe__dictionary__representingthe__owner,and__thenuse__thekey__loginto__getthe__owners__loginname__2. Next,we__printhow__manystars__theproject__hasearned__3and__theURL__forthe__projects__GitHub repository.We__thenshow__whenit__wascre__ated 4and__whenit__waslast__updated 5. Finally,we__printthe__repositorys__description.The__outputshould__looksomething__like this:Status__code: 200Total__repositories: 248Complete__results:True__Repositories returned: 30Selected__informationabout__first repository: Name: public-apis Owner: public-apis Stars: 191493 Repository: https://github.com/public-apis/public-apis Created: 2016-03-20T23:49:42Z Updated: 2022-05-12T06:37:11Z Description:A__collectivelist__offree__APIsWe__cansee__thatthe__most-starredPython__projecton__GitHubas__ofthis__writingis__public-apis.Its__owneris__anorganization__withthe__same name,and__ithas__beenstarred__byalmost__200,000GitHub__users.We__cansee__theURL__forthe__projects__repository,its__creationdate__ofMarch__2016,and__thatit__wasupdated__recently. Additionally,the__descriptiontells__usthat__public-apiscon__tainsa__listof__freeAPIs__thatprogrammers__mightbe__interested in.Working__withAPIs__361Summarizing__theTop__RepositoriesWhen__wemake__avisualization__forthis__data,we__llwant__toinclude__morethan__one repository.Let__swrite__aloop__toprint__selectedinformation__abouteach__repositorythe__APIcall__returnsso__wecan__includethem__allin__the visualization:python___repos.py --snip-- #Explore__informationabout__the repositories.repo_dicts__= response_dict['items'] print(f"Repositories returned: {len(repo_dicts)}") 1 print("\nSelectedinformation__abouteach__repository:") 2for__repo_dictin__repo_dicts: print(f"\nName: {repo_dict['name']}") print(f"Owner: {repo_dict['owner']['login']}") print(f"Stars: {repo_dict['stargazers_count']}") print(f"Repository: {repo_dict['html_url']}") print(f"Description: {repo_dict['description']}")We__firstprint__anintroductory__message 1.Then__weloop__throughall__thedictionaries__inrepo_dicts__2.Inside__the loop,we__printthe__nameof__each project,its__owner,how__manystars__it has,its__URLon__GitHub,and__theproj__ects__description:Status__code: 200Total__repositories: 248Complete__results:True__Repositories returned: 30Selected__informationabout__each repository: Name: public-apis Owner: public-apis Stars: 191494 Repository: https://github.com/public-apis/public-apis Description:A__collectivelist__offree__APIs Name: system-design-primer Owner:donnemartin__Stars: 179952 Repository: https://github.com/donnemartin/system-design-primer Description:Learn__howto__design large-scale systems.Prep__forthe__systemdesign__interview.Includes__Anki flashcards. --snip-- Name:PayloadsAllTheThings__Owner:swisskyrepo__Stars: 37227 Repository: https://github.com/swisskyrepo/PayloadsAllTheThings Description:A__listof__usefulpayloads__andbypass__forWeb__ApplicationSecurity__and Pentest/CTF 362Chapter__17Some__interestingprojects__appearin__these results,and__itmight__beworth__lookingat__a few.But__dont__spendtoo__muchtime__here,because__were__aboutto__createa__visualizationthat__willmake__theresults__mucheasier__to read.Monitoring__APIRate__LimitsMost__APIshave__rate limits,which__meansthere__sa__limitto__howmany__requestsyou__canmake__ina__certainamount__of time.To__seeif__youre__approachingGitHub__s limits,enter__https://api.github.com/rate_limitinto__aweb__browser.You__shouldsee__aresponse__thatbegins__like this: { "resources": { --snip-- 1 "search": { 2 "limit": 10, 3 "remaining": 9, 4 "reset": 1652338832, "used": 1, "resource": "search" }, --snip--The__informationwe__reinterested__inis__therate__limitfor__thesearch__API 1.We__seethat__thelimit__is 10requests__perminute__2and__thatwe__have 9requests__remainingfor__thecurrent__minute 3.The__valueassociated__withthe__key "reset"represents__thetime__inUnix__orepoch__time (thenumber__ofseconds__sincemidnight__onJanuary__1, 1970)when__ourquota__willreset__4.If__youreach__your quota,you__llget__ashort__responsethat__letsyou__knowyou__vereached__theAPI__limit.If__youreach__the limit,just__waituntil__yourquota__resets.NOTE__ManyAPIs__requireyou__toregister__andobtain__anAPI__keyor__accesstoken__tomake__API calls.As__ofthis__writing,GitHub__hasno__such requirement,but__ifyou__obtainan__access token,your__limitswill__bemuch__higher.Visualizing__RepositoriesUsing__PlotlyLet__smake__avisualization__usingthe__datawe__vegathered__toshow__therela__tivepopularity__ofPython__projectson__GitHub.We__llmake__aninteractive__bar chart:the__heightof__eachbar__willrepresent__thenumber__ofstars__theproject__has acquired,and__youll__beable__toclick__thebar__slabel__togo__tothat__projects__homeon__GitHub.Working__withAPIs__363Save__acopy__ofthe__programwe__vebeen__workingon__aspython_repos___visual.py,then__modifyit__soit__readsas__follows:python_repos___visual.pyimport__requestsimport__plotly.expressas__px #Make__anAPI__calland__checkthe__response.url__= "https://api.github.com/search/repositories"url__+= "?q=language:python+sort:stars+stars:>10000"headers__= {"Accept": "application/vnd.github.v3+json"}r__= requests.get(url, headers=headers) 1 print(f"Status code: {r.status_code}") #Process__overall results.response_dict__= r.json() 2 print(f"Complete results: {not response_dict['incomplete_results']}") #Process__repository information.repo_dicts__= response_dict['items'] 3 repo_names,stars__= [], []for__repo_dictin__repo_dicts: repo_names.append(repo_dict['name']) stars.append(repo_dict['stargazers_count']) #Make__visualization. 4fig__= px.bar(x=repo_names, y=stars) fig.show()We__importPlotly__Expressand__thenmake__theAPI__callas__wehave__been doing.We__continueto__printthe__statusof__theAPI__callresponse__sowe__llknow__ifthere__isa__problem 1.When__weprocess__theoverall__results,we__continueto__printthe__messageconfirming__thatwe__gota__completeset__ofresults__2.We__removethe__restof__the print()calls__becausewe__reno__longerin__theexploratory__phase;we__knowwe__havethe__datawe__want.We__thencreate__twoempty__lists 3to__storethe__datawe__llinclude__inthe__initial chart.We__llneed__thename__ofeach__projectto__labelthe__bars (repo_names)and__thenumber__ofstars__todetermine__theheight__ofthe__bars (stars).In__the loop,we__appendthe__nameof__eachproject__andthe__numberof__starsit__hasto__these lists.We__makethe__initialvisualization__withjust__twolines__ofcode__4.This__isconsistent__withPlotly__Expresss__philosophythat__youshould__beable__tosee__yourvisualization__asquickly__aspossible__beforerefining__its appearance.Here__weuse__the px.bar()function__tocreate__abar__chart.We__passthe__listrepo_names__asthe__xargument__andstars__asthe__y argument.Figure__17-1shows__theresulting__chart.We__cansee__thatthe__firstfew__projectsare__significantlymore__popularthan__the rest,but__allof__themare__importantprojects__inthe__Python ecosystem. 364Chapter__17Figure__17-1:The__most-starredPython__projectson__GitHubStyling__theChart__Plotlysupports__anumber__ofways__tostyle__andcustomize__the plots,once__youknow__theinformation__inthe__plotis__correct.We__llmake__somechanges__inthe__initial px.bar()call__andthen__makesome__furtheradjustments__tothe__figobject__afterit__sbeen__created.We__llstart__stylingthe__chartby__addinga__titleand__labelsfor__each axis:python_repos___visual.py --snip-- #Make__visualization.title__= "Most-StarredPython__Projectson__GitHub"labels__= {'x': 'Repository', 'y': 'Stars'}fig__= px.bar(x=repo_names, y=stars, title=title, labels=labels) 1 fig.update_layout(title_font_size=28, xaxis_title_font_size=20, yaxis_title_font_size=20) fig.show()We__firstadd__atitle__andlabels__foreach__axis,as__wedid__inChapters__15and__16.We__thenuse__the fig.update_layout()method__tomodify__specificelements__ofthe__chart 1.Plotly__usesa__conventionwhere__aspectsof__achart__elementare__connectedby__underscores.As__youbecome__familiarwith__Plotlys__documen tation,you__llstart__tosee__consistentpatterns__inhow__differentelements__ofa__chartare__namedand__modified.Here__weset__thetitle__fontsize__to 28and__thefont__sizefor__eachaxis__titleto__20.The__resultis__shownin__Figure 17-2.Working__withAPIs__365Figure__17-2:A__titlehas__beenadded__tothe__main chart,and__toeach__axisas__well.Adding__CustomTooltips__In Plotly,you__canhover__thecursor__overan__individualbar__toshow__theinfor__mationthe__bar represents.This__iscommonly__calleda__tooltip,and__inthis__case,it__currentlyshows__thenumber__ofstars__aproject__has.Let__screate__acus__tomtooltip__toshow__eachproject__sdescription__aswell__asthe__projects__owner.We__needto__pullsome__additionaldata__togenerate__the tooltips:python_repos___visual.py --snip-- #Process__repository information.repo_dicts__= response_dict['items'] 1 repo_names, stars,hover_texts__= [], [], []for__repo_dictin__repo_dicts: repo_names.append(repo_dict['name']) stars.append(repo_dict['stargazers_count']) #Build__hover texts. 2owner__= repo_dict['owner']['login']description__= repo_dict['description'] 3hover_text__= f"{owner}{description}" hover_texts.append(hover_text) #Make__visualization.title__= "Most-StarredPython__Projectson__GitHub"labels__= {'x': 'Repository', 'y': 'Stars'} 4fig__= px.bar(x=repo_names, y=stars, title=title, labels=labels, hover_name=hover_texts) 366Chapter__17 fig.update_layout(title_font_size=28, xaxis_title_font_size=20, yaxis_title_font_size=20) fig.show()We__firstdefine__anew__empty list, hover_texts,to__holdthe__textwe__wantto__displayfor__eachproject__1.In__theloop__wherewe__processthe__data,we__pullthe__ownerand__thedescription__foreach__project 2.Plotly__allowsyou__touse__HTMLcode__withintext__elements,so__wegenerate__astring__forthe__labelwith__aline__break ()between__theproject__owners__usernameand__thedescrip__tion 3.We__thenappend__thislabel__tothe__list hover_texts.In__the px.bar() call,we__addthe__hover_nameargument__andpass__ithover___texts 4.This__isthe__sameapproach__weused__tocustomize__thelabel__foreach__dotin__themap__ofglobal__earthquake activity.As__Plotlycreates__each bar,it__willpull__labelsfrom__thislist__andonly__displaythem__whenthe__viewerhovers__overa__bar.Figure__17-3shows__oneof__thesecustom__tooltips.Figure__17-3:Hovering__overa__barshows__theproject__sowner__and description.Adding__ClickableLinks__BecausePlotly__allowsyou__touse__HTMLon__text elements,we__caneasily__addlinks__toa__chart.Let__suse__the x-axislabels__asa__wayto__letthe__viewervisit__anyproject__shome__pageon__GitHub.We__needto__pullthe__URLsfrom__thedata__anduse__themwhen__generatingthe__x-axis labels:python_repos___visual.py --snip-- #Process__repository information.repo_dicts__= response_dict['items'] 1 repo_links, stars,hover_texts__= [], [], []for__repo_dictin__repo_dicts: #Turn__reponames__intoactive__links.repo_name__= repo_dict['name'] 2repo_url__= repo_dict['html_url']Working__withAPIs__367 3repo_link__= f"{repo_name}" repo_links.append(repo_link) stars.append(repo_dict['stargazers_count']) --snip-- #Make__visualization.title__= "Most-StarredPython__Projectson__GitHub"labels__= {'x': 'Repository', 'y': 'Stars'}fig__= px.bar(x=repo_links, y=stars, title=title, labels=labels, hover_name=hover_texts) fig.update_layout(title_font_size=28, xaxis_title_font_size=20, yaxis_title_font_size=20) fig.show()We__updatethe__nameof__thelist__were__creatingfrom__repo_namesto__repo_links__tomore__accuratelycommunicate__thekind__ofinformation__were__putting__togetherfor__thechart__1.We__thenpull__theURL__forthe__projectfrom__repo_dictand__assignit__tothe__temporaryvariable__repo_url 2. Next,we__generate__alink__tothe__project 3.We__usethe__HTMLanchor__tag,which__hasthe__formlink__text,to__generatethe__link.We__thenappend__thislink__to repo_links.When__wecall__px.bar(),we__userepo_links__forthe__x-valuesin__the chart.The__resultlooks__thesame__as before,but__nowthe__viewercan__clickany__ofthe__projectnames__atthe__bottomof__thechart__tovisit__thatproject__shome__pageon__GitHub.Now__wehave__an interactive,informative__visualizationof__dataretrieved__throughan__API!Customizing__MarkerColors__Oncea__charthas__been created,almost__anyaspect__ofthe__chartcan__becus__tomizedthrough__anupdate__method.We__veused__the update_layout()method__previously.Another__method, update_traces(),can__beused__tocustomize__thedata__thats__representedon__a chart.Let__schange__thebars__toa__darker blue,with__some transparency: --snip-- fig.update_layout(title_font_size=28, xaxis_title_font_size=20, yaxis_title_font_size=20) fig.update_traces(marker_color='SteelBlue', marker_opacity=0.6) fig.show()In__Plotly,a__tracerefers__toa__collectionof__dataon__a chart.The__update _traces()method__cantake__anumber__ofdifferent__arguments;any__argumentthat__startswith__marker_affects__themarkers__onthe__chart.Here__weset__eachmarker__scolor__to 'SteelBlue';any__namedCSS__colorwill__work here.We__alsoset__theopacity__ofeach__markerto__0.6.An__opacityof__1.0will__beentirely__opaque,and__anopacity__of 0will__beentirely__invisible. 368Chapter__17More__AboutPlotly__andthe__GitHubAPI__Plotlys__documentationis__extensiveand__well organized; however,it__canbe__hardto__knowwhere__tostart__reading.A__goodplace__tostart__iswith__thearticle__PlotlyExpress__in Python,at__https://plotly.com/python/plotly-express.This__isan__overviewof__allthe__plotsyou__canmake__withPlotly__Express,and__youcan__findlinks__tolonger__articlesabout__eachindividual__chart type.If__youwant__tounderstand__howto__customizePlotly__charts better,the__articleStyling__PlotlyExpress__Figuresin__Pythonwill__expandon__whatyou__veseen__inChapters__15 17.You__canfind__thisarticle__at https://plotly.com/python/ styling-plotly-express.For__moreabout__theGitHub__API,refer__toits__documentationat__https:// docs.github.com/en/rest.Here__youll__learnhow__topull__awide__varietyof__information__from GitHub.To__expandon__whatyou__sawin__this project,look__forthe__Searchsection__ofthe__referencein__the sidebar.If__youhave__aGitHub__account,you__canwork__withyour__owndata__aswell__asthe__publiclyavailable__datafrom__otherusers__repositories.The__HackerNews__APITo__explorehow__touse__APIcalls__onother__sites,let__stake__aquick__lookat__HackerNews__(https://news.ycombinator.com).On__Hacker News,people__sharearticles__aboutprogramming__andtechnology__andengage__inlively__discussions__aboutthose__articles.The__HackerNews__APIprovides__accessto__dataabout__allsubmissions__andcomments__onthe__site,and__youcan__usethe__APIwithout__havingto__registerfor__a key.The__followingcall__returnsinformation__aboutthe__currenttop__articleas__ofthis__writing: https://hacker-news.firebaseio.com/v0/item/31353677.jsonWhen__youenter__thisURL__ina__browser,you__llsee__thatthe__texton__thepage__isenclosed__by braces,meaning__its__a dictionary.But__theresponse__isdifficult__toexamine__withoutsome__better formatting.Let__srun__thisURL__throughthe__json.dumps() method,like__wedid__inthe__earthquakeproject__inChapter__16,so__wecan__explorethe__kindof__informationthat__sreturned__aboutan__article: hn_article.pyimport__requestsimport__json #Make__anAPI__call,and__storethe__response.url__= "https://hacker-news.firebaseio.com/v0/item/31353677.json"r__= requests.get(url) print(f"Status code: {r.status_code}") #Explore__thestructure__ofthe__data.response_dict__= r.json()response_string__= json.dumps(response_dict, indent=4) 1 print(response_string)Working__withAPIs__369Everything__inthis__programshould__look familiar,because__weve__usedit__allin__theprevious__two chapters.The__maindifference__hereis__thatwe__canprint__theformatted__responsestring__1instead__ofwriting__itto__a file,because__theoutput__isnot__particularly long.The__outputis__adictionary__ofinformation__aboutthe__articlewith__theID__31353677: { "by": "sohkamyung", 1 "descendants": 302, "id": 31353677, 2 "kids": [ 31354987, 31354235, --snip-- ], "score": 785, "time": 1652361401, 3 "title": "Astronomersreveal__firstimage__ofthe__blackhole__atthe__heartof__our galaxy", "type": "story", 4 "url": "https://public.nrao.edu/news/.../" }The__dictionarycontains__anumber__ofkeys__wecan__work with.The__key "descendants"tells__usthe__numberof__commentsthe__articlehas__received 1.The__key "kids"provides__theIDs__ofall__commentsmade__directlyin__responseto__thissubmission__2.Each__ofthese__commentsmight__havecomments__oftheir__ownas__well,so__thenumber__ofdescendants__asubmission__hasis__usuallygreater__thanits__numberof__kids.We__cansee__thetitle__ofthe__articlebeing__discussed__3and__aURL__forthe__articlebeing__discussedas__well 4.The__followingURL__returnsa__simplelist__ofall__theIDs__ofthe__currenttop__articleson__Hacker News: https://hacker-news.firebaseio.com/v0/topstories.jsonWe__canuse__thiscall__tofind__outwhich__articlesare__onthe__homepage__right now,and__thengenerate__aseries__ofAPI__callssimilar__tothe__onewe__just examined.With__this approach,we__canprint__asummary__ofall__thearticles__onthe__frontpage__ofHacker__Newsat__the moment:hn___submissions.pyfrom__operatorimport__itemgetterimport__requests #Make__anAPI__calland__checkthe__response. 1url__= "https://hacker-news.firebaseio.com/v0/topstories.json"r__= requests.get(url) print(f"Status code: {r.status_code}") #Process__informationabout__each submission. 2submission_ids__= r.json() 370Chapter__17 3submission_dicts__= []for__submission_idin__submission_ids[:5]: #Make__anew__APIcall__foreach__submission. 4url__= f"https://hacker-news.firebaseio.com/v0/item/{submission_id}.json"r__= requests.get(url) print(f"id: {submission_id}\tstatus: {r.status_code}")response_dict__= r.json() #Build__adictionary__foreach__article. 5submission_dict__= { 'title': response_dict['title'], 'hn_link': f"https://news.ycombinator.com/item?id={submission_id}", 'comments': response_dict['descendants'], } 6 submission_dicts.append(submission_dict) 7submission_dicts__= sorted(submission_dicts, key=itemgetter('comments'), reverse=True) 8for__submission_dictin__submission_dicts: print(f"\nTitle: {submission_dict['title']}") print(f"Discussion link: {submission_dict['hn_link']}") print(f"Comments: {submission_dict['comments']}") First,we__makean__APIcall__andprint__thestatus__ofthe__response 1.This__APIcall__returnsa__listcontaining__theIDs__ofup__to 500of__themost__populararticles__onHacker__Newsat__thetime__thecall__is issued.We__thenconvert__theresponse__objectto__aPython__list 2,which__weassign__to submission_ids.We__lluse__theseIDs__tobuild__aset__of dictionaries,each__ofwhich__containsinforma__tionabout__oneof__thecurrent__submissions.We__setup__anempty__listcalled__submission_dictsto__storethese__dictionaries__3.We__thenloop__throughthe__IDsof__thetop__30 submissions.We__makea__newAPI__callfor__eachsubmission__bygenerating__aURL__thatincludes__thecurrent__valueof__submission_id 4.We__printthe__statusof__eachrequest__alongwith__its ID,so__wecan__seewhether__its__successful. Next,we__createa__dictionaryfor__thesubmission__currentlybeing__processed__5.We__storethe__titleof__the submission,a__linkto__thediscussion__pagefor__that item,and__thenumber__ofcomments__thearticle__hasreceived__so far.Then__weappend__eachsubmission_dict__tothe__listsubmission_dicts__6.Each__submissionon__HackerNews__isranked__accordingto__anoverall__scorebased__ona__numberof__factors,including__howmany__timesit__sbeen__voted on,how__manycomments__its__received,and__howrecent__thesubmis__sion is.We__wantto__sortthe__listof__dictionariesby__thenumber__of comments.To__do this,we__usea__functioncalled__itemgetter() 7,which__comesfrom__theoperator__module.We__passthis__functionthe__key 'comments',and__itpulls__thevalue__associatedwith__thatkey__fromeach__dictionaryin__the list.The__sorted()function__thenuses__thisvalue__asits__basisfor__sortingthe__list.We__sortthe__listin__reverse order,to__placethe__most-commentedstories__first.Once__thelist__is sorted,we__loopthrough__thelist__8and__printout__threepieces__ofinformation__abouteach__ofthe__top submissions:the__title,a__linkWorking__withAPIs__371to__thediscussion__page,and__thenumber__ofcomments__thesubmission__currently__has:Status__code: 200 id: 31390506 status: 200 id: 31389893 status: 200 id: 31390742 status: 200 --snip-- Title: Fly.io:The__reclaimerof__Heroku'smagic__Discussion link: https://news.ycombinator.com/item?id=31390506 Comments: 134 Title:The__weirdHewlett__PackardFreeDOS__optionDiscussion__link: https://news.ycombinator.com/item?id=31389893 Comments: 64 Title:Modern__JavaScriptTutorial__Discussion link: https://news.ycombinator.com/item?id=31390742 Comments: 20 --snip--You__woulduse__asimilar__processto__accessand__analyzeinformation__withany__API.With__this data,you__couldmake__avisualization__showingwhich__submissionshave__inspiredthe__mostactive__recent discussions.This__isalso__thebasis__forapps__thatprovide__acustomized__readingexperience__forsites__likeHacker__News.To__learnmore__aboutwhat__kindof__informationyou__canaccess__throughthe__HackerNews__API,visit__thedocumentation__pageat__https://github.com/HackerNews/API.NOTE__HackerNews__sometimesallows__companiesit__supportsto__makespecial__hiring posts,and__commentsare__disabledon__these posts.If__yourun__thisprogram__whileone__ofthese__postsis__present,you__llget__a KeyError.If__thiscauses__an issue,you__canwrap__thecode__thatbuilds__submission_dictin__a try-exceptblock__andskip__overthese__posts.TRY__ITYOURSELF__17-1.Other__Languages:Modify__theAPI__callin__python_repos.pyso__itgenerates__achart__showingthe__mostpopular__projectsin__other languages.Try__languagessuch__as JavaScript, Ruby, C, Java, Perl, Haskell,and__Go. 17-2.Active__Discussions:Using__thedata__from hn_submissions.py,make__abar__chartshowing__themost__activediscussions__currentlyhappening__onHacker__News.The__heightof__eachbar__shouldcorrespond__tothe__numberof__commentseach__submission__has.The__labelfor__eachbar__shouldinclude__thesubmission__stitle__andact__asa__linkto__thediscussion__pagefor__that submission.If__youget__aKeyError__whencreating__a chart,use__a try-exceptblock__toskip__overthe__promotional posts. (continued) 372Chapter__17 17-3.Testing__python_repos.py:In__python_repos.py,we__printedthe__valueof__status_codeto__makesure__theAPI__callwas__successful.Write__aprogram__called test_python_repos.pythat__usespytest__toassert__thatthe__valueof__status_codeis__200.Figure__outsome__otherassertions__youcan__make:for__example,that__thenumber__ofitems__returnedis__expectedand__thatthe__totalnumber__ofrepositories__isgreater__thana__certain amount. 17-4.Further__Exploration:Visit__thedocumentation__forPlotly__andeither__theGitHub__APIor__theHacker__News API.Use__someof__theinformation__youfind__thereto__eithercustomize__thestyle__ofthe__plotswe__vealready__madeor__pullsome__different__informationand__createyour__own visualizations.If__youre__curiousabout__exploringother__APIs,take__alook__atthe__APIsmentioned__inthe__GitHubrepository__at https://github.com/public-apis.Summary__Inthis__chapter,you__learnedhow__touse__APIsto__write self-containedpro__gramsthat__automaticallygather__thedata__theyneed__anduse__thatdata__tocreate__a visualization.You__usedthe__GitHubAPI__toexplore__the most-starredPython__projectson__GitHub,and__youalso__lookedbriefly__atthe__HackerNews__API.You__learnedhow__touse__theRequests__packageto__automaticallyissue__anAPI__calland__howto__processthe__resultsof__that call.We__alsointroduced__somePlotly__settingsthat__furthercustomize__theappearance__ofthe__chartsyou__generate.In__thenext__chapter,you__lluse__Djangoto__builda__webapplication__asyour__final project. 18GETT__INGS__TARTEDWITH__DJANGO__Asthe__internethas__evolved,the__linebetween__websitesand__mobileapps__has blurred.Websites__andapps__bothhelp__usersinteract__withdata__ina__varietyof__ways. Fortunately,you__canuse__Djangoto__builda__singleproject__thatserves__adynamic__websiteas__wellas__aset__ofmobile__apps.Django__isPython__smost__popularweb__framework,a__setof__toolsdesigned__forbuilding__interactiveweb__applications.In__this chapter,you__lllearn__howto__useDjango__tobuild__aproject__calledLearning__Log,an__onlinejournal__systemthat__letsyou__keeptrack__ofinformation__youve__learnedabout__different topics.We__llwrite__aspecification__forthis__project,and__thendefine__modelsfor__thedata__theapp__willwork__with.We__lluse__Djangos__adminsystem__toenter__someinitial__data,and__thenwrite__viewsand__templatesso__Djangocan__buildthe__sites__pages.Django__canrespond__topage__requestsand__makeit__easierto__readand__writeto__a database,manage__users,and__much more.In__Chapters 19and__20, 374Chapter__18you__llrefine__theLearning__Log project,and__thendeploy__itto__alive__serverso__you (andeveryone__elsein__the world)can__use it.Setting__Upa__ProjectWhen__startingwork__onsomething__assignificant__asa__web app,you__firstneed__todescribe__theproject__sgoals__ina__specification,or__spec.Once__youhave__aclear__setof__goals,you__canstart__toidentify__manageabletasks__toachieve__those goals.In__this section,we__llwrite__aspec__forLearning__Logand__startworking__onthe__firstphase__ofthe__project.This__willinvolve__settingup__avirtual__environment__andbuilding__outthe__initialaspects__ofa__Django project.Writing__aSpec__Afull__specdetails__theproject__goals,describes__theproject__s functionality,and__discussesits__appearanceand__user interface.Like__anygood__projector__business plan,a__specshould__keepyou__focusedand__helpkeep__yourproject__on track.We__wont__writea__fullproject__spec here,but__well__layout__afew__cleargoals__tokeep__thedevelopment__process focused.Here__sthe__specwe__ll use:We__llwrite__aweb__appcalled__LearningLog__thatallows__usersto__logthe__topicsthey__reinterested__inand__makejournal__entriesas__theylearn__abouteach__topic.The__LearningLog__homepage__willdescribe__thesite__andinvite__usersto__eitherregister__orlog__in.Once__logged in,a__usercan__createnew__topics,add__new entries,and__readand__editexisting__entries.When__youre__researchinga__new topic,maintaining__ajournal__ofwhat__youve__learnedcan__helpyou__keeptrack__ofnew__informationand__information__youve__already found.This__isespecially__truewhen__studyingtechnical__subjects.A__good app,like__theone__well__be creating,can__helpmake__thisprocess__more efficient.Creating__aVirtual__EnvironmentTo__workwith__Django,we__llfirst__setup__avirtual__environment.A__virtualenvi__ronmentis__aplace__onyour__systemwhere__youcan__installpackages__andisolate__themfrom__allother__Python packages.Separating__oneproject__slibraries__fromother__projectsis__beneficialand__willbe__necessarywhen__wedeploy__LearningLog__toa__serverin__Chapter 20.Create__anew__directoryfor__yourproject__called learning_log,switch__tothat__directoryin__a terminal,and__enterthe__followingcode__tocreate__avirtual__environment: learning_log$python__-mvenv__ll_env learning_log$Here__were__runningthe__venvvirtual__environmentmodule__andusing__itto__createan__environmentnamed__ll_env (notethat__thisname__startswith__GettingStarted__withDjango__375two__lowercase Ls,not__two ones).If__youuse__acommand__suchas__python3when__runningprograms__orinstalling__packages,make__sureto__usethat__command here.Activating__theVirtual__EnvironmentNow__weneed__toactivate__thevirtual__environment,using__thefollowing__command: learning_log$source__ll_env/bin/activate (ll_env)learning_log$This__commandruns__thescript__activatein__ll_env/bin/.When__theenviron__mentis__active,you__llsee__thename__ofthe__environmentin__parentheses.This__indicatesthat__youcan__installnew__packagesto__theenvironment__anduse__packagesthat__havealready__been installed.Packages__youinstall__inll_env__willnot__beavailable__whenthe__environmentis__inactive.NOTE__Ifyou__reusing__Windows,use__thecommand__ll_env\Scripts\activate (withoutthe__word source)to__activatethe__virtual environment.If__youre__using PowerShell,you__mightneed__tocapitalize__Activate.To__stopusing__avirtual__environment,enter__deactivate: (ll_env)learning_log$deactivate__learning_log$The__environmentwill__alsobecome__inactivewhen__youclose__theterminal__its__running in.Installing__DjangoWith__thevirtual__environment activated,enter__thefollowing__toupdate__pipand__install Django: (ll_env)learning_log$pip__install --upgradepip__(ll_env)learning_log$pip__installdjango__Collectingdjango__--snip--Installing__collected packages: sqlparse, asgiref,django__Successfullyinstalled__asgiref-3.5.2 django-4.1 sqlparse-0.4.2 (ll_env)learning_log$Because__itdownloads__resourcesfrom__avariety__of sources,pip__isupgraded__fairly often.It__sa__goodidea__toupgrade__pipwhenever__youmake__anew__virtual environment.We__reworking__ina__virtualenvironment__now,so__thecommand__toinstall__Djangois__thesame__onall__systems.There__sno__needto__uselonger__com mands,such__aspython__-mpip__install package_name,or__toinclude__the --user flag.Keep__inmind__thatDjango__willbe__availableonly__whenthe__ll_envenvi__ronmentis__active. 376Chapter__18NOTE__Djangoreleases__anew__versionabout__everyeight__months,so__youmay__seea__newerver__sionwhen__youinstall__Django.This__projectwill__mostlikely__workas__its__written here,even__onnewer__versionsof__Django.If__youwant__tomake__sureto__usethe__sameversion__ofDjango__yousee__here,use__thecommand__pipinstall__django==4.1.*.This__willinstall__thelatest__releaseof__Django 4.1.If__youhave__anyissues__relatedto__theversion__youre__using,see__theonline__resourcesfor__thisbook__at https://ehmatthes.github.io/ pcc_3e.Creating__aProject__inDjango__Withoutleaving__theactive__virtualenvironment__(rememberto__lookfor__ll_envin__parenthesesin__theterminal__prompt),enter__thefollowing__commandsto__createa__new project: 1 (ll_env)learning_log$ django-adminstartproject__ll_project . 2 (ll_env)learning_log$ls__ll_envll_project__manage.py 3 (ll_env)learning_log$ls__ll_project __init__.py asgi.py settings.py urls.py wsgi.pyThe__startprojectcommand__1tells__Djangoto__setup__anew__projectcalled__ll_project.The__dot (.)at__theend__ofthe__commandcreates__thenew__projectwith__adirectory__structurethat__willmake__iteasy__todeploy__theapp__toa__serverwhen__were__finisheddeveloping__it.NOTE__Dont__forgetthis__dot,or__youmight__runinto__someconfiguration__issueswhen__youdeploy__the app.If__youforget__the dot,delete__thefiles__andfolders__thatwere__created (except ll_env)and__runthe__command again.Running__thels__command (diron__Windows) 2shows__thatDjango__hascreated__anew__directorycalled__ll_project.It__alsocreated__a manage.py file,which__isa__shortprogram__thattakes__incommands__andfeeds__themto__therelevant__partof__Django.We__lluse__thesecommands__tomanage__tasks,such__asworking__withdatabases__andrunning__servers.The__ll_projectdirectory__containsfour__files 3;the__mostimportant__are settings.py, urls.py,and__wsgi.py.The__settings.pyfile__controlshow__Djangointer__actswith__yoursystem__andmanages__your project.We__llmodify__afew__ofthese__settingsand__addsome__settingsof__ourown__asthe__project evolves.The__urls.pyfile__tellsDjango__whichpages__tobuild__inresponse__tobrowser__requests.The__wsgi.pyfile__helpsDjango__servethe__filesit__creates.The__filenameis__anacro__nymfor__webserver__gateway interface.Creating__theDatabase__Djangostores__mostof__theinformation__fora__projectin__a database,so__nextwe__needto__createa__databasethat__Djangocan__work with.Enter__thefollow__ingcommand__(stillin__anactive__environment): (ll_env)learning_log$python__manage.pymigrate__1Operations__to perform:Getting__Startedwith__Django 377Apply__all migrations: admin, auth, contenttypes,sessions__Running migrations:Applying__contenttypes.0001_initial...OK__Applying auth.0001_initial...OK__--snip--Applying__sessions.0001_initial...OK__2 (ll_env)learning_log$ls__db.sqlite3ll_env__ll_project manage.pyAnytime__wemodify__a database,we__saywe__remigrating__the database.Issuing__themigrate__commandfor__thefirst__timetells__Djangoto__makesure__thedatabase__matchesthe__currentstate__ofthe__project.The__firsttime__werun__thiscommand__ina__newproject__usingSQLite__(moreabout__SQLitein__a moment),Django__willcreate__anew__databasefor__us. Here,Django__reportsthat__itwill__preparethe__databaseto__storeinformation__itneeds__tohandle__administrativeand__authenticationtasks__1.Running__thels__commandshows__thatDjango__createdanother__filecalled__db.sqlite3 2.SQLite__isa__databasethat__runsoff__asingle__file;it__sideal__forwrit__ingsimple__appsbecause__youwon__thave__topay__muchattention__tomanaging__the database.NOTE__Inan__activevirtual__environment,use__thecommand__pythonto__run manage.pycom__mands,even__ifyou__usesomething__different,like__python3,to__runother__programs.In__avirtual__environment,the__commandpython__refersto__theversion__ofPython__thatwas__usedto__createthe__virtual environment.Viewing__theProject__Lets__makesure__thatDjango__hasset__upthe__project properly.Enter__therunserver__commandto__viewthe__projectin__itscurrent__state: (ll_env)learning_log$python__manage.pyrunserver__Watchingfor__filechanges__withStatReloader__Performingsystem__checks... 1System__checkidentified__noissues__(0 silenced).May__19, 2022 - 21:52:35 2Django__version 4.1,using__settings 'll_project.settings' 3Starting__developmentserver__at http://127.0.0.1:8000/Quit__theserver__with CONTROL-C.Django__shouldstart__aserver__calledthe__development server,so__youcan__viewthe__projecton__yoursystem__tosee__howwell__it works.When__yourequest__apage__byentering__aURL__ina__browser,the__Djangoserver__respondsto__thatrequest__bybuilding__theappropriate__pageand__sendingit__tothe__browser.Django__firstchecks__tomake__surethe__projectis__setup__properly 1;it__thenreports__theversion__ofDjango__inuse__andthe__nameof__thesettings__filein__use 2. Finally,it__reportsthe__URLwhere__theproject__isbeing__served 3.The__URL http://127.0.0.1:8000/indicates__thatthe__projectis__listeningfor__requestson__port 8000on__your computer,which__iscalled__a localhost.The__378Chapter__18term__localhostrefers__toa__serverthat__onlyprocesses__requestson__your system;it__doesnt__allowanyone__elseto__seethe__pagesyou__re developing.Open__aweb__browserand__enterthe__URL http://localhost:8000/,or__http://127 .0.0.1:8000/if__thefirst__onedoesn__t work.You__shouldsee__somethinglike__Figure 18-1:a__pagethat__Djangocreates__tolet__youknow__everythingis__workingproperly__so far.Keep__theserver__runningfor__now,but__whenyou__wantto__stopthe__server,press__CTRL-Cin__theterminal__wherethe__runservercommand__was issued.Figure__18-1:Everything__isworking__so far.NOTE__Ifyou__receivethe__errormessage__Thatport__isalready__in use,tell__Djangoto__usea__different__portby__enteringpython__manage.pyrunserver__8001and__thencycling__throughhigher__numbersuntil__youfind__anopen__port.TRY__ITYOURSELF__18-1.New__Projects:To__geta__betteridea__ofwhat__Django does,build__acouple__emptyprojects__andlook__atwhat__Django creates.Make__anew__folderwith__asimple__name,like__tik_gramor__insta_tok (outsideof__yourlearning_log__directory),navigate__tothat__folderin__a terminal,and__createa__virtual environment.Install__Djangoand__runthe__command django-admin.pystartproject__tg_project . (makingsure__toinclude__thedot__atthe__endof__the command).Look__atthe__filesand__foldersthis__command creates,and__comparethem__toLearning__Log.Do__thisa__few times,until__youre__familiarwith__whatDjango__createswhen__startinga__new project.Then__deletethe__projectdirectories__ifyou__wish.Getting__Startedwith__Django 379Starting__anApp__ADjango__projectis__organizedas__agroup__ofindividual__appsthat__worktogether__tomake__theproject__workas__a whole.For__now,we__llcreate__oneapp__todo__mostof__ourproject__s work.We__lladd__anotherapp__inChapter__19to__manageuser__accounts.You__shouldleave__thedevelopment__serverrunning__inthe__terminalwin__dowyou__opened earlier.Open__anew__terminalwindow__(or tab)and__navigateto__thedirectory__thatcontains__manage.py.Activate__thevirtual__environment,and__thenrun__thestartapp__command: learning_log$source__ll_env/bin/activate (ll_env)learning_log$python__manage.pystartapp__learning_logs 1 (ll_env)learning_log$ls__db.sqlite3learning_logs__ll_envll_project__manage.py 2 (ll_env)learning_log$ls__learning_logs/ __init__.py admin.py apps.pymigrations__models.py tests.py views.pyThe__commandstartapp__appnametells__Djangoto__createthe__infrastructureneeded__tobuild__an app.When__youlook__inthe__projectdirectory__now,you__llsee__anew__foldercalled__learning_logs 1.Use__thels__commandto__seewhat__Djangohas__created 2.The__mostimportant__filesare__models.py, admin.py,and__views.py.We__lluse__models.pyto__definethe__datawe__wantto__managein__our app.We__lllook__at admin.pyand__views.pya__little later.Defining__ModelsLet__sthink__aboutour__datafor__a moment.Each__userwill__needto__createa__numberof__topicsin__theirlearning__log.Each__entrythey__makewill__betied__toa__topic,and__theseentries__willbe__displayedas__text.We__llalso__needto__storethe__timestampof__eachentry__sowe__canshow__userswhen__theymade__each one.Open__thefile__models.pyand__lookat__itsexisting__content: models.pyfrom__django.dbimport__models #Create__yourmodels__here.A__modulecalled__modelsis__being imported,and__were__beinginvited__tocreate__modelsof__our own.A__modeltells__Djangohow__towork__withthe__datathat__willbe__storedin__the app.A__modelis__a class;it__hasattributes__andmeth__ods,just__likeevery__classwe__ve discussed.Here__sthe__modelfor__thetopics__userswill__store:from__django.dbimport__modelsclass__Topic(models.Model): """Atopic__theuser__islearning__about.""" 1text__= models.CharField(max_length=200) 2date_added__= models.DateTimeField(auto_now_add=True) 380Chapter__18 3def____str__(self): """Returna__stringrepresentation__ofthe__model."""return__self.textWe__vecreated__aclass__called Topic,which__inheritsfrom__Modela__parentclass__includedin__Djangothat__definesa__models__basic functionality.We__addtwo__attributesto__theTopic__class:text__and date_added.The__textattribute__isa__CharField,a__pieceof__datathat__smade__upof__characters__ortext__1.You__useCharField__whenyou__wantto__storea__smallamount__of text,such__asa__name,a__title,or__a city.When__wedefine__aCharField__attribute,we__haveto__tellDjango__howmuch__spaceit__shouldreserve__inthe__database.Here__wegive__ita__max_lengthof__200 characters,which__shouldbe__enoughto__holdmost__topic names.The__date_addedattribute__isa__DateTimeField,a__pieceof__datathat__willrecord__adate__andtime__2.We__passthe__argument auto_now_add=True,which__tellsDjango__toautomatically__setthis__attributeto__thecurrent__dateand__timewhenever__theuser__createsa__new topic.It__sa__goodidea__totell__Djangohow__youwant__itto__representan__instanceof__a model.If__amodel__hasa____str__() method,Django__callsthat__methodwhenever__itneeds__togenerate__outputreferring__toan__instanceof__that model.Here__weve__writtena____str__()method__thatreturns__thevalue__assignedto__thetext__attribute 3.To__seethe__differentkinds__offields__youcan__usein__a model,see__theModel__FieldReference__pageat__https://docs.djangoproject.com/en/4.1/ref/ models/fields.You__wont__needall__theinformation__right now,but__itwill__beextremely__usefulwhen__youre__developingyour__ownDjango__projects.Activating__ModelsTo__useour__models,we__haveto__tellDjango__toinclude__ourapp__inthe__overall project.Open__settings.py (inthe__ll_project directory);you__llsee__asection__thattells__Djangowhich__appsare__installedin__the project: settings.py --snip--INSTALLED_APPS__= [ 'django.contrib.admin', 'django.contrib.auth', 'django.contrib.contenttypes', 'django.contrib.sessions', 'django.contrib.messages', 'django.contrib.staticfiles', ] --snip--Add__ourapp__tothis__listby__modifyingINSTALLED_APPS__soit__lookslike__this: --snip--INSTALLED_APPS__= [ #My__apps. 'learning_logs',Getting__Startedwith__Django 381 #Default__django apps. 'django.contrib.admin', --snip-- ] --snip--Grouping__appstogether__ina__projecthelps__keeptrack__ofthem__asthe__projectgrows__toinclude__more apps.Here__westart__asection__calledMy__apps,which__includesonly__'learning_logs'for__now.It__simportant__toplace__yourown__appsbefore__thedefault__apps,in__caseyou__needto__overrideany__behaviorof__thedefault__appswith__yourown__custom behavior. Next,we__needto__tellDjango__tomodify__thedatabase__soit__canstore__informationrelated__tothe__model Topic.From__the terminal,run__thefollow__ing command: (ll_env)learning_log$python__manage.pymakemigrations__learning_logsMigrations__for 'learning_logs': learning_logs/migrations/0001_initial.py -Create__modelTopic__(ll_env)learning_log$The__commandmakemigrations__tellsDjango__tofigure__outhow__tomodify__thedatabase__soit__canstore__thedata__associatedwith__anynew__modelswe__ve defined.The__outputhere__showsthat__Djangohas__createda__migrationfile__called 0001_initial.py.This__migrationwill__createa__tablefor__themodel__Topicin__the database.Now__well__applythis__migrationand__haveDjango__modifythe__databasefor__us: (ll_env)learning_log$python__manage.pymigrate__Operationsto__perform:Apply__all migrations: admin, auth, contenttypes, learning_logs,sessions__Running migrations:Applying__learning_logs.0001_initial...OK__Mostof__theoutput__fromthis__commandis__identicalto__theoutput__fromthe__firsttime__weissued__themigrate__command.We__needto__checkthe__lastline__inthis__output,where__Djangoconfirms__thatthe__migrationfor__learning_logsworked__OK.Whenever__wewant__tomodify__thedata__thatLearning__Log manages,we__llfollow__thesethree__steps:modify__models.py,call__makemigrationson__learning_logs,and__tellDjango__tomigrate__the project.The__DjangoAdmin__SiteDjango__makesit__easyto__workwith__yourmodels__throughits__admin site.Django__sadmin__siteis__onlymeant__tobe__usedby__thesite__s administrators;it__snot__meantfor__regular users.In__this section,we__llset__upthe__adminsite__anduse__itto__addsome__topicsthrough__theTopic__model. 382Chapter__18Setting__Upa__SuperuserDjango__allowsyou__tocreate__a superuser,a__userwho__hasall__privilegesavail__ableon__the site.A__users__privilegescontrol__theactions__theycan__take.The__mostrestrictive__privilegesettings__allowa__userto__onlyread__publicinforma__tionon__the site.Registered__userstypically__havethe__privilegeof__readingtheir__ownprivate__dataand__someselected__informationavailable__onlyto__members.To__effectivelyadminister__a project,the__siteowner__usuallyneeds__accessto__allinformation__storedon__the site.A__goodadministrator__iscareful__withtheir__userssensitive__information,because__usersput__alot__oftrust__intothe__appsthey__access.To__createa__superuserin__Django,enter__thefollowing__commandand__respondto__the prompts: (ll_env)learning_log$python__manage.pycreatesuperuser__1Username__(leaveblank__touse__'eric'):ll_admin__2Email__address: 3 Password:Password__(again):Superuser__created successfully. (ll_env)learning_log$When__youissue__thecommand__createsuperuser,Django__promptsyou__toenter__ausername__forthe__superuser 1.Here__Im__using ll_admin,but__youcan__enterany__usernameyou__want.You__canenter__anemail__addressor__justleave__thisfield__blank 2.You__llneed__toenter__yourpassword__twice 3.NOTE__Somesensitive__informationcan__behidden__froma__sites__administrators.For__example,Django__doesnt__storethe__passwordyou__enter; instead,it__storesa__stringderived__fromthe__password,called__a hash.Each__timeyou__enteryour__password,Django__hashesyour__entryand__comparesit__tothe__stored hash.If__thetwo__hashes match,you__reauthenti__cated.By__requiringhashes__to match,Django__ensuresthat__ifan__attackergains__accessto__asite__s database,they__llbe__ableto__readthe__storedhashes__butnot__the passwords.When__asite__isset__up properly,it__salmost__impossibleto__getthe__originalpasswords__fromthe__hashes.Registering__aModel__withthe__AdminSite__Djangoincludes__somemodels__inthe__adminsite__automatically,such__asUser__and Group,but__themodels__wecreate__needto__beadded__manually.When__westarted__thelearning_logs__app,Django__createdan__admin.pyfile__inthe__samedirectory__as models.py.Open__the admin.py file: admin.pyfrom__django.contribimport__admin #Register__yourmodels__here.Getting__Startedwith__Django 383To__registerTopic__withthe__admin site,enter__the following:from__django.contribimport__adminfrom__.modelsimport__Topic admin.site.register(Topic)This__codefirst__importsthe__modelwe__wantto__register, Topic.The__dotin__frontof__modelstells__Djangoto__lookfor__models.pyin__thesame__directoryas__admin.py.The__code admin.site.register()tells__Djangoto__manageour__modelthrough__theadmin__site.Now__usethe__superuseraccount__toaccess__theadmin__site.Go__to http:// localhost:8000/admin/and__enterthe__usernameand__passwordfor__thesuper__useryou__just created.You__shouldsee__ascreen__similarto__theone__shownin__Figure 18-2.This__pageallows__youto__addnew__usersand__groups,and__changeexisting__ones.You__canalso__workwith__datarelated__tothe__Topicmodel__thatwe__just defined.Figure__18-2:The__adminsite__withTopic__includedNOTE__Ifyou__seea__messagein__yourbrowser__thatthe__webpage__isnot__available,make__sureyou__stillhave__theDjango__serverrunning__ina__terminal window.If__youdon__t,activate__avirtual__environmentand__reissuethe__commandpython__manage.py runserver.If__youre__havingtrouble__viewingyour__projectat__anypoint__inthe__development process,closing__anyopen__terminalsand__reissuingthe__runservercommand__isa__goodfirst__troubleshooting step.Adding__TopicsNow__thatTopic__hasbeen__registeredwith__theadmin__site,let__sadd__ourfirst__topic.Click__Topicsto__goto__theTopics__page,which__ismostly__empty,because__wehave__notopics__tomanage__yet.Click__Add Topic,and__aform__foradding__anew__topic appears.Enter__Chessin__thefirst__boxand__click Save.You__llbe__sentback__tothe__Topicsadmin__page,and__youll__seethe__topicyou__just created.Let__screate__asecond__topicso__well__havemore__datato__work with.Click__AddTopic__again,and__enterRock__Climbing.Click__Save,and__youll__besent__backto__themain__Topicspage__again.Now__youll__seeChess__andRock__Climbing listed. 384Chapter__18Defining__theEntry__ModelFor__auser__torecord__whatthey__vebeen__learningabout__chessand__rockclimb__ing,we__needto__definea__modelfor__thekinds__ofentries__userscan__makein__theirlearning__logs.Each__entryneeds__tobe__associatedwith__aparticular__topic.This__relationshipis__calleda__many-to-one relationship,meaning__manyentries__canbe__associatedwith__one topic.Here__sthe__codefor__theEntry__model.Place__itin__your models.py file: models.pyfrom__django.dbimport__modelsclass__Topic(models.Model): --snip-- 1class__Entry(models.Model): """Somethingspecific__learnedabout__a topic.""" 2topic__= models.ForeignKey(Topic, on_delete=models.CASCADE) 3text__= models.TextField()date_added__= models.DateTimeField(auto_now_add=True) 4class__Meta:verbose_name_plural__= 'entries'def____str__(self): """Returna__simplestring__representingthe__entry.""" 5return__f"{self.text[:50]}..."The__Entryclass__inheritsfrom__Djangos__baseModel__class,just__asTopic__did 1.The__first attribute, topic,is__aForeignKey__instance 2.A__foreignkey__isa__database term;it__sa__referenceto__anotherrecord__inthe__database.This__isthe__codethat__connectseach__entryto__aspecific__topic.Each__topicis__assigneda__key,or__ID,when__its__created.When__Djangoneeds__toestablish__aconnection__betweentwo__piecesof__data,it__usesthe__keysassociated__witheach__pieceof__information.We__lluse__theseconnections__shortlyto__retrieveall__theentries__associatedwith__acertain__topic.The__on_delete=models.CASCADEargument__tellsDjango__thatwhen__atopic__is deleted,all__theentries__associatedwith__thattopic__shouldbe__deletedas__well.This__isknown__asa__cascading delete.Next__isan__attributecalled__text,which__isan__instanceof__TextField 3.This__kindof__fielddoesn__tneed__asize__limit,because__wedon__twant__tolimit__thesize__ofindividual__entries.The__date_addedattribute__allowsus__topresent__entriesin__theorder__theywere__created,and__toplace__atimestamp__nextto__each entry.The__Metaclass__isnested__insidethe__Entryclass__4.The__Metaclass__holdsextra__informationfor__managinga__model; here,it__letsus__seta__specialattri__butetelling__Djangoto__useEntries__whenit__needsto__referto__morethan__one entry.Without__this,Django__wouldrefer__tomultiple__entriesas__Entrys.The____str__()method__tellsDjango__whichinformation__toshow__whenit__refersto__individual entries.Because__anentry__canbe__along__bodyof__text, __str__()returns__justthe__first 50characters__oftext__5.We__alsoadd__anellipsis__toclarify__thatwe__renot__alwaysdisplaying__theentire__entry.Getting__Startedwith__Django 385Migrating__theEntry__ModelBecause__weve__addeda__new model,we__needto__migratethe__database again.This__processwill__becomequite__familiar:you__modify models.py,run__thecom__mandpython__manage.pymakemigrations__app_name,and__thenrun__thecommand__python manage.py migrate.Migrate__thedatabase__andcheck__theoutput__byentering__thefollowing__commands: (ll_env)learning_log$python__manage.pymakemigrations__learning_logsMigrations__for 'learning_logs': 1 learning_logs/migrations/0002_entry.py -Create__modelEntry__(ll_env)learning_log$python__manage.pymigrate__Operationsto__perform: --snip-- 2Applying__learning_logs.0002_entry...OK__Anew__migrationcalled__0002_entry.pyis__generated,which__tellsDjango__howto__modifythe__databaseto__storeinformation__relatedto__themodel__Entry 1.When__weissue__themigrate__command,we__seethat__Djangoapplied__thismigration__andeverything__workedproperly__2.Registering__Entrywith__theAdmin__SiteWe__alsoneed__toregister__theEntry__model.Here__swhat__admin.pyshould__looklike__now: admin.pyfrom__django.contribimport__adminfrom__.modelsimport__Topic,Entry__admin.site.register(Topic) admin.site.register(Entry)Go__backto__http://localhost/admin/,and__youshould__seeEntries__listedunder__Learning_Logs.Click__theAdd__linkfor__Entries,or__clickEntries__andthen__chooseAdd__entry.You__shouldsee__a drop-downlist__toselect__thetopic__youre__creatingan__entryfor__anda__textbox__foradding__an entry.Select__Chessfrom__the drop-down list,and__addan__entry.Here__sthe__firstentry__I made:The__openingis__thefirst__partof__the game,roughly__thefirst__tenmoves__or so.In__the opening,it__sa__goodidea__todo__threethings__bringout__yourbishops__and knights,try__tocontrol__thecenter__ofthe__board,and__castleyour__king.Of__course,these__arejust__guidelines.It__willbe__importantto__learnwhen__tofollow__theseguidelines__andwhen__todisregard__these suggestions.When__youclick__Save,you__llbe__broughtback__tothe__mainadmin__pagefor__entries. Here,you__llsee__thebenefit__ofusing__text[:50]as__thestring__representation__foreach__entry;it__smuch__easierto__workwith__multipleentries__in 386Chapter__18the__admininterface__ifyou__seeonly__thefirst__partof__an entry,rather__thanthe__entiretext__ofeach__entry.Make__asecond__entryfor__Chessand__oneentry__forRock__Climbingso__wehave__someinitial__data.Here__sa__secondentry__for Chess:In__theopening__phaseof__the game,it__simportant__tobring__outyour__bishopsand__knights.These__piecesare__powerfuland__maneuverable__enoughto__playa__significantrole__inthe__beginningmoves__ofa__game.And__heres__afirst__entryfor__Rock Climbing:One__ofthe__mostimportant__conceptsin__climbingis__tokeep__yourweight__onyour__feetas__muchas__possible.There__sa__myththat__climberscan__hangall__dayon__their arms.In__reality,good__climbers__havepracticed__specificways__ofkeeping__theirweight__overtheir__feetwhenever__possible.These__threeentries__willgive__ussomething__towork__withas__wecontinue__todevelop__Learning Log.The__DjangoShell__Nowthat__weve__enteredsome__data,we__canexamine__itprogrammatically__throughan__interactiveterminal__session.This__interactiveenvironment__iscalled__theDjango__shell,and__its__agreat__environmentfor__testingand__troubleshooting__your project.Here__san__exampleof__aninteractive__shell session: (ll_env)learning_log$python__manage.pyshell__1 >>>from__learning_logs.modelsimport__Topic >>> Topic.objects.all() , ]>The__commandpython__manage.py shell,run__inan__activevirtual__environ ment,launches__aPython__interpreterthat__youcan__useto__explorethe__datastored__inyour__projects__database. Here,we__importthe__modelTopic__fromthe__learning_logs.modelsmodule__1.We__thenuse__themethod__Topic.objects .all()to__getall__instancesof__themodel__Topic;the__listthat__sreturned__iscalled__a queryset.We__canloop__overa__querysetjust__aswe__dloop__overa__list.Here__show__youcan__seethe__IDthat__sbeen__assignedto__eachtopic__object: >>>topics__= Topic.objects.all() >>>for__topicin__topics: ... print(topic.id, topic) ... 1Chess__2Rock__ClimbingWe__assignthe__querysetto__topicsand__thenprint__eachtopic__sid__attributeand__thestring__representationof__each topic.We__cansee__thatChess__hasan__IDof__1and__RockClimbing__hasan__IDof__2.Getting__Startedwith__Django 387If__youknow__theID__ofa__particular object,you__canuse__themethod__Topic .objects.get()to__retrievethat__objectand__examineany__attributethe__object has.Let__slook__atthe__textand__date_addedvalues__for Chess: >>>t__= Topic.objects.get(id=1) >>> t.text 'Chess' >>> t.date_added datetime.datetime(2022, 5, 20, 3, 33, 36, 928759, tzinfo=datetime.timezone.utc)We__canalso__lookat__theentries__relatedto__acertain__topic. Earlier,we__definedthe__topicattribute__forthe__Entry model.This__wasa__ForeignKey,a__connection__betweeneach__entryand__a topic.Django__canuse__thisconnection__toget__everyentry__relatedto__acertain__topic,like__this: 1 >>> t.entry_set.all() , ]>To__getdata__througha__foreignkey__relationship,you__usethe__lowercasename__ofthe__relatedmodel__followedby__anunderscore__andthe__wordset__1.For__example,say__youhave__themodels__Pizzaand__Topping,and__Toppingis__relatedto__Pizzathrough__aforeign__key.If__yourobject__iscalled__my_pizza,repre__sentinga__single pizza,you__canget__allof__thepizza__stoppings__usingthe__code my_pizza.topping_set.all().We__lluse__thissyntax__whenwe__beginto__codethe__pagesusers__can request.The__shellis__reallyuseful__formaking__sureyour__coderetrieves__thedata__youwant__it to.If__yourcode__worksas__youexpect__itto__inthe__shell,it__shouldalso__workproperly__inthe__fileswithin__your project.If__yourcode__generates__errorsor__doesnt__retrievethe__datayou__expectit__to,it__smuch__easierto__troubleshootyour__codein__thesimple__shellenvironment__thanwithin__thefiles__thatgenerate__web pages.We__wont__referto__theshell__much,but__youshould__continueusing__itto__practiceworking__withDjango__ssyntax__foraccess__ingthe__datastored__inthe__project.Each__timeyou__modifyyour__models,you__llneed__torestart__theshell__tosee__theeffects__ofthose__changes.To__exita__shell session,press__CTRL-D;on__Windows,press__CTRL-Zand__thenpress__ENTER.TRY__ITYOURSELF__18-2.Short__Entries:The____str__()method__inthe__Entrymodel__currentlyappends__anellipsis__toevery__instanceof__Entrywhen__Djangoshows__itin__theadmin__siteor__the shell.Add__anif__statementto__the __str__()method__thatadds__anellipsis__(continued) 388Chapter__18only__ifthe__entryis__longerthan__50 characters.Use__theadmin__siteto__addan__entrythat__sfewer__than 50characters__in length,and__checkthat__itdoesn__thave__anellipsis__when viewed. 18-3.The__Django API:When__youwrite__codeto__accessthe__datain__your project,you__rewriting__a query.Skim__throughthe__documentationfor__queryingyour__dataat__https://docs.djangoproject.com/en/4.1/topics/db/queries.Much__ofwhat__yousee__willlook__newto__you,but__itwill__bequite__usefulas__youstart__towork__onyour__own projects. 18-4. Pizzeria:Start__anew__projectcalled__pizzeria_projectwith__anapp__called pizzas.Define__amodel__Pizzawith__afield__called name,which__willhold__name values,such__asHawaiian__andMeat__Lovers.Define__amodel__calledTopping__withfields__calledpizza__and name.The__pizzafield__shouldbe__aforeign__keyto__Pizza,and__nameshould__beable__tohold__valuessuch__as pineapple,Canadian__bacon,and__sausage.Register__bothmodels__withthe__admin site,and__usethe__siteto__entersome__pizzanames__and toppings.Use__theshell__toexplore__thedata__you entered.Making__Pages:The__LearningLog__HomePage__Makingweb__pageswith__Djangoconsists__ofthree__stages:defining__URLs,writing__views,and__writing templates.You__cando__thesein__any order,but__inthis__projectwe__llalways__startby__definingthe__URL pattern.A__URLpattern__describesthe__waythe__URLis__laid out.It__alsotells__Djangowhat__tolook__forwhen__matchinga__browserrequest__witha__site URL,so__itknows__whichpage__to return.Each__URLthen__mapsto__aparticular__view.The__viewfunction__retrievesand__processesthe__dataneeded__forthat__page.The__viewfunction__oftenren__dersthe__pageusing__a template,which__containsthe__overallstructure__ofthe__page.To__seehow__this works,let__smake__thehome__pagefor__Learning Log.We__lldefine__theURL__forthe__home page,write__itsview__function,and__createa__simple template.Because__wejust__wantto__ensurethat__LearningLog__worksas__its__supposed to,we__llmake__asimple__pagefor__now.A__functioningweb__appis__funto__stylewhen__its__complete;an__appthat__looksgood__butdoesn__twork__wellis__point less.For__now,the__homepage__willdisplay__onlya__titleand__abrief__description.Mapping__aURL__Usersrequest__pagesby__enteringURLs__intoa__browserand__clicking links,so__well__needto__decidewhat__URLsare__needed.The__homepage__URLis__first:it__sthe__baseURL__peopleuse__toaccess__the project.At__the moment,the__base URL, http://localhost:8000/,returns__thedefault__Djangosite__thatlets__usknow__theproject__wasset__up correctly.We__llchange__thisby__mappingthe__baseURL__toLearning__Logs__home page.Getting__Startedwith__Django 389In__themain__ll_project folder,open__thefile__urls.py.You__shouldsee__thefol__lowing code: ll_project/ urls.py 1from__django.contribimport__adminfrom__django.urlsimport__path 2urlpatterns__= [ 3 path('admin/', admin.site.urls), ]The__firsttwo__linesimport__theadmin__moduleand__afunction__tobuild__URLpaths__1.The__bodyof__thefile__definesthe__urlpatternsvariable__2.In__this urls.py file,which__definesURLs__forthe__projectas__a whole,the__urlpatternsvariable__includessets__ofURLs__fromthe__appsin__the project.The__listincludes__themodule__admin.site.urls,which__definesall__theURLs__thatcan__berequested__fromthe__adminsite__3.We__needto__includethe__URLsfor__learning_logs,so__addthe__following:from__django.contribimport__adminfrom__django.urlsimport__path,include__urlpatterns = [ path('admin/', admin.site.urls), path('', include('learning_logs.urls')), ]We__veimported__the include() function,and__weve__alsoadded__aline__toinclude__themodule__learning_logs.urls.The__default urls.pyis__inthe__ll_project folder;now__weneed__tomake__asec__ond urls.pyfile__inthe__learning_logs folder.Create__anew__Python file,save__itas__urls.pyin__learning_logs,and__enterthis__codeinto__it: learning_logs/ urls.py 1 """DefinesURL__patternsfor__learning_logs.""" 2from__django.urlsimport__path 3from__.import__views 4app_name__= 'learning_logs' 5urlpatterns__= [ #Home__page 6 path('', views.index, name='index'), ]To__makeit__clearwhich__urls.pywe__reworking__in,we__adda__docstringat__thebeginning__ofthe__file 1.We__thenimport__thepath__function,which__isneeded__whenmapping__URLsto__views 2.We__alsoimport__theviews__module__3;the__dottells__Pythonto__importthe__views.pymodule__fromthe__samedirectory__asthe__current urls.py module.The__variableapp_name__helpsDjango__distinguishthis__urls.pyfile__fromfiles__ofthe__samename__inother__appswithin__theproject__4.The__variableurlpatterns__inthis__moduleis__alist__ofindividual__pagesthat__canbe__requestedfrom__thelearning_logs__app 5. 390Chapter__18The__actualURL__patternis__acall__tothe__path() function,which__takesthree__arguments 6.The__firstargument__isa__stringthat__helpsDjango__routethe__currentrequest__properly.Django__receivesthe__requestedURL__andtries__toroute__therequest__toa__view.It__doesthis__bysearching__allthe__URLpatterns__weve__definedto__findone__thatmatches__thecurrent__request.Django__ignoresthe__baseURL__forthe__project (http://localhost:8000/),so__theempty__string ('')matches__thebase__URL.Any__otherURL__wont__matchthis__pattern,and__Djangowill__returnan__errorpage__ifthe__URLrequested__doesnt__matchany__existingURL__patterns.The__secondargument__in path() 6specifies__whichfunction__tocall__in views.py.When__arequested__URLmatches__thepattern__were__defining,Django__callsthe__index()function__from views.py. (Well__writethis__viewfunc__tionin__thenext__section.)The__thirdargument__providesthe__nameindex__forthis__URLpattern__sowe__canrefer__toit__moreeasily__inother__filesthroughout__the project.Whenever__wewant__toprovide__alink__tothe__home page,we__lluse__thisname__insteadof__writingout__a URL.Writing__aView__Aview__functiontakes__ininformation__froma__request,prepares__thedata__neededto__generatea__page,and__thensends__thedata__backto__the browser.It__oftendoes__thisby__usinga__templatethat__defineswhat__thepage__willlook__like.The__file views.pyin__learning_logswas__generatedautomatically__whenwe__ranthe__commandpython__manage.py startapp.Here__swhat__sin__views.pyright__now: views.pyfrom__django.shortcutsimport__render #Create__yourviews__here. Currently,this__filejust__importsthe__render() function,which__rendersthe__responsebased__onthe__dataprovided__by views.Open__views.pyand__addthe__followingcode__forthe__home page:from__django.shortcutsimport__renderdef__index(request): """Thehome__pagefor__Learning Log."""return__render(request, 'learning_logs/index.html')When__aURL__requestmatches__thepattern__wejust__defined,Django__looksfor__afunction__called index()in__the views.py file.Django__thenpasses__therequest__objectto__thisview__function.In__this case,we__dont__needto__processany__datafor__the page,so__theonly__codein__thefunction__isa__callto__render().The__render()function__herepasses__two arguments:the__originalrequest__objectand__atemplate__itcan__useto__buildthe__page.Let__swrite__this template.Writing__aTemplate__Thetemplate__defineswhat__thepage__shouldlook__like,and__Djangofills__inthe__relevantdata__eachtime__thepage__is requested.A__templateallows__youto__GettingStarted__withDjango__391access__anydata__providedby__the view.Because__ourview__forthe__homepage__providesno__data,this__templateis__fairly simple.Inside__thelearning_logs__folder,make__anew__foldercalled__templates.Inside__thetemplates__folder,make__anotherfolder__called learning_logs.This__mightseem__alittle__redundant (wehave__afolder__namedlearning_logs__insidea__foldernamed__templatesinside__afolder__named learning_logs),but__itsets__upa__structurethat__Djangocan__interpret unambiguously,even__inthe__contextof__alarge__projectcontaining__manyindividual__apps.Inside__theinner__learning_logs folder,make__anew__filecalled__index.html.The__pathto__thefile__willbe__ll_project/ learning_logs/templates/learning_logs/index.html.Enter__thefollowing__codeinto__that file: index.htmlLearning__LogLearning__Loghelps__youkeep__trackof__your learning,for__anytopic__you'reinterested__in.This__isa__verysimple__file.If__youre__notfamiliar__with HTML,the__tagssignify__paragraphs.The__tagopens__a paragraph,and__thetag__closesa__paragraph.We__havetwo__paragraphs:the__firstacts__asa__title,and__thesecond__describeswhat__userscan__dowith__Learning Log.Now__whenyou__requestthe__projects__base URL, http://localhost:8000/,you__shouldsee__thepage__wejust__builtinstead__ofthe__defaultDjango__page.Django__willtake__therequested__URL,and__thatURL__willmatch__thepattern__'';then__Djangowill__callthe__function views.index(),which__willrender__thepage__usingthe__templatecontained__in index.html.Figure__18-3shows__theresulting__page.Figure__18-3:The__homepage__forLearning__LogAlthough__itmight__seemlike__acomplicated__processfor__creatingone__page,this__separationbetween__URLs, views,and__templatesworks__quite well.It__allowsyou__tothink__abouteach__aspectof__aproject__separately.In__largerproj__ects,it__allowsindividuals__workingon__theproject__tofocus__onthe__areasin__whichthey__re strongest.For__example,a__databasespecialist__canfocus__onthe__models,a__programmercan__focuson__theview__code,and__afrontend__specialist__canfocus__onthe__templates. 392Chapter__18NOTE__Youmight__seethe__followingerror__message: ModuleNotFoundError:No__modulenamed__'learning_logs.urls'If__you do,stop__thedevelopment__serverby__pressing CTRL-Cin__theterminal__window__whereyou__issuedthe__runserver command.Then__reissuethe__commandpython__manage.py runserver.You__shouldbe__ableto__seethe__home page.Anytime__yourun__intoan__errorlike__this,try__stoppingand__restartingthe__server.TRY__ITYOURSELF__18-5.Meal__Planner:Consider__anapp__thathelps__peopleplan__theirmeals__throughoutthe__week.Make__anew__foldercalled__meal_planner,and__starta__newDjango__projectinside__this folder.Then__makea__newapp__calledmeal___plans.Make__asimple__homepage__forthis__project. 18-6.Pizzeria__Home Page:Add__ahome__pageto__thePizzeria__projectyou__startedin__Exercise 18-4 (page 388).Building__AdditionalPages__Nowthat__weve__establisheda__routinefor__buildinga__page,we__canstart__tobuild__outthe__LearningLog__project.We__llbuild__twopages__thatdisplay__data:a__pagethat__listsall__topicsand__apage__thatshows__allthe__entriesfor__aparticu__lar topic.For__each page,we__llspecify__aURL__pattern,write__aview__function,and__writea__template.But__beforewe__do this,we__llcreate__abase__templatethat__alltemplates__inthe__projectcan__inherit from.Template__InheritanceWhen__buildinga__website,some__elementswill__needto__berepeated__oneach__page.Rather__thanwriting__theseelements__directlyinto__each page,you__canwrite__abase__templatecontaining__therepeated__elementsand__thenhave__eachpage__inheritfrom__the base.This__approachlets__youfocus__ondeveloping__theunique__aspectsof__each page,and__makesit__mucheasier__tochange__theover__alllook__andfeel__ofthe__project.The__ParentTemplate__Well__createa__templatecalled__base.htmlin__thesame__directoryas__index.html.This__filewill__containelements__commonto__all pages;every__othertemplate__willinherit__from base.html.The__onlyelement__wewant__torepeat__oneach__pageright__nowis__thetitle__atthe__top.Because__well__includethis__templateon__every page,let__smake__thetitle__alink__tothe__home page: base.html 1Learning__LogGetting__Startedwith__Django 393 2 {%block__content %}{%endblock__content %}The__firstpart__ofthis__filecreates__aparagraph__containingthe__nameof__the project,which__alsoacts__asa__homepage__link.To__generatea__link,we__usea__template tag,which__isindicated__bybraces__andpercent__signs ({% %}).A__template__taggenerates__informationto__bedisplayed__ona__page.The__templatetag__{%url__'learning_logs:index' %}shown__heregenerates__aURL__matchingthe__URLpattern__definedin__learning_logs/urls.pywith__thename__'index' 1.In__this example,learning_logs__isthe__namespaceand__indexis__auniquely__namedURL__patternin__that namespace.The__namespacecomes__fromthe__valuewe__assignedto__app_namein__the learning_logs/urls.py file.In__asimple__HTML page,a__linkis__surroundedby__theanchor__tag :link__textHaving__thetemplate__taggenerate__theURL__forus__makesit__mucheasier__tokeep__ourlinks__upto__date.We__onlyneed__tochange__theURL__patternin__urls.py,and__Djangowill__automaticallyinsert__theupdated__URLthe__nexttime__thepage__is requested.Every__pagein__ourproject__willinherit__from base.html,so__fromnow__on,every__pagewill__havea__linkback__tothe__home page.On__thelast__line,we__inserta__pairof__blocktags__2.This__block,named__content,is__a placeholder;the__childtemplate__willdefine__thekind__ofinformation__thatgoes__inthe__content block.A__childtemplate__doesnt__haveto__defineevery__blockfrom__its parent,so__youcan__reservespace__inparent__templatesfor__asmany__blocksas__you like;the__childtemplate__usesonly__asmany__asit__needs.NOTE__InPython__code,we__almostalways__usefour__spaceswhen__we indent.Template__filestend__tohave__morelevels__ofnesting__thanPython__files,so__its__commonto__useonly__twospaces__foreach__indentation level.The__ChildTemplate__Nowwe__needto__rewrite index.htmlto__inheritfrom__base.html.Add__thefollow__ingcode__to index.html: index.html 1 {%extends__'learning_logs/base.html' %} 2 {%block__content %}Learning__Loghelps__youkeep__trackof__your learning,for__anytopic__you'reinterested__in. 3 {%endblock__content %}If__youcompare__thisto__theoriginal__index.html,you__cansee__thatwe__vereplaced__theLearning__Logtitle__withthe__codefor__inheritingfrom__aparent__template 1.A__childtemplate__musthave__an {%extends__%}tag__onthe__firstline__totell__Djangowhich__parenttemplate__toinherit__from.The__file base.html 394Chapter__18is__partof__learning_logs,so__weinclude__learning_logsin__thepath__tothe__parent template.This__linepulls__ineverything__containedin__the base.htmltemplate__andallows__index.htmlto__definewhat__goesin__thespace__reservedby__thecontent__block.We__definethe__contentblock__byinserting__a {%block__%}tag__withthe__namecontent__2.Everything__thatwe__arent__inheritingfrom__theparent__template__goesinside__thecontent__block. Here,that__sthe__paragraphdescribing__theLearning__Log project.We__indicatethat__were__finisheddefining__thecon__tentby__usingan__{%endblock__content %}tag__3.The__{%endblock__%}tag__doesnt__requirea__name,but__ifa__templategrows__tocontain__multiple blocks,it__canbe__helpfulto__knowexactly__whichblock__is ending.You__canstart__tosee__thebenefit__oftemplate__inheritance:in__achild__template,we__onlyneed__toinclude__contentthat__sunique__tothat__page.This__notonly__simplifieseach__template,but__alsomakes__itmuch__easierto__modifythe__site.To__modifyan__elementcommon__tomany__pages,you__onlyneed__tomodify__theparent__template.Your__changesare__thencarried__overto__everypage__thatinherits__fromthat__template.In__aproject__thatincludes__tensor__hundredsof__pages,this__structurecan__makeit__mucheasier__andfaster__toimprove__your site.In__alarge__project,it__scommon__tohave__oneparent__templatecalled__base .htmlfor__theentire__siteand__parenttemplates__foreach__majorsection__ofthe__site.All__thesection__templatesinherit__from base.html,and__eachpage__inthe__siteinherits__froma__section template.This__wayyou__caneasily__modifythe__lookand__feelof__thesite__asa__whole,any__sectionin__the site,or__anyindividual__page.This__configurationprovides__avery__efficientway__to work,and__encourages__youto__steadilyupdate__yourproject__over time.The__TopicsPage__Nowthat__wehave__anefficient__approachto__building pages,we__canfocus__onour__nexttwo__pages:the__generaltopics__pageand__thepage__todisplay__entriesfor__asingle__topic.The__topicspage__willshow__alltopics__thatusers__havecre__ated,and__its__thefirst__pagethat__willinvolve__workingwith__data.The__TopicsURL__Pattern First,we__definethe__URLfor__thetopics__page.It__scommon__tochoose__asim__pleURL__fragmentthat__reflectsthe__kindof__informationpresented__onthe__page.We__lluse__theword__topics,so__theURL__http://localhost:8000/topics/will__returnthis__page.Here__show__wemodify__learning_logs/urls.py: learning_logs/ urls.py """DefinesURL__patternsfor__learning_logs.""" --snip--urlpatterns__= [ #Home__page path('', views.index, name='index'), #Page__thatshows__all topics. path('topics/', views.topics, name='topics'), ]Getting__Startedwith__Django 395The__newURL__patternis__theword__topics,followed__bya__forward slash.When__Djangoexamines__arequested__URL,this__patternwill__matchany__URLthat__hasthe__baseURL__followedby__topics.You__caninclude__oromit__aforward__slashat__the end,but__therecan__tbe__anythingelse__afterthe__word topics,or__thepattern__wont__match.Any__requestwith__aURL__thatmatches__thispattern__willthen__bepassed__tothe__function topics()in__views.py.The__TopicsView__The topics()function__needsto__retrievesome__datafrom__thedatabase__andsend__itto__the template.Add__thefollowing__to views.py: views.pyfrom__django.shortcutsimport__render 1from__.modelsimport__Topicdef__index(request): --snip-- 2def__topics(request): """Showall__topics.""" 3topics__= Topic.objects.order_by('date_added') 4context__= {'topics': topics} 5return__render(request, 'learning_logs/topics.html', context)We__firstimport__themodel__associatedwith__thedata__weneed__1.The__topics()function__needsone__parameter:the__requestobject__Djangoreceived__fromthe__server 2.We__querythe__databaseby__askingfor__theTopic__objects,sorted__bythe__date_addedattribute__3.We__assignthe__resultingqueryset__to topics.We__thendefine__acontext__thatwe__llsend__tothe__template 4.A__contextis__adictionary__inwhich__thekeys__arenames__well__usein__thetemplate__toaccess__thedata__we want,and__thevalues__arethe__datawe__needto__sendto__thetem__plate.In__this case,there__sone__key-value pair,which__containsthe__setof__topicswe__lldisplay__onthe__page.When__buildinga__pagethat__uses data,we__call render()with__therequest__object,the__templatewe__wantto__use,and__thecontext__dictionary 5.The__TopicsTemplate__Thetemplate__forthe__topicspage__receivesthe__context dictionary,so__thetem__platecan__usethe__datathat__topics() provides.Make__afile__called topics.htmlin__thesame__directoryas__index.html.Here__show__wecan__displaythe__topicsin__the template: topics.html {%extends__'learning_logs/base.html' %} {%block__content %}Topics__396Chapter__18 1 2 {%for__topicin__topics %} 3 {{ topic.text }} 4 {%empty__%}No__topicshave__beenadded__yet. 5 {%endfor__%} 6 {%endblock__content %}We__usethe__{%extends__%}tag__toinherit__from base.html,just__aswe__didon__thehome__page,and__thenwe__opena__content block.The__bodyof__thispage__containsa__bulletedlist__ofthe__topicsthat__havebeen__entered.In__standard HTML,a__bulletedlist__iscalled__anunordered__listand__isindicated__bythe__tags .The__openingtag__beginsthe__bulletedlist__oftopics__1.Next__weuse__atemplate__tagthat__sequivalent__toa__for loop,which__loopsthrough__thelist__topicsfrom__thecontext__dictionary 2.The__codeused__intem__platesdiffers__fromPython__insome__important ways.Python__usesindentation__toindicate__whichlines__ofa__forstatement__arepart__ofa__loop.In__a template,every__forloop__needsan__explicit {%endfor__%}tag__indicatingwhere__theend__ofthe__loop occurs.So__ina__template,you__llsee__loopswritten__like this: {%for__itemin__list %}do__somethingwith__eachitem__{%endfor__%}Inside__the loop,we__wantto__turneach__topicinto__anitem__inthe__bulleted list.To__printa__variablein__a template,wrap__thevariable__namein__double braces.The__braceswon__tappear__onthe__page;they__justindicate__toDjango__thatwe__reusing__atemplate__variable.So__thecode__{{ topic.text }} 3will__bereplaced__bythe__valueof__thecurrent__topics__textattribute__oneach__passthrough__the loop.The__HTMLtag__indicatesa__list item.Anything__betweenthese__tags,inside__apair__of tags,will__appearas__abulleted__itemin__the list.We__alsouse__the {%empty__%}template__tag 4,which__tellsDjango__whatto__doif__thereare__noitems__inthe__list.In__this case,we__printa__messageinform__ingthe__userthat__notopics__havebeen__added yet.The__lasttwo__linesclose__outthe__forloop__5and__thenclose__outthe__bulletedlist__6.Now__weneed__tomodify__thebase__templateto__includea__linkto__thetopics__page.Add__thefollowing__codeto__base.html: base.html 1Learning__Log - 2Topics__{%block__content %}{%endblock__content %}We__adda__dashafter__thelink__tothe__homepage__1,and__thenadd__alink__tothe__topicspage__usingthe__{%url__%}template__tagagain__2.This__linetells__GettingStarted__withDjango__397Django__togenerate__alink__matchingthe__URLpattern__withthe__name 'topics'in__learning_logs/urls.py.Now__whenyou__refreshthe__homepage__inyour__browser,you__llsee__aTopics__link.When__youclick__the link,you__llsee__apage__thatlooks__similarto__Figure 18-4.Figure__18-4:The__topicspage__IndividualTopic__Pages Next,we__needto__createa__pagethat__canfocus__ona__single topic,showing__thetopic__nameand__allthe__entriesfor__that topic.We__lldefine__anew__URLpat__tern,write__a view,and__createa__template.We__llalso__modifythe__topicspage__soeach__itemin__thebulleted__listlinks__toits__correspondingtopic__page.The__TopicURL__PatternThe__URLpattern__forthe__topicpage__isa__littledifferent__fromthe__priorURL__patternsbecause__itwill__usethe__topics__idattribute__toindicate__whichtopic__was requested.For__example,if__theuser__wantsto__seethe__detailpage__forthe__Chesstopic__(wherethe__idis__1),the__URLwill__be http://localhost: 8000/topics/1/.Here__sa__patternto__matchthis__URL,which__youshould__placein__learning_logs/urls.py: learning_logs/ urls.py --snip--urlpatterns__= [ --snip-- #Detail__pagefor__asingle__topic. path('topics//', views.topic, name='topic'), ]Let__sexamine__thestring__'topics//'in__thisURL__pattern.The__firstpart__ofthe__stringtells__Djangoto__lookfor__URLsthat__havethe__wordtopics__afterthe__base URL.The__secondpart__ofthe__string, //,matches__aninteger__betweentwo__forwardslashes__andassigns__theinteger__valueto__anargument__called topic_id. 398Chapter__18When__Djangofinds__aURL__thatmatches__this pattern,it__callsthe__viewfunction__topic()with__thevalue__assignedto__topic_idas__an argument.We__lluse__thevalue__oftopic_id__toget__thecorrect__topicinside__the function.The__TopicView__The topic()function__needsto__getthe__topicand__allassociated__entriesfrom__the database,much__likewhat__wedid__earlierin__theDjango__shell: views.py --snip-- 1def__topic(request, topic_id): """Showa__singletopic__andall__its entries.""" 2topic__= Topic.objects.get(id=topic_id) 3entries__= topic.entry_set.order_by('-date_added') 4context__= {'topic': topic, 'entries': entries} 5return__render(request, 'learning_logs/topic.html', context)This__isthe__firstview__functionthat__requiresa__parameterother__thanthe__request object.The__functionaccepts__thevalue__capturedby__theexpression__//and__assignsit__totopic_id__1.Then__weuse__get()to__retrievethe__topic,just__aswe__didin__theDjango__shell 2. Next,we__getall__ofthe__entriesassociated__withthis__topicand__orderthem__accordingto__date_added 3.The__minussign__infront__ofdate_added__sortsthe__resultsin__reverse order,which__willdisplay__themost__recententries__first.We__storethe__topicand__entriesin__thecontext__dictionary 4and__call render()with__therequest__object,the__topic.html template,and__thecontext__dictionary 5.NOTE__Thecode__phrasesat__2and__3are__called queries,because__theyquery__thedatabase__forspecific__information.When__youre__writingqueries__likethese__inyour__own projects,it__shelpful__totry__themout__inthe__Djangoshell__first.You__llget__muchquicker__feedbackin__theshell__thanyou__wouldby__writinga__viewand__templateand__thenchecking__theresults__ina__browser.The__TopicTemplate__Thetemplate__needsto__displaythe__nameof__thetopic__andthe__entries.We__alsoneed__toinform__theuser__ifno__entrieshave__beenmade__yetfor__this topic. topic.html {%extends__'learning_logs/base.html' %} {%block__content %} 1 Topic: {{ topic.text }} Entries: 2 3 {%for__entryin__entries %} 4 {{ entry.date_added|date:'M d,Y__H:i' }} 5 {{ entry.text|linebreaks }} 6 {%empty__%}Getting__Startedwith__Django 399There__areno__entriesfor__thistopic__yet. {%endfor__%} {%endblock__content %}We__extend base.html,as__well__dofor__allpages__inthe__project. Next,we__showthe__textattribute__ofthe__topicthat__sbeen__requested 1.The__variable__topicis__availablebecause__its__includedin__thecontext__dictionary.We__thenstart__abulleted__list 2to__showeach__ofthe__entriesand__loopthrough__them 3,as__wedid__withthe__topics earlier.Each__bulletlists__twopieces__of information:the__timestampand__thefull__textof__each entry.For__thetimestamp__4,we__displaythe__valueof__theattribute__date_added.In__Django templates,a__verticalline__(|)represents__atemplate__filtera__functionthat__modifiesthe__valuein__atemplate__variableduring__therendering__process.The__filter date:'M d,Y__H:i'displays__timestampsin__theformat__January 1, 2022 23:00.The__nextline__displaysthe__valueof__thecurrent__entrys__textattri__bute.The__filterlinebreaks__5ensures__thatlong__textentries__includeline__breaksin__aformat__understoodby__browsers,rather__thanshowing__ablock__ofuninter__rupted text.We__againuse__the {%empty__%}template__tag 6to__printa__messageinforming__theuser__thatno__entrieshave__been made.Links__fromthe__TopicsPage__Beforewe__lookat__thetopic__pagein__a browser,we__needto__modifythe__topicstemplate__soeach__topiclinks__tothe__appropriate page.Here__sthe__changeyou__needto__maketo__topics.html: topics.html --snip-- {%for__topicin__topics %} {{ topic.text }} {%empty__%} --snip--We__usethe__URLtemplate__tagto__generatethe__proper link,based__onthe__URLpattern__inlearning_logs__withthe__name 'topic'.This__URLpattern__requiresa__topic_id argument,so__weadd__theattribute__topic.idto__theURL__template tag.Now__eachtopic__inthe__listof__topicsis__alink__toa__topic page,such__as http://localhost:8000/topics/1/.When__yourefresh__thetopics__pageand__clicka__topic,you__shouldsee__apage__thatlooks__likeFigure__18-5.NOTE__Theres__asubtle__butimportant__differencebetween__topic.idand__topic_id.The__expression__topic.idexamines__atopic__andretrieves__thevalue__ofthe__corresponding ID.The__variabletopic_id__isa__referenceto__thatID__inthe__code.If__yourun__intoerrors__whenworking__with IDs,make__sureyou__reusing__theseexpressions__inthe__appropriate ways. 400Chapter__18Figure__18-5:The__detailpage__fora__single topic,showing__allentries__fora__topicTRY__ITYOURSELF__18-7.Template__Documentation:Skim__theDjango__templatedocumentation__at https://docs.djangoproject.com/en/4.1/ref/templates.You__canrefer__backto__itwhen__youre__workingon__yourown__projects. 18-8.Pizzeria__Pages:Add__apage__tothe__Pizzeriaproject__fromExercise__18-6 (page 392)that__showsthe__namesof__available pizzas.Then__linkeach__pizzaname__toa__pagedisplaying__thepizza__s toppings.Make__sureyou__usetemplate__inheritanceto__buildyour__pages efficiently.Summary__Inthis__chapter,you__learnedhow__tostart__buildinga__simpleweb__appusing__theDjango__framework.You__sawa__briefproject__specification,installed__Djangoto__avirtual__environment,set__upa__project,and__checkedthat__theproject__wasset__up correctly.You__setup__anapp__anddefined__modelsto__represent__thedata__foryour__app.You__learnedabout__databasesand__howDjango__helpsyou__migrateyour__databaseafter__youmake__achange__toyour__models.You__createda__superuserfor__theadmin__site,and__youused__theadmin__siteto__entersome__initial data.You__alsoexplored__theDjango__shell,which__allowsyou__towork__withyour__projects__datain__aterminal__session.You__learnedhow__todefine__URLs,cre__ateview__functions,and__writetemplates__tomake__pagesfor__your site.You__alsoused__templateinheritance__tosimplify__thestructure__ofindividual__templatesand__makeit__easierto__modifythe__siteas__theproject__evolves.Getting__Startedwith__Django 401In__Chapter 19,you__llmake__intuitive, user-friendlypages__thatallow__usersto__addnew__topicsand__entriesand__editexisting__entrieswithout__goingthrough__theadmin__site.You__llalso__adda__userregistration__system,allow__ingusers__tocreate__anaccount__andmake__theirown__learning log.This__isthe__heartof__aweb__appthe__abilityto__createsomething__thatany__numberof__userscan__interact with. 19USER__ACCOUNTS__Atthe__heartof__aweb__applicationis__theabil__ityfor__any user,anywhere__inthe__world,to__registeran__accountwith__yourapp__andstart__using it.In__this chapter,you__llbuild__formsso__userscan__addtheir__owntopics__and entries,and__editexisting__entries.You__llalso__learnhow__Djangoguards__againstcommon__attacksagainst__form-based pages,so__youwon__thave__tospend__muchtime__thinkingabout__securingyour__apps.You__llalso__implementa__userauthentication__system.You__llbuild__aregis__trationpage__forusers__tocreate__accounts,and__thenrestrict__accessto__certainpages__to logged-inusers__only.Then__youll__modifysome__ofthe__viewfunc__tionsso__userscan__onlysee__theirown__data.You__lllearn__tokeep__yourusers__datasafe__and secure. 404Chapter__19Allowing__Usersto__EnterData__Beforewe__buildan__authenticationsystem__forcreating__accounts,we__llfirst__addsome__pagesthat__allowusers__toenter__theirown__data.We__llgive__usersthe__abilityto__adda__new topic,add__anew__entry,and__edittheir__previous entries. Currently,only__asuperuser__canenter__datathrough__theadmin__site.We__dont__wantusers__tointeract__withthe__admin site,so__well__useDjango__s form-building__toolsto__buildpages__thatallow__usersto__enter data.Adding__NewTopics__Lets__startby__allowingusers__toadd__anew__topic.Adding__a form-basedpage__worksin__muchthe__sameway__asadding__thepages__weve__already built:we__definea__URL,write__aview__function,and__writea__template.The__onesignifi__cantdifference__isthe__additionof__anew__modulecalled__forms.py,which__willcontain__the forms.The__TopicModelForm__Anypage__thatlets__auser__enterand__submitinformation__ona__webpage__involvesan__HTMLelement__calleda__form.When__usersenter__information,we__needto__validatethat__theinformation__providedis__theright__kindof__dataand__isnot__mali cious,such__ascode__designedto__interruptour__server.We__thenneed__toprocess__andsave__validinformation__tothe__appropriateplace__inthe__database.Django__automatesmuch__ofthis__work.The__simplestway__tobuild__aform__inDjango__isto__usea__ModelForm,which__usesthe__informationfrom__themodels__wedefined__inChapter__18to__builda__form automatically.Write__yourfirst__formin__thefile__forms.py,which__shouldbe__createdin__thesame__directoryas__models.py: forms.pyfrom__djangoimport__formsfrom__.modelsimport__Topic 1class__TopicForm(forms.ModelForm):class__Meta: 2model__=Topic__3fields__= ['text'] 4labels__= {'text': ''}We__firstimport__theforms__moduleand__themodel__well__work with, Topic.We__thendefine__aclass__called TopicForm,which__inheritsfrom__forms .ModelForm 1.The__simplestversion__ofa__ModelFormconsists__ofa__nestedMeta__classtelling__Djangowhich__modelto__basethe__formon__andwhich__fieldsto__includein__the form.Here__wespecify__thatthe__formshould__bebased__onthe__Topicmodel__2,and__thatit__shouldonly__includethe__textfield__3.The__emptystring__inthe__labelsdictionary__tellsDjango__notto__generatea__labelfor__thetext__field 4.User__Accounts 405The__new_topicURL__TheURL__fora__newpage__shouldbe__shortand__descriptive.When__theuser__wantsto__adda__new topic,we__llsend__themto__http://localhost:8000/ new_topic/.Here__sthe__URLpattern__forthe__new_topic page;add__thisto__learning_logs/urls.py: learning_logs/ urls.py --snip--urlpatterns__= [ --snip-- #Page__foradding__anew__topic. path('new_topic/', views.new_topic, name='new_topic'), ]This__URLpattern__sendsrequests__tothe__viewfunction__new_topic(),which__well__write next.The__new_topic()View__FunctionThe__new_topic()function__needsto__handletwo__different situations:ini__tialrequests__forthe__new_topic page,in__whichcase__itshould__showa__blank form;and__theprocessing__ofany__datasubmitted__inthe__form.After__datafrom__asubmitted__formis__processed,it__needsto__redirectthe__userback__tothe__topics page: views.pyfrom__django.shortcutsimport__render,redirect__from .modelsimport__Topicfrom__.formsimport__TopicForm --snip--def__new_topic(request): """Adda__new topic.""" 1if__request.method != 'POST': #No__data submitted;create__ablank__form. 2form__= TopicForm() else: #POST__data submitted;process__data. 3form__= TopicForm(data=request.POST) 4if__form.is_valid(): 5 form.save() 6return__redirect('learning_logs:topics') #Display__ablank__orinvalid__form. 7context__= {'form': form}return__render(request, 'learning_logs/new_topic.html', context)We__importthe__function redirect,which__well__useto__redirectthe__userback__tothe__topicspage__afterthey__submittheir__topic.We__alsoimport__theform__wejust__wrote, TopicForm. 406Chapter__19GET__andPOST__RequestsThe__twomain__typesof__requestsyou__lluse__whenbuilding__appsare__GETand__POST.You__useGET__requestsfor__pagesthat__onlyread__datafrom__the server.You__usuallyuse__POSTrequests__whenthe__userneeds__tosubmit__informationthrough__a form.We__llbe__specifyingthe__POSTmethod__forprocessing__allof__our forms. (Afew__otherkinds__ofrequests__exist,but__wewon__tuse__themin__this project.)The__new_topic()function__takesin__therequest__objectas__a parameter.When__theuser__initiallyrequests__this page,their__browserwill__senda__GET request.Once__theuser__hasfilled__outand__submittedthe__form,their__browserwill__submita__POST request.Depending__onthe__request,we__llknow__whetherthe__useris__requestinga__blankform__(GET)or__askingus__toprocess__acom__pletedform__(POST).We__usean__iftest__todetermine__whetherthe__requestmethod__isGET__orPOST__1.If__therequest__methodisn__t POST,the__requestis__probably GET,so__weneed__toreturn__ablank__form. (Ifit__sanother__kindof__request,it__sstill__safeto__returna__blank form.)We__makean__instanceof__TopicForm 2,assign__itto__thevariable__form,and__sendthe__formto__thetemplate__inthe__contextdiction__ary 7.Because__weincluded__noarguments__wheninstantiating__TopicForm,Django__createsa__blankform__thatthe__usercan__fill out.If__therequest__methodis__POST,the__elseblock__runsand__processesthe__datasubmitted__inthe__form.We__makean__instanceof__TopicForm 3and__passit__thedata__enteredby__the user,which__isassigned__to request.POST.The__formobject__thats__returnedcontains__theinformation__submittedby__the user.We__cant__savethe__submittedinformation__inthe__databaseuntil__weve__checkedthat__its__valid 4.The__is_valid()method__checksthat__allrequired__fieldshave__beenfilled__in (allfields__ina__formare__requiredby__default)and__thatthe__dataentered__matchesthe__fieldtypes__expectedfor__example,that__thelength__oftext__isless__than 200 characters,as__wespecified__in models.pyin__Chapter 18.This__automaticvalidation__savesus__alot__of work.If__everythingis__valid,we__cancall__save() 5,which__writesthe__datafrom__theform__tothe__database.Once__weve__savedthe__data,we__canleave__this page.The__redirect()func__tiontakes__inthe__nameof__aview__andredirects__theuser__tothe__pageassociated__withthat__view.Here__weuse__redirect()to__redirectthe__users__browserto__thetopics__page 6,where__theuser__shouldsee__thetopic__theyjust__enteredin__thelist__of topics.The__contextvariable__isdefined__atthe__endof__theview__function,and__thepage__isrendered__usingthe__template new_topic.html,which__well__create next.This__codeis__placedoutside__ofany__if block;it__willrun__ifa__blankform__was created,and__itwill__runif__asubmitted__formis__determinedto__be invalid.An__invalidform__willinclude__somedefault__errormessages__tohelp__theuser__submit__acceptable data.User__Accounts 407The__new_topicTemplate__Nowwe__llmake__anew__templatecalled__new_topic.htmlto__displaythe__formwe__just created: new_topic.html {%extends__"learning_logs/base.html" %} {%block__content %}Add__anew__topic: 1 2 {%csrf_token__%} 3 {{ form.as_div }} 4Add__topic {%endblock__content %}This__templateextends__base.html,so__ithas__thesame__basestructure__asthe__restof__thepages__inLearning__Log.We__usethe__tagsto__definean__HTMLform__1.The__actionargument__tellsthe__browserwhere__tosend__thedata__submittedin__the form;in__this case,we__sendit__backto__theview__function new_topic().The__methodargument__tellsthe__browserto__submitthe__dataas__aPOST__request.Django__usesthe__templatetag__{%csrf_token__%} 2to__preventattackers__fromusing__theform__togain__unauthorizedaccess__tothe__server. (Thiskind__ofattack__iscalled__a cross-siterequest__forgery.) Next,we__displaythe__form;here__youcan__seehow__simpleDjango__canmake__certain tasks,such__asdisplaying__a form.We__onlyneed__toinclude__thetemplate__variable {{ form.as_div }}for__Djangoto__createall__thefields__necessaryto__displaythe__formautomati__cally 3.The__as_divmodifier__tellsDjango__torender__allthe__formelements__asHTML__elements;this__isa__simpleway__todisplay__theform__neatly.Django__doesnt__createa__submitbutton__for forms,so__wedefine__onebefore__closingthe__form 4.Linking__tothe__new_topicPage__Next,we__includea__linkto__thenew_topic__pageon__thetopics__page: topics.html {%extends__"learning_logs/base.html" %} {%block__content %}Topics__--snip--Add__anew__topic {%endblock__content %} 408Chapter__19Place__thelink__afterthe__listof__existing topics.Figure__19-1shows__theresulting__form;try__usingthe__formto__adda__fewnew__topicsof__your own.Figure__19-1:The__pagefor__addinga__newtopic__AddingNew__EntriesNow__thatthe__usercan__adda__new topic,they__llwant__toadd__newentries__too.We__llagain__definea__URL,write__aview__functionand__a template,and__linkto__the page.But__first,we__lladd__anotherclass__to forms.py.The__EntryModelForm__Weneed__tocreate__aform__associatedwith__theEntry__model,but__this time,with__abit__morecustomization__than TopicForm: forms.pyfrom__djangoimport__formsfrom__.modelsimport__Topic,Entry__class TopicForm(forms.ModelForm): --snip--class__EntryForm(forms.ModelForm):class__Meta:model__=Entry__fields = ['text'] 1labels__= {'text': ''} 2widgets__= {'text': forms.Textarea(attrs={'cols': 80})}We__updatethe__importstatement__toinclude__Entryas__wellas__Topic.We__makea__newclass__calledEntryForm__thatinherits__from forms.ModelForm.The__EntryFormclass__hasa__nestedMeta__classlisting__themodel__its__based on,and__thefield__toinclude__inthe__form.We__againgive__thefield__'text'a__blanklabel__1.For__EntryForm,we__includethe__widgetsattribute__2.A__widgetis__anHTML__form element,such__asa__single-linetext__box,multiline__text area,or__drop-down__list.By__includingthe__widgets attribute,you__canoverride__Djangos__UserAccounts__409default__widget choices.Here__were__tellingDjango__touse__a forms.Textareaele__mentwith__awidth__of 80 columns,instead__ofthe__default 40 columns.This__givesusers__enoughroom__towrite__ameaningful__entry.The__new_entryURL__Newentries__mustbe__associatedwith__aparticular__topic,so__weneed__toinclude__atopic_id__argumentin__theURL__foradding__anew__entry.Here__sthe__URL,which__youadd__to learning_logs/urls.py: learning_logs/ urls.py --snip--urlpatterns__= [ --snip-- #Page__foradding__anew__entry. path('new_entry//', views.new_entry, name='new_entry'), ]This__URLpattern__matchesany__URLwith__theform__http://localhost:8000/ new_entry/id/,where__idis__anumber__matchingthe__topic ID.The__codecaptures__anumerical__valueand__assignsit__tothe__variable topic_id.When__aURL__matchingthis__patternis__requested,Django__sendsthe__requestand__thetopic__sID__tothe__new_entry()view__function.The__new_entry()View__FunctionThe__viewfunction__fornew_entry__ismuch__likethe__functionfor__addinga__new topic.Add__thefollowing__codeto__your views.py file: views.pyfrom__django.shortcutsimport__render,redirect__from .modelsimport__Topicfrom__.formsimport__TopicForm,EntryForm__--snip--def__new_entry(request, topic_id): """Adda__newentry__fora__particular topic.""" 1topic__= Topic.objects.get(id=topic_id) 2if__request.method != 'POST': #No__data submitted;create__ablank__form. 3form__= EntryForm() else: #POST__data submitted;process__data. 4form__= EntryForm(data=request.POST)if__form.is_valid(): 5new_entry__= form.save(commit=False) 6 new_entry.topic =topic__new_entry.save() 7return__redirect('learning_logs:topic', topic_id=topic_id) #Display__ablank__orinvalid__form.context__= {'topic': topic, 'form': form}return__render(request, 'learning_logs/new_entry.html', context) 410Chapter__19We__updatethe__importstatement__toinclude__theEntryForm__wejust__made.The__definitionof__new_entry()has__atopic_id__parameterto__storethe__valueit__receivesfrom__the URL.We__llneed__thetopic__torender__thepage__andprocess__theform__s data,so__weuse__topic_idto__getthe__correcttopic__object 1. Next,we__checkwhether__therequest__methodis__POSTor__GET 2.The__ifblock__executesif__its__aGET__request,and__wecreate__ablank__instanceof__EntryForm 3.If__therequest__methodis__POST,we__processthe__databy__makingan__instanceof__EntryForm,populated__withthe__POSTdata__fromthe__requestobject__4.We__thencheck__whetherthe__formis__valid.If__it is,we__needto__setthe__entryobject__stopic__attributebefore__savingit__tothe__database.When__wecall__save(),we__includethe__argument commit=False 5to__tellDjango__tocreate__anew__entryobject__andassign__itto__new_entry,without__savingit__tothe__database yet.We__setthe__topicattribute__ofnew_entry__tothe__topicwe__pulledfrom__thedatabase__atthe__beginning__ofthe__function 6.Then__wecall__save()with__no arguments,saving__theentry__tothe__databasewith__thecorrect__associated topic.The__redirect()call__requirestwo__arguments:the__nameof__theview__wewant__toredirect__toand__theargument__thatview__functionrequires__7. Here,we__reredirecting__to topic(),which__needsthe__argument topic_id.This__viewthen__rendersthe__topicpage__thatthe__usermade__anentry__for,and__theyshould__seetheir__newentry__inthe__listof__entries.At__theend__ofthe__function,we__createa__contextdictionary__andrender__thepage__usingthe__new_entry.html template.This__codewill__executefor__ablank__form,or__fora__formthat__sbeen__submittedbut__turnsout__tobe__invalid.The__new_entryTemplate__Asyou__cansee__inthe__following code,the__templatefor__new_entryis__similarto__thetemplate__for new_topic: new_entry.html {%extends__"learning_logs/base.html" %} {%block__content %} 1 {{topic__}}Add__anew__entry: 2 {%csrf_token__%} {{ form.as_div }}Add__entry {%endblock__content %}We__showthe__topicat__thetop__ofthe__page 1,so__theuser__cansee__whichtopic__theyre__addingan__entry to.The__topicalso__actsas__alink__backto__themain__pagefor__that topic.User__Accounts 411The__forms__actionargument__includesthe__topic.idvalue__inthe__URL,so__theview__functioncan__associatethe__newentry__withthe__correcttopic__2.Other__than that,this__templatelooks__justlike__new_topic.html.Linking__tothe__new_entryPage__Next,we__needto__includea__linkto__thenew_entry__pagefrom__eachtopic__page,in__thetopic__template: topic.html {%extends__"learning_logs/base.html" %} {%block__content %} Topic: {{topic__}} Entries:Add__newentry__--snip-- {%endblock__content %}We__placethe__linkto__addentries__justbefore__showingthe__entries,because__addinga__newentry__willbe__themost__commonaction__onthis__page.Figure__19-2shows__thenew_entry__page.Now__userscan__addnew__topicsand__asmany__entriesas__theywant__foreach__topic.Try__outthe__new_entrypage__byadd__inga__fewentries__tosome__ofthe__topicsyou__ve created.Figure__19-2:The__new_entrypage__412Chapter__19Editing__EntriesNow__well__makea__pageso__userscan__editthe__entriesthey__ve added.The__edit_entryURL__TheURL__forthe__pageneeds__topass__theID__ofthe__entryto__be edited.Here__s learning_logs/urls.py: urls.py --snip--urlpatterns__= [ --snip-- #Page__forediting__an entry. path('edit_entry//', views.edit_entry, name='edit_entry'), ]This__URLpattern__matchesURLs__like http://localhost:8000/edit_entry/id/.Here__thevalue__ofid__isassigned__tothe__parameter entry_id.Django__sendsrequests__thatmatch__thisformat__tothe__viewfunction__edit_entry().The__edit_entry()View__FunctionWhen__theedit_entry__pagereceives__aGET__request,the__edit_entry()func__tionreturns__aform__forediting__the entry.When__thepage__receivesa__POSTrequest__withrevised__entry text,it__savesthe__modifiedtext__intothe__database: views.pyfrom__django.shortcutsimport__render,redirect__from .modelsimport__Topic,Entry__from .formsimport__TopicForm,EntryForm__--snip--def__edit_entry(request, entry_id): """Editan__existing entry.""" 1entry__= Entry.objects.get(id=entry_id)topic__= entry.topicif__request.method != 'POST': #Initial__request; pre-fillform__withthe__current entry. 2form__= EntryForm(instance=entry) else: #POST__data submitted;process__data. 3form__= EntryForm(instance=entry, data=request.POST)if__form.is_valid(): 4 form.save() 5return__redirect('learning_logs:topic', topic_id=topic.id)context__= {'entry': entry, 'topic': topic, 'form': form}return__render(request, 'learning_logs/edit_entry.html', context)We__firstimport__theEntry__model.We__thenget__theentry__objectthat__theuser__wantsto__edit 1and__thetopic__associatedwith__this entry.In__theif__UserAccounts__413 block,which__runsfor__aGET__request,we__makean__instanceof__EntryFormwith__theargument__instance=entry 2.This__argumenttells__Djangoto__createthe__form,prefilled__withinformation__fromthe__existingentry__object.The__userwill__seetheir__existingdata__andbe__ableto__editthat__data.When__processinga__POST request,we__passboth__the instance=entryand__the data=request.POSTarguments__3.These__argumentstell__Djangoto__createa__forminstance__basedon__theinformation__associatedwith__theexisting__entry object,updated__withany__relevantdata__from request.POST.We__thencheck__whetherthe__formis__valid;if__it is,we__call save()with__noarguments__becausethe__entryis__alreadyassociated__withthe__correcttopic__4.We__thenredirect__tothe__topic page,where__theuser__shouldsee__theupdated__versionof__theentry__theyedited__5.If__were__showingan__initialform__forediting__theentry__orif__thesubmitted__formis__invalid,we__createthe__contextdictionary__andrender__thepage__usingthe__edit_entry.html template.The__edit_entryTemplate__Next,we__createan__edit_entry.html template,which__issimilar__to new_entry.html: edit_entry.html {%extends__"learning_logs/base.html" %} {%block__content %} {{topic__}}Edit__entry: 1 {%csrf_token__%} {{ form.as_div }} 2Save__changes {%endblock__content %}The__actionargument__sendsthe__formback__tothe__edit_entry()function__forprocessing__1.We__includethe__entry.idas__anargument__inthe__{%url__%} tag,so__theview__functioncan__modifythe__correctentry__object.We__labelthe__submitbutton__asSave__changesto__remindthe__userthey__resaving__edits,not__creatinga__newentry__2.Linking__tothe__edit_entryPage__Nowwe__needto__includea__linkto__theedit_entry__pagefor__eachentry__onthe__topic page: topic.html --snip-- {%for__entryin__entries %} 414Chapter__19 {{ entry.date_added|date:'M d,Y__H:i' }} {{ entry.text|linebreaks }}Edit__entry --snip--We__includethe__editlink__aftereach__entrys__dateand__texthas__beendis__played.We__usethe__{%url__%}template__tagto__determinethe__URLfor__thenamed__URLpattern__edit_entry,along__withthe__IDattribute__ofthe__currententry__inthe__loop (entry.id).The__linktext__Editentry__appearsafter__eachentry__onthe__page.Figure__19-3shows__whatthe__topicpage__lookslike__withthese__links.Figure__19-3:Each__entrynow__hasa__linkfor__editingthat__entry.Learning__Lognow__hasmost__ofthe__functionalityit__needs.Users__canadd__topicsand__entries,and__theycan__readthrough__anyset__ofentries__they want.In__thenext__section,we__llimplement__auser__registrationsystem__soanyone__canmake__anaccount__withLearning__Logand__createtheir__ownset__oftopics__and entries.User__Accounts 415TRY__ITYOURSELF__19-1. Blog:Start__anew__Djangoproject__called Blog.Create__anapp__called blogs,with__onemodel__thatrepresents__anoverall__blog,and__onemodel__thatrep__resentsan__individualblog__post.Give__eachmodel__anappropriate__setof__fields.Create__asuperuser__forthe__project,and__usethe__adminsite__tomake__ablog__anda__coupleof__short posts.Make__ahome__pagethat__showsall__postsin__anappropri__ate order.Create__pagesfor__makinga__blog,for__makingnew__posts,and__forediting__existing posts.Use__yourpages__tomake__surethey__work.Setting__UpUser__AccountsIn__this section,we__llset__upa__userregistration__andauthorization__systemso__peoplecan__registeran__account,log__in,and__log out.We__llcreate__anew__appto__containall__thefunctionality__relatedto__workingwith__users.We__lluse__thedefault__userauthentication__systemincluded__withDjango__todo__asmuch__ofthe__workas__possible.We__llalso__modifythe__Topicmodel__slightlyso__everytopic__belongsto__acertain__user.The__accountsApp__Well__startby__creatinga__newapp__called accounts,using__thestartapp__command: (ll_env)learning_log$python__manage.pystartapp__accounts (ll_env)learning_log$ls__1accounts__db.sqlite3learning_logs__ll_envll_project__manage.py (ll_env)learning_log$ls__accounts 2 __init__.py admin.py apps.pymigrations__models.py tests.py views.pyThe__defaultauthentication__systemis__builtaround__theconcept__ofuser__accounts,so__usingthe__nameaccounts__makesintegration__withthe__defaultsys__tem easier.The__startappcommand__shownhere__makesa__newdirectory__calledaccounts__1with__astructure__identicalto__thelearning_logs__app 2.Adding__accountsto__settings.pyWe__needto__addour__newapp__toINSTALLED_APPS__in settings.py,like__so: settings.py --snip--INSTALLED_APPS__= [ #My__apps 'learning_logs', 'accounts', 416Chapter__19 #Default__django apps. --snip-- ] --snip--Now__Djangowill__includethe__accountsapp__inthe__overall project.Including__theURLs__fromaccounts__Next,we__needto__modifythe__root urls.pyso__itincludes__theURLs__well__writefor__theaccounts__app: ll_project/urls.pyfrom__django.contribimport__adminfrom__django.urlsimport__path,include__urlpatterns = [ path('admin/', admin.site.urls), path('accounts/', include('accounts.urls')), path('', include('learning_logs.urls')), ]We__adda__lineto__includethe__file urls.pyfrom__accounts.This__linewill__matchany__URLthat__startswith__theword__accounts,such__as http://localhost: 8000/accounts/login/.The__LoginPage__Well__firstimplement__alogin__page.We__lluse__thedefault__loginview__Django provides,so__theURL__patternfor__thisapp__looksa__little different.Make__anew__urls.pyfile__inthe__directory ll_project/accounts/and__addthe__followingto__it: accounts/urls.py """DefinesURL__patternsfor__accounts."""from__django.urlsimport__path,include__app_name = 'accounts'urlpatterns__= [ #Include__defaultauth__urls. path('', include('django.contrib.auth.urls')), ]We__importthe__path function,and__thenimport__theinclude__functionso__wecan__includesome__defaultauthentication__URLsthat__Djangohas__defined.These__defaultURLs__includenamed__URL patterns,such__as 'login'and__'logout'.We__setthe__variableapp_name__to 'accounts'so__Djangocan__distinguish__theseURLs__fromURLs__belongingto__other apps.Even__defaultURLs__providedby__Django,when__includedin__theaccounts__apps__urls.py file,will__beaccessible__throughthe__accounts namespace.User__Accounts 417The__loginpage__spattern__matchesthe__URL http://localhost:8000/accounts/ login/.When__Djangoreads__this URL,the__wordaccounts__tellsDjango__tolook__in accounts/urls.py,and__logintells__itto__sendrequests__toDjango__sdefault__login view.The__loginTemplate__Whenthe__userrequests__thelogin__page,Django__willuse__adefault__view function,but__westill__needto__providea__templatefor__the page.The__defaultauthentication__viewslook__fortemplates__insidea__foldercalled__registration,so__well__needto__makethat__folder.Inside__the ll_project/accounts/ directory,make__adirectory__called templates;inside__that,make__anotherdirectory__calledregistra__tion.Here__sthe__login.html template,which__shouldbe__savedin__ll_project/accounts/ templates/registration: login.html {%extends__'learning_logs/base.html' %} {%block__content %} 1 {%if__form.errors %}Your__usernameand__password didn't match.Please__try again. {%endif__%} 2 {%csrf_token__%} 3 {{ form.as_div }} 4Log__in {%endblock__content %}This__templateextends__base.htmlto__ensurethat__thelogin__pagewill__havethe__samelook__andfeel__asthe__restof__the site.Note__thata__templatein__oneapp__caninherit__froma__templatein__another app.If__theform__serrors__attributeis__set,we__displayan__errormessage__1,report__ingthat__theusername__andpassword__combinationdoesn__tmatch__anythingstored__inthe__database.We__wantthe__loginview__toprocess__the form,so__weset__theaction__argument__asthe__URLof__thelogin__page 2.The__loginview__sendsa__formobject__tothe__template,and__its__upto__usto__displaythe__form 3and__adda__submitbutton__4.The__LOGIN_REDIRECT_URLSettting__Oncea__userlogs__in successfully,Django__needsto__knowwhere__tosend__that user.We__controlthis__inthe__settings file. 418Chapter__19Add__thefollowing__codeto__theend__of settings.py: settings.py --snip-- #My__settings.LOGIN_REDIRECT_URL__= 'learning_logs:index'With__allthe__defaultsettings__in settings.py,it__shelpful__tomark__offthe__sectionwhere__were__addingnew__settings.The__firstnew__settingwe__lladd__is LOGIN_REDIRECT_URL,which__tellsDjango__whichURL__toredirect__toafter__asuc__cessfullogin__attempt.Linking__tothe__LoginPage__Lets__addthe__loginlink__to base.htmlso__itappears__onevery__page.We__dont__wantthe__linkto__displaywhen__theuser__isalready__logged in,so__wenest__itinside__an {%if__%} tag: base.htmlLearning__Log -Topics__- 1 {%if__user.is_authenticated %} 2 Hello, {{ user.username }}. {%else__%} 3Log__in {%endif__%} {%block__content %}{%endblock__content %}In__Djangos__authentication system,every__templatehas__auser__objectavailable__thatalways__hasan__is_authenticatedattribute__set:the__attributeis__Trueif__theuser__islogged__inand__Falseif__theyaren__t.This__attributeallows__youto__displayone__messageto__authenticatedusers__andanother__tounauthenti__cated users.Here__wedisplay__agreeting__tousers__currentlylogged__in 1.Authenticated__usershave__anadditional__usernameattribute__set,which__weuse__topersonalize__thegreeting__andremind__theuser__theyre__loggedin__2.For__userswho__havent__been authenticated,we__displaya__linkto__thelogin__page 3.Using__theLogin__PageWe__vealready__setup__auser__account,so__lets__login__tosee__ifthe__page works.Go__to http://localhost:8000/admin/.If__youre__stilllogged__inas__an admin,look__fora__logoutlink__inthe__headerand__click it.When__youre__logged out,go__to http://localhost:8000/accounts/login/.You__shouldsee__alogin__pagesimilar__tothe__oneshown__inFigure__19-4.Enter__theusername__andpassword__youset__up earlier,and__youshould__bebrought__backto__thehome__page.The__headeron__thehome__pageshould__displaya__greetingpersonalized__withyour__username.User__Accounts 419Figure__19-4:The__loginpage__LoggingOut__Nowwe__needto__providea__wayfor__usersto__log out.Logout__requestsshould__besubmitted__asPOST__requests,so__well__adda__smalllogout__formto__base.html.When__usersclick__thelogout__button,they__llgo__toa__pageconfirming__thatthey__vebeen__logged out.Adding__aLogout__Formto__base.htmlWe__lladd__theform__forlogging__outto__base.htmlso__its__availableon__every page.We__llinclude__itin__anotherif__block,so__onlyusers__whoare__alreadylogged__incan__see it: base.html --snip-- {%block__content %}{%endblock__content %} {%if__user.is_authenticated %} 1 2 {%csrf_token__%}Log__out {%endif__%}The__defaultURL__patternfor__loggingout__is 'accounts/logout/'. However,the__requesthas__tobe__sentas__aPOST__request; otherwise,attackers__caneas__ilyforce__logout requests.To__makethe__logoutrequest__use POST,we__definea__simple form.We__placethe__format__thebottom__ofthe__page,below__ahorizontal__ruleelement__() 1.This__isan__easyway__toalways__keepthe__logoutbutton__ina__420Chapter__19consistent__positionbelow__anyother__contenton__the page.The__formitself__hasthe__logoutURL__asits__action argument,and__'post'as__therequest__method 2.Every__formin__Djangoneeds__toinclude__the {%csrf_token__%},even__asimple__formlike__this one.This__formis__emptyexcept__forthe__submit button.The__LOGOUT_REDIRECT_URLSetting__Whenthe__userclicks__thelogout__button,Django__needsto__knowwhere__tosend__them.We__controlthis__behaviorin__settings.py: settings.py --snip-- #My__settings.LOGIN_REDIRECT_URL__= 'learning_logs:index'LOGOUT_REDIRECT_URL__= 'learning_logs:index'The__LOGOUT_REDIRECT_URLsetting__shownhere__tellsDjango__toredirect__logged-outusers__backto__thehome__page.This__isa__simpleway__toconfirm__thatthey__werelogged__out,because__theyshould__nolonger__seetheir__username__afterlogging__out.The__RegistrationPage__Next,we__llbuild__apage__sonew__userscan__register.We__lluse__Djangos__default UserCreationForm,but__writeour__ownview__functionand__template.The__registerURL__Thefollowing__codeprovides__theURL__patternfor__theregistration__page,which__shouldbe__placedin__accounts/urls.py: accounts/urls.py """DefinesURL__patternsfor__accounts."""from__django.urlsimport__path,include__from .import__viewsapp_name__=accounts__urlpatterns = [ #Include__defaultauth__urls. path('', include('django.contrib.auth.urls')), #Registration__page. path('register/', views.register, name='register'), ]We__importthe__viewsmodule__from accounts,which__weneed__becausewe__rewriting__ourown__viewfor__theregistration__page.The__patternfor__theregistration__pagematches__theURL__http://localhost:8000/accounts/register/and__sendsrequests__tothe__register()function__were__aboutto__write.User__Accounts 421The__register()View__FunctionThe__register()view__functionneeds__todisplay__ablank__registrationform__whenthe__registrationpage__isfirst__requested,and__thenprocess__completedregistration__formswhen__theyre__submitted.When__aregistration__issuccess__ful,the__functionalso__needsto__logthe__newuser__in.Add__thefollowing__codeto__accounts/views.py: accounts/ views.pyfrom__django.shortcutsimport__render,redirect__from django.contrib.authimport__loginfrom__django.contrib.auth.formsimport__UserCreationFormdef__register(request): """Registera__new user."""if__request.method != 'POST': #Display__blankregistration__form. 1form__= UserCreationForm() else: #Process__completed form. 2form__= UserCreationForm(data=request.POST) 3if__form.is_valid(): 4new_user__= form.save() #Log__theuser__inand__thenredirect__tohome__page. 5 login(request, new_user) 6return__redirect('learning_logs:index') #Display__ablank__orinvalid__form.context__= {'form': form}return__render(request, 'registration/register.html', context)We__importthe__render()and__redirect() functions,and__thenwe__importthe__login()function__tolog__theuser__inif__theirregistration__informationis__correct.We__alsoimport__thedefault__UserCreationForm.In__the register()func__tion,we__checkwhether__were__respondingto__aPOST__request.If__were__not,we__makean__instanceof__UserCreationFormwith__noinitial__data 1.If__were__respondingto__aPOST__request,we__makean__instanceof__UserCreationFormbased__onthe__submitteddata__2.We__checkthat__thedata__isvalid__3in__this case,that__theusername__hasthe__appropriate characters,the__passwords match,and__theuser__isnt__tryingto__doanything__maliciousin__their submission.If__thesubmitted__datais__valid,we__callthe__forms__save()method__tosave__theusername__andthe__hashof__thepassword__tothe__database 4.The__save()method__returnsthe__newlycreated__user object,which__weassign__to new_user.When__theuser__sinformation__is saved,we__logthem__inby__callingthe__login()function__withthe__requestand__new_userobjects__5,which__createsa__validses__sionfor__thenew__user. Finally,we__redirectthe__userto__thehome__page 6, 422Chapter__19where__apersonalized__greetingin__theheader__tellsthem__theirregistration__was successful.At__theend__ofthe__function,we__renderthe__page,which__willbe__eithera__blankform__ora__submittedform__thats__invalid.The__registerTemplate__Nowcreate__atemplate__forthe__registration page,which__willbe__similarto__thelogin__page.Be__sureto__saveit__inthe__samedirectory__as login.html: register.html {%extends__"learning_logs/base.html" %} {%block__content %} {%csrf_token__%} {{ form.as_div }}Register__{%endblock__content %}This__shouldlook__likethe__other form-basedtemplates__weve__beenwrit__ing.We__usethe__as_divmethod__againso__Djangowill__displayall__thefields__inthe__form appropriately,including__anyerror__messagesif__theform__isnt__filledout__correctly.Linking__tothe__RegistrationPage__Next,we__lladd__codeto__showthe__registrationpage__linkto__anyuser__whoisn__tcurrently__logged in: base.html --snip-- {%if__user.is_authenticated %} Hello, {{ user.username }}. {%else__%}Register__-Log__in {%endif__%} --snip--Now__userswho__arelogged__insee__apersonalized__greetingand__alogout__button.Users__whoaren__tlogged__insee__aregistration__linkand__alogin__link.Try__outthe__registrationpage__bymaking__severaluser__accountswith__different usernames.In__thenext__section,we__llrestrict__someof__thepages__sothey__reavailable__onlyto__registered users,and__well__makesure__everytopic__belongsto__aspe__cific user.User__Accounts 423NOTE__Theregistration__systemwe__veset__upallows__anyoneto__makeany__numberof__accountsfor__Learning Log.Some__systemsrequire__usersto__confirmtheir__identityby__sendinga__confirmationemail__thatusers__mustreply__to.By__doing so,the__systemgenerates__fewerspam__accountsthan__thesimple__systemwe__reusing__here. However,when__youre__learning__tobuild__apps,it__sperfectly__appropriateto__practicewith__asimple__userregistration__systemlike__theone__were__using.TRY__ITYOURSELF__19-2.Blog__Accounts:Add__auser__authenticationand__registrationsystem__tothe__Blogproject__youstarted__inExercise__19-1 (page 415).Make__sure logged-inusers__seetheir__usernamesomewhere__onthe__screenand__unregisteredusers__seea__linkto__theregistration__page.Allowing__Usersto__OwnTheir__DataUsers__shouldbe__ableto__enterprivate__datain__theirlearning__logs,so__well__createa__systemto__figureout__whichdata__belongsto__which user.Then__well__restrictaccess__tocertain__pagesso__userscan__onlywork__withtheir__own data.We__llmodify__theTopic__modelso__everytopic__belongsto__aspecific__user.This__willalso__takecare__of entries,because__everyentry__belongsto__aspecific__topic.We__llstart__byrestricting__accessto__certain pages.Restricting__Accesswith__@login_requiredDjango__makesit__easyto__restrictaccess__tocertain__pagesthrough__the @login_required__decorator.Recall__fromChapter__11that__adecorator__isa__directiveplaced__justbefore__afunction__definition,which__modifieshow__thefunction__behaves.Let__slook__atan__example.Restricting__Accessto__theTopics__PageEach__topicwill__beowned__bya__user,so__onlyregistered__userscan__requestthe__topics page.Add__thefollowing__codeto__learning_logs/views.py: learning_logs/ views.pyfrom__django.shortcutsimport__render,redirect__from django.contrib.auth.decoratorsimport__login_requiredfrom__.modelsimport__Topic,Entry__--snip-- @login_requireddef__topics(request): """Showall__topics.""" --snip-- 424Chapter__19We__firstimport__the login_required() function.We__apply login_required()as__adecorator__tothe__topics()view__functionby__prependinglogin_required__withthe__@ symbol.As__a result,Python__knowsto__runthe__codein__login _required()before__thecode__in topics().The__codein__login_required()checks__whethera__useris__logged in,and__Djangoruns__thecode__in topics()only__ifthey__are.If__theuser__isnt__logged in,they__reredirected__tothe__login page.To__makethis__redirect work,we__needto__modify settings.pyso__Djangoknows__whereto__findthe__login page.Add__thefollowing__atthe__endof__settings.py: settings.py --snip-- #My__settings.LOGIN_REDIRECT_URL__= 'learning_logs:index'LOGOUT_REDIRECT_URL__= 'learning_logs:index'LOGIN_URL__= 'accounts:login'Now__whenan__unauthenticateduser__requestsa__pageprotected__bythe__@login_required decorator,Django__willsend__theuser__tothe__URLdefined__byLOGIN_URL__in settings.py.You__cantest__thissetting__bylogging__outof__anyuser__accountsand__goingto__thehome__page.Click__theTopics__link,which__shouldredirect__youto__thelogin__page.Then__login__toany__ofyour__accounts,and__fromthe__home page,click__theTopics__link again.You__shouldbe__ableto__accessthe__topics page.Restricting__AccessThroughout__LearningLog__Djangomakes__iteasy__torestrict__accessto__pages,but__youhave__todecide__whichpages__to protect.It__sbest__tothink__aboutwhich__pagesneed__tobe__unrestricted first,and__thenrestrict__allthe__otherpages__inthe__project.You__caneasily__correct__over-restricted access,and__its__lessdangerous__thanleaving__sensitivepages__unrestricted.In__Learning Log,we__llkeep__thehome__pageand__theregistration__page unrestricted.We__llrestrict__accessto__everyother__page.Here__s learning_logs/views.pywith__@login_requireddecorators__appliedto__everyview__except index(): learning_logs/ views.py --snip-- @login_requireddef__topics(request): --snip-- @login_requireddef__topic(request, topic_id): --snip-- @login_requireddef__new_topic(request): --snip--User__Accounts 425 @login_requireddef__new_entry(request, topic_id): --snip-- @login_requireddef__edit_entry(request, entry_id): --snip--Try__accessingeach__ofthese__pageswhile__logged out;you__shouldbe__redirected__backto__thelogin__page.You__llalso__beunable__toclick__linksto__pagessuch__as new_topic.But__ifyou__enterthe__URL http://localhost:8000/new_topic/,you__llbe__redirectedto__thelogin__page.You__shouldrestrict__accessto__anyURL__thats__publiclyaccessible__andrelates__toprivate__user data.Connecting__Datato__CertainUsers__Next,we__needto__connectthe__datato__theuser__whosubmitted__it.We__onlyneed__toconnect__thedata__highestin__thehierarchy__toa__user,and__the lower-leveldata__will follow.In__Learning Log,topics__arethe__highestlevel__ofdata__inthe__app,and__allentries__areconnected__toa__topic.As__longas__eachtopic__belongsto__aspecific__user,we__cantrace__theownership__ofeach__entryin__the database.We__llmodify__theTopic__modelby__addinga__foreignkey__relationshipto__a user.We__llthen__haveto__migratethe__database. Finally,we__llmodify__someof__theviews__sothey__onlyshow__thedata__associatedwith__thecurrently__logged-in user.Modifying__theTopic__ModelThe__modificationto__models.pyis__justtwo__lines: models.pyfrom__django.dbimport__modelsfrom__django.contrib.auth.modelsimport__Userclass__Topic(models.Model): """Atopic__theuser__islearning__about."""Text__= models.CharField(max_length=200)date_added__= models.DateTimeField(auto_now_add=True)owner__= models.ForeignKey(User, on_delete=models.CASCADE)def____str__(self): """Returna__stringrepresenting__the topic."""Return__self.textclass__Entry(models.Model): --snip--We__importthe__Usermodel__from django.contrib.auth.Then__weadd__anowner__fieldto__Topic,which__establishesa__foreignkey__relationshipto__theUser__model.If__auser__is deleted,all__thetopics__associatedwith__thatuser__willbe__deletedas__well. 426Chapter__19Identifying__ExistingUsers__Whenwe__migratethe__database,Django__willmodify__thedatabase__soit__canstore__aconnection__betweeneach__topicand__a user.To__makethe__migration,Django__needsto__knowwhich__userto__associatewith__eachexisting__topic.The__simplestapproach__isto__startby__assigningall__existingtopics__toone__userfor__example,the__superuser.But__first,we__needto__knowthat__users__ID.Let__slook__atthe__IDsof__allusers__createdso__far.Start__aDjango__shellses__sionand__issuethe__following commands: (ll_env)learning_log$python__manage.pyshell__1 >>>from__django.contrib.auth.modelsimport__User 2 >>> User.objects.all() , , ]> 3 >>>for__userin__User.objects.all(): ... print(user.username, user.id) ...ll_admin__1eric__2willie__3 >>>We__firstimport__theUser__modelinto__theshell__session 1.We__thenlook__atall__theusers__thathave__beencreated__sofar__2.The__outputshows__threeusers__formy__versionof__the project: ll_admin, eric,and__willie. Next,we__loopthrough__thelist__ofusers__andprint__eachuser__susername__andID__3.When__Djangoasks__whichuser__toassociate__theexisting__topics with,we__lluse__oneof__theseID__values.Migrating__theDatabase__Nowthat__weknow__the IDs,we__canmigrate__the database.When__wedo__this,Python__willask__usto__connectthe__Topicmodel__toa__particularowner__temporarily__orto__adda__defaultto__our models.pyfile__totell__itwhat__to do.Choose__option 1: 1 (ll_env)learning_log$python__manage.pymakemigrations__learning_logs 2It__isimpossible__toadd__a non-nullablefield__'owner'to__topicwithout__specifyinga__default.This__is because... 3Please__selecta__fix: 1)Provide__a one-offdefault__now (willbe__seton__allexisting__rowswith__anull__valuefor__this column) 2)Quit__andmanually__definea__defaultvalue__in models.py. 4Select__an option: 1 5Please__enterthe__defaultvalue__now,as__validPython__Thedatetime__and django.utils.timezonemodules__are available...Type__'exit'to__exitthis__prompt 6 >>> 1Migrations__for 'learning_logs': learning_logs/migrations/0003_topic_owner.py -Add__fieldowner__totopic__(ll_env)learning_log$User__Accounts 427We__startby__issuingthe__makemigrationscommand__1.In__the output,Django__indicatesthat__were__tryingto__adda__required (non-nullable)field__toan__existingmodel__(topic)with__nodefault__valuespecified__2.Django__givesus__two options:we__canprovide__adefault__right now,or__wecan__quitand__adda__defaultvalue__in models.py 3.Here__Ive__chosenthe__firstoption__4.Django__thenasks__usto__enterthe__defaultvalue__5.To__associateall__existingtopics__withthe__originaladmin__user, ll_admin,I__enteredthe__userID__of 1 6.You__canuse__theID__ofany__useryou__ve created;it__doesnt__haveto__bea__superuser.Django__thenmigrates__thedatabase__usingthis__valueand__generatesthe__migrationfile__0003_topic_owner.py,which__addsthe__fieldowner__tothe__Topic model.Now__wecan__executethe__migration.Enter__thefollowing__inan__activevir__tual environment: (ll_env)learning_log$python__manage.pymigrate__Operationsto__perform:Apply__all migrations: admin, auth, contenttypes, learning_logs,sessions__Running migrations: 1Applying__learning_logs.0003_topic_owner...OK__(ll_env)learning_log$Django__appliesthe__new migration,and__theresult__isOK__1.We__canverify__thatthe__migrationworked__asexpected__ina__shell session,like__this: >>>from__learning_logs.modelsimport__Topic >>>for__topicin__Topic.objects.all(): ... print(topic, topic.owner) ...Chess__ll_adminRock__Climbingll_admin__>>>We__importTopic__from learning_logs.modelsand__thenloop__throughall__existing topics,printing__eachtopic__andthe__userit__belongs to.You__cansee__thateach__topicnow__belongsto__theuser__ll_admin. (Ifyou__getan__errorwhen__yourun__this code,try__exitingthe__shelland__startinga__new shell.)NOTE__Youcan__simplyreset__thedatabase__insteadof__migrating,but__thatwill__loseall__existing data.It__sgood__practiceto__learnhow__tomigrate__adatabase__whilemaintaining__theintegrity__ofusers__data.If__youdo__wantto__startwith__afresh__database,issue__thecom__mandpython__manage.pyflush__torebuild__thedatabase__structure.You__llhave__tocreate__anew__superuser,and__allof__yourdata__willbe__gone.Restricting__TopicsAccess__toAppropriate__Users Currently,if__youre__logged in,you__llbe__ableto__seeall__the topics,no__matterwhich__useryou__relogged__in as.We__llchange__thatby__showingusers__onlythe__topicsthat__belongto__them. 428Chapter__19Make__thefollowing__changeto__the topics()function__in views.py: learning_logs/ views.py --snip-- @login_requireddef__topics(request): """Showall__topics."""topics__= Topic.objects.filter(owner=request.user).order_by('date_added')context__= {'topics': topics}return__render(request, 'learning_logs/topics.html', context) --snip--When__auser__islogged__in,the__requestobject__hasa__request.userattribute__set,which__containsinformation__aboutthe__user.The__query Topic.objects .filter(owner=request.user)tells__Djangoto__retrieveonly__theTopic__objectsfrom__thedatabase__whoseowner__attributematches__thecurrent__user.Because__were__notchanging__howthe__topicsare__displayed,we__dont__needto__changethe__templatefor__thetopics__pageat__all.To__seeif__this works,log__inas__theuser__youconnected__allexisting__topics to,and__goto__thetopics__page.You__shouldsee__allthe__topics.Now__logout__andlog__backin__asa__different user.You__shouldsee__themessage__Notopics__havebeen__added yet.Protecting__aUser__sTopics__Wehaven__trestricted__accessto__thetopic__pages yet,so__anyregistered__usercould__trya__bunchof__URLs (like http://localhost:8000/topics/1/)and__retrievetopic__pagesthat__happento__match.Try__it yourself.While__loggedin__asthe__userthat__ownsall__topics,copy__theURL__ornote__theID__inthe__URLof__a topic,and__thenlog__outand__logback__inas__adifferent__user.Enter__thattopic__s URL.You__shouldbe__ableto__readthe__entries,even__thoughyou__relogged__inas__adifferent__user.We__llfix__thisnow__byperforming__acheck__beforeretrieving__therequested__entriesin__the topic()view__function: learning_logs/ views.pyfrom__django.shortcutsimport__render,redirect__from django.contrib.auth.decoratorsimport__login_required 1from__django.httpimport__Http404 --snip-- @login_requireddef__topic(request, topic_id): """Showa__singletopic__andall__its entries."""topic__= Topic.objects.get(id=topic_id) #Make__surethe__topicbelongs__tothe__current user. 2if__topic.owner != request.user:raise__Http404entries__= topic.entry_set.order_by('-date_added')context__= {'topic': topic, 'entries': entries}return__render(request, 'learning_logs/topic.html', context) --snip--User__Accounts 429A__404response__isa__standarderror__responsethat__sreturned__whena__requestedresource__doesnt__existon__a server.Here__weimport__the Http404exception__1,which__well__raiseif__theuser__requestsa__topicthey__shouldnt__haveaccess__to.After__receivinga__topic request,we__makesure__thetopic__suser__matchesthe__currently logged-inuser__beforerendering__the page.If__therequested__topics__owneris__notthe__sameas__thecurrent__user,we__raisethe__Http404exception__2,and__Djangoreturns__a 404-error page.Now__ifyou__tryto__viewanother__users__topic entries,you__llsee__aPage__NotFound__messagefrom__Django.In__Chapter 20,we__llconfigure__theproject__sousers__willsee__aproper__errorpage__insteadof__adebugging__page.Protecting__theedit_entry__PageThe__edit_entrypages__haveURLs__ofthe__form http://localhost:8000/edit_entry/ entry_id/,where__theentry_id__isa__number.Let__sprotect__thispage__sono__onecan__usethe__URLto__gainaccess__tosomeone__elses__entries: learning_logs/ views.py --snip-- @login_requireddef__edit_entry(request, entry_id): """Editan__existing entry."""entry__= Entry.objects.get(id=entry_id)topic__= entry.topicif__topic.owner != request.user:raise__Http404if__request.method != 'POST': --snip--We__retrievethe__entryand__thetopic__associatedwith__this entry.We__thencheck__whetherthe__ownerof__thetopic__matchesthe__currently logged-in user;if__theydon__t match,we__raisean__Http404 exception.Associating__NewTopics__withthe__CurrentUser__Currently,the__pagefor__addingnew__topicsis__brokenbecause__itdoesn__tassociate__newtopics__withany__particular user.If__youtry__addinga__new topic,you__llsee__themessage__IntegrityErroralong__withNOT__NULLconstraint__failed: learning_logs_topic.owner_id.Django__issaying__youcan__tcreate__anew__topicwithout__specifyinga__valuefor__thetopic__sowner__field.There__sa__straightforwardfix__forthis__problem,because__wehave__accessto__thecurrent__userthrough__therequest__object.Add__thefollowing__code,which__associatesthe__newtopic__withthe__current user: learning_logs/ views.py --snip-- @login_requireddef__new_topic(request): --snip-- else: #POST__data submitted;process__data.form__= TopicForm(data=request.POST)if__form.is_valid(): 430Chapter__19 1new_topic__= form.save(commit=False) 2 new_topic.owner = request.user 3 new_topic.save()return__redirect('learning_logs:topics') #Display__ablank__orinvalid__form.context__= {'form': form}return__render(request, 'learning_logs/new_topic.html', context) --snip--When__wefirst__call form.save(),we__passthe__commit=Falseargument__becausewe__needto__modifythe__newtopic__beforesaving__itto__thedatabase__1.We__thenset__thenew__topics__ownerattribute__tothe__currentuser__2. Finally,we__call save()on__thetopic__instancewe__justdefined__3.Now__thetopic__hasall__therequired__dataand__willsave__successfully.You__shouldbe__ableto__addas__manynew__topicsas__youwant__foras__manydifferent__usersas__you want.Each__userwill__onlyhave__accessto__theirown__data,whether__theyre__viewing data,entering__new data,or__modifyingold__data.TRY__ITYOURSELF__19-3. Refactoring:There__aretwo__placesin__views.pywhere__wemake__surethe__userassociated__witha__topicmatches__thecurrently__logged-in user.Put__thecode__forthis__checkin__afunction__called check_topic_owner(),and__callthis__functionwhere__appropriate. 19-4.Protecting__new_entry: Currently,a__usercan__adda__newentry__toanother__users__learninglog__byentering__aURL__withthe__IDof__atopic__belongingto__another user.Prevent__thisattack__bychecking__thatthe__currentuser__ownsthe__entrys__topicbefore__savingthe__new entry. 19-5.Protected__Blog:In__yourBlog__project,make__sureeach__blogpost__iscon__nectedto__aparticular__user.Make__sureall__postsare__publiclyaccessible__butonly__registeredusers__canadd__postsand__editexisting__posts.In__theview__thatallows__usersto__edittheir__posts,make__surethe__useris__editingtheir__ownpost__beforepro__cessingthe__form.Summary__Inthis__chapter,you__learnedhow__formsallow__usersto__addnew__topicsand__entries,and__editexisting__entries.You__thenlearned__howto__implementuser__accounts.You__gaveexisting__usersthe__abilityto__login__and out,and__usedDjango__sdefault__UserCreationFormto__letpeople__createnew__accounts.User__Accounts 431After__buildinga__simpleuser__authenticationand__registration system,you__restrictedaccess__to logged-inusers__forcertain__pagesusing__the @login_required decorator.You__thenassigned__datato__specificusers__througha__foreignkey__relationship.You__alsolearned__tomigrate__thedatabase__whenthe__migrationrequires__youto__specifysome__default data. Finally,you__learnedhow__tomake__surea__usercan__onlysee__datathat__belongsto__themby__modifyingthe__view functions.You__retrievedappro__priatedata__usingthe__filter() method,and__comparedthe__ownerof__therequested__datato__thecurrently__logged-in user.It__mightnot__alwaysbe__immediatelyobvious__whatdata__youshould__makeavailable__andwhat__datayou__should protect,but__thisskill__willcome__with practice.The__decisionswe__vemade__inthis__chapterto__secureour__usersdata__alsoillustrate__whyworking__withothers__isa__goodidea__whenbuilding__aproj__ect:having__someoneelse__lookover__yourproject__makesit__morelikely__thatyou__llspot__vulnerable areas.You__nowhave__afully__functioningproject__runningon__yourlocal__machine.In__thefinal__chapter,you__llstyle__LearningLog__tomake__itvisually__appealing,and__youll__deploythe__projectto__aserver__soanyone__withinternet__accesscan__registerand__makean__account. 20STYL__INGAND__DEPL__OYING__ANAPP__LearningLog__isfully__functional now,but__ithas__nostyling__andruns__onlyon__yourlocal__machine.In__this chapter,you__llstyle__theproject__ina__simplebut__professionalman__nerand__thendeploy__itto__alive__serverso__anyonein__theworld__canmake__anaccount__anduse__it.For__the styling,we__lluse__theBootstrap__library,a__collectionof__toolsfor__stylingweb__applicationsso__theylook__professionalon__allmodern__devices,from__asmall__phoneto__alarge__desktop monitor.To__do this,we__lluse__the django-bootstrap5 app,which__willalso__giveyou__practiceusing__appsmade__byother__Django developers.We__lldeploy__LearningLog__using Platform.sh,a__sitethat__letsyou__pushyour__projectto__oneof__its servers,making__itavailable__toanyone__withan__internet connection.We__llalso__startusing__aversion__controlsystem__calledGit__totrack__changesto__the project. 434Chapter__20When__youre__finishedwith__Learning Log,you__llbe__ableto__developsimple__web applications,give__thema__professionallook__and feel,and__deploythem__toa__live server.You__llalso__beable__touse__moreadvanced__learningresources__asyou__developyour__skills.Styling__LearningLog__Weve__purposelyignored__stylinguntil__nowto__focuson__LearningLog__sfunc__tionality first.This__isa__goodway__toapproach__development,because__anapp__isonly__usefulif__it works.Once__anapp__is working,its__appearanceis__criticalso__peoplewill__wantto__use it.In__this section,we__llinstall__the django-bootstrap5app__andadd__itto__the project.We__llthen__useit__tostyle__theindividual__pagesin__the project,so__allthe__pageshave__aconsistent__lookand__feel.The__django-bootstrap5App__Well__use django-bootstrap5to__integrateBootstrap__intoour__project.This__appdownloads__therequired__Bootstrap files,places__themin__anappropriate__locationin__your project,and__makesthe__stylingdirectives__availablein__yourproject__s templates.To__install django-bootstrap5,issue__thefollowing__commandin__anactive__virtual environment: (ll_env)learning_log$pip__install django-bootstrap5 --snip--Successfully__installed beautifulsoup4-4.11.1 django-bootstrap5-21.3 soupsieve-2.3.2.post1 Next,we__needto__add django-bootstrap5to__INSTALLED_APPSin__settings.py: settings.py --snip--INSTALLED_APPS__= [ #My__apps. 'learning_logs', 'accounts', #Third__party apps. 'django_bootstrap5', #Default__django apps. 'django.contrib.admin', --snip--Start__anew__sectioncalled__Thirdparty__apps,for__appscreated__byother__devel opers,and__add 'django_bootstrap5'to__this section.Make__sureyou__placethis__sectionafter__Myapps__butbefore__thesection__containingDjango__sdefault__apps.Using__Bootstrapto__StyleLearning__LogBootstrap__isa__largecollection__ofstyling__tools.It__alsohas__anumber__oftem__platesyou__canapply__toyour__projectto__createan__overall style.It__smuch__easierto__usethese__templatesthan__touse__individualstyling__tools.To__seethe__Stylingand__Deployingan__App 435templates__Bootstrap offers,go__to https://getbootstrap.comand__click Examples.We__lluse__theNavbar__static template,which__providesa__simpletop__navigationbar__anda__containerfor__thepage__s content.Figure__20-1shows__whatthe__homepage__willlook__likeafter__weapply__Bootstraps__templateto__base.htmland__modify index.html slightly.Figure__20-1:The__LearningLog__homepage__usingBootstrap__Modifying base.htmlWe__needto__rewrite base.htmlusing__theBootstrap__template.We__lldevelop__thenew__base.htmlin__sections.This__isa__large file;you__maywant__tocopy__thisfile__fromthe__online resources,available__at https://ehmatthes.github.io/pcc_3e.If__youdo__copythe__file,you__shouldstill__readthrough__thefollowing__sectionto__understandthe__changesthat__were made.Defining__theHTML__HeadersThe__firstchange__well__maketo__base.htmldefines__theHTML__headersin__the file.We__llalso__addsome__requirementsfor__usingBootstrap__inour__templates,and__givethe__pagea__title.Delete__everythingin__base.htmland__replaceit__withthe__following code: base.html 1 2 3 4Learning__Log 5 {%load__django_bootstrap5 %} {%bootstrap_css__%} {%bootstrap_javascript__%} 436Chapter__20We__firstdeclare__thisfile__asan__HTMLdocument__1written__inEnglish__2.An__HTMLfile__isdivided__intotwo__main parts:the__headand__the body.The__headof__thefile__beginswith__anopening__tag 3.The__headof__anHTML__filedoesn__thold__anyof__thepage__s content;it__justtells__thebrowser__whatit__needsto__knowto__displaythe__page correctly.We__includea__elementfor__the page,which__willdisplay__inthe__browsers__titlebar__wheneverLearning__Logis__open 4.Before__closingthe__head section,we__loadthe__collectionof__templatetags__availablein__django-bootstrap5 5.The__templatetag__{%bootstrap_css__%}is__acustom__tagfrom__django-bootstrap5;it__loadsall__ofthe__CSSfiles__requiredto__implementBootstrap__styles.The__tagthat__followsenables__allthe__interactivebehavior__youmight__useon__a page,such__ascollapsible__navigation bars.The__closingtag__appearson__thelast__line.All__Bootstrapstyling__optionsare__nowavailable__inany__templatethat__inheritsfrom__base.html.If__youwant__touse__customtemplate__tagsfrom__django-bootstrap5,each__templatewill__needto__includethe__{%load__django _bootstrap5 %} tag.Defining__theNavigation__BarThe__codethat__definesthe__navigationbar__atthe__topof__thepage__isfairly__long,because__ithas__towork__equallywell__onnarrow__phonescreens__andwide__desktop__monitors.We__llwork__throughthe__navigationbar__in sections.Here__sthe__firstpart__ofthe__navigation bar: base.html --snip-- 1 2Learning__Log 3 4 5 6 7Topics__Stylingand__Deployingan__App 437 8 {%block__content %}{%endblock__content %}The__firstnew__elementis__theopening__tag.The__bodyof__anHTML__filecontains__thecontent__userswill__seeon__a page.Next__wehave__aele__ment,which__opensthe__codefor__thenavigation__barat__thetop__ofthe__page 1.Everything__containedin__thiselement__isstyled__accordingto__theBootstrap__stylerules__definedby__theselectors__navbar, navbar-expand-md,and__therest__thatyou__see here.A__selectordetermines__whichelements__ona__pagea__certainstyle__ruleapplies__to.The__navbar-lightand__bg-lightselectors__stylethe__navigationbar__witha__light-themed background.The__mbin__mb-4is__shortfor__margin-bottom;this__selectorensures__thata__littlespace__appearsbetween__thenavigation__barand__therest__ofthe__page.The__borderselector__providesa__thinborder__aroundthe__lightbackground__toset__itoff__alittle__fromthe__restof__the page.The__tagon__thenext__lineopens__aresizable__containerthat__willhold__theoverall__navigation bar.The__termdiv__isshort__for division;you__builda__webpage__bydividing__itinto__sectionsand__definingstyle__andbehavior__rulesthat__applyto__that section.Any__stylingor__behaviorrules__thatare__definedin__anopening__tagaffect__everythingyou__seeuntil__itscorresponding__closing tag,written__as .Next__weset__theproject__s name,Learning__Log,to__appearas__thefirst__element__onthe__navigationbar__2.This__willalso__serveas__alink__tothe__home page,just__asit__sbeen__doingin__theminimally__styledversion__ofthe__projectwe__builtin__theprevious__two chapters.The__navbar-brandselector__stylesthis__linkso__itstands__outfrom__therest__ofthe__linksand__helpsadd__somebranding__tothe__site.The__Bootstraptemplate__thendefines__abutton__thatappears__ifthe__browserwindow__istoo__narrowto__displaythe__wholenavigation__barhorizontally__3.When__theuser__clicksthe__button,the__navigationelements__appearin__a drop-down__list.The__collapsereference__causesthe__navigationbar__tocollapse__whenthe__usershrinks__thebrowser__windowor__whenthe__siteis__displayedon__deviceswith__small screens. Next,we__opena__newsection__()of__thenavigation__bar 4.This__isthe__partof__thenavigation__barthat__cancollapse__dependingon__thesize__ofthe__browser window.Bootstrap__definesnavigation__elementsas__itemsin__anunordered__list 5,with__stylerules__thatmake__itlook__nothinglike__a list.Every__linkor__elementyou__needon__thebar__canbe__includedas__anitem__inan__unorderedlist__6. Here,the__onlyitem__inthe__listis__ourlink__tothe__topicspage__7.Notice__theclosing__tagat__theend__ofthe__link;every__openingtag__needsa__corresponding__closing tag.The__restof__thelines__shownhere__closeout__allof__thetags__thathave__been opened.In__HTML,a__commentis__writtenlike__this: 438Chapter__20Closing__tagsdon__tusually__have comments,but__ifyou__renew__to HTML,it__canbe__reallyhelpful__tolabel__someof__yourclosing__tags.A__singlemissing__tagor__anextra__tagcan__throwoff__thelayout__ofan__entire page.We__includethe__contentblock__8and__theclosing__andtags__as well.We__renot__finishedwith__thenavigation__bar,but__wenow__havea__completeHTML__document.If__runserveris__currently active,stop__thecurrent__serverand__restart it.Go__tothe__projects__home page,and__youshould__seea__navigation__barthat__hassome__ofthe__elementsshown__inFigure__20-1.Now__lets__addthe__restof__theelements__tothe__navigation bar.Adding__UserAccount__LinksWe__stillneed__toadd__thelinks__associatedwith__user accounts.We__llstart__byadding__allof__the account-relatedlinks__exceptthe__logout form.Make__thefollowing__changesto__base.html: base.html --snip-- 1 2 {%if__user.is_authenticated %} 3 Hello, {{ user.username }}. 4 {%else__%}Register__Login__{%endif__%} --snip--We__begina__newset__oflinks__byusing__anotheropening__tag 1.You__canhave__asmany__groupsof__linksas__youneed__ona__page.The__selector ms-autois__shortfor__margin-start-automatic:this__selectorexamines__theother__elementsin__thenavigation__barand__worksout__aleft__(start)margin__thatpushes__thisgroup__oflinks__tothe__rightside__ofthe__browser window.The__ifblock__isthe__sameconditional__blockwe__usedearlier__todisplay__appropriatemessages__to users,depending__onwhether__theyre__loggedin__2.The__blockis__alittle__longernow__becausethere__aresome__stylingrules__insidethe__conditional tags.The__greetingfor__authenticatedusers__iswrapped__ina__element 3.A__spanelement__stylespieces__oftext__orelements__ofa__pagethat__arepart__ofa__longer line.While__divelements__createtheir__owndivisions__ina__page,span__elementsare__continuouswithin__alarger__section.This__canStyling__andDeploying__anApp__439be__confusingat__first,because__manypages__havedeeply__nesteddiv__elements. Here,we__reusing__thespan__elementto__styleinformational__texton__thenavi__gation bar:in__this case,the__logged-inuser__s name.In__theelse__block,which__runsfor__unauthenticated users,we__includethe__linksfor__registeringa__newaccount__andlogging__in 4.These__shouldlook__justlike__thelink__tothe__topics page.If__youwanted__toadd__morelinks__tothe__navigation bar,you__dadd__anotheritem__toone__ofthe__groupsthat__weve__defined,using__stylingdirectives__likethe__onesyou__veseen__here.Now__lets__addthe__logoutform__tothe__navigation bar.Adding__theLogout__Formto__theNavigation__BarWhen__wefirst__wrotethe__logout form,we__addedit__tothe__bottomof__base.html.Now__lets__putit__ina__better place,in__thenavigation__bar: base.html --snip-- {%if__user.is_authenticated %} {%csrf_token__%} 1Log__out {%endif__%} --snip--The__logoutform__shouldbe__placedafter__theset__of account-related links,but__insidethe__collapsiblesection__ofthe__navigation bar.The__onlychange__inthe__formis__theaddition__ofa__numberof__Bootstrapstyling__classesin__the element,which__applyBootstrap__stylingelements__tothe__logoutbutton__1.Reload__thehome__page,and__youshould__beable__tolog__inand__outusing__anyof__theaccounts__youve__created.There__sstill__abit__morewe__needto__addto__base.html.We__needto__definetwo__blocksthat__theindividual__pagescan__useto__placethe__contentspecific__tothose__pages.Defining__theMain__Partof__thePage__Therest__of base.htmlcontains__themain__partof__the page: base.html --snip-- 1 2 {%block__page_header %}{%endblock__page_header %} 440Chapter__20 3 {%block__content %}{%endblock__content %}We__firstopen__atag__1.The__mainelement__isused__forthe__mostsignificant__partof__thebody__ofa__page.Here__weassign__thebootstrap__selector container,which__isa__simpleway__togroup__elementson__a page.We__llplace__twodiv__elementsin__this container.The__firstdiv__elementcontains__apage_header__block 2.We__lluse__thisblock__totitle__most pages.To__makethis__sectionstand__outfrom__therest__ofthe__page,we__placesome__paddingbelow__the header.Padding__refersto__spacebetween__anelement__scontent__andits__border.The__selector pb-2is__abootstrap__directivethat__providesa__moderateamount__ofpadding__atthe__bottomof__thestyled__ele ment.A__marginis__thespace__betweenan__elements__borderand__otherelements__onthe__page.The__selector mb-2provides__amoderate__amountof__marginat__thebottom__ofthis__div.We__wanta__borderon__thebottom__ofthis__block,so__weuse__theselector__border-bottom,which__providesa__thinborder__atthe__bottomof__thepage_header__block.We__thendefine__onemore__divelement__thatcontains__theblock__content 3.We__dont__applyany__specificstyle__tothis__block,so__wecan__stylethe__contentof__anypage__aswe__seefit__forthat__page.The__endof__the base.htmlfile__hasclosing__tagsfor__the main, body,and__html elements.When__youload__LearningLog__shome__pagein__a browser,you__shouldsee__a professional-lookingnavigation__barthat__matchesthe__oneshown__inFigure__20-1.Try__resizingthe__windowso__its__really narrow;a__buttonshould__replacethe__navigation bar.Click__the button,and__allthe__linksshould__appearin__a drop-down list.Styling__theHome__PageUsing__aJumbotron__Toupdate__thehome__page,we__lluse__aBootstrap__elementcalled__a jumbotron,a__largebox__thatstands__outfrom__therest__ofthe__page. Typically,it__sused__onhome__pagesto__holda__briefdescription__ofthe__overallproject__anda__callto__actionthat__invitesthe__viewerto__get involved.Here__sthe__revised index.html file: index.html {%extends__"learning_logs/base.html" %} 1 {%block__page_header %} 2 3Track__your learning. 4Make__yourown__Learning Log,and__keepa__listof__thetopics__you'relearning__about.Whenever__youlearn__somethingnew__abouta__topic,make__anentry__summarizingwhat__you've learned.Styling__andDeploying__anApp__441 5Register__{%endblock__page_header %}We__firsttell__Djangothat__were__aboutto__definewhat__goesin__thepage___headerblock__1.A__jumbotronis__implementedas__apair__ofdiv__elementswith__aset__ofstyling__directivesapplied__tothem__2.The__outerdiv__haspadding__andmargin__settings,a__lightbackground__color,and__rounded corners.The__innerdiv__isa__containerthat__changesalong__withthe__windowsize__andhas__somepadding__as well.The__py-4selector__addspadding__tothe__topand__bottomof__thediv__element.Feel__freeto__adjustthe__numbersin__thesesettings__andsee__howthe__homepage__changes.Inside__thejumbotron__arethree__elements.The__firstis__ashort__message,Track__your learning,that__givesnew__visitorsa__senseof__whatLearning__Logdoes__3.The__elementis__a first-level header,and__the display-3selector__addsa__thinnerand__tallerlook__tothis__particular header.We__alsoinclude__alonger__messagethat__providesmore__informationabout__whatthe__usercan__dowith__theirlearning__log 4.This__isformatted__asa__lead paragraph,which__ismeant__tostand__outfrom__regular paragraphs.Rather__thanjust__usinga__text link,we__createa__buttonthat__invitesusers__toregister__anaccount__onLearning__Log 5.This__isthe__samelink__asin__the header,but__thebutton__standsout__onthe__pageand__showsthe__viewerwhat__theyneed__todo__inorder__tostart__usingthe__project.The__selectorsyou__seehere__stylethis__asa__largebutton__thatrepresents__acall__to action.The__codeis__anHTML__entitythat__lookslike__tworight__anglebrackets__combined (>>). Finally,we__provideclosing__divtags__andclose__thepage_header__block.With__onlytwo__divelements__inthis__file,it__snot__particularlyhelpful__tolabel__theclosing__div tags.We__arent__addinganything__elseto__this page,so__wedon__tneed__todefine__thecontent__blockin__this template.The__homepage__nowlooks__likeFigure__20-1.This__isa__significantimprove__mentover__theunstyled__versionof__the project!Styling__theLogin__PageWe__verefined__theoverall__appearanceof__thelogin__page,but__thelogin__formitself__doesnt__haveany__styling yet.Let__smake__theform__lookconsistent__withthe__restof__thepage__bymodifying__login.html: login.html {%extends__'learning_logs/base.html' %} 1 {%load__django_bootstrap5 %} 2 {%block__page_header %}Log__into__your account. {%endblock__page_header %} {%block__content %} 442Chapter__20 {%csrf_token__%} 3 {%bootstrap_form__form %} 4 {%bootstrap_button__button_type="submit" content="Log in" %} {%endblock__content %}We__firstload__the bootstrap5template__tagsinto__thistemplate__1.We__thendefine__thepage_header__block,which__tellsthe__userwhat__thepage__isfor__2.Notice__thatwe__veremoved__the {%if__form.errors %}block__fromthe__template; django-bootstrap5manages__formerrors__automatically.To__displaythe__form,we__usethe__templatetag__{%bootstrap_form__%} 3;this__replacesthe__{{ form.as_div }}element__wewere__usingin__Chapter 19.The__{%booststrap_form__%}template__taginserts__Bootstrapstyle__rulesinto__theform__sindividual__elementsas__theform__is rendered.To__generatethe__submit button,we__usethe__{%bootstrap_button__%}tag__witharguments__thatdesignate__itas__asubmit__button,and__giveit__thelabel__Login__4.Figure__20-2shows__thelogin__form now.The__pageis__much cleaner,with__consistentstyling__anda__clear purpose.Try__loggingin__withan__incorrectusername__or password;you__llsee__thateven__theerror__messagesare__styledconsistently__andintegrate__wellwith__theoverall__site.Figure__20-2:The__loginpage__styledwith__BootstrapStyling__theTopics__PageLet__smake__surethe__pagesfor__viewinginformation__arestyled__appropriatelyas__well,starting__withthe__topics page: topics.html {%extends__'learning_logs/base.html' %} {%block__page_header %}Styling__andDeploying__anApp__443 1Topics__{%endblock__page_header %} {%block__content %} 2 {%for__topicin__topics %} 3 {{ topic.text }} {%empty__%} 4No__topicshave__beenadded__yet. {%endfor__%}Add__anew__topic {%endblock__content %}We__dont__needthe__{%load__bootstrap5 %} tag,because__were__notusing__anycustom__bootstrap5template__tagsin__this file.We__movethe__headingTopics__intothe__page_headerblock__andmake__itan__elementinstead__ofa__simpleparagraph__1.The__maincontent__onthis__pageis__alist__of topics,so__weuse__Bootstraps__listgroup__componentto__renderthe__page.This__appliesa__simpleset__ofstyling__directivesto__theoverall__listand__toeach__itemin__the list.When__weopen__the tag,we__firstinclude__the list-groupclass__toapply__thedefault__styledirec__tivesto__thelist__2.We__furthercustomize__thelist__byputting__aborder__atthe__bottomof__the list,a__littlepadding__belowthe__list (pb-2),and__amargin__belowthe__bottomborder__(mb-4).Each__itemin__thelist__needsthe__list-group-item class,and__wecustomize__thedefault__styleby__removingthe__borderaround__individualitems__3.The__messagethat__sdisplayed__whenthe__listis__emptyneeds__thesesame__classes 4.When__youvisit__thetopics__page now,you__shouldsee__apage__withstyling__thatmatches__thehome__page.Styling__theEntries__onthe__TopicPage__Onthe__topic page,we__lluse__Bootstraps__cardcomponent__tomake__eachentry__stand out.A__cardis__anestable__setof__divswith__flexible,predefined__stylesthat__areperfect__fordisplaying__atopic__s entries: topic.html {%extends__'learning_logs/base.html' %} 1 {%block__page_header %} {{ topic.text }} {%endblock__page_header %} 444Chapter__20 {%block__content %}Add__newentry__{%for__entryin__entries %} 2 3 {{ entry.date_added|date:'M d,Y__H:i' }} 4edit__entry 5 {{ entry.text|linebreaks }} {%empty__%} 6There__areno__entriesfor__thistopic__yet. {%endfor__%} {%endblock__content %}We__firstplace__thetopic__inthe__page_headerblock__1.Then__wedelete__theunordered__liststructure__previouslyused__inthis__template.Instead__ofmaking__eachentry__alist__item,we__opena__divelement__withthe__selectorcard__2.This__cardhas__twonested__elements:one__tohold__thetimestamp__andthe__linkto__editthe__entry,and__anotherto__holdthe__bodyof__the entry.The__cardselector__takescare__ofmost__ofthe__stylingwe__needfor__this div;we__customizethe__cardby__addinga__smallmargin__tothe__bottomof__eachcard__(mb-3).The__firstelement__inthe__cardis__a header,which__isan__elementwith__theselector__card-header 3.This__headercontains__thedate__theentry__wasmade__anda__linkto__editthe__entry.The__tagaround__theedit_entry__linkmakes__itappear__alittle__smallerthan__thetimestamp__4.The__secondelement__isa__divwith__theselector__card-body 5,which__placesthe__textof__theentry__ina__simplebox__onthe__card.Notice__thatthe__Djangocode__forincluding__theinformation__onthe__pagehasn__t changed;only__elementsthat__affectthe__appearanceof__thepage__have.Since__weno__longerhave__anunordered__list,we__vereplaced__thelist__itemtags__aroundthe__emptylist__messagewith__simpleparagraph__tags 6.Figure__20-3shows__thetopic__pagewith__itsnew__look.Learning__Logs__functionalityhasn__t changed,but__itlooks__significantlymore__professionaland__invitingto__users.If__youwant__touse__adifferent__Bootstraptemplate__fora__project,follow__aprocess__thats__similarto__whatwe__vedone__sofar__inthis__chapter.Copy__thetem__plateyou__wantto__useinto__base.html,and__modifythe__elementsthat__containactual__contentso__thetemplate__displaysyour__projects__information.Then__useBootstrap__sindividual__stylingtools__tostyle__thecontent__oneach__page.NOTE__TheBootstrap__projecthas__excellent documentation.Visit__thehome__pageat__https:// getbootstrap.comand__clickDocs__tolearn__moreabout__whatBootstrap__offers.Styling__andDeploying__anApp__445Figure__20-3:The__topicpage__withBootstrap__stylingTRY__ITYOURSELF__20-1.Other__Forms:We__appliedBootstrap__sstyles__tothe__login page.Make__similar__changesto__therest__ofthe__form-based pages,including__new_topic, new_entry, edit_entry,and__register. 20-2.Stylish__Blog:Use__Bootstrapto__stylethe__Blogproject__youcreated__inChapter__19.Deploying__LearningLog__Nowthat__wehave__a professional-looking project,let__sdeploy__itto__alive__serverso__anyonewith__aninternet__connectioncan__use it.We__lluse__Platform.sh,a__web-basedplatform__thatallows__youto__managethe__deploymentof__web applications.We__llget__LearningLog__upand__runningon__Platform.sh.Making__a Platform.shAccount__Tomake__an account,go__to https://platform.shand__clickthe__FreeTrial__button. Platform.shhas__afree__tier that,as__ofthis__writing,does__notrequire__acredit__card.The__trialperiod__allowsyou__todeploy__anapp__withminimal__resources,which__letsyou__testyour__projectin__alive__deploymentbefore__committingto__apaid__hosting plan. 446Chapter__20NOTE__Thespecific__limitsof__trialplans__tendto__change periodically,as__hostingplatforms__fightspam__andabuse__of resources.You__cansee__thecurrent__limitsof__thefree__trialat__https://platform.sh/free-trial.Installing__the Platform.shCLI__Todeploy__andmanage__aproject__on Platform.sh,you__llneed__thetools__available__inthe__CommandLine__Interface (CLI).To__installthe__latestversion__ofthe__CLI,visit__https://docs.platform.sh/development/cli.htmland__followthe__instructionsfor__youroperating__system.On__most systems,you__caninstall__theCLI__byrunning__thefollowing__command__ina__terminal: $curl__-fsS https://platform.sh/cli/installer |php__Afterthis__commandhas__finished running,you__willneed__toopen__anew__terminalwindow__beforeyou__canuse__the CLI.NOTE__Thiscommand__willprobably__notwork__ina__standardterminal__on Windows.You__canuse__WindowsSubsystem__forLinux__(WSL)or__aGit__Bash terminal.If__youneed__toinstall__PHP,you__canuse__theXAMPP__installerfrom__https://apachefriends.org.If__youhave__anydifficulty__installingthe__Platform.sh CLI,see__themore__detailedinstalla__tioninstructions__inAppendix__E.Installing__platformshconfigYou__llalso__needto__installone__additional package, platformshconfig.This__packagehelps__detectwhether__theproject__isrunning__onyour__localsystem__oron__a Platform.sh server.In__anactive__virtual environment,issue__thefollow__ing command: (ll_env)learning_log$pip__installplatformshconfig__Well__usethis__packageto__modifythe__projects__settingswhen__its__runningon__thelive__server.Creating__a requirements.txtFile__Theremote__serverneeds__toknow__whichpackages__LearningLog__depends on,so__well__usepip__togenerate__afile__listing them. Again,from__anactive__virtual__environment,issue__thefollowing__command: (ll_env)learning_log$pip__freeze > requirements.txtThe__freezecommand__tellspip__towrite__thenames__ofall__thepackages__currentlyinstalled__inthe__projectinto__thefile__requirements.txt.Open__thisfile__tosee__thepackages__andversion__numbersinstalled__inyour__project: requirements.txt asgiref==3.5.2 beautifulsoup4==4.11.1 Django==4.1Styling__andDeploying__anApp__447 django-bootstrap5==21.3 platformshconfig==2.4.0 soupsieve==2.3.2.post1 sqlparse==0.4.2Learning__Logalready__dependson__specificversions__ofseven__different__packages,so__itrequires__amatching__environmentto__runproperly__ona__remote server. (Weinstalled__threeof__thesepackages__manually,and__fourof__themwere__installedautomatically__asdependencies__ofthese__packages.)When__wedeploy__Learning Log, Platform.shwill__installall__thepackages__listedin__requirements.txt,creating__anenvironment__withthe__samepackages__were__using locally.Because__of this,we__canbe__confidentthe__deployedproject__willfunction__justlike__ithas__onour__local system.This__approachto__managinga__projectis__criticalas__youstart__tobuild__andmaintain__multipleprojects__onyour__system.NOTE__Ifthe__versionnumber__fora__packagelisted__onyour__systemdiffers__fromwhat__sshown__here,keep__theversion__youhave__onyour__system.Additional__DeploymentRequirements__Thelive__serverrequires__twoadditional__packages.These__packagesare__usedto__servethe__projectin__aproduction__environment,where__manyusers__canbe__makingrequests__atthe__same time.In__thesame__directorywhere__requirements.txtis__saved,make__anew__filecalled__requirements_remote.txt.Add__thefollowing__twopackages__to it:requirements___remote.txt #Requirements__forlive__project.gunicorn__psycopg2The__gunicornpackage__respondsto__requestsas__theycome__into__theremote__server;this__takesthe__placeof__thedevelopment__serverwe__vebeen__using locally.The__psycopg2package__isrequired__tolet__Djangomanage__thePostgres__databasethat__Platform.sh uses.Postgres__isan__opensource__databasethat__sextremely__wellsuited__toproduction__apps.Adding__ConfigurationFiles__Everyhosting__platformrequires__someconfiguration__fora__projectto__runcorrectly__onits__servers.In__this section,we__lladd__threeconfiguration__files: .platform.app.yamlThis__isthe__mainconfiguration__filefor__the project.This__tells Platform.shwhat__kindof__projectwe__retrying__todeploy__andwhat__kindsof__resourcesour__project needs,and__itincludes__commandsfor__buildingthe__projecton__the server. .platform/routes.yamlThis__filedefines__theroutes__toour__project.When__arequest__isreceived__by Platform.sh,this__isthe__configurationthat__helpsdirect__theserequests__toour__specific project. .platform/services.yamlThis__filedefines__anyadditional__servicesour__project needs. 448Chapter__20These__areall__YAML (YAMLAin__tMarkup__Language) files.YAML__isa__languagedesigned__forwriting__configuration files;it__smade__tobe__readeasily__byboth__humansand__computers.You__canwrite__ormodify__atypical__YAMLfile__by hand,but__acomputer__canalso__readand__interpretthe__file unambiguously.YAML__filesare__greatfor__deployment configuration,because__theygive__youa__gooddeal__ofcontrol__overwhat__happensduring__thedeployment__process.Making__HiddenFiles__VisibleMost__operatingsystems__hidefiles__andfolders__thatbegin__witha__dot,such__as .platform.When__youopen__afile__browser,you__wont__seethese__kindsof__filesand__foldersby__default.But__asa__programmer,you__llneed__tosee__them.Here__show__toview__hidden files,depending__onyour__operating system:On__Windows,open__Windows Explorer,and__thenopen__afolder__suchas__Desktop.Click__theView__tab,and__makesure__Filename__extensionsand__Hiddenitems__are checked.On__macOS,you__canpress__-SHIFT-. (dot)in__anyFinder__windowto__seehidden__filesand__folders.On__Linuxsystems__suchas__Ubuntu,you__canpress__CTRL-Hin__anyfile__browserto__displayhidden__filesand__folders.To__makethis__settingper__manent,open__afile__browsersuch__asNautilus__andclick__theoptions__tab (indicatedby__three lines).Select__theShow__HiddenFiles__checkbox.The__.platform.app.yamlConfiguration__FileThe__firstconfiguration__fileis__the longest,because__itcontrols__theoverall__deployment process.We__llshow__itin__parts;you__caneither__enterit__byhand__inyour__texteditor__ordownload__acopy__fromthe__onlineresources__at https:// ehmatthes.github.io/pcc_3e.Here__sthe__firstpart__of .platform.app.yaml,which__shouldbe__savedin__thesame__directoryas__manage.py: .platform .app.yaml 1 name: "ll_project" type: "python:3.10" 2 relationships: database: "db:postgresql" #The__configurationof__theapp__when it'sexposed__tothe__web. 3 web: upstream: socket_family:unix__commands: 4 start: "gunicorn -w 4 -b unix:$SOCKET ll_project.wsgi:application" 5 locations: "/": passthru:true__"/static":Styling__andDeploying__anApp__449 root: "static" expires: 1h allow:true__#The__sizeof__thepersistent__diskof__theapplication__(in MB). 6 disk: 512When__yousave__this file,make__sureyou__includethe__dotat__thebeginning__ofthe__filename.If__youomit__the dot, Platform.shwon__tfind__thefile__andyour__projectwill__notbe__deployed.You__dont__needto__understandeverything__in .platform.app.yamlat__this point;I__llhighlight__themost__importantparts__ofthe__configuration.The__filestarts__offby__specifyingthe__nameof__the project,which__were__calling 'll_project'to__beconsistent__withthe__namewe__usedwhen__startingthe__project 1.We__alsoneed__tospecify__theversion__ofPython__were__using (3.10at__thetime__ofthis__writing).You__canfind__alist__ofsupported__versionsat__https://docs.platform.sh/ languages/python.html.Next__isa__sectionlabeled__relationshipsthat__definesother__servicesthe__project__needs 2.Here__theonly__relationshipis__toa__Postgres database.After__thatis__theweb__section 3.The__commands:startsection__tells Platform.shwhat__processto__useto__serveincoming__requests.Here__were__specifyingthat__gunicornwill__handlerequests__4.This__commandtakes__theplace__ofthe__python manage.pyrunserver__commandwe__vebeen__using locally.The__locationssection__tells Platform.shwhere__tosend__incomingrequests__5.Most__requestsshould__bepassed__throughto__gunicorn;our__urls.pyfiles__willtell__gunicornexactly__howto__handlethose__requests.Requests__forstatic__fileswill__behandled__separatelyand__willbe__refreshedonce__an hour.The__lastline__showsthat__were__requesting 512MBof__diskspace__onone__of Platform.shs__servers 6.The__restof__.platform.app.yamlis__as follows: --snip-- disk: 512 #Set__alocal__read/writemount__for logs. 1 mounts: "logs": source:local__source_path:logs__#The__hooksexecuted__atvarious__pointsin__thelifecycle__ofthe__application. 2 hooks: build: | 3pip__install --upgradepip__pipinstall__-r requirements.txtpip__install -r requirements_remote.txtmkdir__logs 4python__manage.pycollectstatic__rm -rflogs__5 deploy: |python__manage.pymigrate__450Chapter__20The__mountssection__1lets__usdefine__directorieswhere__wecan__readand__writedata__whilethe__projectis__running.This__sectiondefines__a logs/directory__forthe__deployed project.The__hookssection__2defines__actionsthat__aretaken__atvarious__pointsduring__thedeployment__process.In__thebuild__section,we__installall__thepack__agesthat__arerequired__toserve__theproject__inthe__liveenvironment__3.We__alsorun__collectstatic 4,which__collectsall__thestatic__filesneeded__forthe__projectinto__oneplace__sothey__canbe__served efficiently. Finally,in__thedeploy__section 5,we__specifythat__migrationsshould__berun__eachtime__theproject__is deployed.In__asimple__project,this__willhave__noeffect__whenthere__havebeen__no changes.The__othertwo__configurationfiles__aremuch__shorter;let__swrite__them now.The__routes.yamlConfiguration__FileA__routeis__thepath__arequest__takesas__its__processedby__the server.When__arequest__isreceived__by Platform.sh,it__needsto__knowwhere__tosend__the request.Make__anew__foldercalled__.platform,in__thesame__directoryas__manage.py.Make__sureyou__includethe__dotat__thebeginning__ofthe__name.Inside__that folder,make__afile__called routes.yamland__enterthe__following: .platform/ routes.yaml #Each__routedescribes__howan__incomingURL__willbe__processedby__Platform.sh. "https://{default}/": type:upstream__upstream: "ll_project:http" "https://www.{default}/": type:redirect__to: "https://{default}/"This__filemakes__surerequests__like https://project_url.comand__www.project _url.comall__getrouted__tothe__same place.The__services.yamlConfiguration__FileThis__lastconfiguration__filespecifies__servicesthat__ourproject__needsin__orderto__run.Save__thisfile__inthe__.platform/ directory,alongside__routes.yaml: .platform/ routes.yaml #Each__servicelisted__willbe__deployedin__itsown__containeras__partof__your # Platform.sh project. db: type: postgresql:12 disk: 1024This__filedefines__one service,a__Postgres database.Styling__andDeploying__anApp__451Modifying__settings.pyfor__Platform.shNow__weneed__toadd__asection__atthe__endof__settings.pyto__modifysome__settingsfor__the Platform.sh environment.Add__thiscode__tothe__veryend__of settings.py: settings.py --snip-- # Platform.sh settings. 1from__platformshconfigimport__Configconfig__= Config() 2if__config.is_valid_platform(): 3 ALLOWED_HOSTS.append('.platformsh.site') 4if__config.appDir:STATIC_ROOT__= Path(config.appDir) / 'static' 5if__config.projectEntropy:SECRET_KEY__= config.projectEntropyif__not config.in_build(): 6db_settings__= config.credentials('database')DATABASES__= { 'default': { 'ENGINE': 'django.db.backends.postgresql', 'NAME': db_settings['path'], 'USER': db_settings['username'], 'PASSWORD': db_settings['password'], 'HOST': db_settings['host'], 'PORT': db_settings['port'], }, }We__normallyplace__importstatements__atthe__beginningof__a module,but__inthis__case,it__shelpful__tokeep__allthe__remote-specificsettings__inone__sec tion.Here__weimport__Configfrom__platformshconfig 1,which__helpsdetermine__settingson__theremote__server.We__onlymodify__settingsif__themethod__config .is_valid_platform()returns__True 2,indicating__thesettings__arebeing__usedon__a Platform.sh server.We__modifyALLOWED_HOSTS__toallow__theproject__tobe__servedby__hostsend__ingin__.platformsh.site 3.All__projectsdeployed__tothe__freetier__willbe__servedusing__this host.If__settingsare__beingloaded__inthe__deployedapp__sdirec__tory 4,we__setSTATIC_ROOT__sothat__staticfiles__areserved__correctly.We__alsoset__amore__secureSECRET_KEY__onthe__remoteserver__5. Finally,we__configurethe__productiondatabase__6.This__isonly__setif__thebuild__processhas__finishedrunning__andthe__projectis__being served.Everything__yousee__hereis__necessaryto__letDjango__talkto__thePostgres__serverthat__Platform.shset__upfor__the project.Using__Gitto__Trackthe__Projects__FilesAs__discussedin__Chapter 17,Git__isa__versioncontrol__programthat__allowsyou__totake__asnapshot__ofthe__codein__yourproject__eachtime__youimplement__anew__feature successfully.If__anythinggoes__wrong,you__caneasily__returnto__452Chapter__20the__lastworking__snapshotof__your project;for__example,if__youaccidentally__introducea__bugwhile__workingon__anew__feature.Each__snapshotis__calleda__commit.Using__Git,you__cantry__implementingnew__featureswithout__worryingabout__breakingyour__project.When__youre__deployingto__alive__server,you__needto__makesure__youre__deployinga__workingversion__ofyour__project.To__readmore__aboutGit__andversion__control,see__Appendix D.Installing__GitGit__mayalready__beinstalled__onyour__system.To__find out,open__anew__terminal__windowand__issuethe__commandgit__--version: (ll_env)learning_log$git__--versiongit__version 2.30.1 (Apple Git-130)If__youget__amessage__indicatingthat__Gitis__not installed,see__theinstalla__tioninstructions__inAppendix__D.Configuring__GitGit__keepstrack__ofwho__makeschanges__toa__project,even__whenonly__oneper__sonis__workingon__the project.To__do this,Git__needsto__knowyour__usernameand__email.You__mustprovide__a username,but__youcan__makeup__anemail__foryour__practice projects: (ll_env)learning_log$git__config --global user.name "eric" (ll_env)learning_log$git__config --global user.email "eric@example.com"If__youforget__this step,Git__willprompt__youfor__thisinformation__whenyou__makeyour__first commit.Ignoring__FilesWe__dont__needGit__totrack__everyfile__inthe__project,so__well__tellit__toignore__some files.Create__afile__called .gitignorein__thefolder__thatcontains__manage.py.Notice__thatthis__filenamebegins__witha__dotand__hasno__file extension.Here__sthe__codethat__goesin__.gitignore: .gitignore ll_env/ __pycache__/ *.sqlite3We__tellGit__toignore__theentire__ll_env directory,because__wecan__re-createit__automaticallyat__any time.We__alsodon__ttrack__the__pycache____directory,which__containsthe__.pycfiles__thatare__createdautomatically__whenthe__.pyfiles__are executed.We__dont__trackchanges__tothe__local database,because__its__abad__habit:if__youre__everusing__SQLiteon__a server,you__mightaccidentally__overwritethe__livedatabase__withyour__localtest__databasewhen__youpush__theproject__tothe__server.The__asteriskin__*.sqlite3tells__Gitto__ignoreany__filethat__endswith__theextension__.sqlite3.Styling__andDeploying__anApp__453NOTE__Ifyou__reusing__macOS,add__.DS_Storeto__your .gitignore file.This__isa__filethat__storesinformation__aboutfolder__settingson__macOS,and__ithas__nothingto__dowith__this project.Committing__theProject__Weneed__toinitialize__aGit__repositoryfor__Learning Log,add__allthe__necessary__filesto__the repository,and__committhe__initialstate__ofthe__project.Here__show__todo__that: 1 (ll_env)learning_log$git__initInitialized__emptyGit__repositoryin__/Users/eric/.../learning_log/.git/ 2 (ll_env)learning_log$git__add . 3 (ll_env)learning_log$git__commit -am "Readyfor__deploymentto__Platform.sh." [main (root-commit) c7ffaad]Ready__fordeployment__to Platform.sh. 42files__changed, 879 insertions(+)create__mode 100644 .gitignorecreate__mode 100644 .platform.app.yaml --snip--create__mode 100644 requirements_remote.txt 4 (ll_env)learning_log$git__statusOn__branchmain__nothingto__commit,working__treeclean__(ll_env)learning_log$We__issuethe__gitinit__commandto__initializean__emptyrepository__inthe__directorycontaining__LearningLog__1.We__thenuse__thegit__add . command,which__addsall__thefiles__thataren__tbeing__ignoredto__therepository__2. (Dont__forgetthe__dot.) Next,we__issuethe__commandgit__commit -am "commit message":the__-aflag__tellsGit__toinclude__allchanged__filesin__this commit,and__the -mflag__tellsGit__torecord__alog__message 3.Issuing__thegit__statuscommand__4indicates__thatwe__reon__themain__branchand__thatour__workingtree__is clean.This__isthe__statusyou__llwant__tosee__anytimeyou__pushyour__projectto__aremote__server.Creating__aProject__on Platform.shAt__this point,the__LearningLog__projectstill__runson__ourlocal__systemand__isalso__configuredto__runcorrectly__ona__remote server.We__lluse__the Platform.shCLI__tocreate__anew__projecton__theserver__andthen__pushour__projectto__theremote__server.Make__sureyou__rein__a terminal,at__the learning_log/ directory,and__issuethe__following command: (ll_env)learning_log$platform__loginOpened__URL: http://127.0.0.1:5000Please__usethe__browserto__log in. --snip-- 1Do__youwant__tocreate__anSSH__configurationfile__automatically? [Y/n]Y__454Chapter__20This__commandwill__opena__browsertab__whereyou__canlog__in.Once__youre__logged in,you__canclose__thebrowser__taband__returnto__the terminal.If__youre__promptedabout__creatingan__SSHconfiguration__file 1,enter__Yso__youcan__connectto__theremote__server later.Now__well__createa__project.There__sa__lotof__output,so__well__lookat__thecreation__processin__sections.Start__byissuing__thecreate__command: (ll_env)learning_log$platform__create *Project__title (--title) Default:Untitled__Project 1 >ll_project__*Region__(--region)The__regionwhere__theproject__willbe__hosted --snip-- [us-3.platform.sh]Moses__Lake,United__States (AZURE) [514 gC02eq/kWh] 2 > us-3.platform.sh *Plan__(--plan) Default:development__Entera__numberto__choose: [0]development__--snip-- 3 > 0 *Environments__(--environments)The__numberof__environments Default: 3 4 > 3 *Storage__(--storage)The__amountof__storageper__environment,in__GiB Default: 5 5 > 5The__firstprompt__asksfor__aname__forthe__project 1,so__weuse__thename__ll_project.The__nextprompt__askswhich__regionwe__dlike__theserver__tobe__in 2.Choose__theserver__closestto__you;for__me,that__s us-3.platform.sh.For__therest__ofthe__prompts,you__canaccept__the defaults:a__serveron__thelowest__developmentplan__3,three__environmentsfor__theproject__4,and__5GBof__storagefor__theoverall__project 5.There__arethree__moreprompts__torespond__to:Default__branch (--default-branch)The__defaultGit__branchname__forthe__project (theproduction__environment) Default:main__1 >main__Gitrepository__detected: /Users/eric/.../learning_log 2Set__thenew__projectll_project__asthe__remotefor__this repository? [Y/n]Y__Theestimated__monthlycost__ofthis__project is: $10USD__3Are__yousure__youwant__to continue? [Y/n]Y__Stylingand__Deployingan__App 455The__Platform.shBot__isactivating__yourproject__Theproject__isnow__ready!A__Gitrepository__canhave__multiple branches; Platform.shis__askingus__ifthe__defaultbranch__forthe__projectshould__bemain__1.It__thenasks__ifwe__wantto__connectthe__localproject__srepository__tothe__remoterepository__2. Finally,we__reinformed__thatthis__projectwill__costabout__$10per__monthif__wekeep__itrunning__beyondthe__freetrial__period 3.If__youhaven__tentered__acredit__card yet,you__shouldnt__haveto__worryabout__this cost. Platform.shwill__simplysuspend__yourproject__ifyou__exceedthe__freetrial__slimits__withoutadding__acredit__card.Pushing__to Platform.shThe__laststep__beforeseeing__thelive__versionof__theproject__isto__pushour__codeto__theremote__server.To__do that,issue__thefollowing__command: (ll_env)learning_log$platform__push 1Are__yousure__youwant__topush__tothe__main (production) branch? [Y/n]Y__--snip--The__authenticityof__host 'git.us-3.platform.sh (...)' can'tbe__established.RSA__keyfingerprint__is SHA256:Tvn...7PM 2Are__yousure__youwant__tocontinue__connecting (yes/no/[fingerprint])?Y__PushingHEAD__tothe__existingenvironment__main --snip--To__git.us-3.platform.sh:3pp3mqcexhlvy.git * [new branch]HEAD__->main__Whenyou__issuethe__commandplatform__push,you__llbe__askedfor__onemore__confirmationthat__youwant__topush__theproject__1.You__mayalso__seea__messageabout__theauthenticity__of Platform.sh,if__thisis__yourfirst__timecon__nectingto__thesite__2.Enter__Yfor__eachof__these prompts,and__youll__seea__bunchof__outputscroll__by.This__outputwill__probablylook__confusingat__first,but__ifanything__goes wrong,it__sreally__usefulto__haveduring__troubleshooting.If__youskim__throughthe__output,you__cansee__where Platform.shinstalls__necessary__packages,collects__static files,applies__migrations,and__setsup__URLsfor__the project.NOTE__Youmay__seean__errorfrom__somethingthat__youcan__easily diagnose,such__asa__typoin__oneof__theconfiguration__files.If__this happens,fix__theerror__inyour__text editor,save__the file,and__reissuethe__gitcommit__command.Then__youcan__runplatform__push again. 456Chapter__20Viewing__theLive__ProjectOnce__thepush__is complete,you__canopen__the project: (ll_env)learning_log$platform__urlEnter__anumber__toopen__aURL__[0] https://main-bvxea6i-wmye2fx7wwqgu.us-3.platformsh.site/ --snip-- > 0The__platformurl__commandlists__theURLs__associatedwith__adeployed__project;you__llbe__givena__choiceof__severalURLs__thatare__allvalid__foryour__project.Choose__one,and__yourproject__shouldopen__ina__newbrowser__tab!This__willlook__justlike__theproject__weve__beenrunning__locally,but__youcan__sharethis__URLwith__anyonein__the world,and__theycan__accessand__useyour__project.NOTE__Whenyou__deployyour__projectusing__atrial__account,don__tbe__surprisedif__itsometimes__takeslonger__thanusual__fora__pageto__load.On__mosthosting__platforms,free__resourcesthat__areidle__areoften__suspendedand__onlyrestarted__whennew__requestscome__in.Most__platformsare__muchmore__responsiveon__paidhosting__plans.Refining__the Platform.shDeployment__Nowwe__llrefine__thedeployment__bycreating__a superuser,just__aswe__did locally.We__llalso__makethe__projectmore__secureby__changingthe__settingDEBUG__to False,so__errormessages__wont__showusers__anyextra__informationthat__theycould__useto__attackthe__server.Creating__aSuperuser__on Platform.shThe__databasefor__thelive__projecthas__beenset__up,but__its__completely empty.All__theusers__wecreated__earlieronly__existin__ourlocal__versionof__the project.To__createa__superuseron__thelive__versionof__the project,we__llstart__anSSH__(securesocket__shell)session__wherewe__canrun__managementcom__mandson__theremote__server: (ll_env)learning_log$platform__environment:ssh______________|___\ |__ _| |_ / _|____________ __| |_ | _/ / _` | _| _/___\ '_| ' \ _(_-< ' \ |_| |_\__,_|\__|_| \___/_| |_|_|_(_)__/_||_|Welcome__to Platform.sh. 1 web@ll_project.0:~$ls__accountslearning_logs__ll_projectlogs__manage.py requirements.txt requirements_remote.txtstatic__2 web@ll_project.0:~$python__manage.pycreatesuperuser__3Username__(leaveblank__touse__'web'):ll_admin_live__Email address:Styling__andDeploying__anApp__457 Password:Password__(again):Superuser__created successfully. 4 web@ll_project.0:~$exit__logoutConnection__to ssh.us-3.platform.sh closed. 5 (ll_env)learning_log$When__youfirst__runthe__platform environment:ssh command,you__mayget__anotherprompt__aboutthe__authenticityof__this host.If__yousee__this message,enter__Yand__youshould__belogged__into__aremote__terminal session.After__runningthe__ssh command,your__terminalacts__justlike__aterminal__onthe__remote server.Note__thatyour__prompthas__changedto__indicatethat__youre__ina__websession__associatedwith__theproject__namedll_project__1.If__youissue__thels__command,you__llsee__thefiles__thathave__beenpushed__tothe__Platform.sh server.Issue__thesame__createsuperusercommand__weused__inChapter__18 2.This__time,I__enteredan__admin username, ll_admin_live,that__sdistinct__fromthe__oneI__usedlocally__3.When__youre__finishedworking__inthe__remoteterminal__session,enter__theexit__command 4.Your__promptwill__indicatethat__youre__workingin__yourlocal__systemagain__5.Now__youcan__add /admin/to__theend__ofthe__URLfor__thelive__appand__login__tothe__admin site.If__othershave__alreadystarted__usingyour__project,be__awarethat__youll__haveaccess__toall__their data!Take__thisresponsibility__seri ously,and__userswill__continueto__trustyou__withtheir__data.NOTE__Windowsusers__willuse__thesame__commandsshown__here (suchas__lsinstead__of dir),because__youre__runninga__Linuxterminal__througha__remote connection.Securing__theLive__ProjectThere__sone__glaringsecurity__issuein__theway__ourproject__iscurrently__deployed:the__settingDEBUG__=True__in settings.py,which__providesdebug__messageswhen__errors occur.Django__serror__pagesgive__youvital__debugginginformation__whenyou__redeveloping__a project; however,they__giveway__toomuch__informationto__attackersif__youleave__themenabled__ona__live server.To__seehow__badthis__is,go__tothe__homepage__ofyour__deployed project.Log__into__auser__saccount__andadd__/topics/999/to__theend__ofthe__homepage__URL.Assuming__youhaven__tmade__thousandsof__topics,you__shouldsee__apage__withthe__messageDoesNotExist__at /topics/999/.If__youscroll__down,you__shouldsee__awhole__bunchof__informationabout__theproject__andthe__server.You__wont__wantyour__usersto__see this,and__youcertainly__wouldnt__wantthis__informationavailable__toanyone__interestedin__attackingthe__site.We__canprevent__thisinformation__frombeing__shownon__thelive__siteby__settingDEBUG__=False__inthe__partof__settings.pythat__onlyapplies__tothe__deployedversion__ofthe__project.This__wayyou__llcontinue__tosee__debugginginformation__locally,where__thatinformation__is useful,but__itwon__tshow__upon__thelive__site. 458Chapter__20Open__settings.pyin__yourtext__editor,and__addone__lineof__codeto__thepart__thatmodifies__settingsfor__Platform.sh: settings.py --snip--if__config.is_valid_platform(): ALLOWED_HOSTS.append('.platformsh.site')DEBUG__=False__--snip--All__thework__toset__upconfiguration__forthe__deployedversion__ofthe__projecthas__paid off.When__wewant__toadjust__thelive__versionof__the project,we__justchange__therelevant__partof__theconfiguration__weset__up earlier.Committing__andPushing__ChangesNow__weneed__tocommit__thechanges__madeto__settings.pyand__pushthe__changesto__Platform.sh.Here__sa__terminalsession__showingthe__firstpart__ofthis__process: 1 (ll_env)learning_log$git__commit -am "SetDEBUG__Falseon__live site." [main d2ad0f7]Set__DEBUGFalse__onlive__site. 1file__changed, 1 insertion(+) 2 (ll_env)learning_log$git__statusOn__branchmain__nothingto__commit,working__treeclean__(ll_env)learning_log$We__issuethe__gitcommit__commandwith__ashort__butdescriptive__commitmessage__1.Remember__the -amflag__makessure__Gitcommits__allthe__filesthat__havechanged__andrecords__thelog__message.Git__recognizesthat__onefile__haschanged__andcommits__thischange__tothe__repository.Running__gitstatus__showsthat__were__workingon__themain__branchof__therepository__andthat__thereare__nowno__newchanges__tocommit__2.It__simpor__tantto__checkthe__statusbefore__pushingto__aremote__server.If__youdon__tsee__aclean__status,then__somechanges__havent__beencommitted__andthose__changeswon__tbe__pushedto__the server.You__cantry__issuingthe__commitcommand__again;if__youre__notsure__howto__resolvethe__issue,read__throughAppendix__Dto__betterunderstand__howto__workwith__Git.Now__lets__pushthe__updatedrepository__to Platform.sh: (ll_env)learning_log$platform__pushAre__yousure__youwant__topush__tothe__main (production) branch? [Y/n]Y__PushingHEAD__tothe__existingenvironment__main --snip--To__git.us-3.platform.sh:wmye2fx7wwqgu.git fce0206..d2ad0f7HEAD__->main__(ll_env)learning_log$ Platform.shrecognizes__thatthe__repositoryhas__been updated,and__itrebuilds__theproject__tomake__sureall__thechanges__havebeen__takeninto__account.It__doesnt__rebuildthe__database,so__wehaven__tlost__any data.Styling__andDeploying__anApp__459To__makesure__thischange__took effect,visit__the /topics/999/URL__again.You__shouldsee__justthe__messageServer__Error (500),with__nosensitive__information__aboutthe__projectat__all.Creating__CustomError__PagesIn__Chapter 19,we__configuredLearning__Logto__returna__404error__ifthe__userrequests__atopic__orentry__thatdoesn__tbelong__to them.Now__youve__seena__500server__erroras__well.A__404error__usuallymeans__yourDjango__codeis__correct,but__theobject__beingrequested__doesnt__exist.A__500error__usually__meansthere__san__errorin__thecode__youve__written,such__asan__errorin__afunction__in views.py.Django__currentlyreturns__thesame__genericerror__pagein__both situations,but__wecan__writeour__own 404and__500error__pagetemplates__thatmatch__LearningLog__soverall__appearance.These__templatesbelong__inthe__roottemplate__directory.Making__CustomTemplates__Inthe__learning_log folder,make__anew__foldercalled__templates.Then__makea__newfile__called 404.html;the__pathto__thisfile__shouldbe__learning_log/ templates/404.html.Here__sthe__codefor__this file: 404.html {%extends__"learning_logs/base.html" %} {%block__page_header %}The__itemyou__requestedis__not available. (404) {%endblock__page_header %}This__simpletemplate__providesthe__generic 404error__pageinformation__butis__styledto__matchthe__restof__the site.Make__anotherfile__called 500.htmlusing__thefollowing__code: 500.html {%extends__"learning_logs/base.html" %} {%block__page_header %}There__hasbeen__aninternal__error. (500) {%endblock__page_header %}These__newfiles__requirea__slightchange__to settings.py. settings.py --snip--TEMPLATES__= [ { 'BACKEND': 'django.template.backends.django.DjangoTemplates', 'DIRS': [BASE_DIR / 'templates'], 'APP_DIRS': True, --snip-- }, ] --snip-- 460Chapter__20This__changetells__Djangoto__lookin__theroot__templatedirectory__forthe__errorpage__templatesand__anyother__templatesthat__arent__associatedwith__aparticular__app.Pushing__theChanges__to Platform.shNow__weneed__tocommit__thechanges__wejust__madeand__pushthem__to Platform.sh: 1 (ll_env)learning_log$git__add . 2 (ll_env)learning_log$git__commit -am "Addedcustom__404and__500error__pages." 3files__changed, 11 insertions(+), 1 deletion(-)create__mode 100644 templates/404.htmlcreate__mode 100644 templates/500.html 3 (ll_env)learning_log$platform__push --snip--To__git.us-3.platform.sh:wmye2fx7wwqgu.git d2ad0f7..9f042efHEAD__->main__(ll_env)learning_log$We__issuethe__gitadd__.command__1because__wecreated__somenew__filesin__the project.Then__wecommit__thechanges__2and__pushthe__updatedproj__ectto__Platform.sh 3.Now__whenan__errorpage__appears,it__shouldhave__thesame__stylingas__therest__ofthe__site,making__fora__smootheruser__experiencewhen__errors arise.Ongoing__DevelopmentYou__mightwant__tofurther__developLearning__Logafter__yourinitial__pushto__alive__server,or__youmight__wantto__developyour__ownprojects__to deploy.When__doing so,there__sa__fairlyconsistent__processfor__updatingyour__projects. First,you__llmake__thenecessary__changesto__yourlocal__project.If__yourchanges__resultin__anynew__files,add__thosefiles__tothe__Gitrepository__usingthe__commandgit__add . (makingsure__toinclude__thedot__atthe__endof__the command).Any__changethat__requiresa__databasemigration__willneed__this command,because__eachmigration__generatesa__newmigration__file. Second,commit__thechanges__toyour__repositoryusing__gitcommit__-am "commit message".Then__pushyour__changesto__Platform.sh,using__thecom__mandplatform__push.Visit__yourlive__projectand__makesure__thechanges__youexpect__tosee__havetaken__effect.It__seasy__tomake__mistakesduring__this process,so__dont__besurprised__whensomething__goes wrong.If__thecode__doesnt__work,review__whatyou__vedone__andtry__tospot__the mistake.If__youcan__tfind__themistake__oryou__cant__figureout__howto__undo it,refer__tothe__suggestionsfor__gettinghelp__inAppendix__C.Don__tbe__shyabout__askingfor__help:everyone__elselearned__tobuild__projectsby__askingthe__samequestions__youre__likelyto__ask,so__someonewill__behappy__tohelp__you.Solving__eachproblem__thatarises__helpsyou__steadilydevelop__yourskills__untilyou__rebuilding__meaningful,reliable__projectsand__answeringother__peoples__questionsas__well.Styling__andDeploying__anApp__461Deleting__aProject__on Platform.shIt__sgreat__practiceto__runthrough__thedeployment__processa__numberof__timeswith__thesame__projector__witha__seriesof__small projects,to__getthe__hangof__deployment.But__youll__needto__knowhow__todelete__aproject__thats__been deployed. Platform.shalso__limitsthe__numberof__projectsyou__canhost__for free,and__youdon__twant__toclutter__youraccount__withpractice__projects.You__candelete__aproject__usingthe__CLI: (ll_env)learning_log$platform__project:deleteYou__llbe__askedto__confirmthat__youwant__totake__thisdestructive__action.Respond__tothe__prompts,and__yourproject__willbe__deleted.The__commandplatform__createalso__gavethe__localGit__repositorya__reference__tothe__remoterepository__on Platform.shs__servers.You__canremove__thisremote__fromthe__commandline__as well: (ll_env)learning_log$git__remoteplatform__(ll_env)learning_log$git__remoteremove__platformThe__commandgit__remotelists__thenames__ofall__remoteURLs__associatedwith__thecurrent__repository.The__commandgit__remoteremove__remote_namedeletes__theseremote__URLsfrom__thelocal__repository.You__canalso__deletea__projects__resourcesby__loggingin__tothe__Platform.shwebsite__andvisiting__yourdashboard__at https://console.platform.sh.This__pagelists__allyour__active projects.Click__thethree__dotsin__aproject__s box,and__clickEdit__Plan.This__isa__pricingpage__forthe__project;click__theDelete__Projectbutton__atthe__bottomof__the page,and__youll__beshown__aconfirmation__pagewhere__youcan__followthrough__withthe__deletion.Even__ifyou__deletedyour__projectusing__the CLI,it__sa__goodidea__tofamiliarize__yourselfwith__thedash__boardof__anyhosting__provideryou__deploy to.NOTE__Deletinga__projecton__Platform.shdoes__nothingto__yourlocal__versionof__the project.If__noone__hasused__yourdeployed__projectand__youre__justpracticing__thedeployment__process,it__sperfectly__reasonableto__deleteyour__projecton__Platform.shand__redeploy it.Just__beaware__thatif__thingsstop__working,you__mayhave__runinto__thehost__s free-tier limitations.TRY__ITYOURSELF__20-3.Live__Blog:Deploy__theBlog__projectyou__vebeen__workingon__to Platform.sh.Make__sureyou__setDEBUG__to False,so__usersdon__tsee__thefull__Djangoerror__pageswhen__somethinggoes__wrong. (continued) 462Chapter__20 20-4.Extended__Learning Log:Add__onefeature__toLearning__Log,and__pushthe__changeto__yourlive__deployment.Try__asimple__change,such__aswriting__moreabout__theproject__onthe__home page.Then__tryadding__amore__advanced feature,such__asgiving__usersthe__optionof__makinga__topic public.This__wouldrequire__anattribute__calledpublic__aspart__ofthe__Topicmodel__(thisshould__beset__toFalse__by default)and__aform__elementon__thenew_topic__pagethat__allowsthe__userto__changea__topicfrom__privateto__public.You__dthen__needto__migratethe__projectand__revise views.pyso__anytopic__thats__publicis__visibleto__unauthenticatedusers__as well.Summary__Inthis__chapter,you__learnedto__giveyour__projectsa__simplebut__professionalappearance__usingthe__Bootstraplibrary__andthe__django-bootstrap5 app.With__Bootstrap,the__stylesyou__choosewill__workconsistently__onalmost__anydevice__peopleuse__toaccess__your project.You__learnedabout__Bootstraps__templatesand__usedthe__Navbarstatic__template__tocreate__asimple__lookand__feelfor__Learning Log.You__useda__jumbotron__tomake__ahome__pages__messagestand__out,and__learnedto__styleall__thepages__ina__site consistently.In__thefinal__partof__the project,you__learnedhow__todeploy__aproject__toa__remoteserver__soanyone__canaccess__it.You__madea__Platform.shaccount__andinstalled__sometools__thathelp__managethe__deployment process.You__usedGit__tocommit__theworking__projectto__a repository,and__thenpushed__therepository__toa__remoteserver__on Platform.sh. Finally,you__learnedto__beginsecuring__yourapp__bysetting__DEBUG =False__onthe__live server.You__alsomade__customerror__pages,so__theinevitable__errorsthat__comeup__willlook__well-handled.Now__thatyou__vefinished__Learning Log,you__canstart__buildingyour__own projects.Start__simple,and__makesure__theproject__worksbefore__addingcom__plexity.Enjoy__yourcontinued__learning,and__goodluck__withyour__projects!A__INS__TAL__LAT__IONAND__TRO__UBL__ES__HOOTING__Thereare__manyversions__ofPython__available__andnumerous__waysto__setit__upon__eachoperating__system.If__theapproach__inChapter__1didn__t work,or__ifyou__wantto__installa__differentversion__ofPython__thanthe__onecurrently__installed,the__instructionsin__thisappendix__can help.Python__onWindows__Theinstructions__inChapter__1show__youhow__toinstall__Pythonusing__theofficial__installerat__https://python.org.If__youcouldn__tget__Pythonto__runafter__usingthe__installer,the__troubleshootinginstructions__inthis__sectionshould__helpyou__getPython__upand__running.Using__pyInstead__ofpython__Ifyou__runa__recentPython__installerand__thenissue__thecommand__pythonin__a terminal,you__shouldsee__thePython__promptfor__aterminal__session (>>>). 464Appendix__AWhen__Windowsdoesn__trecognize__thepython__command,it__willeither__openthe__MicrosoftStore__becauseit__thinksPython__isnt__installed,or__youll__geta__messagesuch__asPython__wasnot__found.If__theMicrosoft__Store opens,close__it;it__sbetter__touse__theofficial__Pythoninstaller__from https://python.orgthan__theone__thatMicrosoft__maintains.The__simplest solution,without__makingany__changesto__your system,is__totry__thepy__command.This__isa__Windowsutility__thatfinds__thelatest__versionof__Pythoninstalled__onyour__systemand__runsthat__interpreter.If__thiscommand__worksand__youwant__touse__it,simply__usepy__anywhereyou__seethe__pythonor__python3command__inthis__book.Rerunning__theInstaller__Themost__commonreason__pythondoesn__twork__isthat__peopleforget__toselect__theAdd__Pythonto__PATHoption__whenrunning__the installer;this__isan__easymistake__to make.The__PATHvariable__isa__systemsetting__thattells__Pythonwhere__tolook__forcommonly__used programs.In__this case,Windows__doesnt__knowhow__tofind__thePython__interpreter.The__simplestfix__inthis__situationis__torun__theinstaller__again.If__theres__anewer__installeravailable__from https://python.org,download__thenew__installerand__run it,making__sureto__checkthe__AddPython__toPATH__box.If__youalready__havethe__latest installer,run__itagain__andselect__theModify__option.You__llsee__alist__ofoptional__features;keep__thedefault__optionsselected__onthis__screen.Then__clickNext__andcheck__theAdd__Pythonto__EnvironmentVariables__box. Finally,click__Install.The__installerwill__recognizethat__Pythonis__already installed,and__itwill__addthe__locationof__thePython__interpreterto__thePATH__variable.Make__sureyou__closeany__open terminals,because__theyll__stillbe__usingthe__oldPATH__variable.Open__anew__terminalwindow__andissue__thecom__mandpython__again;you__shouldsee__aPython__prompt (>>>).Python__onmacOS__Theinstallation__instructionsin__Chapter 1use__theofficial__Pythoninstaller__at https://python.org.The__officialinstaller__hasbeen__workingwell__foryears__now,but__thereare__afew__thingsthat__canget__youoff__track.This__sectionwill__helpif__anythingisn__tworking__ina__straightforward manner.Accidentally__InstallingApple__sVersion__ofPython__Ifyou__runthe__python3command__andPython__isnot__yetinstalled__onyour__system,you__llmost__likelysee__amessage__thatthe__commandline__developertools__needto__be installed.The__bestapproach__atthis__pointis__toclose__the pop-upshowing__this message,download__thePython__installerfrom__https://python.org,and__runthe__installer.If__youchoose__toinstall__thecommand__linedeveloper__toolsat__this point,macOS__willinstall__Apples__versionof__Pythonalong__withthe__developer tools.The__onlyissue__withthis__isthat__Apples__versionof__Pythonis__usuallysome__whatbehind__thelatest__officialversion__of Python. However,you__canstill__downloadand__runthe__officialinstaller__from https://python.org,and__python3Installation__andTroubleshooting__465will__thenpoint__tothe__newer version.Don__tworry__abouthaving__thedevel__opertools__installed;there__aresome__usefultools__in there,including__theGit__versioncontrol__systemdiscussed__inAppendix__D.Python__2on__OlderVersions__ofmacOS__Onolder__versionsof__macOS,before__Monterey (macOS 12),an__outdatedver__sionof__Python 2was__installedby__default.On__these systems,the__commandpython__pointsto__theoutdated__system interpreter.If__youre__usinga__versionof__macOSwith__Python 2 installed,make__sureyou__usethe__python3 command,and__youll__alwaysbe__usingthe__versionof__Pythonyou__installed.Python__onLinux__Pythonis__includedby__defaulton__almostevery__Linux system. However,if__thedefault__versionon__yoursystem__isearlier__thanPython__3.9,you__shouldinstall__thelatest__version.You__canalso__installthe__latestversion__ifyou__wantthe__mostrecent__features,like__Pythons__improvederror__messages.The__followinginstruc__tionsshould__workfor__most apt-based systems.Using__theDefault__PythonInstallation__Ifyou__wantto__usethe__versionof__Pythonthat__python3points__to,make__sureyou__havethese__threeadditional__packages installed: $sudo__aptinstall__python3-dev python3-pip python3-venvThese__packagesinclude__toolsthat__areuseful__fordevelopers__andtools__thatlet__youinstall__third-party packages,like__theones__usedin__theprojects__sectionof__this book.Installing__theLatest__Versionof__PythonWe__lluse__apackage__called deadsnakes,which__makesit__easyto__installmultiple__versionsof__Python.Enter__thefollowing__commands: $sudo__add-apt-repository ppa:deadsnakes/ppa $sudo__aptupdate__$sudo__aptinstall__python3.11These__commandswill__installPython__3.11onto__your system.Enter__thefollowing__commandto__starta__terminalsession__thatruns__Python 3.11: $ python3.11 >>>Anywhere__yousee__thecommand__pythonin__this book,use__python3.11 instead.You__llalso__wantto__usethis__commandwhen__yourun__programsfrom__the terminal. 466Appendix__AYou__llneed__toinstall__twomore__packagesto__makethe__mostof__yourPython__installation: $sudo__aptinstall__python3.11-dev python3.11-venvThese__packagesinclude__modulesyou__llneed__wheninstalling__andrun__ning third-party packages,like__theones__usedin__theprojects__inthe__secondhalf__ofthe__book.NOTE__Thedeadsnakes__packagehas__beenactively__maintainedfor__along__time.When__newerversions__ofPython__come out,you__canuse__thesesame__commands,replacing__python3.11with__thelatest__versioncurrently__available.Checking__WhichVersion__ofPython__Youre__UsingIf__youre__havingany__issuesrunning__Pythonor__installingadditional__pack ages,it__canbe__helpfulto__knowexactly__whichversion__ofPython__youre__using.You__mayhave__multipleversions__ofPython__installedand__notbe__clearabout__whichversion__iscurrently__being used.Issue__thefollowing__commandin__a terminal: $python__--versionPython__3.11.0This__tellsyou__exactlywhich__versionthe__commandpython__iscurrently__pointing to.The__shortercommand__python -Vwill__givethe__same output.Python__Keywordsand__Built-inFunctions__Pythoncomes__withits__ownset__ofkeywords__and built-in functions.It__simpor__tantto__beaware__ofthese__whenyou__renaming__thingsin__Python:your__namescannot__bethe__sameas__thesekeywords__andshouldn__tbe__thesame__asthe__function names,or__youll__overwritethe__functions.In__this section,we__lllist__Pythons__keywordsand__built-infunction__names,so__youll__knowwhich__namesto__avoid.Python__KeywordsEach__ofthe__followingkeywords__hasa__specific meaning,and__youll__seean__errorif__youtry__touse__anyof__themas__avariable__name.False__awaitelse__importpass__Nonebreak__exceptin__raiseTrue__classfinally__isreturn__andcontinue__forlambda__tryas__deffrom__nonlocalwhile__assertdel__globalnot__withasync__elifif__oryield__Installationand__Troubleshooting 467Python__Built-inFunctions__Youwon__tget__anerror__ifyou__useone__ofthe__followingreadily__available built-in__functionsas__avariable__name,but__youll__overridethe__behaviorof__that function: abs() complex() hash() min() slice() aiter() delattr() help() next() sorted() all() dict() hex() object() staticmethod() any() dir() id() oct() str() anext() divmod() input() open() sum() ascii() enumerate() int() ord() super() bin() eval() isinstance() pow() tuple() bool() exec() issubclass() print() type() breakpoint() filter() iter() property() vars() bytearray() float() len() range() zip() bytes() format() list() repr() __import__() callable() frozenset() locals() reversed() chr() getattr() map() round() classmethod() globals() max() set() compile() hasattr() memoryview() setattr()B__TEXTE__DITOR__SA__NDIDE__SProgrammers__spenda__lotof__time writing, reading,and__editing code,and__usinga__texteditor__oran__IDE (integrateddevelopment__environment)to__makethis__workas__efficientas__possibleis__essential.A__goodeditor__willdo__simple tasks,like__highlightingyour__codes__structureso__youcan__catchcommon__bugsas__youre__working.But__itwon__tdo__somuch__thatit__distractsyou__fromyour__thinking.Editors__alsohave__usefulfea__tureslike__automatic indenting,markers__toshow__appropriateline__length,and__keyboardshortcuts__forcommon__operations.An__IDEis__atext__editorwith__anumber__ofother__tools included,like__interactive__debuggersand__code introspection.An__IDEexamines__yourcode__asyou__enterit__andtries__tolearn__aboutthe__projectyou__re building.For__example,when__youstart__typingthe__nameof__a function,an__IDEmight__showyou__allthe__argumentsthat__function accepts.This__behaviorcan__bevery__helpfulwhen__everythingworks__andyou__understandwhat__youre__seeing.But__itcan__470Appendix__Balso__beoverwhelming__asa__beginnerand__difficultto__troubleshootwhen__youaren__tsure__whyyour__codeisn__tworking__inthe__IDE.These__days,the__lineshave__blurredbetween__texteditors__and IDEs.Most__populareditors__havesome__featuresthat__usedto__beexclusive__to IDEs. Likewise,most__IDEscan__beconfigured__torun__ina__lightermode__thats__lessdistracting__asyou__work,but__letsyou__usethe__moreadvanced__featureswhen__youneed__them.If__youalready__havean__editoror__IDEinstalled__thatyou__like,and__ifit__salready__configuredto__workwith__arecent__versionof__Pythonthat__sinstalled__onyour__system,then__Iencourage__youto__stickwith__whatyou__already know.Exploring__differenteditors__canbe__fun,but__its__alsoa__wayto__avoidthe__workof__learninga__new language.If__youdon__talready__havean__editoror__IDE installed,I__recommendVS__Codefor__anumber__of reasons:It__s free,and__its__releasedunder__anopen__source license.It__canbe__installedon__allmajor__operating systems.It__s beginner-friendlybut__alsopowerful__enoughthat__manyprofessional__programmersuse__itas__theirmain__editor.It__findsthe__versionsof__Pythonyou__have installed,and__ittypically__doesnot__requireany__configurationto__runyour__first programs.It__hasan__integrated terminal,so__youroutput__appearsin__thesame__window__asyour__code.A__Pythonextension__isavailable__thatmakes__theeditor__highlyefficient__forwriting__andmaintaining__Python code.It__shighly__customizable,so__youcan__tuneit__tomatch__theway__youwork__with code.In__this appendix,you__lllearn__howto__startconfiguring__VSCode__sothat__itworks__wellfor__you.You__llalso__learnsome__shortcutsthat__letyou__workmore__efficiently.Being__afast__typistis__notas__importantas__manypeople__thinkin__programming,but__understandingyour__editorand__knowinghow__touse__itefficiently__isquite__helpful.With__allthat__said,VS__Codedoesn__twork__for everyone.If__itdoesn__twork__wellon__yoursystem__forsome__reason,or__ifit__sdistracting__youas__you work,there__area__numberof__othereditors__thatyou__mightfind__more appealing.This__appendixincludes__abrief__descriptionof__someof__theother__editorsand__IDEsyou__should consider.Working__Efficientlywith__VSCode__InChapter__1,you__installedVS__Codeand__addedthe__Pythonextension__as well.This__sectionwill__showyou__somefurther__configurationsyou__can make,plus__shortcutsfor__workingefficiently__withyour__code.Configuring__VSCode__Thereare__afew__waysto__changethe__defaultconfiguration__settingsfor__VS Code.Some__changescan__bemade__throughthe__interface,and__somewill__requireText__Editorsand__IDEs 471changes__inconfiguration__files.These__changeswill__sometimestake__effectfor__everythingyou__doin__VS Code,while__otherswill__affectonly__thefiles__withinthe__folderthat__containsthe__configuration file.For__example,if__youhave__aconfiguration__filein__yourpython_work__folder,those__settingswill__onlyaffect__thefiles__inthat__folder (andits__subfolders).This__isa__good feature,because__itmeans__youcan__have project-specificset__tingsthat__overrideyour__global settings.Using__Tabsand__SpacesIf__youuse__amix__oftabs__andspaces__inyour__code,it__cancause__problemsin__yourprograms__thatare__difficultto__diagnose.When__workingin__a .pyfile__withthe__Pythonextension__installed,VS__Codeis__configuredto__insertfour__spaceswhenever__youpress__theTAB__key.If__youre__writingonly__yourown__codeand__youhave__thePython__extension installed,you__lllikely__neverhave__anissue__withtabs__and spaces. However,your__installationof__VSCode__maynot__beconfigured__correctly. Also,at__some point,you__mayend__upworking__ona__filethat__hasonly__tabsor__amix__oftabs__and spaces.If__yoususpect__anyissue__withtabs__and spaces,look__atthe__statusbar__atthe__bottomof__theVS__Codewindow__andclick__eitherSpaces__orTab__Size.A__drop-downmenu__willappear__thatlets__youswitch__betweenusing__tabsand__using spaces.You__canalso__changethe__defaultindentation__leveland__convertall__indentationin__thefile__toeither__tabsor__spaces.If__youre__lookingat__somecode__andyou__renot__surewhether__theindenta__tionconsists__oftabs__or spaces,highlight__severallines__of code.This__willmake__theinvisible__whitespacecharacters__visible.Each__spacewill__showup__asa__dot,and__eachtab__willshow__upas__an arrow.NOTE__In programming,spaces__arepreferred__overtabs__becausespaces__canbe__interpretedunambiguously__byall__toolsthat__workwith__acode__file.The__widthof__tabscan__beinter__preteddifferently__bydifferent__tools,which__leadsto__errorsthat__canbe__extremelydifficult__to diagnose.Changing__theColor__ThemeVS__Codeuses__adark__themeby__default.If__youwant__tochange__this,click__File (Codein__themenu__baron__macOS),then__clickPreferences__andchoose__Color Theme.A__drop-downlist__will appear,and__itwill__letyou__choosea__themethat__workswell__for you.Setting__theLine__LengthIndicator__Mosteditors__allowyou__toset__upa__visual cue,usually__avertical__line,to__showwhere__yourlines__should end.In__thePython__community,the__conventionis__tolimit__linesto__79characters__or less.To__setthis__feature,click__Codeand__then Preferences,and__thenchoose__Settings.In__thedialog__that appears,enter__rulers.You__llsee__asetting__for 472Appendix__B Editor: Rulers;click__thelink__labeledEdit__in settings.json.In__thefile__that appears,add__thefollowing__tothe__editor.rulers setting: settings.json "editor.rulers": [ 80, ]This__willadd__avertical__linein__theediting__windowat__the 80-character position.You__canhave__morethan__onevertical__line;for__example,if__youwant__anadditional__lineat__120 characters,the__valuefor__yoursetting__wouldbe__[80, 120].If__youdon__tsee__thevertical__lines,make__sureyou__savedthe__settings file;you__mayalso__needto__quitand__reopenVS__Codefor__thechanges__totake__effecton__some systems.Simplifying__theOutput__By default,VS__Codeshows__theoutput__ofyour__programsin__anembedded__terminal window.This__outputincludes__thecommands__thatare__beingused__torun__the file.For__many situations,this__is ideal,but__itmight__bemore__distracting__thanyou__wantwhen__youre__firstlearning__Python.To__simplifythe__output,close__allthe__tabsthat__areopen__inVS__Codeand__thenquit__VS Code.Launch__VSCode__againand__openthe__folderthat__contains__thePython__filesyou__reworking__on;this__couldjust__bethe__python_workfolder__where hello_world.pyis__saved.Click__the Run/Debugicon__(whichlooks__likea__trianglewith__asmall__bug),and__thenclick__Createa__launch.json File.Select__thePython__optionsin__theprompts__that appear.In__the launch.jsonfile__that opens,make__thefollow__ing change: launch.json { --snip-- "configurations": [ { --snip-- "console": "internalConsole", "justMyCode":true__} ] } Here,we__rechanging__theconsole__settingfrom__integratedTerminalto__internalConsole.After__savingthe__settings file,open__a .pyfile__suchas__hello _world.py,and__runit__bypressing__CTRL-F5.In__theoutput__paneof__VS Code,click__DebugConsole__ifit__snot__already selected.You__shouldsee__onlyyour__programs__output,and__theoutput__shouldbe__refreshedevery__timeyou__runa__program.NOTE__TheDebug__Consoleis__read-only.It__wont__workfor__filesthat__usethe__input() function,which__youll__startusing__inChapter__7.When__youneed__torun__these programs,you__caneither__changethe__consolesetting__backto__thedefault__integratedTerminal,or__youcan__runthese__programsin__aseparate__terminalwindow__asdescribed__inRunning__PythonPrograms__froma__Terminalon__page 11.Text__Editorsand__IDEs 473Exploring__FurtherCustomizations__Youcan__customizeVS__Codein__manyways__tohelp__youwork__more efficiently.To__startexploring__thecustomizations__available,click__Codeand__then Preferences,and__thenchoose__Settings.You__llsee__alist__titledCommonly__Used;click__anyof__thesubheadings__tosee__somecommon__waysyou__canmodify__yourinstallation__ofVS__Code.Take__sometime__tosee__ifthere__areany__thatmake__VSCode__workbetter__for you,but__dont__getso__lostin__configuringyour__editorthat__youput__offlearning__howto__use Python!VS__CodeShortcuts__Alleditors__andIDEs__offerefficient__waysto__docommon__tasksthat__everyoneneeds__todo__whenwriting__andmaintaining__code.For__example,you__caneas__ilyindent__asingle__lineof__codeor__anentire__blockof__code;you__canjust__aseasily__movea__blockof__linesup__ordown__ina__file.There__aretoo__manyshortcuts__todescribe__fully here.This__sectionwill__sharejust__afew__thatyou__lllikely__findhelpful__asyou__rewriting__yourfirst__Python files.If__youend__upusing__adifferent__editorthan__VS Code,make__sureyou__learnhow__todo__thesesame__tasksefficiently__inthe__editoryou__ve chosen.Indenting__andUnindenting__CodeBlocks__Toindent__anentire__blockof__code,highlight__itand__press CTRL-],or__-]on__macOS.To__unindenta__blockof__code,highlight__itand__press CTRL-[,or__-[on__macOS.Commenting__OutBlocks__ofCode__Totemporarily__disablea__blockof__code,you__canhighlight__theblock__andcomment__itso__Pythonwill__ignore it.Highlight__thesection__ofcode__youwant__toignore__andpress__CTRL-/,or__-/on__macOS.The__selectedlines__willbe__commentedout__witha__hashmark__(#)indented__atthe__samelevel__asthe__lineof__code,to__indicatethese__arenot__regular comments.When__youwant__touncomment__theblock__of code,highlight__theblock__andreissue__thesame__command.Moving__LinesUp__orDown__Asyour__programsgrow__more complex,you__mayfind__thatyou__wantto__movea__blockof__codeup__ordown__withina__file.To__do so,highlight__thecode__youwant__tomove__andpress__ALT-up arrow,or__Option-uparrow__on macOS.The__samekey__combinationwith__thedown__arrowwill__movethe__blockdown__inthe__file.If__youre__movinga__singleline__upor__down,you__canclick__anywherein__that line;you__dont__needto__highlightthe__wholeline__tomove__it.Hiding__theFile__ExplorerThe__integratedfile__explorerin__VSCode__isreally__convenient. However,it__canbe__distractingwhen__youre__writingcode__andcan__takeup__valuablespace__ona__smaller screen.The__command CTRL-B,or__-Bon__macOS,toggles__thevisibility__ofthe__fileexplorer__pane. 474Appendix__BFinding__AdditionalShortcuts__Workingefficiently__inan__editingenvironment__takes practice,but__italso__takes intention.When__youre__learningto__workwith__code,try__tonotice__thethings__youdo__repeatedly.Any__actionyou__takein__youreditor__likelyhas__a shortcut;if__youre__clickingmenu__itemsto__carryout__editing tasks,look__forthe__shortcutsfor__those actions.If__youre__switchingbetween__yourkeyboard__andmouse__frequently,look__forthe__navigationshortcuts__thatkeep__youfrom__reachingfor__yourmouse__so often.You__cansee__allthe__keyboardshortcuts__inVS__Codeby__clickingCode__andthen__Preferences,and__thenchoosing__Keyboard Shortcuts.You__canuse__thesearch__barto__finda__particular shortcut,or__youcan__scrollthrough__thelist__tofind__shortcutsthat__mighthelp__youwork__more efficiently. Remember,it__sbetter__tofocus__onthe__codethat__youre__working on,and__avoidspending__toomuch__timeon__thetools__youre__using.Other__TextEditors__andIDEs__Youll__hearabout__andsee__peopleusing__anumber__ofother__text editors.Most__ofthem__canbe__configuredto__helpyou__inthe__sameway__youve__customizedVS__Code.Here__sa__smallselection__oftext__editorsyou__mighthear__about.IDLE__IDLEis__atext__editorthat__sincluded__with Python.It__sa__littleless__intuitiveto__workwith__than other,more__modern editors. However,you__llsee__referencesto__itin__othertutorials__aimedat__beginners,so__youmight__wantto__giveit__a try.Geany__Geanyis__asimple__texteditor__thatdisplays__allof__youroutput__ina__separateter__minal window,which__helpsyou__becomecomfortable__using terminals.Geany__hasa__veryminimalist__interface,but__its__powerfulenough__thata__significantnumber__ofexperienced__programmersstill__use it.If__youfind__VSCode__toodistracting__andfull__oftoo__many features,con__siderusing__Geany instead.Sublime__TextSublime__Textis__anotherminimalist__editorthat__youshould__considerusing__ifyou__findVS__Codetoo__busy.Sublime__Texthas__areally__cleaninterface__andis__knownfor__workingwell__evenon__verylarge__files.It__san__editorthat__willget__outof__yourway__andlet__youfocus__onthe__codeyou__re writing.Sublime__Texthas__anunlimited__free trial,but__its__notfree__oropen__source.If__youdecide__youlike__itand__canafford__topurchase__afull__license,you__shoulddo__so.The__purchaseis__a one-time fee;it__snot__asoftware__subscription.Text__Editorsand__IDEs 475Emacs__andVim__Emacsand__Vimare__twopopular__editorsfavored__bymany__experiencedpro__grammers,because__theyre__designedso__youcan__usethem__withoutyour__handsever__havingto__leavethe__keyboard.This__makes writing, reading,and__modifyingcode__very efficient,once__youlearn__howthe__editor works.It__alsomeans__botheditors__havea__fairlysteep__learning curve.Vim__isincluded__onmost__Linuxand__macOS machines,and__bothEmacs__andVim__canbe__runentirely__insidea__terminal.For__this reason,they__reoften__usedto__writecode__onservers__throughremote__terminal sessions.Programmers__willoften__recommendthat__yougive__thema__try,but__manyproficient__programmersforget__howmuch__newprogrammers__arealready__tryingto__learn.It__sgood__tobe__awareof__these editors,but__youshould__holdoff__onusing__themuntil__youre__comfortableworking__withcode__ina__more user-friendlyeditor__thatlets__youfocus__onlearning__to program,rather__thanlearning__touse__an editor.PyCharm__PyCharmis__apopular__IDEamong__Pythonprogrammers__becauseit__wasbuilt__towork__specificallywith__Python.The__fullversion__requiresa__paidsubscrip__tion,but__afree__versioncalled__thePyCharm__CommunityEdition__isalso__available,and__manydevelopers__findit__useful.If__youtry__PyCharm,be__aware that,by__default,it__setsup__anisolated__environment__foreach__ofyour__projects.This__isusually__agood__thing,but__itcan__leadto__unexpectedbehavior__ifyou__dont__understandwhat__its__doingfor__you.Jupyter__NotebooksJupyter__Notebookis__adifferent__kindof__toolthan__traditionaltext__editorsor__IDEs,in__thatit__sa__webapp__primarilybuilt__of blocks;each__blockis__eithera__codeblock__ora__text block.The__textblocks__arerendered__in Markdown,so__youcan__includesimple__formattingin__yourtext__blocks.Jupyter__Notebookswere__developedto__supportthe__useof__Pythonin__scientific applications,but__theyhave__sinceexpanded__tobecome__usefulin__awide__varietyof__situations.Rather__thanjust__writingcomments__insidea__.py file,you__canwrite__cleartext__withsimple__formatting,such__as headers,bul__leted lists,and__hyperlinksin__betweensections__of code.Every__codeblock__canbe__run independently,allowing__youto__testsmall__piecesof__your program,or__youcan__runall__thecode__blocksat__once.Each__codeblock__hasits__ownoutput__area,and__youcan__togglethe__outputareas__onor__offas__needed.Jupyter__Notebookscan__beconfusing__attimes__becauseof__theinteractions__betweendifferent__cells.If__youdefine__afunction__inone__cell,that__functionis__availableto__othercells__as well.This__isbeneficial__mostof__the time,but__itcan__beconfusing__inlonger__notebooksand__ifyou__dont__fullyunderstand__howthe__Notebookenvironment__works.If__youre__doingany__scientificor__data-focusedwork__in Python,you__llalmost__certainlysee__JupyterNotebooks__atsome__point.C__GETTING__HELPEveryone__getsstuck__atsome__pointwhen__theyre__learningto__program. So,one__ofthe__mostimportant__skillsto__learnas__apro__grammeris__howto__getunstuck__efficiently.This__appendixoutlines__severalways__tohelp__youget__goingagain__whenprogramming__gets confusing.First__StepsWhen__youre__stuck,your__firststep__shouldbe__toassess__your situation.Before__youask__forhelp__fromanyone__else,answer__thefollowing__threequestions__clearly:What__areyou__tryingto__do?What__haveyou__triedso__far?What__resultshave__youbeen__getting? 478Appendix__CMake__youranswers__asspecific__as possible.For__thefirst__question,explicit__statementslike__Im__tryingto__installthe__latestversion__ofPython__onmy__newWindows__laptopare__detailedenough__forothers__inthe__Pythoncommunity__tohelp__you.Statements__likeI__mtrying__toinstall__Pythondon__tprovide__enoughinformation__forothers__tooffer__much help.Your__answerto__thesecond__questionshould__provideenough__detailso__youwon__tbe__advisedto__repeatwhat__youve__already tried:I__wentto__https:// python.org/downloadsand__clickedthe__Downloadbutton__formy__system.Then__Iran__theinstaller__ismore__helpfulthan__Iwent__tothe__Pythonwebsite__anddownloaded__something.For__thethird__question,it__shelpful__toknow__theexact__errormessages__you received,so__youcan__usethem__tosearch__onlinefor__asolution__orprovide__themwhen__askingfor__help. Sometimes,just__answeringthese__threequestions__beforeyou__askfor__helpfrom__othersallows__youto__seesomething__youre__missing,and__helpsget__youunstuck__withouthaving__togo__any further.Programmers__evenhave__aname__for this:rubber__duck debugging.The__ideais__thatif__youclearly__explainyour__situationto__arubber__duck (orany__inanimate object)and__askit__aspecific__question,you__lloften__beable__toanswer__yourown__question.Some__programming__teamseven__keepa__realrubber__duckaround__toencourage__peopleto__talkto__the duck.Try__ItAgain__Justgoing__backto__thestart__andtrying__againcan__beenough__tosolve__many problems.Say__youre__tryingto__writea__forloop__basedon__anexample__inthis__book.You__mighthave__onlymissed__something simple,like__acolon__atthe__endof__thefor__line.Going__throughthe__stepsagain__mighthelp__youavoid__repeating__thesame__mistake.Take__aBreak__Ifyou__vebeen__workingon__thesame__problemfor__a while,taking__abreak__isone__ofthe__besttactics__youcan__try.When__wework__onthe__sametask__forlong__periodsof__time,our__brainsstart__tozero__inon__onlyone__solution.We__losesight__ofthe__assumptionswe__ve made,and__takinga__breakhelps__usget__afresh__perspectiveon__the problem.It__doesnt__needto__bea__long break,just__something__thatgets__youout__ofyour__current mindset.If__youve__beensitting__fora__long time,do__something physical:take__ashort__walk,go__outsidefor__a bit,or__perhapsdrink__aglass__ofwater__oreat__alight__snack.If__youre__getting frustrated,it__mightbe__worthputting__yourwork__awayfor__the day.A__goodnight__ssleep__almostalways__makesa__problemmore__approachable.Refer__toThis__Books__ResourcesThe__onlineresources__forthis__book,available__at https://ehmatthes.github.io/pcc_3e,include__anumber__ofhelpful__sectionsabout__settingup__yoursystem__andwork__ingthrough__each chapter.If__youhaven__tdone__so already,take__alook__atthese__resourcesand__seeif__theres__anythingthat__helpsyour__situation.Getting__Help 479Searching__OnlineChances__aregood__thatsomeone__elsehas__hadthe__sameproblem__youre__havingand__haswritten__aboutit__online.Good__searchingskills__andspecific__inquirieswill__helpyou__findexisting__resourcesto__solvethe__issueyou__refac__ing.For__example,if__youre__strugglingto__installthe__latestversion__ofPython__ona__newWindows__system,searching__forinstall__pythonwindows__andlimiting__theresults__toresources__fromthe__lastyear__mightdirect__youto__aclear__answer.Searching__theexact__errormessage__canbe__extremelyhelpful__too.For__example,say__youget__thefollowing__errorwhen__youtry__torun__aPython__program__froma__terminalon__anew__Windows system: >python__hello_world.pyPython__wasnot__found;run__withoutarguments__toinstall__fromthe__Microsoft Store...Searching__forthe__full phrase,Python__wasnot__found;run__withoutargu__mentsto__installfrom__theMicrosoft__Store,will__probablyyield__somegood__advice.When__youstart__searchingfor__programming-related topics,a__fewsites__willappear__repeatedly.I__lldescribe__someof__thesesites__briefly,so__youll__knowhow__helpfulthey__relikely__to be.Stack__OverflowStack__Overflow (https://stackoverflow.com)is__oneof__themost__popular question- and-answersites__for programmers,and__itwill__oftenappear__inthe__firstpage__ofresults__on Python-related searches.Members__postquestions__whenthey__re stuck,and__othermembers__tryto__givehelpful__responses.Users__canvote__forthe__responsesthey__findmost__helpful,so__thebest__answersare__usuallythe__firstones__youll__find.Many__basicPython__questionshave__veryclear__answerson__Stack Overflow,because__thecommunity__hasrefined__themover__time.Users__areencouraged__topost__updates, too,so__responsestend__tostay__relatively current.At__thetime__ofthis__writing,almost__twomillion__Python-relatedquestions__havebeen__answeredon__Stack Overflow.There__sone__expectationyou__shouldbe__awareof__beforeposting__onStack__Overflow.Questions__aremeant__tobe__theshortest__exampleof__thekind__ofissue__youre__facing.If__youpost__5 20lines__ofcode__thatgenerate__theerror__youre__facing,and__ifyou__addressthe__questionsmentioned__inFirst__Stepson__page 477earlier__inthis__appendix,someone__willprobably__help you.If__youshare__alink__toa__projectwith__multiplelarge__files,people__willbe__veryunlikely__to help.There__sa__greatguide__towriting__upa__goodquestion__at https://stackoverflow.com/help/how-to-ask.The__suggestionsin__thisguide__areapplicable__togetting__helpin__anycommunity__of programmers.The__OfficialPython__DocumentationThe__officialPython__documentation (https://docs.python.org)is__abit__more hit-or-missfor__beginners,because__itspurpose__ismore__todocument__the 480Appendix__Clanguage__thanto__provide explanations.The__examplesin__theofficial__documentation__should work,but__youmight__notunderstand__everything shown. Still,it__sa__goodresource__tocheck__whenit__comesup__inyour__searches,and__itwill__becomemore__usefulto__youas__youcontinue__buildingyour__understanding__of Python.Official__LibraryDocumentation__Ifyou__reusing__aspecific__library,such__as Pygame, Matplotlib,or__Django,links__tothe__officialdocumentation__forit__willoften__appearin__searches.For__example, https://docs.djangoproject.comis__veryhelpful__whenworking__with Django.If__youre__planningto__workwith__anyof__these libraries,it__sa__goodidea__tobecome__familiarwith__theirofficial__documentation. r/learnpythonReddit__ismade__upof__anumber__ofsubforums__called subreddits.The__r/learnpythonsubreddit__(https://reddit.com/r/learnpython)is__veryactive__and supportive.You__canread__othersquestions__andpost__yourown__as well.You__willoften__getmul__tipleperspectives__aboutthe__questionsyou__raise,which__canbe__reallyhelpful__ingaining__adeeper__understandingof__thetopic__youre__working on.Blog__PostsMany__programmersmaintain__blogsand__shareposts__aboutthe__partsof__thelanguage__theyre__working with.You__shouldlook__fora__dateon__theblog__postsyou__find,to__seehow__applicablethe__informationis__likelyto__befor__theversion__ofPython__youre__using.Discord__Discordis__anonline__chatenvironment__witha__Pythoncommunity__whereyou__canask__forhelp__andfollow__Python-related discussions.To__checkit__out,head__to https://pythondiscord.comand__clickthe__Discordlink__atthe__upper right.If__youalready__havea__Discord account,you__canlog__inwith__yourexisting__account.If__youdon__thave__an account,enter__ausername__andfollow__theprompts__tocomplete__yourDiscord__registration.If__thisis__yourfirst__timevisiting__thePython__Discord,you__llneed__toaccept__therules__forthe__communitybefore__participating fully.Once__youve__done that,you__canjoin__anyof__thechannels__thatinterest__you.If__youre__lookingfor__help,be__sureto__postin__oneof__thePython__Help channels.Getting__Help 481Slack__Slackis__anotheronline__chat environment.It__isoften__usedfor__internalcom__pany communications,but__thereare__alsomany__publicgroups__youcan__join.If__youwant__tocheck__outPython__Slack groups,start__with https://pyslackers.com.Click__theSlack__linkat__thetop__ofthe__page,then__enteryour__emailaddress__toget__an invitation.Once__youre__inthe__PythonDevelopers__workspace,you__llsee__alist__of channels.Click__Channelsand__thenchoose__thetopics__thatinterest__you.You__mightwant__tostart__withthe__#helpand__#django channels.D__USING__GITFOR__VERSION__CONT__ROLVersion__controlsoftware__allowsyou__totake__snapshotsof__aproject__wheneverit__sin__aworking__state.When__youmake__changesto__aproject__for example,when__youimplement__anew__featureyou__cango__backto__aprevious__workingstate__ifthe__projects__currentstate__isnt__functioning well.Using__versioncontrol__softwaregives__youthe__freedomto__workon__improvements__andmake__mistakeswithout__worryingabout__ruiningyour__project.This__isespecially__criticalin__large projects,but__canalso__behelpful__insmaller__proj ects,even__whenyou__reworking__onprograms__containedin__asingle__file.In__this appendix,you__lllearn__toinstall__Gitand__useit__forversion__controlin__theprograms__youre__workingon__now.Git__isthe__mostpopular__versioncontrol__softwarein__use today.Many__ofits__advancedtools__helpteams__collaborateon__large projects,but__itsmost__basicfeatures__alsowork__wellfor__solo developers.Git__implementsversion__controlby__trackingthe__changesmade__toevery__filein__a project;if__youmake__a mistake,you__canjust__returnto__apreviously__saved state. 484Appendix__DInstalling__GitGit__runson__alloperating__systems,but__thereare__differentapproaches__toinstalling__iton__each system.The__followingsections__providespecific__instructions__foreach__operating system.Git__isincluded__onsome__systemsby__default,and__isoften__bundledwith__otherpackages__thatyou__mighthave__already installed.Before__tryingto__install Git,see__ifit__salready__onyour__system.Open__anew__terminalwindow__andissue__thecommand__git --version.If__yousee__outputlisting__aspecific__versionnum__ber,Git__isinstalled__onyour__system.If__yousee__amessage__promptingyou__toinstall__orupdate__Git,follow__theonscreen__instructions.If__youdon__tsee__anyonscreen__instructionsand__youre__usingWindows__or macOS,you__candownload__aninstaller__from https://git-scm.com.If__youre__aLinux__userwith__an apt-compatible system,you__caninstall__Gitwith__thecom__mandsudo__aptinstall__git.Configuring__GitGit__keepstrack__ofwho__makeschanges__toa__project,even__whenonly__oneper__sonis__workingon__the project.To__do this,Git__needsto__knowyour__usernameand__email.You__mustprovide__a username,but__youcan__makeup__afake__email address: $git__config --global user.name "username" $git__config --global user.email "username@example.com"If__youforget__this step,Git__willprompt__youfor__thisinformation__whenyou__makeyour__first commit.It__salso__bestto__setthe__defaultname__forthe__mainbranch__ineach__proj ect.A__goodname__forthis__branchis__main: $git__config --global init.defaultBranchmain__Thisconfiguration__meansthat__eachnew__projectyou__useGit__tomanage__willstart__outwith__asingle__branchof__commitscalled__main.Making__aProject__Lets__makea__projectto__work with.Create__afolder__somewhereon__yoursys__temcalled__git_practice.Inside__the folder,make__asimple__Python program: hello_git.py print("HelloGit__world!")We__lluse__thisprogram__toexplore__Gits__basic functionality.Ignoring__FilesFiles__withthe__extension .pycare__automaticallygenerated__from .py files,so__wedon__tneed__Gitto__keeptrack__of them.These__filesare__storedin__adirectory__UsingGit__forVersion__Control 485called____pycache__.To__tellGit__toignore__this directory,make__aspecial__filecalled__.gitignorewith__adot__atthe__beginningof__thefilename__andno__fileextension__andadd__thefollowing__lineto__it: .gitignore __pycache__/This__filetells__Gitto__ignoreany__filein__the__pycache____directory.Using__a .gitignorefile__willkeep__yourproject__clutter-freeand__easierto__work with.You__mightneed__tomodify__yourfile__browsers__settingsso__hiddenfiles__(fileswhose__namesbegin__witha__dot)will__be shown.In__Windows Explorer,check__thebox__inthe__Viewmenu__labeledHidden__Items.On__macOS,press__-SHIFT-. (dot).On__Linux,look__fora__settinglabeled__ShowHidden__Files.NOTE__Ifyou__reon__macOS,add__onemore__lineto__.gitignore.Add__thename__.DS_Store;these__arehidden__filesthat__containinformation__abouteach__directoryon__macOS,and__theywill__clutterup__yourproject__ifyou__dont__addthem__to .gitignore.Initializing__aRepository__Nowthat__youhave__adirectory__containinga__Pythonfile__anda__.gitignore file,you__caninitialize__aGit__repository.Open__a terminal,navigate__tothe__git_practice folder,and__runthe__following command: git_practice$git__initInitialized__emptyGit__repositoryin__git_practice/.git/ git_practice$The__outputshows__thatGit__hasinitialized__anempty__repositoryin__git_practice.A__repositoryis__theset__offiles__ina__programthat__Gitis__actively tracking.All__thefiles__Gituses__tomanage__therepository__arelocated__inthe__hiddendirectory__.git,which__youwon__tneed__towork__withat__all.Just__dont__deletethat__directory,or__youll__loseyour__projects__history.Checking__theStatus__Beforedoing__anything else,let__slook__atthe__projects__status: git_practice$git__status 1On__branchmain__Nocommits__yet 2Untracked__files: (use "gitadd__..."to__includein__whatwill__be committed) .gitignore hello_git.py 3nothing__addedto__commitbut__untrackedfiles__present (use "git add"to__track) git_practice$ 486Appendix__DIn__Git,a__branchis__aversion__ofthe__projectyou__reworking__on;here__youcan__seethat__were__ona__branchnamed__main 1.Each__timeyou__checkyour__projects__status,it__shouldshow__thatyou__reon__thebranch__main.You__thensee__thatwe__reabout__tomake__theinitial__commit.A__commitis__asnapshot__ofthe__projectat__aparticular__pointin__time.Git__informsus__thatuntracked__filesare__inthe__project 2,because__wehaven__ttold__itwhich__filesto__track yet.Then__were__toldthat__theres__nothingadded__tothe__current commit,but__untrackedfiles__arepresent__thatwe__mightwant__toadd__tothe__repository 3.Adding__Filesto__theRepository__Lets__addthe__twofiles__tothe__repositoryand__checkthe__status again: 1 git_practice$git__add . 2 git_practice$git__statusOn__branchmain__Nocommits__yetChanges__tobe__committed: (use "gitrm__--cached ..."to__unstage) 3new__file: .gitignorenew__file: hello_git.py git_practice$The__commandgit__add .adds__tothe__repositoryall__fileswithin__aproject__thataren__talready__beingtracked__1,as__longas__theyre__notlisted__in .gitignore.It__doesnt__committhe__files;it__justtells__Gitto__startpaying__attentionto__them.When__wecheck__thestatus__ofthe__project now,we__cansee__thatGit__recognizessome__changesthat__needto__becommitted__2.The__labelnew__filemeans__thesefiles__werenewly__addedto__therepository__3.Making__aCommit__Lets__makethe__first commit: 1 git_practice$git__commit -m "Started project." 2 [main (root-commit) cea13dd]Started__project. 3 2files__changed, 5 insertions(+)create__mode 100644 .gitignorecreate__mode 100644 hello_git.py 4 git_practice$git__statusOn__branchmain__nothingto__commit,working__treeclean__git_practice$We__issuethe__commandgit__commit -m " message" 1to__makea__snapshotof__the project.The__-mflag__tellsGit__torecord__themessage__thatfollows__(StartedUsing__Gitfor__VersionControl__487 project.)in__theproject__s log.The__outputshows__thatwe__reon__themain__branch 2and__thattwo__fileshave__changed 3.When__wecheck__thestatus__now,we__cansee__thatwe__reon__themain__branch,and__wehave__aclean__workingtree__4.This__isthe__messageyou__shouldsee__eachtime__youcommit__aworking__stateof__your project.If__youget__adifferent__message,read__it carefully;it__slikely__youforgot__toadd__afile__beforemaking__a commit.Checking__theLog__Gitkeeps__alog__ofall__commitsmade__tothe__project.Let__scheck__the log: git_practice$git__logcommit__cea13ddc51b885d05a410201a54faf20e0d2e246 (HEAD -> main) Author:eric__Date:Mon__Jun 6 19:37:26 2022 -0800Started__project. git_practice$Each__timeyou__makea__commit,Git__generatesa__unique, 40-characterreference__ID.It__recordswho__madethe__commit,when__itwas__made,and__themessage__recorded.You__wont__alwaysneed__allof__this information,so__Gitpro__videsan__optionto__printa__simplerversion__ofthe__log entries: git_practice$git__log --pretty=oneline cea13ddc51b885d05a410201a54faf20e0d2e246 (HEAD -> main)Started__project. git_practice$The__--pretty=onelineflag__providesthe__twomost__importantpieces__of information:the__referenceID__ofthe__commitand__themessage__recordedfor__the commit.The__SecondCommit__Tosee__thereal__powerof__version control,we__needto__makea__changeto__theproj__ectand__committhat__change.Here__well__justadd__anotherline__to hello_git.py: hello_git.py print("HelloGit__world!") print("Hello everyone.")When__wecheck__thestatus__ofthe__project,we__llsee__thatGit__hasnoticed__thefile__that changed: git_practice$git__status 1On__branchmain__Changesnot__stagedfor__commit: (use "gitadd__..."to__updatewhat__willbe__committed) (use "gitrestore__..."to__discardchanges__inworking__directory) 488Appendix__D 2 modified: hello_git.py 3no__changesadded__tocommit__(use "git add" and/or "gitcommit__-a") git_practice$We__seethe__branchwe__reworking__on 1,the__nameof__thefile__thatwas__modified 2,and__thatno__changeshave__beencommitted__3.Let__scommit__thechange__andcheck__thestatus__again: 1 git_practice$git__commit -am "Extended greeting." [main 945fa13]Extended__greeting. 1file__changed, 1 insertion(+), 1 deletion(-) 2 git_practice$git__statusOn__branchmain__nothingto__commit,working__treeclean__3 git_practice$git__log --pretty=oneline 945fa13af128a266d0114eebb7a3276f7d58ecd2 (HEAD -> main)Extended__greeting. cea13ddc51b885d05a410201a54faf20e0d2e246Started__project. git_practice$We__makea__new commit,passing__the -amflags__whenwe__usethe__commandgit__commit 1.The__-aflag__tellsGit__toadd__allmodified__filesin__therepository__tothe__current commit. (Ifyou__createany__newfiles__between commits,reissue__thegit__add .command__toinclude__thenew__filesin__the repository.)The__-mflag__tellsGit__torecord__amessage__inthe__logfor__this commit.When__wecheck__theproject__s status,we__seethat__weonce__againhave__aclean__workingtree__2. Finally,we__seethe__twocommits__inthe__log 3.Abandoning__ChangesNow__lets__lookat__howto__abandona__changeand__goback__tothe__previousworking__state. First,add__anew__lineto__hello_git.py: hello_git.py print("HelloGit__world!") print("Hello everyone.") print("Oh no,I__brokethe__project!")Save__andrun__this file.We__checkthe__statusand__seethat__Gitnotices__this change: git_practice$git__statusOn__branchmain__Changesnot__stagedfor__commit: (use "gitadd__..."to__updatewhat__willbe__committed) (use "gitrestore__..."to__discardchanges__inworking__directory) 1 modified: hello_git.pyno__changesadded__tocommit__(use "git add" and/or "gitcommit__-a") git_practice$Using__Gitfor__VersionControl__489Git__seesthat__wemodified__hello_git.py 1,and__wecan__committhe__changeif__wewant__to.But__this time,instead__ofcommitting__the change,we__llgo__backto__thelast__commitwhen__weknew__ourproject__was working.We__wont__doany__thingto__hello_git.py:we__wont__deletethe__lineor__usethe__Undofeature__inthe__text editor. Instead,enter__thefollowing__commandsin__yourterminal__session: git_practice$git__restore . git_practice$git__statusOn__branchmain__nothingto__commit,working__treeclean__git_practice$The__commandgit__restorefilename__allowsyou__toabandon__allchanges__sincethe__lastcommit__ina__specific file.The__commandgit__restore .aban__donsall__changesmade__inall__filessince__thelast__commit;this__actionrestores__theproject__tothe__lastcommitted__state.When__youreturn__toyour__text editor,you__llsee__that hello_git.pyhas__changedback__to this: print("HelloGit__world!") print("Hello everyone.")Although__goingback__toa__previousstate__mightseem__trivialin__thissimple__project,if__wewere__workingon__alarge__projectwith__dozensof__modified files,all__thefiles__thathad__changedsince__thelast__commitwould__be restored.This__featureis__incredibly useful:you__canmake__asmany__changesas__youwant__whenimplementing__anew__feature,and__ifthey__dont__work,you__candiscard__themwithout__affectingthe__project.You__dont__haveto__rememberthose__changesand__manuallyundo__them.Git__doesall__ofthat__for you.NOTE__Youmight__haveto__refreshthe__filein__youreditor__tosee__therestored__version.Checking__OutPrevious__CommitsYou__canrevisit__anycommit__inyour__log,using__thecheckout__command,by__usingthe__firstsix__charactersof__areference__ID.After__checkingout__andreviewing__anearlier__commit,you__canreturn__tothe__latestcommit__oraban__donyour__recentwork__andpick__updevelopment__fromthe__earlier commit: git_practice$git__log --pretty=oneline 945fa13af128a266d0114eebb7a3276f7d58ecd2 (HEAD -> main)Extended__greeting. cea13ddc51b885d05a410201a54faf20e0d2e246Started__project. git_practice$git__checkout cea13d Note:switching__to 'cea13d'. 1You__arein__'detached HEAD' state.You__canlook__around,make__experimentalchanges__andcommit__them,and__youcan__discardany__commitsyou__makein__thisstate__withoutimpacting__anybranches__byswitching__backto__a branch. 490Appendix__DIf__youwant__tocreate__anew__branchto__retaincommits__you create,you__maydo__so (nowor__later)by__using -cwith__theswitch__command. Example:git__switch -c 2Or__undothis__operation with:git__switch -Turn__offthis__adviceby__settingconfig__variable advice.detachedHeadto__falseHEAD__isnow__at cea13dStarted__project. git_practice$When__youcheck__outa__previous commit,you__leavethe__mainbranch__andenter__whatGit__refersto__asa__detachedHEAD__state 1.HEAD__isthe__currentcommitted__stateof__the project;you__redetached__becauseyou__veleft__anamed__branch (main,in__this case).To__getback__tothe__main branch,you__followthe__suggestion 2to__undothe__previous operation: git_practice$git__switch -Previous__HEADposition__was cea13dStarted__project.Switched__tobranch__'main' git_practice$This__commandbrings__youback__tothe__main branch.Unless__youwant__towork__withsome__moreadvanced__featuresof__Git,it__sbest__notto__makeany__changesto__yourproject__whenyou__vechecked__outa__previous commit. However,if__youre__theonly__oneworking__ona__projectand__youwant__todis__cardall__ofthe__morerecent__commitsand__goback__toa__previous state,you__canreset__theproject__toa__previous commit.Working__fromthe__main branch,enter__the following: 1 git_practice$git__statusOn__branchmain__nothingto__commit,working__directoryclean__2 git_practice$git__log --pretty=oneline 945fa13af128a266d0114eebb7a3276f7d58ecd2 (HEAD -> main)Extended__greeting. cea13ddc51b885d05a410201a54faf20e0d2e246Started__project. 3 git_practice$git__reset --hard cea13dHEAD__isnow__at cea13ddStarted__project. 4 git_practice$git__statusOn__branchmain__nothingto__commit,working__directoryclean__5 git_practice$git__log --pretty=oneline cea13ddc51b885d05a410201a54faf20e0d2e246 (HEAD -> main)Started__project. git_practice$We__firstcheck__thestatus__tomake__surewe__reon__themain__branch 1.When__welook__atthe__log,we__seeboth__commits 2.We__thenissue__thegit__reset --hardcommand__withthe__firstsix__charactersof__thereference__IDof__UsingGit__forVersion__Control 491the__commitwe__wantto__goback__topermanently__3.We__checkthe__statusagain__andsee__were__onthe__mainbranch__withnothing__tocommit__4.When__welook__atthe__log again,we__seethat__were__atthe__commitwe__wantedto__startover__from 5.Deleting__theRepository__Sometimesyou__llmess__upyour__repositorys__historyand__wont__knowhow__torecover__it.If__this happens,first__considerasking__forhelp__usingthe__approachesdiscussed__inAppendix__C.If__youcan__tfix__itand__youre__workingon__asolo__proj ect,you__cancontinue__workingwith__thefiles__butget__ridof__theproject__shistory__bydeleting__the .git directory.This__wont__affectthe__currentstate__ofany__ofthe__files,but__itwill__deleteall__commits,so__youwon__tbe__ableto__checkout__anyother__statesof__the project.To__do this,either__opena__filebrowser__anddelete__the .gitrepository__ordelete__itfrom__thecommand__line. Afterward,you__llneed__tostart__overwith__afresh__repositoryto__starttracking__yourchanges__again.Here__swhat__thisentire__processlooks__likein__aterminal__session: 1 git_practice$git__statusOn__branchmain__nothingto__commit,working__directoryclean__2 git_practice$rm__-rf .git/ 3 git_practice$git__status fatal:Not__agit__repository (orany__ofthe__parent directories): .git 4 git_practice$git__initInitialized__emptyGit__repositoryin__git_practice/.git/ 5 git_practice$git__statusOn__branchmain__Nocommits__yetUntracked__files: (use "gitadd__..."to__includein__whatwill__be committed) .gitignore hello_git.pynothing__addedto__commitbut__untrackedfiles__present (use "git add"to__track) 6 git_practice$git__add . git_practice$git__commit -m "Starting over." [main (root-commit) 14ed9db]Starting__over. 2files__changed, 5 insertions(+)create__mode 100644 .gitignorecreate__mode 100644 hello_git.py 7 git_practice$git__statusOn__branchmain__nothingto__commit,working__treeclean__git_practice$We__firstcheck__thestatus__andsee__thatwe__havea__cleanworking__directory__1.Then__weuse__thecommand__rm -rf .git/to__deletethe__.gitdirectory__(del .giton__Windows) 2.When__wecheck__thestatus__afterdeleting__the .git 492Appendix__D folder,we__retold__thatthis__isnot__aGit__repository 3.All__theinformation__Gituses__totrack__arepository__isstored__inthe__.git folder,so__removingit__deletesthe__entire repository.We__rethen__freeto__usegit__initto__starta__freshrepository__4.Checking__thestatus__showsthat__were__backat__theinitial__stage,awaiting__thefirst__commit__5.We__addthe__filesand__makethe__firstcommit__6.Checking__thestatus__nowshows__usthat__were__onthe__newmain__branchwith__nothingto__commit 7.Using__versioncontrol__takesa__bitof__practice,but__onceyou__startusing__it,you__llnever__wantto__workwithout__it again.E__TRO__UBL__ES__HOOTING__DEPL__OYMENTS__Deployingan__appis__tremendouslysatisfy__ingwhen__it works,especially__ifyou__venever__doneit__before. However,there__aremany__obstaclesthat__canarise__inthe__deploymentpro__cess,and__unfortunately,some__ofthese__issuescan__bedifficult__toidentify__and address.This__appendixwill__helpyou__understandmodern__approachesto__deployment__andgive__youspecific__waysto__troubleshootthe__deploymentprocess__whenthings__arent__working.If__theadditional__informationin__thisappendix__isnt__enoughto__helpyou__getthrough__thedeployment__process successfully,see__theonline__resourcesat__https://ehmatthes.github.io/pcc_3e;the__updatesthere__willalmost__certainlyhelp__youcarry__outa__successful deployment. 494Appendix__EUnderstanding__DeploymentsWhen__youre__tryingto__troubleshoota__particulardeployment__attempt,it__shelpful__tohave__aclear__understandingof__howa__typicaldeployment__works.Deployment__refersto__theprocess__oftaking__aproject__thatworks__onyour__local system,and__copyingthat__projectto__aremote__serverin__away__thatallows__itto__respondto__requestsfrom__anyuser__onthe__internet.The__remoteenviron__mentdiffers__froma__typicallocal__systemin__anumber__ofimportant__ways:it__sprobably__notthe__sameoperating__system (OS)as__theone__youre__using,and__its__mostlikely__oneof__manyvirtual__serverson__asingle__physical server.When__youdeploy__a project,or__pushit__tothe__remote server,the__followingsteps__needto__be taken:Create__avirtual__serveron__aphysical__machineat__a datacenter.Establish__aconnection__betweenthe__localsystem__andthe__remote server.Copy__theproject__scode__tothe__remote server.Identify__allof__theproject__sdependencies__andinstall__themon__theremote__server.Set__upa__databaseand__runany__existing migrations.Copy__staticfiles__(CSS,JavaScript__files,and__media files)to__aplace__wherethey__canbe__served efficiently.Start__aserver__tohandle__incoming requests.Start__routingincoming__requeststo__the project,once__its__readyto__handle requests.When__youconsider__allthat__goesinto__a deployment,it__sno__wonderdeployments__often fail. Fortunately,once__yougain__anunderstanding__ofwhat__shouldbe__happening,you__llstand__abetter__chanceof__identifyingwhat__went wrong.If__youcan__identifywhat__went wrong,you__mightbe__ableto__identify__afix__thatwill__makethe__nextdeployment__attempt successful.You__candevelop__locallyon__onekind__ofOS__andpush__toa__serverrunning__adifferent__OS.It__simportant__toknow__whatkind__ofsystem__youre__pushing to,because__thatcan__informsome__ofyour__troubleshooting work.At__thetime__ofthis__writing,a__basicremote__serveron__Platform.shruns__Debian Linux;most__remoteservers__are Linux-based systems.Basic__TroubleshootingSome__troubleshootingsteps__arespecific__toeach__OS,but__well__getto__thatin__a moment. First,let__sconsider__thesteps__everyoneshould__trywhen__troubleshooting__a deployment.Your__bestresource__isthe__outputgenerated__duringthe__attempted push.This__outputcan__look intimidating;if__youre__newto__deploying apps,it__canlook__highly technical,and__theres__usuallya__lotof__it.The__goodnews__isyou__dont__needto__understandeverything__inthe__output.You__shouldhave__twogoals__whenskimming__log output:identify__anydeployment__stepsthat__worked,and__identifyany__stepsthat__didn t.If__youcan__do this,you__mightbe__TroubleshootingDeployments__495able__tofigure__outwhat__tochange__inyour__project,or__inyour__deployment process,to__makeyour__nextpush__successful.Follow__OnscreenSuggestions__Sometimes,the__platformyou__repushing__towill__generatea__messagethat__hasa__clearsuggestion__forhow__toaddress__the issue.For__example,here__sthe__message__youll__seeif__youcreate__a Platform.shproject__beforeinitializing__aGit__repository,and__thentry__topush__the project: $platform__push 1Enter__anumber__tochoose__a project: [0]ll_project__(votohz445ljyg) > 0 2 [RootNotFoundException]Project__rootnot__found.This__canonly__berun__frominside__aproject__directory. 3To__setthe__projectfor__thisGit__repository, run:platform__project:set-remote [id]We__retrying__topush__a project,but__thelocal__projecthasn__tbeen__associated__witha__remoteproject__yet. So,the__Platform.shCLI__askswhich__remoteproject__wewant__topush__to 1.We__enter 0,to__selectthe__onlyproject__listed.But__next,we__seea__RootNotFoundException 2.This__happensbecause__Platform.shlooks__fora__.gitdirectory__whenit__inspectsthe__local project,to__figureout__howto__connectthe__localproject__withthe__remote project.In__this case,since__therewas__no .gitdirectory__whenthe__remoteproject__was created,that__connection__wasnever__established.The__CLIsuggests__afix__3;it__stelling__usthat__wecan__specifythe__remoteproject__thatshould__beassociated__withthis__local project,using__the project:set-remote command.Let__stry__this suggestion: $platform__project:set-remote votohz445ljygSetting__theremote__projectfor__thisrepository__to:ll_project__(votohz445ljyg)The__remoteproject__forthis__repositoryis__nowset__to:ll_project__(votohz445ljyg)In__theprevious__output,the__CLIshowed__theID__ofthis__remote project, votohz4451jyg.So__werun__thecommand__thats__suggested,using__this ID,and__theCLI__isable__tomake__theconnection__betweenthe__localproject__andthe__remote project.Now__lets__tryto__pushthe__project again: $platform__pushAre__yousure__youwant__topush__tothe__main (production) branch? [Y/n]y__PushingHEAD__tothe__existingenvironment__main --snip--This__wasa__successful push;following__theonscreen__suggestion worked. 496Appendix__EYou__shouldbe__carefulabout__runningcommands__thatyou__dont__fully understand. However,if__youhave__goodreason__tobelieve__thata__commandcan__dolittle__harm,and__ifyou__trustthe__sourceof__the recommendation,it__mightbe__reasonableto__trythe__suggestionsoffered__bythe__toolsyou__re using.NOTE__Keepin__mindthere__areindividuals__whowill__tellyou__torun__commandsthat__willwipe__yoursystem__orexpose__yoursystem__toremote__exploitation.Following__thesuggestions__ofa__toolprovided__bya__companyor__organizationyou__trustis__differentfrom__followingthe__suggestionsof__randompeople__online.Anytime__youre__dealingwith__remote connections,proceed__withan__abundanceof__caution.Read__theLog__OutputAs__mentioned earlier,the__logoutput__thatyou__seewhen__yourun__acommand__likeplatform__pushcan__beboth__informativeand__intimidating.Read__throughthe__followingsnippet__oflog__output,taken__froma__differentattempt__atusing__platform push,and__seeif__youcan__spotthe__issue: --snip--Collecting__soupsieve==2.3.2.post1Using__cached soupsieve-2.3.2.post1-py3-none-any.whl (37 kB)Collecting__sqlparse==0.4.2Using__cached sqlparse-0.4.2-py3-none-any.whl (42 kB)Installing__collected packages: platformshconfig, sqlparse,...Successfully__installed Django-4.1 asgiref-3.5.2 beautifulsoup4-4.11.1... W: ERROR:Could__notfind__aversion__thatsatisfies__therequirement__gunicorrn W: ERROR:No__matchingdistribution__foundfor__gunicorrn 130static__filescopied__to '/app/static'.Executing__pre-flight checks... --snip--When__adeployment__attempt fails,a__goodstrategy__isto__lookthrough__thelog__outputand__seeif__youcan__spotanything__thatlooks__likewarnings__or errors.Warnings__arefairly__common;they__reoften__messagesabout__upcoming__changesin__aproject__s dependencies,to__helpdevelopers__addressissues__beforethey__causeactual__failures.A__successfulpush__mayhave__warnings,but__itshouldn__thave__any errors.In__this case, Platform.shcouldn__tfind__away__toinstall__therequirement__gunicorrn.This__isa__typoin__the requirements_remote.txt file,which__wassup__posedto__includegunicorn__(withone__r).It__snot__alwayseasy__tospot__theroot__issuein__log output,especially__whenthe__problemcauses__abunch__ofcascad__ingerrors__and warnings.Just__likewhen__readinga__tracebackon__yourlocal__system,it__sa__goodidea__tolook__closelyat__thefirst__fewerrors__thatare__listed,and__alsothe__lastfew__errors.Most__ofthe__errorsin__betweentend__tobe__internal__packagescomplaining__thatsomething__went wrong,and__passingmes__sagesabout__theerror__toother__internal packages.The__actualerror__wecan__fixis__usuallyone__ofthe__firstor__lasterrors__listed.Troubleshooting__Deployments 497 Sometimes,you__llbe__ableto__spotthe__error,and__other times,you__llhave__noidea__whatthe__output means.It__scertainly__wortha__try,and__usinglog__output__tosuccessfully__diagnosean__erroris__atremendously__satisfying feeling.As__youspend__moretime__lookingthrough__log output,you__llget__betterat__identifying__theinformation__thats__mostmeaningful__to you. OS-SpecificTroubleshooting__Youcan__developon__anyoperating__systemyou__likeand__pushto__anyhost__you like.The__toolsfor__pushingprojects__havedeveloped__enoughthat__theyll__modifyyour__projectas__neededto__runcorrectly__onthe__remote system. However,there__aresome__OS-specificissues__thatcan__arise.In__the Platform.shdeployment__process,one__ofthe__mostlikely__sourcesof__difficultiesis__installingthe__CLI.Here__sthe__commandto__do so: $curl__-fsS https://platform.sh/cli/installer |php__Thecommand__startswith__curl,a__toolthat__letsyou__requestremote__resources,accessed__througha__URL,within__a terminal. Here,it__sbeing__usedto__downloadthe__CLIinstaller__froma__Platform.sh server.The__-fsSsection__ofthe__commandis__aset__offlags__thatmodify__howcurl__runs.The__fflag__tellscurl__tosuppress__mosterror__messages,so__theCLI__installercan__handlethem__insteadof__reportingthem__allto__you.The__sflag__tellscurl__torun__silently;it__letsthe__CLIinstaller__decidewhat__informationto__showin__the terminal.The__Sflag__tellscurl__toshow__anerror__messageif__theoverall__command fails.The__|php__atthe__endof__thecommand__tellsyour__systemto__runthe__downloadedinstaller__fileusing__aPHP__interpreter,because__the Platform.shCLI__iswritten__in PHP.This__meansyour__systemneeds__curland__PHPin__orderto__installthe__Platform.sh CLI.To__usethe__CLI,you__llalso__need Git,and__aterminal__thatcan__runBash__commands.Bash__isa__languagethat__savailable__inmost__server environments.Most__modernsystems__haveplenty__ofroom__formultiple__toolslike__thisto__be installed.The__followingsections__willhelp__youaddress__theserequirements__foryour__OS.If__youdon__talready__haveGit__installed,see__theinstructions__forinstalling__Giton__page 484in__AppendixD__andthen__goto__thesection__herethat__sapplicable__toyour__OS.NOTE__Anexcellent__toolfor__understandingterminal__commandslike__theone__shownhere__is https://explainshell.com.Enter__thecommand__youre__tryingto__understand,and__thesite__willshow__youthe__documentationfor__allthe__partsof__your command.Try__itout__withthe__commandused__toinstall__the Platform.sh CLI.Deploying__fromWindows__Windowshas__seena__resurgencein__popularitywith__programmersin__recent years.Windows__hasintegrated__manydifferent__elementsof__otheroperating__systems,providing__userswith__anumber__ofoptions__forhow__todo__localdevel__opmentwork__andinteract__withremote__systems. 498Appendix__EOne__ofthe__mostsignificant__difficultiesin__deployingfrom__Windowsis__thatthe__coreWindows__operatingsystem__isnot__thesame__aswhat__a Linux-based__remoteserver__uses.A__baseWindows__systemhas__adifferent__setof__toolsand__languagesthan__abase__Linux system,so__tocarry__outdeployment__workfrom__Windows,you__llneed__tochoose__howto__integrate Linux-basedtool__setsinto__yourlocal__environment.Windows__Subsystemfor__LinuxOne__popularapproach__isto__useWindows__Subsystemfor__Linux (WSL),an__environment__thatallows__Linuxto__rundirectly__on Windows.If__youhave__WSLset__up,using__the Platform.shCLI__onWindows__becomesas__easyas__usingit__on Linux.The__CLIwon__tknow__its__runningon__Windows;it__willjust__seethe__Linuxenvironment__youre__usingit__in.Setting__upWSL__isa__two-step process:you__firstinstall__WSL,and__thenchoose__aLinux__distributionto__installinto__theWSL__environment.Setting__upa__WSLenvironment__ismore__thancan__bedescribed__here;if__youre__interestedin__thisapproach__anddon__talready__haveit__set up,see__thedocumentation__at https://docs.microsoft.com/en-us/windows/wsl/about.Once__youhave__WSLset__up,you__canfollow__theinstructions__inthe__Linuxsection__ofthis__appendixto__continue__yourdeployment__work.Git__BashAnother__approachto__buildinga__localenvironment__thatyou__candeploy__fromuses__Git Bash,a__terminalenvironment__thats__compatiblewith__Bashbut__runson__Windows.Git__Bashis__installedalong__withGit__whenyou__usethe__installerfrom__https://git-scm.com.This__approachcan__work,but__itisn__tas__streamlinedas__WSL.In__this approach,you__llhave__touse__aWindows__terminal__forsome__stepsand__aGit__Bashterminal__for others.First__youll__needto__install PHP.You__cando__thiswith__XAMPP,a__packagethat__bundlesPHP__witha__fewother__developer-focused tools.Go__to https:// apachefriends.organd__clickthe__buttonto__downloadXAMPP__for Windows.Open__theinstaller__andrun__it;if__yousee__awarning__aboutUser__AccountControl__(UAC) restrictions,click__OK.Accept__allof__theinstaller__s defaults.When__theinstaller__finishes running,you__llneed__toadd__PHPto__yoursystem__s path;this__willtell__Windowswhere__tolook__whenyou__wantto__run PHP.In__theStart__menu,enter__pathand__clickEdit__theSystem__Environment Variables;click__thebutton__labeledEnvironment__Variables.You__shouldsee__thevariable__Path highlighted;click__Editunder__this pane.Click__Newto__adda__newpath__tothe__currentlist__of paths.Assuming__youkept__thedefault__settings__whenrunning__theXAMPP__installer,add__C:\xampp\phpin__thebox__that appears,then__click OK.When__youre__finished,close__allof__thesystem__dialogs__thatare__still open.With__theserequirements__takencare__of,you__caninstall__the Platform.sh CLI.You__llneed__touse__aWindows__terminalwith__administrator privileges;enter__commandinto__theStart__menu,and__underthe__CommandPrompt__app,Troubleshooting__Deployments 499click__Runas__administrator.In__theterminal__that appears,enter__thefollow__ing command: >curl__-fsS https://platform.sh/cli/installer |php__Thiswill__installthe__Platform.sh CLI,as__described earlier. Finally,you__llwork__inGit__Bash.To__opena__GitBash__terminal,go__tothe__Startmenu__andsearch__forgit__bash.Click__theGit__Bashapp__that appears;you__shouldsee__aterminal__window open.You__canuse__traditional Linux-based__commandslike__lsin__this terminal,as__wellas__Windows-basedcom__mandslike__dir.To__makesure__theinstallation__was successful,issue__theplatform__list command.You__shouldsee__alist__ofall__thecommands__inthe__Platform.sh CLI.From__thispoint__forward,carry__outall__ofyour__deploymentwork__usingthe__Platform.shCLI__insidea__GitBash__terminal window.Deploying__frommacOS__ThemacOS__operatingsystem__isnot__basedon__Linux,but__theywere__bothdeveloped__onsimilar__principles.What__this means, practically,is__thata__lotof__thecommands__andworkflows__thatyou__useon__macOSwill__workin__aremote__serverenvironment__as well.You__mightneed__toinstall__some developer-focusedresources__inorder__tohave__allof__thesetools__availablein__yourlocal__macOS environment.If__youget__aprompt__toinstall__thecommand__linedeveloper__toolsat__anypoint__inyour__work,click__Installto__approvethe__installation.The__mostlikely__difficultywhen__installingthe__Platform.shCLI__ismak__ingsure__PHPis__installed.If__yousee__amessage__thatthe__phpcommand__isnot__found,you__llneed__toinstall__PHP.One__ofthe__easiestways__toinstall__PHPis__byusing__theHomebrew__package manager,which__facilitatesthe__installationof__awide__varietyof__packagesthat__programmersdepend__on.If__youdon__talready__haveHomebrew__installed,visit__https://brew.shand__followthe__instructions__toinstall__it.Once__Homebrewis__installed,use__thefollowing__commandto__install PHP: $brew__installphp__Thiswill__takea__whileto__run,but__onceit__has completed,you__shouldbe__ableto__successfullyinstall__the Platform.sh CLI.Deploying__fromLinux__Becausemost__serverenvironments__are Linux-based,you__shouldhave__verylittle__difficultyinstalling__andusing__the Platform.sh CLI.If__youtry__toinstall__theCLI__ona__systemwith__afresh__installationof__Ubuntu,it__willtell__youexactly__whichpackages__you need: $curl__-fsS https://platform.sh/cli/installer |php__Command 'curl'not__found,but__canbe__installed with:sudo__aptinstall__curlCommand__'php'not__found,but__canbe__installed with:sudo__aptinstall__php-cli 500Appendix__EThe__actualoutput__willhave__moreinformation__abouta__fewother__packages__thatwould__work,plus__someversion__information.The__followingcom__mandwill__installcurl__and PHP: $sudo__aptinstall__curl php-cliAfter__runningthis__command,the__Platform.shCLI__installationcom__mandshould__run successfully.Since__yourlocal__environmentis__quitesimilar__tomost__Linux-basedhosting__environments,much__ofwhat__youlearn__aboutworking__inyour__terminalwill__carryover__toworking__ina__remoteenviron__mentas__well.Other__DeploymentApproaches__If Platform.shdoesn__twork__for you,or__ifyou__wantto__trya__different approach,there__aremany__hostingplatforms__tochoose__from.Some__worksimilarly__tothe__processdescribed__inChapter__20,and__somehave__amuch__differentapproach__tocarrying__outthe__stepsdescribed__atthe__beginningof__this appendix: Platform.shallows__youto__usea__browserto__carryout__thesteps__weused__theCLI__for.If__youlike__browser-basedinterfaces__betterthan__terminal-based__workflows,you__mayprefer__this approach.There__area__numberof__otherhosting__providersthat__offerboth__CLI-and__browser-based approaches.Some__ofthese__providersoffer__terminalswithin__their browser,so__youdon__thave__toinstall__anythingon__your system.Some__providersallow__youto__pushyour__projectto__aremote__codehosting__sitelike__GitHub,and__thenconnect__yourGitHub__repositoryto__thehost__ing site.The__hostthen__pullsyour__codefrom__GitHub,instead__ofrequir__ingyou__topush__yourcode__fromyour__localsystem__directlyto__the host. Platform.shsupports__thiskind__ofworkflow__as well.Some__providersoffer__anarray__ofservices__thatyou__select from,in__orderto__puttogether__aninfrastructure__thatworks__foryour__project.This__typicallyrequires__youto__havea__deeperunderstanding__ofthe__deployment process,and__whata__remoteserver__needsin__orderto__servea__project.These__hostsinclude__AmazonWeb__Services (AWS)and__Microsofts__Azure platform.It__canbe__muchharder__totrack__yourcosts__inthese__kindsof__platforms,because__eachservice__canaccrue__charges independently.Many__peoplehost__theirprojects__ona__virtualprivate__server (VPS).In__this approach,you__renta__virtualserver__thatacts__justlike__aremote__computer,log__into__the server,install__thesoftware__neededto__runyour__project,copy__yourcode__over,set__theright__connections,and__allowyour__serverto__startaccepting__requests.New__hostingplatforms__andapproaches__appearon__aregular__basis;find__onethat__looksappealing__to you,and__investthe__timeto__learnthat__providers__deployment process.Maintain__yourproject__longenough__sothat__youget__toTroubleshooting__Deployments 501know__whatworks__wellwith__yourprovider__sapproach__andwhat__doesn t.No__hostingplatform__isgoing__tobe__perfect;you__llneed__tomake__anongoing__judgementcall__aboutwhether__theprovider__youre__currentlyusing__isgood__enoughfor__youruse__case.I__lloffer__onelast__wordof__cautionabout__choosinga__deploymentplat__formand__anoverall__approachto__deployment.Some__peoplewill__enthusiastically__steeryou__towardoverly__complexdeployment__approachesand__servicesthat__aremeant__tomake__yourproject__highlyreliable__andcapable__ofserving__millionsof__users simultaneously.Many__programmersspend__lotsof__time, money,and__energybuilding__outa__complexdeployment__strategy,only__tofind__thathardly__anyoneis__usingtheir__project.Most__Djangoprojects__canbe__setup__ona__smallhosting__planand__tunedto__servethousands__ofrequests__per minute.If__yourproject__isgetting__anythingless__thanthis__levelof__traffic,take__thetime__toconfigure__yourdeployment__towork__wellon__aminimal__platformbefore__investingin__infrastructurethat__smeant__forsome__ofthe__largestsites__inthe__world.Deployment__isincredibly__challengingat__times,but__justas__satisfyingwhen__yourlive__projectworks__well.Enjoy__the challenge,and__askfor__helpwhen__youneed__it.IN__DEX__Symbols + (addition), 26 += (additionin__place), 122 * (arbitrary arguments), 146 ** (arbitrarykeyword__arguments), 148 {} (braces) dictionaries, 92 sets, 104 @ (decorator), 221, 424 / (division), 26 == (equality), 72, 74 ** (exponent), 26 > (greater than), 75 >= (greaterthan__orequal__to), 75 # (hash mark),for__comments, 29 != (inequality), 74 < (less than), 75 <= (lessthan__orequal__to), 75 [] (list), 34 % (modulo), 116 += (multiline strings), 115 * (multiplication), 26 \n (newline), 22 >>> (Python prompt), 4 - (subtraction), 26 \t (tab), 22___(underscore)in__fileand__folder names, 10in__numbers, 28in__variable names, 17A__aliases, 151 152, 178 179 alice.py, 195 197Alien__Invasion.See__alsoPygame__aliens, 256 274building__fleet, 259 262checking__edges, 265 collisions,with__bullets, 267 collisions,with__ship, 270 273controlling__fleet direction, 264 266creating__an alien, 256 258dropping__fleet, 265 266reaching__bottomof__screen, 273 274rebuilding__fleet, 268 269 bullets, 247 253, 266 270 collisions,with__aliens, 267deleting__old, 250 251 firing, 249 250 larger, 268limiting__number of, 251 252 settings, 247speeding__up, 269classes__Alien, 257 AlienInvasion, 229 Bullet, 247 248 Button, 278 279 GameStats, 271 Scoreboard, 286 287 Settings, 232 Ship, 234 235ending__the game, 274 275initializing__dynamic settings, 283 285levels__modifyingspeed__settings, 283 285resetting__the speed, 285 displaying, 294 296moving__fleet, 263 266 planning, 228Play__button, 278 283Button__class, 278 279 deactivating, 282 504Index__drawing, 279 280hiding__mouse cursor, 282 283resetting__game, 281 282starting__game, 281reviewing__the project, 256 scoring, 286 298all__hits, 290high__score, 292 294increasing__point values, 290 291 level, 294 296number__of ships, 296 299 resetting, 289 290rounding__and formatting, 291 292score__attribute, 286 updating, 289 settings, storing, 232 233 ship, 233 244adjusting__speed, 242 243continuous__movement, 239 242finding__an image, 233 234limiting__range, 243 244 amusement_park.py, 80 82and__keyword, 75 antialiasing, 279 API.See__applicationprogramming__interface apostrophe.py, 24 25 append() method, 37 38application__programminginterface__(API), 355API__call, 355 357GitHub__API, 368Hacker__News API, 368 371processing__anAPI__response, 357 362rate__limits, 362requesting__data, 356 357visualizing__results, 362 368 arguments, 131.See__alsounder__functionsas__keyword, 151 152 assertions, 213, 217 218 attributes, 159.See__alsounder__classesB__banned_users.py, 76 77 bicycles.py, 34 35Boolean__values, 77 Bootstrap, 433.See__alsounxder__Djangobraces__({}) dictionaries, 92 sets, 104break__statement, 121 built-in functions, 467C__calls (functions), 130, 132 135 car.py, 162 178 cars.py, 43 45, 72 cities.py, 121classes__attributes, 159 accessing, 160default__values, 163 164 modifying, 164 166 creating, 158 161 importing, 173 179multiple__classes, 175 176single__classes, 174 175 inheritance, 167 172attributes__and methods, 169child__classes, 167 170 composition, 170 __init__() method, 167 169instances__as attributes, 170 172overriding__methods, 170parent__classes, 170 subclasses, 168 super() function, 168 superclasses, 168 instances, 157 methods, 159 calling, 160 chaining, 185 __init()__ method, 159modeling__real-world objects, 172 173multiple__instances, 161naming__conventions, 158 objects, 157style__guidelines, 181Alien__Invasion (continued)Play__button (continued)Index__505 comma-separatedvalue__files.See__CSVfiles__comment.py, 29 comments, 29 30conditional__tests, 72 77.See__alsoif__statements confirmed_users.py, 124 125 constants, 28continue__statement, 122 counting.py, 117 118, 122 123CSV__files, 330 341 csv.reader() function, 330 333error__checking, 338 341file__headers, 330 332D__data analysis, 301 databases.See__underDjango__data visualization, 301.See__also Matplotlib;Plotly__datetime module, 333 335 death_valley_highs_lows.py, 339 341 decorators, 221 223, 423 425default__valuesclass__attributes, 163 164function__parameters, 134 135definition__(functions), 130def__keyword, 130del__statementwith__dictionaries, 96with__lists, 38 40 dice_visual_d6d10.py, 326 327 dice_visual.py, 324 326dictionaries__defining, 92 empty, 94formatting__larger, 96 97 KeyError, 98 key-value pairs, 92 adding, 93 94 removing, 96looping__through keys, 101 102keys__in order, 102 103 key-value pairs, 99 101 values, 103 104methods__get(), 97 98 items(), 99 101 keys(), 101 103 values(), 103 104nesting__dictionariesin__dictionaries, 110 111dictionaries__in lists, 105 108lists__in dictionaries, 108 109ordering__in, 94, 102 103sorting__alist__of, 370values__accessing, 92 93, 97 98 modifying, 94 96 die.py, 320 die_visual.py, 320 321 dimensions.py, 66 67div__(HTML), 437 division_calculator.py, 192 195 Django.See__also Git;Learning__Logproject__accounts app, 415 423creating__app, 415 416logging__out, 419 420login__page, 416 419registration__page, 420 423admin__site, 381 386associating__datawith__a user, 425 430 Bootstrap, 434 445 card, 443collapsible__navigation, 437 container, 440 django-boostrap5 app, 434 documentation, 444HTML__headers, 435 436 jumbotron, 440 441list__groups, 443navigation__bar, 436 439styling__forms, 441 442commands__createsuperuser, 382 flush, 427 makemigrations, 381, 385, 426 migrate, 377 runserver, 377 378, 383, 392 shell, 386 startapp, 379, 415 startproject, 376creating__new projects, 376 506Index__databasescascading__delete, 384 creating, 376foreign__keys, 384, 425 many-to-one relationships, 384 migrating, 377, 381, 385, 426 non-nullable field, 427 Postgres, 447 queries, 398, 428 querysets, 386 387, 395, 398, 426 428 resetting, 427 SQLite, 377 deployment, 445 461, 493 501committing__the project, 453configuration__files, 447 450creating__Platform.sh project, 453 455creating__superuser, 456 457custom__error pages, 459 460deleting__projects, 461free__trial limits, 446 gunicorn, 447ignoring__files, 452 453installing__Platform.sh CLI, 446, 497 500installing__platform shconfig, 446other__deployment approaches, 500 Platform.sh, 445Postgres__database, 447, 450 451 psycopg2, 447pushing__a project, 455pushing__changes, 458, 460 requirements.txt, 446securing__project, 457 460 settings, 451SSH__sessions, 456 457 troubleshooting, 494 501using__Git, 451viewing__project, 456development__server, 377 378, 383, 392documentation__model fields, 380 queries, 388 templates, 400 forms, 404 423, 429 430 csrf_token, 407GET__andPOST__requests, 406 ModelForm, 404, 408processing__forms, 405 406, 409 410, 412 413, 421 422, 429 430 save() method, 405 406, 409 410, 430 templates, 407, 410 411, 413, 417, 419, 422 validation, 404 406 widgets, 408HTML__anchortag__(), 393 element, 437 comments, 437 elements, 437 element, 440 margins, 440 padding, 440 elements, 391 elements, 438HTTP__404 error, 428 429, 459 460 INSTALLED_APPS, 380 installing, 375 376 localhost, 378logging__out, 419 420 @login_required decorator, 423 424login__template, 417mapping__URLs, 388 390, 397 398migrating__the database, 426 427 models, 379 activating, 380 381 defining, 379, 384foreign__keys, 384, 425registering__with admin, 382 383, 385 386 __str__() method, 380, 384projects__(vs. apps), 379 redirect() function, 405 406release__cycle, 376restricting__accessto__data, 427 430Django__(continued)Index__507settings__ALLOWED_HOSTS, 451 DEBUG, 457 458 INSTALLED_APPS, 380 381, 415 416, 434 LOGIN_REDIRECT_URL, 417 418 LOGIN_URL, 424 LOGOUT_REDIRECT_URL, 420 SECRET_KEY, 451 shell, 386 387, 426 427starting__an app, 379 styling.See__Django:Bootstrap__superusers, 382, 456 457templates__block tags, 393child__template, 393 394context__dictionary, 395 filters, 399forms__in, 407indentation__in, 393 inheritance, 392 394 linebreaks, 399links__in, 392 393, 399loops__in, 395 397parent__template, 392 393template__tags, 393timestamps__in, 398 399user__object, 418 writing, 390 392 URLs.See__Django:mapping__URLs UserCreationForm, 421 422user__ID values, 426 versions, 376view__functions, 388, 390virtual__environments, 374 375 docstrings, 130, 153, 181 dog.py, 158 162dot__notation, 150, 160E__earthquakes.See__mappingearthquakes__electric_car.py, 167 173 module, 177 179encoding__argument, 195 196 enumerate() function, 331 eq_explore_data.py, 343 347equality__operator (==), 72, 74 eq_world_map.py, 347 352 even_numbers.py, 58 even_or_odd.py, 117 exceptions, 183, 192 199deciding__whicherrors__to report, 199else__block, 194 195failing__silently, 198 199FileNotFound__error, 195 196handling__exceptions, 192 196preventing__crashes, 193 195 try-except blocks, 193 ZeroDivisionError, 192 195exponents__(**), 26F__favorite_languages.py, 96 97, 100 104, 109 file_reader.py, 184 187files__encoding argument, 195 196FileNotFound__error, 195 196file__paths, 186 absolute, 186 exists() method, 203 204pathlib__module, 184Path__objects, 184 186, 330 relative, 186from__strings, 198on__Windows, 186 read_text() method, 185, 195 196 splitlines() method, 186 187 write_text() method, 190 191 first_numbers.py, 57 fixtures, 221 223 flags, 120 121 floats, 26 28 foods.py, 63 64for__loops, 49 56, 99 104.See__also dictionaries;lists__formatted_name.py, 137 139 f-stringsformat__specifiers, 291 292using__variables in, 20 21 full_name.py, 21 functions, 129 155arguments__arbitrary, 146 149default__values, 134 135 errors, 136 keyword, 133 134 508Index__lists as, 142 145 optional, 138 139 positional, 131 133 body, 130 built-in, 467calling__functions, 130, 132 135 defining, 130 importing, 149 153 aliases, 151 152entire__modules, 150 151specific__functions, 151modifying__alist__ina__function, 142 145 modules, 149 153 parameters, 131return__values, 137 141style__guidelines, 153G__GeoJSON files, 342 347, 350 351GET__requests, 406.See__Django:forms__gettinghelp__Discord, 480official__Python documentation, 479 480online__resources, xxxv, 478 r/learnpython, 480rubber__duck debugging, 478searching__online, 479 Slack, 481Stack__Overflow, 479three__main questions, 477 478 Git, 356, 451 453, 483 492.See__also Django:deployment__abandoning changes, 488 489adding__files, 486 branches, 486checking__outprevious__commits, 489 491 commits, 486 488 configuring, 452, 484deleting__a repository, 491 492 .gitignore, 484 HEAD, 490ignoring__files, 484initializing__a repository, 485 installing, 484 log, 487 repositories, 356 status, 485 486 GitHub, 356 greeter.py, 114 115, 130 131 greet_users.py, 142H__HackerNews__API, 368 371hash__mark (#),for__comments, 29 hello_git.py, 484 491 hello_world.py, 10 12, 15 19hidden__files, 448, 485 hn_article.py, 368 369 hn_submissions.py, 369 371I__IDE (integrateddevelopment__environment), 469 470if__statementsand__keyword, 75Boolean__expressions, 77checking__forequality__(==), 72inequality__(!=), 74item__in list, 76item__notin__list, 76list__not empty, 86 87elif__statement, 80 83else__statement, 79 80if__statementsand__lists, 85 88ignoring__case, 73 74numerical__comparisons, 74 76or__keyword, 76 simple, 78style__guidelines, 89testing__multiple conditions, 82 83 immutable, 65import__*, 152, 177import__this, 30 31indentation__errors, 53 56index__errors, 46 47 inheritance, 167 173.See__alsounder__classes input() function, 114 116numerical__input, 115 116writing__prompts, 114 115functions__(continued)arguments__(continued)Index__509 insert() method, 38 itemgetter() function, 370 items() method, 99 101J__JSONfiles__GeoJSON files, 342 347, 350 351JSON__data format, 201 json.dumps() function, 201 204, 343 344, 368 json.loads() function, 201 204, 343 344K__keys() method, 101 103 key-value pairs, 92.See__alsodictionaries__keyword arguments, 133 134 keywords, 466L__language_survey.py, 219Learning__Log project, 373 files, 392 404.html, 459 500.html, 459 accounts/urls.py, 416, 420 accounts/views.py, 421 422 admin.py, 382 383 base.html, 392 393, 396, 418 419, 422, 435 440 edit_entry.html, 413 forms.py, 404, 408 409 .gitignore, 452 453 index.html, 390 394, 440 441 learning_logs/urls.py, 389 390, 394 395, 397 398, 405, 409, 412 learning_logs/views.py, 390, 395, 398, 405 406, 409 410, 412 413, 423 425, 428 430 ll_project/urls.py, 388 389, 416 login.html, 417, 441 442 models.py, 379 380, 384 new_entry.html, 410 new_topic.html, 407 .platform.app.yaml, 448 450 register.html, 422 requirements.txt, 446 447 routes.yaml, 450 services.yaml, 450 settings.py, 380 381, 415 418, 420, 424, 434, 451, 457 460 topic.html, 398 399, 443 444 topics.html, 395 396, 442 443ongoing__development, 460 pages, 391edit__entry, 412 414home__page, 388 394login__page, 416 419new__entry, 408 411new__topic, 404 408 registration, 420 423 topic, 397 400 topics, 394 397writing__aspecification__(spec), 374 len() function, 44 45 library, 184Linux__Pythonchecking__installed version, 8setting__up, 8 12, 465 466terminals__runningprograms__from, 12starting__Python session, 9troubleshooting__installation issues, 10VS__Code, installing, 9 lists, 33as__arguments, 142 145 comprehensions, 59 60 copying, 63 64elements__accessing, 34accessing__last, 35adding__with append(), 37 38adding__with insert(), 38identifying__unique, 104 modifying, 36 37removing__with del, 38 39removing__with pop(), 39 40removing__with remove(), 40 41 empty, 37 38 enumerate() function, 331 510Index__errors indentation, 53 56 index, 46for__loops, 49 56 nested, 108 109, 261 262 indexes, 34 35negative__index, 35zero__index, 34 35 len() function, 44 45 naming, 33 34nesting__dictionariesin__lists, 105 108lists__in dictionaries, 108 109numerical__lists, 56 60 max() function, 59 min() function, 59 range() function, 58 59 sum() function, 59removing__alloccurrences__ofa__value, 125 slices, 61 62sorting__reverse() method, 44 sorted() function, 43 44 sort() method, 43square__brackets, 34logical__errors, 54 lstrip() method, 22 23M__macOS .DS_Store files, ignoring, 453Homebrew__package manager, 499Python__checkinginstalled__version, 7setting__up, 7 12, 464 465terminals__runningprograms__from, 12starting__Python session, 7troubleshooting__installation issues, 10VS__Code, installing, 8 magicians.py, 49 56 magic_number.py, 74 making_pizzas.py, 150 152mapping__earthquakes, 342 352.See__alsoPlotly__downloading data, 343, 352GeoJSON__files, 342 347, 350 351 latitude-longitude ordering, 345location__data, 346 347 magnitudes, 346world__map, 347 348Matplotlib__axes set_aspect() method, 313 314 removing, 317ax__objects, 303 colormaps, 310 311fig__objects, 303figsize__argument, 318formatting__plotsalpha__argument, 337 338 built-in styles, 306custom__colors, 310 labels, 303 304line__thickness, 303 304plot__size, 318 shading, 337 338tick__labels, 309 310 gallery, 302 installing, 302 plot() method, 303 306pyplot__module, 302 303 savefig() method, 311saving__plots, 311 scatter() method, 306 311simple__line graph, 302 306 subplots() function, 303 methods, 20helper__methods, 237 modules, 149 152, 173 179.See__also classes: importing; functions:importing__modulooperator__(%), 116 117 motorcycles.py, 36 41 mountain_poll.py, 125 126 mpl_squares.py, 302 306 my_car.py, 174 175 my_cars.py, 176 179 my_electric_car.py, 176lists__(continued)Index__511N__name errors, 17 18 name_function.py, 211 217 name.py, 20 names.py, 211 212 nesting.See__dictionaries: nesting; lists:for__loopsnewline__(\n), 21 22 next() function, 330 331 None, 98, 140 number_reader.py, 202 numbers, 26 28 arithmetic, 26 constants, 28 exponents, 26 floats, 26 27 formatting, 291 292 integers, 26mixing__integersand__floats, 27 28order__of operations, 26 round() function, 291 292underscores__in, 28 number_writer.py, 201O__object-orientedprogramming__(OOP), 157.See__alsoclasses__or keyword, 76.See__alsoif__statementsP__pandas, 320 parameters, 131 parrot.py, 114, 118 121pass__statement, 198 199 paths.See__files:file__pathsPEP__8, 68 69 person.py, 139 140 pets.py, 125, 132 136 pip, 210 211installing__Django, 374 376installing__Matplotlib, 302installing__Plotly, 320installing__Pygame, 228installing__pytest, 211installing__Requests, 357 Linux,installing__pip, 465 466 updating, 210 pi_string.py, 187 189 pizza.py, 146 148 Platform.sh.See__Django:deployment__players.py, 61 62 Plotly, 302, 319.See__alsomapping__earthquakes;rolling__dicechart__types, 322customizing__plots, 323, 325 326, 364 documentation, 368 fig.show() method, 322 fig.write_html() method, 327formatting__plotsaxis__labels, 323color__scales, 349 350hover__text, 350 351, 365 366links__in charts, 366 367marker__colors, 349 350, 367tick__marks, 325 326 titles, 323 tooltips, 365 366 update_layout() method, 325 326, 364 update_traces() method, 367 gallery, 320 histograms, 322 installing, 320 plotly.express module, 322, 347, 368px__alias, 322 px.bar() function, 322 323, 363 367saving__figures, 327 scatter_geo() function, 347 352 pop() method, 39 40positional__arguments, 131 133.See__also functions:arguments__POST requests, 406.See__also Django:forms__printing_models.py, 143 145Project__Gutenberg, 196 197 prompts, 114 115 .pyfile__extension, 15 16 Pygame.See__alsoAlien__Invasionbackground__colors, 231 232 clock.tick() method, 230 231 collisions, 266 267, 270 271, 289 290creating__anempty__window, 229 230 cursor, hiding, 282 283 512Index__displaying text, 278 280ending__games, 274 275event__loops, 229 230frame__rates, 230 231fullscreen__mode, 245groups__adding elements, 249 250 defining, 248 249drawing__allelements__in, 249 250, 257 258 emptying, 268 269looping__through, 249 251removing__elements from, 250 251updating__allelements__in, 248 249 images, 234 236 installing, 228 levels, 283 285Play__button, 278 283 print()calls__in, 251 quitting, 244 245rect__objects, 234 235creating__from scratch, 247 248 get_rect() method, 234 235 positioning, 234 235, 238 243, 247 248, 256 262, 278, 286 298size__attribute, 261responding__to input, 230 events, 230 keypresses, 238 242mouse__clicks, 281 283screen__coordinates, 235 surfaces, 230testing__games, 268 pytest.See__testingcode__Python >>> prompt, 4 built-in functions, 467checking__installed version, 466installing__on Linux, 465 466on__macOS, 7 11, 464 465on__Windows, 5 6, 463 464 interpreter, 15 16 keywords, 466Python__EnhancementProposal__(PEP), 68standard__library, 179 180terminal__sessions, 4on__Linux, 9on__macOS, 7 8on__Windows, 6 versions, 4why__use Python,xxxvi__python_repos.py, 357 362 python_repos_visual.py, 362 367Q__quit values, 118R__random_walk.py, 312 313random__walks, 312 318 choice() function, 313coloring__points, 315 316 fill_walk() method, 312 313generating__multiple walks, 314 315 plotting, 313 314RandomWalk__class, 312 313starting__andending__points, 316 317 range() function, 58 59 read_text() method, 185, 195 196 refactoring, 204 206, 237 238, 260, 269 270 remember_me.py, 202 206 removeprefix() method, 24 removesuffix() method, 25Requests__package, installing, 357return__values, 137 141 rollercoaster.py, 116rolling__dice, 319 327.See__alsoPlotly__analyzing results, 321 322Die__class, 320 different-size dice, 326 327 randint() function, 320rolling__two dice, 324 326rubber__duck debugging, 478 rstrip() method, 22 23 rw_visual.py, 313 318Pygame__(continued)Index__513S__scatter_squares.py, 306 311 sets, 103 104 sitka_highs_lows.py, 336 338 sitka_highs.py, 330 336 sleep() function, 272 slices, 61 64 sorted() function, 43 44, 102 103 sort() method, 43 splitlines() method, 186 187 split() method, 196 197SQLite__database, 376 377 square_numbers.py, 58 59 squares.py, 59 60Stack__Overflow, 479storing__data, 201 204.See__alsoJSON__filessaving__andreading__data, 202 204 strings, 19 25changing__case, 20 f-strings, 20 21, 291 292methods__lower(), 20 lstrip(), 22 23 removeprefix(), 23 24 removesuffix(), 25 rstrip(), 22 23 split(), 196 197 splitlines(), 186 187 strip(), 22 23 title(), 20 upper(), 20 multiline, 115newlines__in, 21 22single__anddouble__quotes, 19, 24 25tabs__in, 21 22variables__in, 20 21whitespace__in, 21 23 strip() method, 22 23 strptime() method, 333 335style__guidelines, 68 69blank__lines, 69 CamelCase, 181 classes, 181 dictionaries, 96 97 functions, 153if__statements, 89 indentation, 68line__length, 69PEP__8, 68 survey.py, 218syntax__errors, 24avoiding__with strings, 24 25syntax__highlighting, 16T__tab (\t), 21 22 templates.See__underDjango__testing code, 209 223 assertions, 213, 217 218failing__tests, 214 216full__coverage, 212naming__tests, 213passing__tests, 212 214 pytest, 209 223 fixtures, 221 223 installing, 210 211running__tests, 213 214test__cases, 212testing__classes, 217 223testing__functions, 211 217unit__tests, 212 test_name_function.py, 212 217 test_survey.py, 220 223text__editorsand__IDEs.See__alsoVS__CodeEmacs__and Vim, 475 Geany, 474 IDLE, 474Jupyter__Notebooks, 475 PyCharm, 475Sublime__Text, 474 third-party package, 210 toppings.py, 74, 82 83 tracebacks, 10, 17 18, 192, 195 196 try-except blocks.See__exceptions tuples, 65 67 defining, 65for__loop, 66 67writing__over, 67type__errors, 66U__underscore (_)in__fileand__folder names, 10in__numbers, 28in__variable names, 17 514Index__unit tests, 212 user_profile.py, 148 149V__values() method, 103 104 variables, 16 19, 28 constants, 28as__labels, 18 19multiple__assignment, 28name__errors, 17 18naming__conventions, 17 values, 16venv__module, 374 375version__control.See__Gitvirtual__environments, 374 375 voting.py, 78 80VS__Code, 4 5 configuring, 470 473 features, 469 470installing__on Linux, 9on__macOS, 8on__Windows, 6Python__extension, 9 10opening__fileswith__Python, 185Python__extension, 9running__files, 10 shortcuts, 473 474tabs__and spaces, 471W__weather data, 330 341.See__alsoCSV__files;Matplotlib__while loops, 117 126active__flag, 120 121break__statement, 121continue__statement, 122infinite__loops, 122 123moving__itemsbetween__lists, 124quit__values, 118removing__allitems__from list, 125 whitespace, 21 23.See__alsostrings__Windowsfile__paths, 186Python__setting up, 5 6, 9 12, 463 464troubleshooting__installation, 10terminals__runningprograms__from, 12starting__Python session, 6VS__Code, installing, 6 word_count.py, 197 199 write_message.py, 190 191 write_text() method, 190 191Z__Zenof__Python, 30 31 ZeroDivisionError, 192 195NO__STARCHPRESS__phone: 800.420.7240or__415.863.9900 email: sales@nostarch.com web: www.nostarch.comTHE__BIGBOOK__OFSMALL__PYTHONPROJECTS__81Easy__PracticePrograms__byal__sweigart 432 pp., $39.99isbn__978-1-7185-0124-9THE__RECURSIVEBOOK__OFRECURSION__Acethe__CodingInterview__withPython__andJavaScript__byal__sweigart 328 pp., $39.99isbn__978-1-7185-0202-4PYTHON__FLASHCARDS__Syntax, Concepts,and__Examplesby__ericmatthes__101 cards, $27.95isbn__978-1-59327-896-0 OBJECT-ORIENTEDPYTHON__MasterOOP__byBuilding__Gamesand__GUIsby__irvkalb__416 pp., $44.99isbn__978-1-7185-0206-2DIVE__INTOALGORITHMS__APythonic__Adventurefor__theIntrepid__Beginnerby__bradfordtuckfield__248 pp., $39.95isbn__978-1-7185-0068-6BEYOND__THEBASIC__STUFFWITH__PYTHONBest__Practicesfor__WritingClean__Codeby__alsweigart__384 pp., $34.95isbn__978-1-59327-966-0More__no-nonsensebooks__fromRESOURCES__Visit https://nostarch.com/python-crash-course-3rd-editionfor__errataand__more information.